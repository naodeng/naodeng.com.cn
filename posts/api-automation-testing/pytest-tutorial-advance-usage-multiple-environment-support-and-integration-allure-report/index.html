<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report | Nao's Blog</title>
<meta name=keywords content="Multiple Environment Support,Integration Allure Report"><meta name=description content="A deep dive into advanced Pytest usage, focusing on how Pytest is support multiple environment and integration allure report."><meta name=author content="nao.deng"><link rel=canonical href=https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/><meta name=google-site-verification content="google5e9a7c9479924ed2"><link crossorigin=anonymous href=/assets/css/stylesheet.0c4fd3725171366f335155acde6fb3c7b7042cd2fd075bebf5023d9b28a701b2.css integrity="sha256-DE/TclFxNm8zUVWs3m+zx7cELNL9B1vr9QI9myinAbI=" rel="preload stylesheet" as=style><link rel=icon href=https://naodeng.tech/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://naodeng.tech/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://naodeng.tech/favicon-32x32.png><link rel=apple-touch-icon href=https://naodeng.tech/apple-touch-icon.png><link rel=mask-icon href=https://naodeng.tech/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/><link rel=alternate hreflang=zh href=https://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script defer data-website-id=b3b285c9-3c35-4398-9252-91bb70560b84 src=https://naodeng-umami.vercel.app/hugo.js></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "baa460bb003847e184ad7cbf459449e9"}'></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!1})}</script><meta property="og:title" content="Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report"><meta property="og:description" content="A deep dive into advanced Pytest usage, focusing on how Pytest is support multiple environment and integration allure report."><meta property="og:type" content="article"><meta property="og:url" content="https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/"><meta property="og:image" content="https://naodeng.tech/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-17T16:32:55+08:00"><meta property="article:modified_time" content="2023-11-17T16:32:55+08:00"><meta property="og:see_also" content="https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/"><meta property="og:see_also" content="https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-integration-ci-cd-and-github-action/"><meta property="og:see_also" content="https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-building-your-own-project-from-0-to-1/"><meta property="og:see_also" content="https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-getting-started-and-own-environment-preparation/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://naodeng.tech/papermod-cover.png"><meta name=twitter:title content="Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report"><meta name=twitter:description content="A deep dive into advanced Pytest usage, focusing on how Pytest is support multiple environment and integration allure report."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://naodeng.tech/posts/"},{"@type":"ListItem","position":2,"name":"Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report","item":"https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report","name":"Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report","description":"A deep dive into advanced Pytest usage, focusing on how Pytest is support multiple environment and integration allure report.","keywords":["Multiple Environment Support","Integration Allure Report"],"articleBody":"Advanced Usage Multi-environment support In the actual API automation testing process, we need to run test cases in different environments to ensure that the API works properly in each environment.\nBy using Pytestâ€™s fixture feature, we can easily support multiple environments.\nRefer to the demo:https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo\nNew test configuration files for different environments Configuration file will be stored in json format for example, other formats such as YAML, CSV, etc. are similar, can refer to the\n// Create a new test configuration folder mkdir config // Go to the test configuration folder cd config // Create a new test configuration file for the development environment touch dev_config.json // Create a new test configuration file for the production environment touch prod_config.json Writing different environment test profiles Writing Development Environment Test Profiles Configure the development environment test profiles according to the actual situation.\n{ \"host\": \"https://jsonplaceholder.typicode.com\", \"getAPI\": \"/posts/1\", \"postAPI\":\"/posts\" } Configuring Production Environment Test Profiles Configure production environment test profiles according to the actual situation\n{ \"host\": \"https://jsonplaceholder.typicode.com\", \"getAPI\": \"/posts/1\", \"postAPI\":\"/posts\" } New Different Environment Test Data File The different environments request data file and the response data file store the different environments request data and the different environments expected response data for the test cases, respectively.\n// Create a new test data folder mkdir data // Go to the test data folder cd data // Create a new dev request data file touch dev_request_data.json // Create a new dev response data file touch dev_response_data.json // Create a new request data file for the production environment touch prod_request_data.json // Create a new production response data file touch prod_response_data.json Writing test data files for different environments Write the dev environment request data file The dev environment request data file is configured with the request data for the getAPI API and the request data for the postAPI API.\n{ \"getAPI\": \"\", \"postAPI\":{ \"title\": \"foo\", \"body\": \"bar\", \"userId\": 1 } } Writing the dev Environment Response Data File The dev environment response data file is configured with the response data for the getAPI API and the response data for the postAPI API.\n{ \"getAPI\": { \"userId\": 1, \"id\": 1, \"title\": \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\", \"body\": \"quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\" }, \"postAPI\":{ \"title\": \"foo\", \"body\": \"bar\", \"userId\": 1, \"id\": 101 } } Write the prod environment request data file The prod environment request data file is configured with the request data for the getAPI API and the request data for the postAPI API.\n{ \"getAPI\": \"\", \"postAPI\":{ \"title\": \"foo\", \"body\": \"bar\", \"userId\": 1 } } Writing the prod Environment Response Data File The prod environment response data file is configured with the response data for the getAPI API and the response data for the postAPI API.\n{ \"getAPI\": { \"userId\": 1, \"id\": 1, \"title\": \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\", \"body\": \"quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\" }, \"postAPI\":{ \"title\": \"foo\", \"body\": \"bar\", \"userId\": 1, \"id\": 101 } } Configure fixture to support multiple environments The \u003e fixture will be stored in the conftest.py file as an example, other formats such as YAML, CSV, etc. are similar.\nCreate a new conftest.py file in the project root directory. mkdrir conftest.py Writing the conftest.py file import pytest import json import json import os @pytest.fixture(scope=\"session\") def env_config(request): # get config file from different env env = os.getenv('ENV', 'dev') with open(f'config/{env}_config.json', 'r') as config_file: config = json.load(config_file) return config @pytest.fixture(scope=\"session\") def env_request_data(request): # get request data file from different env env = os.getenv('ENV', 'dev') with open(f'data/{env}_request_data.json', 'r') as request_data_file: request_data = json.load(request_data_file) return request_data @pytest.fixture (scope=\"session\") def env_response_data(request): # get response data file from different env env = os.getenv('ENV', 'dev') with open(f'data/{env}_response_data.json', 'r') as response_data_file: response_data = json.load(response_data_file) return response_data Update test case to support multi environment To make a distinction, here is a new test case file named test_demo_multi_environment.py\nimport requests import json class TestPytestMultiEnvDemo: def test_get_demo_multi_env(self, env_config, env_request_data, env_response_data): host = env_config[\"host\"] get_api = env_config[\"getAPI\"] get_api_response_data = env_response_data[\"getAPI\"] # send request response = requests.get(host+get_api) # assert assert response.status_code == 200 assert response.json() == get_api_response_data def test_post_demo_multi_env(self, env_config, env_request_data, env_response_data): host = env_config[\"host\"] post_api = env_config[\"postAPI\"] post_api_request_data = env_request_data[\"postAPI\"] post_api_response_data = env_response_data[\"postAPI\"] # send request response = requests.post(host + post_api, post_api_request_data) # assert assert response.status_code == 201 assert response.json() == post_api_response_data Run this test case to confirm that multi-environment support is in effect Run the dev environment test case ENV=dev pytest test_case/test_demo_multi_environment.py Run the prod environment test case ENV=prod pytest test_case/test_demo_multi_environment.py Integration with allure reporting allure is a lightweight, flexible, and easily extensible test reporting tool that provides a rich set of report types and features to help you better visualize your test results.\nallure reports can be integrated with Pytest to generate detailed test reports.\nRefer to the demo:https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo\nInstall allure-pytest library pip install allure-pytest To avoid conflicts between the previously installed pytest-html-reporter and the allure-pytest package, it is recommended to uninstall the pytest-html-reporter package first.\npip uninstall pytest-html-reporter Configuration allure-pytest library Update the pytest.ini file to specify where allure reports are stored\n[pytest] # allure addopts = --alluredir ./allure-results Adjusting test cases to support allure reporting To differentiate, create a new test case file here, named test_demo_allure.py\nimport allure import requests @allure.feature(\"Test example API\") class TestPytestAllureDemo: @allure.story(\"Test example get endpoint\") @allure.title(\"Verify the get API\") @allure.description(\"verify the get API response status code and data\") @allure.severity(\"blocker\") def test_get_example_endpoint_allure(self, env_config, env_request_data, env_response_data): host = env_config[\"host\"] get_api = env_config[\"getAPI\"] get_api_request_data = env_request_data[\"getAPI\"] get_api_response_data = env_response_data[\"getAPI\"] # send get request response = requests.get(host + get_api) # assert print(\"response status code is\" + str(response.status_code)) assert response.status_code == 200 print(\"response data is\" + str(response.json())) assert response.json() == get_api_response_data @allure.story(\"Test example POST API\") @allure.title(\"Verify the POST API\") @allure.description(\"verify the POST API response status code and data\") @allure.severity(\"Critical\") def test_post_example_endpoint_allure(self, env_config, env_request_data, env_response_data): host = env_config[\"host\"] post_api = env_config[\"postAPI\"] post_api_request_data = env_request_data[\"postAPI\"] post_api_response_data = env_response_data[\"postAPI\"] # send request response = requests.post(host + post_api, json=post_api_request_data) # assert print(\"response status code is\" + str(response.status_code)) assert response.status_code == 201 print(\"response data is\" + str(response.json())) assert response.json() == post_api_response_data Run test cases to generate allure reports ENV=dev pytest test_case/test_demo_allure.py View allure report Run the following command to view the allure report in the browser\nallure serve allure-results Adapting CI/CD processes to support allure reporting Github action is an example, other CI tools are similar.\nUpdate the contents of the .github/workflows/pytest.yml file to upload allure reports to GitHub.\nname: Pytest API Testing on: push: branches: [ \"main\" ] pull_request: branches: [ \"main\" ] permissions: contents: read jobs: Pytes-API-Testing: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Set up Python 3.10 uses: actions/setup-python@v3 with: python-version: \"3.10\" - name: Install dependencies run: | python -m pip install --upgrade pip pip install -r requirements.txt - name: Test with pytest run: | ENV=dev pytest - name: Archive Pytest allure test report uses: actions/upload-artifact@v3 with: name: Pytest-allure-report path: allure-results - name: Upload Pytest allure report to GitHub uses: actions/upload-artifact@v3 with: name: Pytest-allure-report path: allure-results View github action allure report In GitHub, navigate to your repository. Click the Actions tab at the top, and then click the Pytest API Testing workflow on the left. You should see the workflow running, wait for the execution to complete, and then you can view the results.\nReference Pytest docs Allure docs ","wordCount":"1228","inLanguage":"en","datePublished":"2023-11-17T16:32:55+08:00","dateModified":"2023-11-17T16:32:55+08:00","author":{"@type":"Person","name":"nao.deng"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/"},"publisher":{"@type":"Organization","name":"Nao's Blog","logo":{"@type":"ImageObject","url":"https://naodeng.tech/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://naodeng.tech/ accesskey=h title="Nao's Blog (Alt + H)">Nao's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://naodeng.tech/zh/ title=ðŸ‡¨ðŸ‡³ä¸­æ–‡ aria-label=ðŸ‡¨ðŸ‡³ä¸­æ–‡>ðŸ‡¨ðŸ‡³ä¸­æ–‡</a></li></ul></div></div><ul id=menu><li><a href=https://naodeng.tech/archives title=Archive><span>Archive</span></a></li><li><a href=https://naodeng.tech/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://naodeng.tech/series/ title=Series><span>Series</span></a></li><li><a href=https://naodeng.tech/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://naodeng-umami.vercel.app/share/OksEL34H/nao.deng title=Dashboard><span>Dashboard</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://naodeng.tech/>Home</a>&nbsp;Â»&nbsp;<a href=https://naodeng.tech/posts/>Posts</a></div><h1 class=post-title>Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report</h1><div class=post-meta><span title='2023-11-17 16:32:55 +0800 +0800'>November 17, 2023</span>&nbsp;Â·&nbsp;6 min&nbsp;Â·&nbsp;1228 words&nbsp;Â·&nbsp;nao.deng&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/>ðŸ‡¨ðŸ‡³ä¸­æ–‡</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/naodeng/naodeng.tech/tree/main/content/posts/API-Automation-Testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#advanced-usage aria-label="Advanced Usage">Advanced Usage</a><ul><li><a href=#multi-environment-support aria-label="Multi-environment support">Multi-environment support</a><ul><li><a href=#new-test-configuration-files-for-different-environments aria-label="New test configuration files for different environments">New test configuration files for different environments</a></li><li><a href=#writing-different-environment-test-profiles aria-label="Writing different environment test profiles">Writing different environment test profiles</a></li><li><a href=#new-different-environment-test-data-file aria-label="New Different Environment Test Data File">New Different Environment Test Data File</a></li><li><a href=#writing-test-data-files-for-different-environments aria-label="Writing test data files for different environments">Writing test data files for different environments</a></li><li><a href=#configure-fixture-to-support-multiple-environments aria-label="Configure fixture to support multiple environments">Configure fixture to support multiple environments</a></li><li><a href=#update-test-case-to-support-multi-environment aria-label="Update test case to support multi environment">Update test case to support multi environment</a></li><li><a href=#run-this-test-case-to-confirm-that-multi-environment-support-is-in-effect aria-label="Run this test case to confirm that multi-environment support is in effect">Run this test case to confirm that multi-environment support is in effect</a></li></ul></li><li><a href=#integration-with-allure-reporting aria-label="Integration with allure reporting">Integration with allure reporting</a><ul><li><a href=#install-allure-pytest-library aria-label="Install allure-pytest library">Install allure-pytest library</a></li><li><a href=#configuration-allure-pytest-library aria-label="Configuration allure-pytest library">Configuration allure-pytest library</a></li><li><a href=#adjusting-test-cases-to-support-allure-reporting aria-label="Adjusting test cases to support allure reporting">Adjusting test cases to support allure reporting</a></li><li><a href=#run-test-cases-to-generate-allure-reports aria-label="Run test cases to generate allure reports">Run test cases to generate allure reports</a></li><li><a href=#view-allure-report aria-label="View allure report">View allure report</a></li><li><a href=#adapting-cicd-processes-to-support-allure-reporting aria-label="Adapting CI/CD processes to support allure reporting">Adapting CI/CD processes to support allure reporting</a></li><li><a href=#view-github-action-allure-report aria-label="View github action allure report">View github action allure report</a></li></ul></li></ul></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><h2 id=advanced-usage>Advanced Usage<a hidden class=anchor aria-hidden=true href=#advanced-usage>#</a></h2><h3 id=multi-environment-support>Multi-environment support<a hidden class=anchor aria-hidden=true href=#multi-environment-support>#</a></h3><p>In the actual API automation testing process, we need to run test cases in different environments to ensure that the API works properly in each environment.</p><p>By using Pytest&rsquo;s fixture feature, we can easily support multiple environments.</p><p>Refer to the demo:<a href=https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo>https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo</a></p><h4 id=new-test-configuration-files-for-different-environments>New test configuration files for different environments<a hidden class=anchor aria-hidden=true href=#new-test-configuration-files-for-different-environments>#</a></h4><blockquote><p>Configuration file will be stored in json format for example, other formats such as YAML, CSV, etc. are similar, can refer to the</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>// Create a new <span class=nb>test</span> configuration folder
</span></span><span class=line><span class=cl>mkdir config
</span></span><span class=line><span class=cl>// Go to the <span class=nb>test</span> configuration folder 
</span></span><span class=line><span class=cl><span class=nb>cd</span> config
</span></span><span class=line><span class=cl>// Create a new <span class=nb>test</span> configuration file <span class=k>for</span> the development environment
</span></span><span class=line><span class=cl>touch dev_config.json
</span></span><span class=line><span class=cl>// Create a new <span class=nb>test</span> configuration file <span class=k>for</span> the production environment
</span></span><span class=line><span class=cl>touch prod_config.json
</span></span></code></pre></div><h4 id=writing-different-environment-test-profiles>Writing different environment test profiles<a hidden class=anchor aria-hidden=true href=#writing-different-environment-test-profiles>#</a></h4><ul><li>Writing Development Environment Test Profiles</li></ul><blockquote><p>Configure the development environment test profiles according to the actual situation.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;host&#34;</span><span class=p>:</span> <span class=s2>&#34;https://jsonplaceholder.typicode.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;getAPI&#34;</span><span class=p>:</span> <span class=s2>&#34;/posts/1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;postAPI&#34;</span><span class=p>:</span><span class=s2>&#34;/posts&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>Configuring Production Environment Test Profiles</li></ul><blockquote><p>Configure production environment test profiles according to the actual situation</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;host&#34;</span><span class=p>:</span> <span class=s2>&#34;https://jsonplaceholder.typicode.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;getAPI&#34;</span><span class=p>:</span> <span class=s2>&#34;/posts/1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;postAPI&#34;</span><span class=p>:</span><span class=s2>&#34;/posts&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=new-different-environment-test-data-file>New Different Environment Test Data File<a hidden class=anchor aria-hidden=true href=#new-different-environment-test-data-file>#</a></h4><blockquote><p>The different environments request data file and the response data file store the different environments request data and the different environments expected response data for the test cases, respectively.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>// Create a new <span class=nb>test</span> data folder
</span></span><span class=line><span class=cl>mkdir data
</span></span><span class=line><span class=cl>// Go to the <span class=nb>test</span> data folder
</span></span><span class=line><span class=cl><span class=nb>cd</span> data
</span></span><span class=line><span class=cl>// Create a new dev request data file
</span></span><span class=line><span class=cl>touch dev_request_data.json
</span></span><span class=line><span class=cl>// Create a new dev response data file
</span></span><span class=line><span class=cl>touch dev_response_data.json 
</span></span><span class=line><span class=cl>// Create a new request data file <span class=k>for</span> the production environment
</span></span><span class=line><span class=cl>touch prod_request_data.json 
</span></span><span class=line><span class=cl>// Create a new production response data file
</span></span><span class=line><span class=cl>touch prod_response_data.json 
</span></span></code></pre></div><h4 id=writing-test-data-files-for-different-environments>Writing test data files for different environments<a hidden class=anchor aria-hidden=true href=#writing-test-data-files-for-different-environments>#</a></h4><ul><li>Write the dev environment request data file</li></ul><blockquote><p>The dev environment request data file is configured with the request data for the getAPI API and the request data for the postAPI API.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;getAPI&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;postAPI&#34;</span><span class=p>:{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>Writing the dev Environment Response Data File</li></ul><blockquote><p>The dev environment response data file is configured with the response data for the getAPI API and the response data for the postAPI API.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;getAPI&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;postAPI&#34;</span><span class=p>:{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>101</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>Write the prod environment request data file</li></ul><blockquote><p>The prod environment request data file is configured with the request data for the getAPI API and the request data for the postAPI API.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;getAPI&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;postAPI&#34;</span><span class=p>:{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>Writing the prod Environment Response Data File</li></ul><blockquote><p>The prod environment response data file is configured with the response data for the getAPI API and the response data for the postAPI API.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;getAPI&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;postAPI&#34;</span><span class=p>:{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>101</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=configure-fixture-to-support-multiple-environments>Configure fixture to support multiple environments<a hidden class=anchor aria-hidden=true href=#configure-fixture-to-support-multiple-environments>#</a></h4><p>The > fixture will be stored in the conftest.py file as an example, other formats such as YAML, CSV, etc. are similar.</p><ul><li>Create a new conftest.py file in the project root directory.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> mkdrir conftest.py
</span></span></code></pre></div><ul><li>Writing the conftest.py file</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pytest</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@pytest.fixture</span><span class=p>(</span><span class=n>scope</span><span class=o>=</span><span class=s2>&#34;session&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>env_config</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># get config file from different env</span>
</span></span><span class=line><span class=cl>    <span class=n>env</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;ENV&#39;</span><span class=p>,</span> <span class=s1>&#39;dev&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;config/</span><span class=si>{</span><span class=n>env</span><span class=si>}</span><span class=s1>_config.json&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>config_file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>config_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>config</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@pytest.fixture</span><span class=p>(</span><span class=n>scope</span><span class=o>=</span><span class=s2>&#34;session&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>env_request_data</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># get request data file from different env</span>
</span></span><span class=line><span class=cl>    <span class=n>env</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;ENV&#39;</span><span class=p>,</span> <span class=s1>&#39;dev&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;data/</span><span class=si>{</span><span class=n>env</span><span class=si>}</span><span class=s1>_request_data.json&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>request_data_file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>request_data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>request_data_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>request_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@pytest.fixture</span> <span class=p>(</span><span class=n>scope</span><span class=o>=</span><span class=s2>&#34;session&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>env_response_data</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># get response data file from different env</span>
</span></span><span class=line><span class=cl>    <span class=n>env</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s1>&#39;ENV&#39;</span><span class=p>,</span> <span class=s1>&#39;dev&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;data/</span><span class=si>{</span><span class=n>env</span><span class=si>}</span><span class=s1>_response_data.json&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>response_data_file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>response_data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>response_data_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>response_data</span>
</span></span></code></pre></div><h4 id=update-test-case-to-support-multi-environment>Update test case to support multi environment<a hidden class=anchor aria-hidden=true href=#update-test-case-to-support-multi-environment>#</a></h4><blockquote><p>To make a distinction, here is a new test case file named test_demo_multi_environment.py</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestPytestMultiEnvDemo</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_get_demo_multi_env</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>env_config</span><span class=p>,</span> <span class=n>env_request_data</span><span class=p>,</span> <span class=n>env_response_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>host</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;host&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>get_api</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;getAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>get_api_response_data</span> <span class=o>=</span> <span class=n>env_response_data</span><span class=p>[</span><span class=s2>&#34;getAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=c1># send request</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>host</span><span class=o>+</span><span class=n>get_api</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># assert</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span> <span class=o>==</span> <span class=n>get_api_response_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_post_demo_multi_env</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>env_config</span><span class=p>,</span> <span class=n>env_request_data</span><span class=p>,</span> <span class=n>env_response_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>host</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;host&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>post_api</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;postAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>post_api_request_data</span> <span class=o>=</span> <span class=n>env_request_data</span><span class=p>[</span><span class=s2>&#34;postAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>post_api_response_data</span> <span class=o>=</span> <span class=n>env_response_data</span><span class=p>[</span><span class=s2>&#34;postAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=c1># send request</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>host</span> <span class=o>+</span> <span class=n>post_api</span><span class=p>,</span> <span class=n>post_api_request_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># assert</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>201</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span> <span class=o>==</span> <span class=n>post_api_response_data</span>
</span></span></code></pre></div><h4 id=run-this-test-case-to-confirm-that-multi-environment-support-is-in-effect>Run this test case to confirm that multi-environment support is in effect<a hidden class=anchor aria-hidden=true href=#run-this-test-case-to-confirm-that-multi-environment-support-is-in-effect>#</a></h4><ul><li>Run the dev environment test case</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>ENV</span><span class=o>=</span>dev pytest test_case/test_demo_multi_environment.py
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/Wb0owW.png alt=Wb0owW></p><ul><li>Run the prod environment test case</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>ENV</span><span class=o>=</span>prod pytest test_case/test_demo_multi_environment.py
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/2kITJT.png alt=2kITJT></p><h3 id=integration-with-allure-reporting>Integration with allure reporting<a hidden class=anchor aria-hidden=true href=#integration-with-allure-reporting>#</a></h3><p>allure is a lightweight, flexible, and easily extensible test reporting tool that provides a rich set of report types and features to help you better visualize your test results.</p><p>allure reports can be integrated with Pytest to generate detailed test reports.</p><p>Refer to the demo:<a href=https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo>https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo</a></p><h4 id=install-allure-pytest-library>Install allure-pytest library<a hidden class=anchor aria-hidden=true href=#install-allure-pytest-library>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pip install allure-pytest
</span></span></code></pre></div><blockquote><p>To avoid conflicts between the previously installed pytest-html-reporter and the allure-pytest package, it is recommended to uninstall the pytest-html-reporter package first.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pip uninstall pytest-html-reporter
</span></span></code></pre></div><h4 id=configuration-allure-pytest-library>Configuration allure-pytest library<a hidden class=anchor aria-hidden=true href=#configuration-allure-pytest-library>#</a></h4><p>Update the pytest.ini file to specify where allure reports are stored</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[pytest]</span>
</span></span><span class=line><span class=cl><span class=c1># allure</span>
</span></span><span class=line><span class=cl><span class=na>addopts</span> <span class=o>=</span> <span class=s>--alluredir ./allure-results</span>
</span></span></code></pre></div><h4 id=adjusting-test-cases-to-support-allure-reporting>Adjusting test cases to support allure reporting<a hidden class=anchor aria-hidden=true href=#adjusting-test-cases-to-support-allure-reporting>#</a></h4><blockquote><p>To differentiate, create a new test case file here, named test_demo_allure.py</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>allure</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@allure.feature</span><span class=p>(</span><span class=s2>&#34;Test example API&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestPytestAllureDemo</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.story</span><span class=p>(</span><span class=s2>&#34;Test example get endpoint&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.title</span><span class=p>(</span><span class=s2>&#34;Verify the get API&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.description</span><span class=p>(</span><span class=s2>&#34;verify the get API response status code and data&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.severity</span><span class=p>(</span><span class=s2>&#34;blocker&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_get_example_endpoint_allure</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>env_config</span><span class=p>,</span> <span class=n>env_request_data</span><span class=p>,</span> <span class=n>env_response_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>host</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;host&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>get_api</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;getAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>get_api_request_data</span> <span class=o>=</span> <span class=n>env_request_data</span><span class=p>[</span><span class=s2>&#34;getAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>get_api_response_data</span> <span class=o>=</span> <span class=n>env_response_data</span><span class=p>[</span><span class=s2>&#34;getAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=c1># send get request</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>host</span> <span class=o>+</span> <span class=n>get_api</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># assert</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;response status code is&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;response data is&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span> <span class=o>==</span> <span class=n>get_api_response_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.story</span><span class=p>(</span><span class=s2>&#34;Test example POST API&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.title</span><span class=p>(</span><span class=s2>&#34;Verify the POST API&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.description</span><span class=p>(</span><span class=s2>&#34;verify the POST API response status code and data&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@allure.severity</span><span class=p>(</span><span class=s2>&#34;Critical&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_post_example_endpoint_allure</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>env_config</span><span class=p>,</span> <span class=n>env_request_data</span><span class=p>,</span> <span class=n>env_response_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>host</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;host&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>post_api</span> <span class=o>=</span> <span class=n>env_config</span><span class=p>[</span><span class=s2>&#34;postAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>post_api_request_data</span> <span class=o>=</span> <span class=n>env_request_data</span><span class=p>[</span><span class=s2>&#34;postAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>post_api_response_data</span> <span class=o>=</span> <span class=n>env_response_data</span><span class=p>[</span><span class=s2>&#34;postAPI&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=c1># send request</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>host</span> <span class=o>+</span> <span class=n>post_api</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=n>post_api_request_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># assert</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;response status code is&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>201</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;response data is&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span> <span class=o>==</span> <span class=n>post_api_response_data</span>
</span></span></code></pre></div><h4 id=run-test-cases-to-generate-allure-reports>Run test cases to generate allure reports<a hidden class=anchor aria-hidden=true href=#run-test-cases-to-generate-allure-reports>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>ENV</span><span class=o>=</span>dev pytest test_case/test_demo_allure.py
</span></span></code></pre></div><h4 id=view-allure-report>View allure report<a hidden class=anchor aria-hidden=true href=#view-allure-report>#</a></h4><p>Run the following command to view the allure report in the browser</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>allure serve allure-results
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/Pr1E3W.png alt=Pr1E3W></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/OsUO2e.png alt=OsUO2e></p><h4 id=adapting-cicd-processes-to-support-allure-reporting>Adapting CI/CD processes to support allure reporting<a hidden class=anchor aria-hidden=true href=#adapting-cicd-processes-to-support-allure-reporting>#</a></h4><blockquote><p>Github action is an example, other CI tools are similar.</p></blockquote><p>Update the contents of the .github/workflows/pytest.yml file to upload allure reports to GitHub.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Pytest API Testing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&#34;main&#34;</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&#34;main&#34;</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>permissions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>contents</span><span class=p>:</span><span class=w> </span><span class=l>read</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Pytes-API-Testing</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Python 3.10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-python@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>python-version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;3.10&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        python -m pip install --upgrade pip
</span></span></span><span class=line><span class=cl><span class=sd>        pip install -r requirements.txt
</span></span></span><span class=line><span class=cl><span class=sd>        </span><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Test with pytest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        ENV=dev pytest</span><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Archive Pytest allure test report</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/upload-artifact@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Pytest-allure-report</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>allure-results</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upload Pytest allure report to GitHub</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/upload-artifact@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Pytest-allure-report</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>allure-results</span><span class=w>
</span></span></span></code></pre></div><h4 id=view-github-action-allure-report>View github action allure report<a hidden class=anchor aria-hidden=true href=#view-github-action-allure-report>#</a></h4><p>In GitHub, navigate to your repository. Click the Actions tab at the top, and then click the Pytest API Testing workflow on the left. You should see the workflow running, wait for the execution to complete, and then you can view the results.</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/Lz2pPh.png alt=Lz2pPh></p><h2 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h2><ul><li><a href=https://docs.pytest.org/en/6.2.x/>Pytest docs</a></li><li><a href=https://docs.qameta.io/allure/>Allure docs</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://naodeng.tech/tags/multiple-environment-support/>Multiple Environment Support</a></li><li><a href=https://naodeng.tech/tags/integration-allure-report/>Integration Allure Report</a></li></ul><nav class=paginav><a class=next href=https://naodeng.tech/posts/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/><span class=title>Next Â»</span><br><span>Pytest API Automation Testing Tutorial Advance Usage Common Assertions and Data Driven</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report on x" href="https://x.com/intent/tweet/?text=Pytest%20API%20Automation%20Testing%20Tutorial%20Advance%20Usage%20Multiple%20Environment%20Support%20and%20Integration%20Allure%20Report&amp;url=https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f&amp;hashtags=MultipleEnvironmentSupport%2cIntegrationAllureReport"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f&amp;title=Pytest%20API%20Automation%20Testing%20Tutorial%20Advance%20Usage%20Multiple%20Environment%20Support%20and%20Integration%20Allure%20Report&amp;summary=Pytest%20API%20Automation%20Testing%20Tutorial%20Advance%20Usage%20Multiple%20Environment%20Support%20and%20Integration%20Allure%20Report&amp;source=https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f&title=Pytest%20API%20Automation%20Testing%20Tutorial%20Advance%20Usage%20Multiple%20Environment%20Support%20and%20Integration%20Allure%20Report"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report on whatsapp" href="https://api.whatsapp.com/send?text=Pytest%20API%20Automation%20Testing%20Tutorial%20Advance%20Usage%20Multiple%20Environment%20Support%20and%20Integration%20Allure%20Report%20-%20https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report on telegram" href="https://telegram.me/share/url?text=Pytest%20API%20Automation%20Testing%20Tutorial%20Advance%20Usage%20Multiple%20Environment%20Support%20and%20Integration%20Allure%20Report&amp;url=https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Pytest API Automation Testing Tutorial Advance Usage Multiple Environment Support and Integration Allure Report on ycombinator" href="https://news.ycombinator.com/submitlink?t=Pytest%20API%20Automation%20Testing%20Tutorial%20Advance%20Usage%20Multiple%20Environment%20Support%20and%20Integration%20Allure%20Report&u=https%3a%2f%2fnaodeng.tech%2fposts%2fapi-automation-testing%2fpytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div></footer><script src=https://giscus.app/client.js data-repo=naodeng/naodeng.tech data-repo-id=R_kgDOHntNtg data-category="Show and tell" data-category-id=DIC_kwDOHntNts4Cavst data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=light data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://naodeng.tech/>Nao's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>