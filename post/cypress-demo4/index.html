<!doctype html><html class="not-ready lg:text-base" style=--bg:#faf8f1 lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架 - QA Discovery</title>
<meta name=theme-color><meta name=description content="下面的信息是自动化测试框架学习第四篇数据驱动方法封装参数化和测试框架的介绍。 在自动化测试框架学习中，有很多方法可以用来驱动测试框架。例如，数"><meta name=author content="nao.deng"><script async defer data-website-id=b3b285c9-3c35-4398-9252-91bb70560b84 src=https://naodeng-umami.vercel.app/hugo.js></script><link rel="preload stylesheet" as=style href=https://naodeng.tech/main.min.css><link rel=preload as=image href=https://naodeng.tech/theme.png><link rel=preload as=image href="https://avatars.githubusercontent.com/u/7599466?v=4"><link rel=preload as=image href=https://naodeng.tech/twitter.svg><link rel=preload as=image href=https://naodeng.tech/github.svg><link rel=preload as=image href=https://naodeng.tech/rss.svg><script defer src=https://naodeng.tech/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://naodeng.tech/favicon.ico><link rel=apple-touch-icon href=https://naodeng.tech/apple-touch-icon.png><meta name=generator content="Hugo 0.120.1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!0})}</script><meta itemprop=name content="Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架"><meta itemprop=description content="文章介绍如何去使用 cypress 的数据驱动方法封装参数化和测试框架"><meta itemprop=datePublished content="2022-05-11T00:00:00+00:00"><meta itemprop=dateModified content="2022-05-11T00:00:00+00:00"><meta itemprop=wordCount content="3200"><meta itemprop=keywords content="自动化测试,cypress,"><meta property="og:title" content="Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架"><meta property="og:description" content="文章介绍如何去使用 cypress 的数据驱动方法封装参数化和测试框架"><meta property="og:type" content="article"><meta property="og:url" content="https://naodeng.tech/post/cypress-demo4/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-05-11T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-11T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架"><meta name=twitter:description content="文章介绍如何去使用 cypress 的数据驱动方法封装参数化和测试框架"><link rel=canonical href=https://naodeng.tech/post/cypress-demo4/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://naodeng.tech/>QA Discovery</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/post-en/>EN</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/about/>About</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/contact/>Contact</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=https://naodeng-umami.vercel.app/share/OksEL34H/nao.deng>Dashboard</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/naodeng0_0 target=_blank rel=me>twitter
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/naodeng target=_blank rel=me>github
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://naodeng.tech/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"><article><header class=mb-16><h1 class="!my-0 pb-2.5">Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架</h1><div class="text-sm antialiased opacity-60"><time>May 11, 2022</time>
<span class=mx-1>&#183;</span>
<span>nao.deng</span></div></header><section><p>下面的信息是自动化测试框架学习第四篇数据驱动方法封装参数化和测试框架的介绍。
在自动化测试框架学习中，有很多方法可以用来驱动测试框架。例如，数据驱动方法封装参数化和测试框架。这两个方法都可以将测试框架的数据处理和预设环境等现有模型结合起来。这样就可以方便地开发、测试和运行新的测试框架。</p><h2 id=测试数据驱动>测试数据驱动</h2><h3 id=js-格式测试数据驱动>js 格式测试数据驱动</h3><h4 id=简介>简介</h4><p>数据以 js 格式存储，使用 js 的 import 方法导入使用</p><h4 id=使用方法>使用方法</h4><h5 id=新建测试数据-js-文件>新建测试数据 js 文件</h5><ul><li><p>示例：在项目的 cypress/integration 文件夹下新建 testData 目录，然后在该目录下创建一个 js 文件，示例文件名为：testLogin.data.js</p></li><li><p>testLogin.data.js 示例代码如下：</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>export</span> <span class=k>const</span> <span class=n>testLoginUserEmail</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>summary</span><span class=p>:</span> <span class=s2>&#34;正确邮箱账号登录验证&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>username</span><span class=p>:</span><span class=s2>&#34;dengnao.123@163.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span><span class=p>:</span><span class=s2>&#34;xxxx&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=k>export</span> <span class=k>const</span> <span class=n>testLoginUserId</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>summary</span><span class=p>:</span> <span class=s2>&#34;正确id账号登录验证&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>username</span><span class=p>:</span><span class=s2>&#34;waitnoww&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span><span class=p>:</span><span class=s2>&#34;xxxx&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=k>export</span> <span class=k>const</span> <span class=n>testLoginUserMobilephone</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>summary</span><span class=p>:</span> <span class=s2>&#34;正确手机号账号登录验证&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>username</span><span class=p>:</span><span class=s2>&#34;18888139031&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span><span class=p>:</span><span class=s2>&#34;xxxx&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=编写测试用例>编写测试用例</h5><ul><li><p>在项目 cypress/integration 文件夹下新建 js 测试用例文件，示例文件名为：testLogin_guanggoo_data_by_js.js</p></li><li><p>示例代码如下：</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>import {
</span></span><span class=line><span class=cl>testLoginUserEmail,
</span></span><span class=line><span class=cl>testLoginUserId,
</span></span><span class=line><span class=cl>testLoginUserMobilephone
</span></span><span class=line><span class=cl>} from &#34;./testData/testLogin.data&#34;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 测试用例
</span></span><span class=line><span class=cl>describe(&#34;光谷社区登录验证&#34;, function () {
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 执行用例执行用例之前先进入首页
</span></span><span class=line><span class=cl>    beforeEach(function () {
</span></span><span class=line><span class=cl>        // 访问并登录光谷社区
</span></span><span class=line><span class=cl>        cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问url
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>        cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确邮箱账号登录
</span></span><span class=line><span class=cl>    it(testLoginUserEmail[0].summary, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserEmail[0].username) //输入邮箱用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserEmail[0].password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确ID账号登录
</span></span><span class=line><span class=cl>    it(testLoginUserId[0].summary, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserId[0].username) //输入ID用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserId[0].password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确手机账号登录
</span></span><span class=line><span class=cl>    it(testLoginUserMobilephone[0].summary, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserMobilephone[0].username) //输入手机号用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserMobilephone[0].password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // 执行用例执行用例之后清除登录信息
</span></span><span class=line><span class=cl>        afterEach(function () {
</span></span><span class=line><span class=cl>            // 清除cookies
</span></span><span class=line><span class=cl>            cy.clearCookies()
</span></span><span class=line><span class=cl>        })
</span></span><span class=line><span class=cl>})
</span></span></code></pre></td></tr></table></div></div><h5 id=运行测试用例>运行测试用例</h5><ul><li>运行脚本：npm run cypress:open</li><li>点击运行 testLogin_guanggoo_data_by_js.js 用例</li><li>查看运行结果 (测试数据能正常获取到)</li></ul><h3 id=fixture-测试数据驱动介绍>fixture 测试数据驱动介绍</h3><blockquote><p>fixture 数据驱动方式是 cypress 框架推荐的方法，支持的格式也很多，如.json/txt/html/jpg/gif/mp3/zip 等，具体可参考：https://docs.cypress.io/api/commands/fixture</p></blockquote><h4 id=简介-1>简介</h4><p>Cypress 使用 cypress/fixture 目录存放 json 文件数据，cy.fixture() 加载测试数据，如果不指定文件路径，默认从 cypress/fixtures 文件下去查找，也可以自己设置文件路径</p><h4 id=使用方法-1>使用方法</h4><blockquote><p>以 json 格式读取举例介绍</p></blockquote><h5 id=新建测试数据-json-文件>新建测试数据 json 文件</h5><ul><li><p>示例：在项目的 cypress/fixtures 文件夹下新建一个 json 文件，示例文件名为：testLoginData.json</p></li><li><p>testLoginData.json 示例代码如下（账号密码记得换成自己的）：</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;testLoginUserEmail&#34;: {
</span></span><span class=line><span class=cl>&#34;summary&#34;: &#34;正确邮箱账号登录验证&#34;,
</span></span><span class=line><span class=cl>&#34;username&#34;: &#34;dengnao.123@163.com&#34;,
</span></span><span class=line><span class=cl>&#34;password&#34;: &#34;xxxx&#34;
</span></span><span class=line><span class=cl>},
</span></span><span class=line><span class=cl>&#34;testLoginUserId&#34;: {
</span></span><span class=line><span class=cl>&#34;summary&#34;: &#34;正确 id 账号登录验证&#34;,
</span></span><span class=line><span class=cl>&#34;username&#34;: &#34;waitnoww&#34;,
</span></span><span class=line><span class=cl>&#34;password&#34;: &#34;xxxx&#34;
</span></span><span class=line><span class=cl>},
</span></span><span class=line><span class=cl>&#34;testLoginUserMobilephone&#34;: {
</span></span><span class=line><span class=cl>&#34;summary&#34;: &#34;正确手机号账号登录验证&#34;,
</span></span><span class=line><span class=cl>&#34;username&#34;: &#34;18888889031&#34;,
</span></span><span class=line><span class=cl>&#34;password&#34;: &#34;xxxx&#34;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h5 id=编写测试用例-1>编写测试用例</h5><ul><li><p>在项目 cypress/integration 文件夹下新建 js 测试用例文件，示例文件名为：testLogin_guanggoo_data_by_fixture.js</p></li><li><p>示例代码如下：</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>describe(&#34;光谷社区登录验证&#34;, function () {
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 执行用例执行用例之前先进入首页
</span></span><span class=line><span class=cl>    beforeEach(function () {
</span></span><span class=line><span class=cl>        // 访问并登录光谷社区
</span></span><span class=line><span class=cl>        cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问url
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>        cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>        // 获取测试数据
</span></span><span class=line><span class=cl>        cy.fixture(&#39;testLoginData.json&#39;).as(&#39;loginData&#39;)
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确邮箱账号登录
</span></span><span class=line><span class=cl>    it(&#34;正确邮箱账号登录验证&#34;, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserEmail.username) //输入邮箱用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserEmail.password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确ID账号登录
</span></span><span class=line><span class=cl>    it(&#34;正确id账号登录验证&#34;, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserId.username) //输入ID用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserId.password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确手机账号登录
</span></span><span class=line><span class=cl>    it(&#34;正确手机号账号登录验证&#34;, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserMobilephone.username) //输入手机号用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserMobilephone.password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // 执行用例执行用例之后清除登录信息
</span></span><span class=line><span class=cl>        afterEach(function () {
</span></span><span class=line><span class=cl>            // 清除cookies
</span></span><span class=line><span class=cl>            cy.clearCookies()
</span></span><span class=line><span class=cl>        })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>})
</span></span></code></pre></td></tr></table></div></div><h5 id=运行测试用例-1>运行测试用例</h5><ul><li>运行脚本：npm run cypress:open</li><li>点击运行 testLogin_guanggoo_data_by_fixture.js 用例</li><li>查看运行结果 (测试数据能正常获取到)</li></ul><h2 id=方法封装参数化>方法封装参数化</h2><h3 id=简介-2>简介</h3><p>cypress 框架提供了一个 commands.js 可以自定义各种命令，用来封装各种通用方法，参数化方法，常用脚本等；</p><p>将常用的通用方法如登录方法在 cypress/support/commands.js 中编写完成之后，与 cy.get()/cy.visit() 一样，可以直接用 cy.xxx() 形式调用，非常方便，减少维护成本</p><h3 id=使用介绍>使用介绍</h3><blockquote><p>示例会介绍常用的参数化登录命令和进入首页命令</p></blockquote><h4 id=登录参数化登录封装>登录参数化登录封装</h4><h5 id=代码编写>代码编写</h5><ul><li>打开 cypress/support/commands.js 文件</li><li>输入如下代码：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Cypress.Commands.add(&#34;login&#34;,(username,password) =&gt; {
</span></span><span class=line><span class=cl>cy.clearCookies() //清除 cookies,保证页面为未登录状态
</span></span><span class=line><span class=cl>cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问 url
</span></span><span class=line><span class=cl>cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标 url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>.type(username) //输入参数化的用户名
</span></span><span class=line><span class=cl>cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>.type(password) //输入参数化的密码
</span></span><span class=line><span class=cl>cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>cy.get(&#39;:nth-child(2) &gt; .nav-collapse&#39;).should(&#39;contain&#39;, &#39;设置&#39;) //验证登录成功回到首页，设置按钮展示正确
</span></span><span class=line><span class=cl>})
</span></span></code></pre></td></tr></table></div></div><h4 id=代码使用>代码使用</h4><ul><li>在测试用例中可直接进行方法调用 cy.login(username,password) 换成自己的账号密码进行登录操作了</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cy.login(&#34;dengnao.123@163.com&#34;,&#34;xxxx&#34;)
</span></span></code></pre></td></tr></table></div></div><h4 id=进入首页方法封装>进入首页方法封装</h4><h5 id=代码编写-1>代码编写</h5><ul><li>打开 cypress/support/commands.js 文件</li><li>输入如下代码：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Cypress.Commands.add(&#34;initHomePage&#34;,() =&gt; {
</span></span><span class=line><span class=cl>cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问 url
</span></span><span class=line><span class=cl>cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标 url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>})
</span></span></code></pre></td></tr></table></div></div><h4 id=代码使用-1>代码使用</h4><ul><li>在测试用例中可直接进行方法调用 cy.initHomePage() 即可进入首页</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cy.initHomePage()
</span></span></code></pre></td></tr></table></div></div><h2 id=测试框架介绍>测试框架介绍</h2><h3 id=简介-3>简介</h3><p>Cypress 框架采用了 Mocha 框架的语法，故 Mocha 框架的测试语法可在 cypress 上直接使用</p><h3 id=语法介绍>语法介绍</h3><h4 id=describe>describe()</h4><p>定义测试套件，里面还可以定义多个 context 或 it</p><h4 id=context>context()</h4><p>定义测试套件，是 describe() 的别名，可以替代 describe</p><h4 id=it>it()</h4><p>定义测试用例</p><h4 id=before>before()</h4><p>在一个测试套件中的所有测试用例之前执行，设置一些运行 testcase 的前置条件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// runs once before the first test in this block
</span></span><span class=line><span class=cl>});
</span></span></code></pre></td></tr></table></div></div><h4 id=beforeeach>beforeEach()</h4><p>在每个测试用例之前执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>        // 访问并登录光谷社区
</span></span><span class=line><span class=cl>        cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问url
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>        cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>    })
</span></span></code></pre></td></tr></table></div></div><h4 id=aftereach>afterEach()</h4><p>在每个测试用例之后执行，可以执行清除数据等操作</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 清除 cookies
</span></span><span class=line><span class=cl>cy.clearCookies()
</span></span><span class=line><span class=cl>})
</span></span></code></pre></td></tr></table></div></div><h4 id=after>after()</h4><p>在一个测试套件中的所有测试用例之后执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// runs once after the last test in this block
</span></span><span class=line><span class=cl>});
</span></span></code></pre></td></tr></table></div></div><h4 id=only>.only()</h4><p>设置只执行某个 testcase/testsuite</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>describe.only(&#39;#indexOf()&#39;, function() {
</span></span><span class=line><span class=cl>// ...
</span></span><span class=line><span class=cl>});
</span></span><span class=line><span class=cl>});
</span></span></code></pre></td></tr></table></div></div><h4 id=skip>.skip()</h4><p>设置跳过执行某个 testcase/testsuite</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>describe(&#39;#indexOf()&#39;, function() {
</span></span><span class=line><span class=cl>it.skip(&#39;should return -1 unless present&#39;, function() {
</span></span><span class=line><span class=cl>// this test will not be run
</span></span><span class=line><span class=cl>});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    it(&#39;should return the index when present&#39;, function() {
</span></span><span class=line><span class=cl>      // this test will be run
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>});
</span></span><span class=line><span class=cl>});
</span></span></code></pre></td></tr></table></div></div><h3 id=参考网址>参考网址</h3><ul><li><a href=https://docs.cypress.io/guides/references/bundled-tools#Mocha>https://docs.cypress.io/guides/references/bundled-tools#Mocha</a></li></ul></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://naodeng.tech/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95>自动化测试</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://naodeng.tech/tags/cypress>cypress</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://naodeng.tech/post/cypress-demo5/><span class=mr-1.5>←</span><span>Cypress UI 自动化测试框架学习（5）- 命令大全</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://naodeng.tech/post/cypress-demo3/><span>Cypress UI 自动化测试框架学习（3）- 元素定位，操作和断言</span><span class=ml-1.5>→</span></a></nav><div class=mt-24 id=disqus_thread></div><script>const disqusShortname="naodeng-tech",script=document.createElement("script");script.src="https://"+disqusShortname+".disqus.com/embed.js",script.setAttribute("data-timestamp",+new Date),document.head.appendChild(script)</script></article></main><footer class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2023
<a class=link href=https://naodeng.tech/>QA Discovery</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>✎ Paper</a></footer></body></html>