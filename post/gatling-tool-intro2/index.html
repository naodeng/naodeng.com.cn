<!doctype html><html class="not-ready lg:text-base" style=--bg:#faf8f1 lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>gatling performance testing tools: building your own gatling project from 0 to 1 - NaoDeng.Tech</title><meta name=theme-color><meta name=description content="从 0 到 1 搭建自己的 Gatling 工程 Gradle + Scala 版本 创建一个空的 Gradle 工程 1 2 3 mkdir gatling-gradle-demo cd gatling-gradle-demo gradle init 配置项目 build.gradle 在 项目中 build.gradle 文件中添加以下内容 可 copy 本项目中的 build.gradle 文件内容，更多配"><meta name=author content="nao.deng"><link rel="preload stylesheet" as=style href=https://naodeng.tech/main.min.css><link rel=preload as=image href=https://naodeng.tech/theme.png><link rel=preload as=image href="https://avatars.githubusercontent.com/u/7599466?v=4"><link rel=preload as=image href=https://naodeng.tech/twitter.svg><link rel=preload as=image href=https://naodeng.tech/github.svg><link rel=preload as=image href=https://naodeng.tech/rss.svg><script defer src=https://naodeng.tech/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://naodeng.tech/favicon.ico><link rel=apple-touch-icon href=https://naodeng.tech/apple-touch-icon.png><meta name=generator content="Hugo 0.119.0"><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!0})}</script><meta itemprop=name content="gatling performance testing tools: building your own gatling project from 0 to 1"><meta itemprop=description content="The article introduces the performance testing tool gatling advanced introduction: from 0 to 1 build your own Gatling project, introduces the basic use of Gatling, and how to build your own Gatling project, write performance test scripts, view the test report and so on."><meta itemprop=datePublished content="2023-10-25T11:05:45+08:00"><meta itemprop=dateModified content="2023-10-25T11:05:45+08:00"><meta itemprop=wordCount content="1475"><meta itemprop=keywords content="Performance Testing,gatling,"><meta property="og:title" content="gatling performance testing tools: building your own gatling project from 0 to 1"><meta property="og:description" content="The article introduces the performance testing tool gatling advanced introduction: from 0 to 1 build your own Gatling project, introduces the basic use of Gatling, and how to build your own Gatling project, write performance test scripts, view the test report and so on."><meta property="og:type" content="article"><meta property="og:url" content="https://naodeng.tech/post/gatling-tool-intro2/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-10-25T11:05:45+08:00"><meta property="article:modified_time" content="2023-10-25T11:05:45+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="gatling performance testing tools: building your own gatling project from 0 to 1"><meta name=twitter:description content="The article introduces the performance testing tool gatling advanced introduction: from 0 to 1 build your own Gatling project, introduces the basic use of Gatling, and how to build your own Gatling project, write performance test scripts, view the test report and so on."><link rel=canonical href=https://naodeng.tech/post/gatling-tool-intro2/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://naodeng.tech/>NaoDeng.Tech</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/post-en/>EN</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/contact/>Contact</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/naodeng0_0 target=_blank rel=me>twitter</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/naodeng target=_blank rel=me>github</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://naodeng.tech/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"><article><header class=mb-16><h1 class="!my-0 pb-2.5">gatling performance testing tools: building your own gatling project from 0 to 1</h1><div class="text-sm antialiased opacity-60"><time>Oct 25, 2023</time>
<span class=mx-1>&#183;</span>
<span>nao.deng</span></div></header><section><h2 id=从-0-到-1-搭建自己的-gatling-工程>从 0 到 1 搭建自己的 Gatling 工程</h2><h3 id=gradle--scala-版本>Gradle + Scala 版本</h3><h4 id=创建一个空的-gradle-工程>创建一个空的 Gradle 工程</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir gatling-gradle-demo
</span></span><span class=line><span class=cl><span class=nb>cd</span> gatling-gradle-demo
</span></span><span class=line><span class=cl>gradle init
</span></span></code></pre></td></tr></table></div></div><h4 id=配置项目-buildgradle>配置项目 build.gradle</h4><p>在 项目中 build.gradle 文件中添加以下内容</p><blockquote><p>可 copy 本项目中的 build.gradle 文件内容，更多配置可参考<a href=https://gatling.io/docs/gatling/reference/current/extensions/gradle_plugin/>官方文档</a></p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=c1>// 插件配置
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>plugins</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>id</span> <span class=s1>&#39;scala&#39;</span> <span class=c1>// scala插件声明（基于开发工具插件）
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>id</span> <span class=s1>&#39;io.gatling.gradle&#39;</span> <span class=n>version</span> <span class=s1>&#39;3.9.5.6&#39;</span>  <span class=c1>// 基于gradle的gatling框架插件版本声明
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//仓库源配置
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>repositories</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 使用 maven 中心仓库源
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>mavenCentral</span><span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>// gatling 配置
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>gatling</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// logback root level，如果配置文件夹中不存在 logback.xml，则默认 Gatling 控制台日志级别
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>logLevel</span> <span class=o>=</span> <span class=s1>&#39;WARN&#39;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 执行记录 HTTP 请求的详细程度
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// set to &#39;ALL&#39; for all HTTP traffic in TRACE, &#39;FAILURES&#39; for failed HTTP traffic in DEBUG
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>logHttp</span> <span class=o>=</span> <span class=s1>&#39;FAILURES&#39;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Simulations 过滤器
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>simulations</span> <span class=o>=</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>include</span> <span class=s2>&#34;**/simulation/*.scala&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>// 依赖配置
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>dependencies</span> <span class=o>{</span>     
</span></span><span class=line><span class=cl> <span class=c1>// 图表库，用于生成报告图表
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=n>gatling</span> <span class=s1>&#39;io.gatling.highcharts:gatling-charts-highcharts:3.8.3&#39;</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=gradle-build-项目并初始化>gradle build 项目并初始化</h4><ul><li>用编辑器打开本项目 Terminal 窗口，执行以下命令确认项目 build 成功</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gradle build
</span></span></code></pre></td></tr></table></div></div><ul><li>初始化完成：完成向导后，Gradle 将在项目目录中生成一个基本的 Gradle 项目结构</li></ul><p><img src=https://github.com/Automation-Test-Starter/Gatling-Performance-Test-starter/raw/main/readme-pic/readme-project-tree1.png alt=readme-project-tree1></p><h4 id=初始化目录>初始化目录</h4><p>在 src/gatling/scala 目录下创建一个 simulation 目录，用于存放测试脚本</p><blockquote><p>Gatling 测试通常位于 src/gatling 目录中。你需要在项目根目录下手动创建 src 目录，然后在 src 目录下创建 gatling 目录。在 gatling 目录下，你可以创建你的测试模拟文件夹 simulation，以及其他文件夹，如 data、bodies、resources 等。</p></blockquote><h4 id=编写脚本>编写脚本</h4><ul><li><p>在 simulation 目录下创建一个 demo.scala 文件，用于编写测试脚本</p></li><li><p>示例脚本如下，可供参考</p></li></ul><blockquote><p>脚本包含了两个场景，一个是 get 请求，一个是 post 请求
get 接口验证接口返回状态码为 200，post 接口验证接口返回状态码为 201
get 接口使用了 rampUsers，post 接口使用了 constantConcurrentUsers
rampUsers：在指定时间内逐渐增加并发用户数，constantConcurrentUsers：在指定时间内保持并发用户数不变
两个接口的并发用户数都是 10 个，持续时间都是 10 秒
两个接口的请求间隔都是 2 秒</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scala data-lang=scala><span class=line><span class=cl><span class=k>package</span> <span class=nn>simulation</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>scala.concurrent.duration._</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>io.gatling.core.Predef._</span>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>io.gatling.http.Predef._</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>demo</span> <span class=k>extends</span> <span class=nc>Simulation</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=n>httpProtocol</span> <span class=k>=</span> <span class=n>http</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>baseUrl</span><span class=o>(</span><span class=s>&#34;https://jsonplaceholder.typicode.com&#34;</span><span class=o>)</span> <span class=c1>// 5
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>val</span> <span class=n>scn</span> <span class=k>=</span> <span class=n>scenario</span><span class=o>(</span><span class=s>&#34;GetSimulation&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>exec</span><span class=o>(</span><span class=n>http</span><span class=o>(</span><span class=s>&#34;get_demo&#34;</span><span class=o>)</span> 
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>get</span><span class=o>(</span><span class=s>&#34;/posts/1&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>check</span><span class=o>(</span><span class=n>status</span><span class=o>.</span><span class=n>is</span><span class=o>(</span><span class=mi>200</span><span class=o>)))</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>pause</span><span class=o>(</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=n>scn1</span> <span class=k>=</span> <span class=n>scenario</span><span class=o>(</span><span class=s>&#34;PostSimulation&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>exec</span><span class=o>(</span><span class=n>http</span><span class=o>(</span><span class=s>&#34;post_demo&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>post</span><span class=o>(</span><span class=s>&#34;/posts&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>body</span><span class=o>(</span><span class=nc>StringBody</span><span class=o>(</span><span class=s>&#34;&#34;&#34;{&#34;title&#34;: &#34;foo&#34;,&#34;body&#34;: &#34;bar&#34;,&#34;userId&#34;: 1}&#34;&#34;&#34;</span><span class=o>)).</span><span class=n>asJson</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>check</span><span class=o>(</span><span class=n>status</span><span class=o>.</span><span class=n>is</span><span class=o>(</span><span class=mi>201</span><span class=o>)))</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>pause</span><span class=o>(</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>setUp</span><span class=o>(</span> 
</span></span><span class=line><span class=cl>    <span class=n>scn</span><span class=o>.</span><span class=n>inject</span><span class=o>(</span><span class=n>rampUsers</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span> <span class=n>during</span><span class=o>(</span><span class=mi>10</span> <span class=n>seconds</span><span class=o>)),</span>
</span></span><span class=line><span class=cl>    <span class=n>scn1</span><span class=o>.</span><span class=n>inject</span><span class=o>(</span><span class=n>constantConcurrentUsers</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span> <span class=n>during</span><span class=o>(</span><span class=mi>10</span> <span class=n>seconds</span><span class=o>))</span>
</span></span><span class=line><span class=cl>  <span class=o>).</span><span class=n>protocols</span><span class=o>(</span><span class=n>httpProtocol</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=调试脚本>调试脚本</h4><p>执行以下命令，运行测试脚本并查看报告</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gradle gatlingRun
</span></span></code></pre></td></tr></table></div></div><p><img src=https://github.com/Automation-Test-Starter/Gatling-Performance-Test-starter/raw/main/readme-pic/readme-report3.png alt=readme-report3></p><h3 id=maven--scala-版本>Maven + Scala 版本</h3><h4 id=创建一个空的-maven-工程>创建一个空的 Maven 工程</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mvn archetype:generate -DgroupId<span class=o>=</span>demo.gatlin.maven -DartifactId<span class=o>=</span>gatling-maven-demo
</span></span></code></pre></td></tr></table></div></div><p>初始化完成：完成向导后，Maven 将在新建项目目录并生成一个基本的 Maven 项目结构</p><p><img src=https://github.com/Automation-Test-Starter/Gatling-Performance-Test-starter/raw/main/readme-pic/readme-project-tree2.png alt=readme-project-tree2></p><h4 id=配置项目-pomxml>配置项目 pom.xml</h4><p>在 项目中 pom.xml 文件中添加以下内容</p><blockquote><p>可 copy 本项目中的 pom.xml 文件内容，更多配置可参考<a href=https://gatling.io/docs/gatling/reference/current/extensions/maven_plugin/>官方文档</a></p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- 依赖配置 --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>io.gatling.highcharts<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>gatling-charts-highcharts<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>3.9.5<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependencies&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 插件配置 --&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;build&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;plugins&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>io.gatling<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>gatling-maven-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>4.6.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;/plugin&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>net.alchim31.maven<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>scala-maven-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>4.8.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;configuration&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;scalaVersion&gt;</span>2.13.12<span class=nt>&lt;/scalaVersion&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/configuration&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;executions&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;execution&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;goals&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;goal&gt;</span>testCompile<span class=nt>&lt;/goal&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/goals&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;configuration&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;jvmArgs&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;jvmArg&gt;</span>-Xss100M<span class=nt>&lt;/jvmArg&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;/jvmArgs&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;args&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;arg&gt;</span>-deprecation<span class=nt>&lt;/arg&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;arg&gt;</span>-feature<span class=nt>&lt;/arg&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;arg&gt;</span>-unchecked<span class=nt>&lt;/arg&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;arg&gt;</span>-language:implicitConversions<span class=nt>&lt;/arg&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;arg&gt;</span>-language:postfixOps<span class=nt>&lt;/arg&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;/args&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/configuration&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;/execution&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/executions&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;/plugin&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/plugins&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/build&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=初始化目录-1>初始化目录</h4><p>在 src/test/scala 目录下创建一个 simulation 目录，用于存放测试脚本</p><blockquote><p>scala 测试通常位于 src/test 目录中。你需要在项目 test 目录下创建 scala 目录。在 scala 目录下，你可以创建你的测试模拟文件夹 simulation，以及其他文件夹，如 data、bodies、resources 等。</p></blockquote><h4 id=编写脚本-1>编写脚本</h4><ul><li><p>在 simulation 目录下创建一个 demo.scala 文件，用于编写测试脚本</p></li><li><p>示例脚本如下，可供参考</p></li></ul><blockquote><p>脚本包含了两个场景，一个是 get 请求，一个是 post 请求
get 接口验证接口返回状态码为 200，post 接口验证接口返回状态码为 201
get 接口使用了 rampUsers，post 接口使用了 constantConcurrentUsers
rampUsers：在指定时间内逐渐增加并发用户数，constantConcurrentUsers：在指定时间内保持并发用户数不变
两个接口的并发用户数都是 10 个，持续时间都是 10 秒
两个接口的请求间隔都是 2 秒</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scala data-lang=scala><span class=line><span class=cl><span class=k>package</span> <span class=nn>simulation</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>scala.concurrent.duration._</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>io.gatling.core.Predef._</span>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>io.gatling.http.Predef._</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>demo</span> <span class=k>extends</span> <span class=nc>Simulation</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=n>httpProtocol</span> <span class=k>=</span> <span class=n>http</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>baseUrl</span><span class=o>(</span><span class=s>&#34;https://jsonplaceholder.typicode.com&#34;</span><span class=o>)</span> <span class=c1>// 5
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>val</span> <span class=n>scn</span> <span class=k>=</span> <span class=n>scenario</span><span class=o>(</span><span class=s>&#34;GetSimulation&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>exec</span><span class=o>(</span><span class=n>http</span><span class=o>(</span><span class=s>&#34;get_demo&#34;</span><span class=o>)</span> 
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>get</span><span class=o>(</span><span class=s>&#34;/posts/1&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>check</span><span class=o>(</span><span class=n>status</span><span class=o>.</span><span class=n>is</span><span class=o>(</span><span class=mi>200</span><span class=o>)))</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>pause</span><span class=o>(</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=n>scn1</span> <span class=k>=</span> <span class=n>scenario</span><span class=o>(</span><span class=s>&#34;PostSimulation&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>exec</span><span class=o>(</span><span class=n>http</span><span class=o>(</span><span class=s>&#34;post_demo&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>post</span><span class=o>(</span><span class=s>&#34;/posts&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>body</span><span class=o>(</span><span class=nc>StringBody</span><span class=o>(</span><span class=s>&#34;&#34;&#34;{&#34;title&#34;: &#34;foo&#34;,&#34;body&#34;: &#34;bar&#34;,&#34;userId&#34;: 1}&#34;&#34;&#34;</span><span class=o>)).</span><span class=n>asJson</span>
</span></span><span class=line><span class=cl>      <span class=o>.</span><span class=n>check</span><span class=o>(</span><span class=n>status</span><span class=o>.</span><span class=n>is</span><span class=o>(</span><span class=mi>201</span><span class=o>)))</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>pause</span><span class=o>(</span><span class=mi>2</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>setUp</span><span class=o>(</span> 
</span></span><span class=line><span class=cl>    <span class=n>scn</span><span class=o>.</span><span class=n>inject</span><span class=o>(</span><span class=n>rampUsers</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span> <span class=n>during</span><span class=o>(</span><span class=mi>10</span> <span class=n>seconds</span><span class=o>)),</span>
</span></span><span class=line><span class=cl>    <span class=n>scn1</span><span class=o>.</span><span class=n>inject</span><span class=o>(</span><span class=n>constantConcurrentUsers</span><span class=o>(</span><span class=mi>10</span><span class=o>)</span> <span class=n>during</span><span class=o>(</span><span class=mi>10</span> <span class=n>seconds</span><span class=o>))</span>
</span></span><span class=line><span class=cl>  <span class=o>).</span><span class=n>protocols</span><span class=o>(</span><span class=n>httpProtocol</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=调试脚本-1>调试脚本</h4><p>执行以下命令，运行测试脚本并查看报告</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mvn gatling:test
</span></span></code></pre></td></tr></table></div></div><p><img src=https://github.com/Automation-Test-Starter/Gatling-Performance-Test-starter/raw/main/readme-pic/readme-report3.png alt=readme-report3></p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://naodeng.tech/tags/performance-testing>Performance Testing</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://naodeng.tech/tags/gatling>gatling</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://naodeng.tech/post/gatling-tool-intro1/><span>gatling 性能测试工具入门介绍</span><span class=ml-1.5>→</span></a></nav><div class=mt-24 id=disqus_thread></div><script>const disqusShortname="naodeng-tech",script=document.createElement("script");script.src="https://"+disqusShortname+".disqus.com/embed.js",script.setAttribute("data-timestamp",+new Date),document.head.appendChild(script)</script></article></main><footer class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2023
<a class=link href=https://naodeng.tech/>NaoDeng.Tech</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>✎ Paper</a></footer></body></html>