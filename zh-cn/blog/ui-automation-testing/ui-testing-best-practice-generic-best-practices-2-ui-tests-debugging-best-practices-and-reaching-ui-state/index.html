<!DOCTYPE html><html lang="zh-CN" data-locale="zh-cn"> <head><meta charset="UTF-8"><title>UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI | è½¯ä»¶æµ‹è¯•åŒå­¦</title><meta name="description" content="è¿™ç¯‡åšæ–‡æ¢è®¨äº† UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹äºŒï¼šUI æµ‹è¯•è°ƒè¯•å’Œæ— éœ€ä½¿ç”¨ UI è¾¾åˆ° UI çŠ¶æ€ã€‚åšæ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–­ç‚¹ã€æ—¥å¿—å’Œäº¤äº’å¼è°ƒè¯•å·¥å…·ç­‰æ–¹æ³•ï¼Œæé«˜æµ‹è¯•è„šæœ¬çš„è°ƒè¯•æ•ˆç‡ã€‚æ­¤å¤–ï¼Œæ–‡ç« å¼ºè°ƒäº†é€šè¿‡ç›´æ¥è®¾ç½®åº”ç”¨ç¨‹åºçŠ¶æ€è€Œæ— éœ€ä¾èµ– UI å…ƒç´ æ¥è¾¾åˆ° UI çŠ¶æ€çš„æ–¹æ³•ï¼Œä»¥æé«˜æµ‹è¯•é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŒ‘æˆ˜ï¼ŒåŒæ—¶ä¼˜åŒ–æµ‹è¯•è„šæœ¬çš„æ‰§è¡Œæ•ˆç‡ã€‚"><meta name="keywords" content="è½¯ä»¶æµ‹è¯•, è´¨é‡åˆ†æ, è‡ªåŠ¨åŒ–æµ‹è¯•, æ¥å£æµ‹è¯•, æ€§èƒ½æµ‹è¯•, æ•æ·æµ‹è¯•, æµ‹è¯•è‡ªåŠ¨åŒ–, inaodeng, naodeng"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="nao.deng"><link rel="canonical" href="https://inaodeng.com/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.17.0"><link rel="alternate" hreflang="en-US" href="https://inaodeng.com/en/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/"><link rel="alternate" hreflang="zh-CN" href="https://inaodeng.com/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/"><link rel="alternate" hreflang="x-default" href="https://inaodeng.com/en/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="icon" sizes="192x192" href="/android-chrome-192x192.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><meta name="color-scheme" content="light dark"><meta property="og:type" content="article"><meta property="og:title" content="UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI | è½¯ä»¶æµ‹è¯•åŒå­¦"><meta property="og:site_name" content="è½¯ä»¶æµ‹è¯•åŒå­¦"><meta property="og:description" content="è¿™ç¯‡åšæ–‡æ¢è®¨äº† UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹äºŒï¼šUI æµ‹è¯•è°ƒè¯•å’Œæ— éœ€ä½¿ç”¨ UI è¾¾åˆ° UI çŠ¶æ€ã€‚åšæ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–­ç‚¹ã€æ—¥å¿—å’Œäº¤äº’å¼è°ƒè¯•å·¥å…·ç­‰æ–¹æ³•ï¼Œæé«˜æµ‹è¯•è„šæœ¬çš„è°ƒè¯•æ•ˆç‡ã€‚æ­¤å¤–ï¼Œæ–‡ç« å¼ºè°ƒäº†é€šè¿‡ç›´æ¥è®¾ç½®åº”ç”¨ç¨‹åºçŠ¶æ€è€Œæ— éœ€ä¾èµ– UI å…ƒç´ æ¥è¾¾åˆ° UI çŠ¶æ€çš„æ–¹æ³•ï¼Œä»¥æé«˜æµ‹è¯•é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŒ‘æˆ˜ï¼ŒåŒæ—¶ä¼˜åŒ–æµ‹è¯•è„šæœ¬çš„æ‰§è¡Œæ•ˆç‡ã€‚"><meta property="og:image" content="https://inaodeng.com/default.jpg"><meta property="og:image:alt" content="UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:url" content="https://inaodeng.com/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/"><meta property="og:locale" content="zh_CN"><meta property="og:locale:alternate" content="en_US"><meta property="article:published_time" content="2024-01-19T05:05:44.000Z"><meta property="article:modified_time" content="2024-01-19T05:05:44.000Z"><meta property="article:author" content="nao.deng"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@inaodeng"><meta name="twitter:title" content="UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI | è½¯ä»¶æµ‹è¯•åŒå­¦"><meta name="twitter:description" content="è¿™ç¯‡åšæ–‡æ¢è®¨äº† UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹äºŒï¼šUI æµ‹è¯•è°ƒè¯•å’Œæ— éœ€ä½¿ç”¨ UI è¾¾åˆ° UI çŠ¶æ€ã€‚åšæ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–­ç‚¹ã€æ—¥å¿—å’Œäº¤äº’å¼è°ƒè¯•å·¥å…·ç­‰æ–¹æ³•ï¼Œæé«˜æµ‹è¯•è„šæœ¬çš„è°ƒè¯•æ•ˆç‡ã€‚æ­¤å¤–ï¼Œæ–‡ç« å¼ºè°ƒäº†é€šè¿‡ç›´æ¥è®¾ç½®åº”ç”¨ç¨‹åºçŠ¶æ€è€Œæ— éœ€ä¾èµ– UI å…ƒç´ æ¥è¾¾åˆ° UI çŠ¶æ€çš„æ–¹æ³•ï¼Œä»¥æé«˜æµ‹è¯•é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŒ‘æˆ˜ï¼ŒåŒæ—¶ä¼˜åŒ–æµ‹è¯•è„šæœ¬çš„æ‰§è¡Œæ•ˆç‡ã€‚"><meta name="twitter:image" content="https://inaodeng.com/default.jpg"><meta name="twitter:image:alt" content="UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap" media="print" onload="this.media='all'"><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap" media="print" onload="this.media='all'"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"è½¯ä»¶æµ‹è¯•åŒå­¦","description":"è¿™ç¯‡åšæ–‡æ¢è®¨äº† UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹äºŒï¼šUI æµ‹è¯•è°ƒè¯•å’Œæ— éœ€ä½¿ç”¨ UI è¾¾åˆ° UI çŠ¶æ€ã€‚åšæ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–­ç‚¹ã€æ—¥å¿—å’Œäº¤äº’å¼è°ƒè¯•å·¥å…·ç­‰æ–¹æ³•ï¼Œæé«˜æµ‹è¯•è„šæœ¬çš„è°ƒè¯•æ•ˆç‡ã€‚æ­¤å¤–ï¼Œæ–‡ç« å¼ºè°ƒäº†é€šè¿‡ç›´æ¥è®¾ç½®åº”ç”¨ç¨‹åºçŠ¶æ€è€Œæ— éœ€ä¾èµ– UI å…ƒç´ æ¥è¾¾åˆ° UI çŠ¶æ€çš„æ–¹æ³•ï¼Œä»¥æé«˜æµ‹è¯•é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŒ‘æˆ˜ï¼ŒåŒæ—¶ä¼˜åŒ–æµ‹è¯•è„šæœ¬çš„æ‰§è¡Œæ•ˆç‡ã€‚","url":"https://inaodeng.com","inLanguage":["zh-CN"],"publisher":{"@type":"Person","name":"Nao Deng","url":"https://inaodeng.com","sameAs":["https://github.com/naodeng","https://x.com/inaodeng","https://naodeng.medium.com/","https://weibo.com/u/1651778270","https://ko-fi.com/naodeng"]},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://inaodeng.com/zh-cn/?q={search_term_string}"},"query-input":"required name=search_term_string"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Nao Deng","url":"https://inaodeng.com","sameAs":["https://github.com/naodeng","https://x.com/inaodeng","https://naodeng.medium.com/","https://weibo.com/u/1651778270","https://ko-fi.com/naodeng"]}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"é¦–é¡µ","item":"https://inaodeng.com/zh-cn/"},{"@type":"ListItem","position":2,"name":"åšå®¢","item":"https://inaodeng.com/zh-cn/blog/"},{"@type":"ListItem","position":3,"name":"UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI","item":"https://inaodeng.com/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/"}]}</script><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;800&display=swap"><link rel="stylesheet" media="print" onload="this.media='all'" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;800&display=swap"><style>
      body {
        font-family: "Noto Sans SC", sans-serif;
      }
    </style><script async src="https://www.googletagmanager.com/gtag/js?id=G-FSJSZ2E3B9"></script><script>(function(){const gaId = "G-FSJSZ2E3B9";

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', gaId);
    })();</script><!-- Counterscale è‡ªéƒ¨ç½²ç»Ÿè®¡ (https://analytics.inaodeng.com) --><script id="counterscale-script" data-site-id="inaodeng.com" src="https://analytics.inaodeng.com/tracker.js" defer></script><link rel="stylesheet" href="/_astro/_id_.BItnTTCz.css">
<style>.breadcrumb[data-astro-cid-qaanghzh]{margin-block-end:var(--sp-m, 1rem)}.breadcrumb-list[data-astro-cid-qaanghzh]{list-style:none;margin:0;padding:0;display:flex;flex-wrap:wrap;align-items:center;gap:.25rem .5rem;font-size:.875rem;color:color-mix(in srgb,var(--color-main) 65%,transparent)}.breadcrumb-item[data-astro-cid-qaanghzh]{display:inline-flex;align-items:center;gap:.25rem}.breadcrumb-link[data-astro-cid-qaanghzh]{color:inherit;text-decoration:none}.breadcrumb-link[data-astro-cid-qaanghzh]:hover{color:var(--color-theme);text-decoration:underline}.breadcrumb-icon[data-astro-cid-qaanghzh]{display:inline-flex;flex-shrink:0;margin-inline-end:.35em;color:var(--color-theme);opacity:.85}.breadcrumb-icon[data-astro-cid-qaanghzh] svg[data-astro-cid-qaanghzh]{vertical-align:middle}.breadcrumb-icon--current[data-astro-cid-qaanghzh]{opacity:.7}.breadcrumb-current[data-astro-cid-qaanghzh]{color:inherit;display:inline-flex;align-items:center;gap:.35em}.breadcrumb-sep[data-astro-cid-qaanghzh]{display:inline-flex;align-items:center;margin-inline:.4rem;color:color-mix(in srgb,var(--color-main) 45%,transparent);user-select:none}.breadcrumb-sep[data-astro-cid-qaanghzh] svg[data-astro-cid-qaanghzh]{vertical-align:middle}
</style>
<link rel="stylesheet" href="/_astro/_id_.SIt_BqRz.css"></head> <body> <div id="js-languageSuggest" data-astro-cid-onlux7ho> <a id="js-link" href="#" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>autorenew</span> <span id="js-linkText" data-astro-cid-onlux7ho></span> </a> <button id="js-close" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>close</span> </button> </div> <script>(function(){const currentLocale = "zh-cn";
const LOCALES = {"en":{"label":"English","lang":"en-US"},"zh-cn":{"label":"ç®€ä½“ä¸­æ–‡","lang":"zh-CN"}};

  const browserLang = navigator.language.toLowerCase();
  const suggest = document.getElementById("js-languageSuggest");

  const showSuggest = (lang) => {
    const pathnames = location.pathname.split("/");
    const link = document.getElementById("js-link");
    const linkText = document.getElementById("js-linkText");
    pathnames[1] = lang;
    link.href = pathnames.join("/");
    linkText.innerText = LOCALES[lang].label;
    suggest.style.display = "block";
  };

  if (
    currentLocale === browserLang ||
    currentLocale === browserLang.split("-")[0] ||
    localStorage.languageSuggestDenied ||
    localStorage.selectedLang
  ) {
    return;
  } else if (Object.keys(LOCALES).includes(browserLang)) {
    showSuggest(browserLang);
  } else if (Object.keys(LOCALES).includes(browserLang.split("-")[0])) {
    showSuggest(browserLang.split("-")[0]);
  }

  document.getElementById("js-close").addEventListener("click", () => {
    suggest.style.display = "none";
    localStorage.languageSuggestDenied = true;
  });
})();</script>  <header class="l-header" data-astro-cid-3ef6ksr2> <div class="site-brand" data-astro-cid-3ef6ksr2> <h1 dir="ltr" data-astro-cid-3ef6ksr2> <a href="/zh-cn/" data-astro-cid-3ef6ksr2> <img src="/favicon.svg" alt="" class="site-logo" width="36" height="36" data-astro-cid-3ef6ksr2> <span data-astro-cid-3ef6ksr2>è½¯ä»¶æµ‹è¯•åŒå­¦</span> </a> </h1> <p class="site-slogan" data-astro-cid-3ef6ksr2>è´¨é‡åˆ†æå¸ˆï¼Œè€Œéè´¨é‡ä¿è¯å¸ˆã€‚</p> </div> <nav class="l-content" data-astro-cid-3ef6ksr2> <ul data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/" data-astro-cid-3ef6ksr2> é¦–é¡µ </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/blog/" data-astro-cid-3ef6ksr2> åšå®¢ </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/archive/" data-astro-cid-3ef6ksr2> å½’æ¡£ </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/projects/" data-astro-cid-3ef6ksr2> é¡¹ç›® </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/about/" data-astro-cid-3ef6ksr2> å…³äº </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/sponsor/" data-astro-cid-3ef6ksr2> æ”¯æŒ </a> </li> <li class="nav-tool" data-astro-cid-3ef6ksr2> <div class="locale-dropdown compact" data-locale-dropdown data-astro-cid-opxux4jt> <button type="button" class="locale-trigger" aria-label="Language" aria-expanded="false" aria-haspopup="true" data-locale-trigger data-astro-cid-opxux4jt> <span class="material-icons-sharp icon-lang" aria-hidden="true" data-astro-cid-opxux4jt>translate</span> <span class="locale-flag" data-astro-cid-opxux4jt>ğŸ‡¨ğŸ‡³</span>  </button> <div class="locale-panel" hidden data-locale-panel data-astro-cid-opxux4jt> <ul data-astro-cid-opxux4jt> <li data-astro-cid-opxux4jt> <a href="/en/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/" data-lang="en" data-locale-option data-astro-cid-opxux4jt> English </a> </li><li data-astro-cid-opxux4jt> <a href="/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/" data-lang="zh-cn" data-locale-option data-astro-cid-opxux4jt> ç®€ä½“ä¸­æ–‡ </a> </li> </ul> </div> </div> <script type="module">function r(e){const n=e.querySelector("[data-locale-trigger]"),a=e.querySelector("[data-locale-panel]");if(!n||!a)return;const c=()=>{a.hidden=!0,n.setAttribute("aria-expanded","false")},d=()=>{a.hidden=!1,n.setAttribute("aria-expanded","true")},o=()=>a.hidden?d():c();n.addEventListener("click",t=>{t.stopPropagation(),o()}),e.querySelectorAll("[data-locale-option]").forEach(t=>{t.addEventListener("click",()=>{const l=t.dataset.lang;l&&localStorage.setItem("selectedLang",l)})}),document.addEventListener("click",t=>{a.hidden||e.contains(t.target)||c()})}document.querySelectorAll("[data-locale-dropdown]").forEach(e=>r(e));</script>  </li> <li class="nav-tool" data-astro-cid-3ef6ksr2> <button type="button" class="btn-icon" aria-label="æœç´¢" title="âŒ˜K æˆ– Ctrl+K æ‰“å¼€æœç´¢" data-search-open data-astro-cid-3ef6ksr2> <span class="material-icons-sharp" aria-hidden="true" data-astro-cid-3ef6ksr2>search</span> <span class="btn-icon-kbd" data-astro-cid-3ef6ksr2>âŒ˜K</span> </button> </li> </ul> </nav> </header>  <main class="l-main l-content l-content--with-sidebar"> <nav class="breadcrumb" aria-label="Breadcrumb" data-astro-cid-qaanghzh><ol class="breadcrumb-list" data-astro-cid-qaanghzh><li class="breadcrumb-item" data-astro-cid-qaanghzh><a href="/zh-cn/" class="breadcrumb-link" data-astro-cid-qaanghzh><span class="breadcrumb-icon" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" data-astro-cid-qaanghzh></path><polyline points="9 22 9 12 15 12 15 22" data-astro-cid-qaanghzh></polyline></svg></span>é¦–é¡µ</a><span class="breadcrumb-sep" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="0.65em" height="0.65em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><polyline points="9 18 15 12 9 6" data-astro-cid-qaanghzh></polyline></svg></span></li><li class="breadcrumb-item" data-astro-cid-qaanghzh><a href="/zh-cn/blog/" class="breadcrumb-link" data-astro-cid-qaanghzh><span class="breadcrumb-icon" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" data-astro-cid-qaanghzh></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" data-astro-cid-qaanghzh></path><line x1="8" y1="6" x2="16" y2="6" data-astro-cid-qaanghzh></line><line x1="8" y1="10" x2="16" y2="10" data-astro-cid-qaanghzh></line></svg></span>åšå®¢</a><span class="breadcrumb-sep" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="0.65em" height="0.65em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><polyline points="9 18 15 12 9 6" data-astro-cid-qaanghzh></polyline></svg></span></li><li class="breadcrumb-item" data-astro-cid-qaanghzh><span class="breadcrumb-current" aria-current="page" data-astro-cid-qaanghzh><span class="breadcrumb-icon breadcrumb-icon--current" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-astro-cid-qaanghzh></path><polyline points="14 2 14 8 20 8" data-astro-cid-qaanghzh></polyline><line x1="16" y1="13" x2="8" y2="13" data-astro-cid-qaanghzh></line><line x1="16" y1="17" x2="8" y2="17" data-astro-cid-qaanghzh></line><polyline points="10 9 9 9 8 9" data-astro-cid-qaanghzh></polyline></svg></span>UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI</span></li></ol></nav><article data-astro-cid-uwv4mmhs>  <script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI","description":"è¿™ç¯‡åšæ–‡æ¢è®¨äº† UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹äºŒï¼šUI æµ‹è¯•è°ƒè¯•å’Œæ— éœ€ä½¿ç”¨ UI è¾¾åˆ° UI çŠ¶æ€ã€‚åšæ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–­ç‚¹ã€æ—¥å¿—å’Œäº¤äº’å¼è°ƒè¯•å·¥å…·ç­‰æ–¹æ³•ï¼Œæé«˜æµ‹è¯•è„šæœ¬çš„è°ƒè¯•æ•ˆç‡ã€‚æ­¤å¤–ï¼Œæ–‡ç« å¼ºè°ƒäº†é€šè¿‡ç›´æ¥è®¾ç½®åº”ç”¨ç¨‹åºçŠ¶æ€è€Œæ— éœ€ä¾èµ– UI å…ƒç´ æ¥è¾¾åˆ° UI çŠ¶æ€çš„æ–¹æ³•ï¼Œä»¥æé«˜æµ‹è¯•é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŒ‘æˆ˜ï¼ŒåŒæ—¶ä¼˜åŒ–æµ‹è¯•è„šæœ¬çš„æ‰§è¡Œæ•ˆç‡ã€‚","datePublished":"2024-01-19T05:05:44.000Z","dateModified":"2024-01-19T05:05:44.000Z","url":"https://inaodeng.com/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/","image":"https://inaodeng.com/default.jpg","author":{"@type":"Person","name":"nao.deng","url":"https://inaodeng.com"},"publisher":{"@type":"Organization","name":"Nao's Blog","url":"https://inaodeng.com"}}</script> <div class="article-with-toc" data-astro-cid-v3cnrnum> <div class="article-body" data-astro-cid-v3cnrnum> <header class="article-title-header" id="article-title-header" data-astro-cid-v3cnrnum> <h1 data-astro-cid-v3cnrnum>UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI</h1> <p class="article-meta" data-astro-cid-v3cnrnum> <span class="meta-item" data-astro-cid-v3cnrnum> <span class="meta-icon" aria-hidden="true" data-astro-cid-v3cnrnum> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-v3cnrnum><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-astro-cid-v3cnrnum></rect><line x1="16" y1="2" x2="16" y2="6" data-astro-cid-v3cnrnum></line><line x1="8" y1="2" x2="8" y2="6" data-astro-cid-v3cnrnum></line><line x1="3" y1="10" x2="21" y2="10" data-astro-cid-v3cnrnum></line></svg> </span> <time datetime="2024-01-19T05:05:44.000Z" data-astro-cid-v3cnrnum> 2024/1/19 </time> </span> <span class="meta-sep" aria-hidden="true" data-astro-cid-v3cnrnum>â€¢</span> <span class="meta-item" data-astro-cid-v3cnrnum> <span class="meta-icon" aria-hidden="true" data-astro-cid-v3cnrnum> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-v3cnrnum><circle cx="12" cy="12" r="10" data-astro-cid-v3cnrnum></circle><polyline points="12 6 12 12 16 14" data-astro-cid-v3cnrnum></polyline></svg> </span> <span data-astro-cid-v3cnrnum>15 åˆ†é’Ÿé˜…è¯»</span> </span> <span class="meta-sep" aria-hidden="true" data-astro-cid-v3cnrnum>â€¢</span> <span class="meta-item" data-astro-cid-v3cnrnum> <span class="meta-icon" aria-hidden="true" data-astro-cid-v3cnrnum> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-v3cnrnum><circle cx="12" cy="12" r="10" data-astro-cid-v3cnrnum></circle><path d="M14.83 14.83a4 4 0 1 1-5.66-5.66" data-astro-cid-v3cnrnum></path><path d="M12 12h.01" data-astro-cid-v3cnrnum></path></svg> </span> <span data-astro-cid-v3cnrnum>CC BY-SA 4.0</span> </span> </p> <div class="tags" data-astro-cid-v3cnrnum> <a href="/zh-cn/tags/UI æµ‹è¯•/" class="tag" data-astro-cid-v3cnrnum>UI æµ‹è¯•</a><a href="/zh-cn/tags/è‡ªåŠ¨åŒ–æµ‹è¯•/" class="tag" data-astro-cid-v3cnrnum>è‡ªåŠ¨åŒ–æµ‹è¯•</a><a href="/zh-cn/tags/è§†è§‰æµ‹è¯•/" class="tag" data-astro-cid-v3cnrnum>è§†è§‰æµ‹è¯•</a><a href="/zh-cn/tags/æœ€ä½³å®è·µ/" class="tag" data-astro-cid-v3cnrnum>æœ€ä½³å®è·µ</a><a href="/zh-cn/tags/è½¯ä»¶æµ‹è¯•/" class="tag" data-astro-cid-v3cnrnum>è½¯ä»¶æµ‹è¯•</a> </div> </header> <div class="cover-wrap" data-astro-cid-v3cnrnum> <div class="cover-bg cover-bg--default" role="img" aria-hidden="true" data-astro-cid-v3cnrnum></div> <div class="cover-overlay" data-astro-cid-v3cnrnum> <h2 class="cover-title" data-astro-cid-v3cnrnum>UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI</h2> <p class="cover-meta" data-astro-cid-v3cnrnum> <span class="cover-author" data-astro-cid-v3cnrnum>nao.deng</span> <span class="cover-sep" data-astro-cid-v3cnrnum>Â·</span> <time datetime="2024-01-19T05:05:44.000Z" data-astro-cid-v3cnrnum>2024/1/19</time> </p> </div> </div> <div class="article-main" data-astro-cid-v3cnrnum> <div class="prose" data-astro-cid-v3cnrnum> <p>æ–‡ç« ç”± <a href="https://github.com/NoriSte/ui-testing-best-practices">UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®</a> å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» <a href="https://github.com/NoriSte/ui-testing-best-practices">UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®</a>é˜…è¯»åŸæ–‡ã€‚</p>
<h2 id="ui-æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µ">UI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µ</h2>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/ui-tests-debugging-best-practices.md">https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/ui-tests-debugging-best-practices.md</a></p>
<p>åœ¨è½¬å‘ Cypress ä¹‹å‰ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨ Puppeteer ç¼–å†™ UI æµ‹è¯•ã€‚ç†è§£æµè§ˆå™¨ä¸­å‘ç”Ÿçš„äº‹æƒ…ã€äº†è§£æ­£åœ¨è¿è¡Œçš„æµ‹è¯•ä»¥åŠè°ƒè¯•æµ‹è¯•éƒ½ä¸æ˜¯ç®€å•çš„ä»»åŠ¡ï¼Œå› æ­¤æˆ‘å¼€å§‹é‡‡å–ä¸€ç³»åˆ—è§£å†³æ–¹æ¡ˆæ¥å¸®åŠ©æˆ‘åº”å¯¹æ•´ä¸ªæµç¨‹ã€‚</p>
<p>è¯¸å¦‚ <a href="https://www.cypress.io/">Cypress</a> å’Œ <a href="https://devexpress.github.io/testcafe/">TestCafÃ©</a> çš„å·¥å…·å‡ ä¹ä½¿ä¸‹é¢åˆ—å‡ºçš„æœ€ä½³å®è·µå˜å¾—æ— å…³ç´§è¦ï¼Œä½†é™¤éä½ ä¹‹å‰ä½¿ç”¨è¿‡ <a href="https://www.selenium.dev/">Selenium</a> æˆ– <a href="https://pptr.dev/">Puppeteer</a> ç­‰å·¥å…·è¿›è¡Œæµ‹è¯•ï¼Œå¦åˆ™ä½ ä¸ä¼šæ„è¯†åˆ°ä¸“ä¸ºæµ‹è¯•è€Œè®¾è®¡çš„å·¥å…·å¯¹ç®€åŒ–ç”Ÿæ´»æœ‰å¤šä¹ˆé‡è¦ã€‚</p>
<p>ç¬¬é›¶æ­¥æ˜¯ä»¥éæ— å¤´æ¨¡å¼å¯åŠ¨æµè§ˆå™¨ï¼Œç„¶åâ€¦</p>
<h3 id="åœ¨-consolelog-ä¸­è®°å½•æ˜¾ç¤ºæµ‹è¯•çš„æè¿°">åœ¨ console.log ä¸­è®°å½•/æ˜¾ç¤ºæµ‹è¯•çš„æè¿°</h3>
<p>ç”±äºåœ¨æµè§ˆå™¨å†…éƒ¨æ— æ³•è·å¾—æœ‰å…³æ­£åœ¨è¿è¡Œçš„æµ‹è¯•çš„è§†è§‰åé¦ˆï¼Œè¯·åŠ¡å¿…åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è®°å½•æµ‹è¯•çš„åç§°ã€‚åœ¨æµ‹è¯•é€Ÿåº¦å¾ˆå¿«çš„æƒ…å†µä¸‹ï¼ˆå°‘äº 1 ç§’ï¼‰ï¼Œè¿™å¯èƒ½æ²¡æœ‰å¤ªå¤šç”¨å¤„ï¼Œä½†åœ¨æµ‹è¯•æ—¶é—´è¾ƒé•¿æˆ–åœ¨ä½¿ç”¨ test.skip å’Œ test.only è¿›è¡Œæµ‹è¯•æ—¶ï¼Œè¿™æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå¯ä»¥å¯¹æ­£åœ¨è¿è¡Œçš„æµ‹è¯•è¿›è¡ŒåŒé‡æ£€æŸ¥ã€‚</p>
<p>åœ¨ Puppeteer ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#B392F0">test</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;Test description&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> page.</span><span style="color:#B392F0">evaluate</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;Test description&#39;</span><span style="color:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // ... the test code...</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span></code></pre>
<p>å¦‚æœä½ éœ€è¦æ›´ä¸ºæ˜¾çœ¼çš„åé¦ˆï¼Œç”šè‡³å¯ä»¥è€ƒè™‘åœ¨é¡µé¢çš„å·¦ä¸Šè§’æ·»åŠ ä¸€ä¸ªå›ºå®šçš„ divï¼Œæ¯ä¸ªæµ‹è¯•éƒ½ä¼šç”¨è‡ªå·±çš„æè¿°å¡«å……â€¦</p>
<h3 id="å°†æµè§ˆå™¨çš„-consolelog-è½¬å‘åˆ°-nodejs">å°†æµè§ˆå™¨çš„ console.log è½¬å‘åˆ° Node.js</h3>
<p>ä½¿ç”¨ Puppeteer çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">page.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;console&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">msg</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;BROWSER LOG:&#39;</span><span style="color:#E1E4E8">, msg.</span><span style="color:#B392F0">text</span><span style="color:#E1E4E8">()));</span></span></code></pre>
<p>å…è®¸ä½ åœ¨åŒä¸€ç»ˆç«¯çª—å£ä¸­æŸ¥çœ‹æµ‹è¯•æ—¥å¿—å’Œæµè§ˆå™¨æ—¥å¿—ã€‚ç®€å•è€Œæœ‰æ•ˆã€‚</p>
<h4 id="å¯åŠ¨æµè§ˆå™¨æ—¶å·²ç»æ‰“å¼€å¼€å‘è€…å·¥å…·">å¯åŠ¨æµè§ˆå™¨æ—¶å·²ç»æ‰“å¼€å¼€å‘è€…å·¥å…·</h4>
<p>å°±åƒåœ¨ç»å…¸çš„å‰ç«¯å¼€å‘ä¸­ä¸€æ ·ï¼Œåœ¨é¡µé¢åŠ è½½å·²ç»å¼€å§‹åå†æ‰“å¼€å¼€å‘è€…å·¥å…·å¯èƒ½ä¼šå¯¼è‡´ä½ é”™è¿‡é‡è¦çš„ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œé€‰é¡¹å¡ä¸­ã€‚åœ¨è°ƒè¯•æµ‹è¯•æ—¶ï¼Œå¯åŠ¨æµè§ˆå™¨æ—¶å·²ç»æ‰“å¼€å¼€å‘è€…å·¥å…·å¯ä»¥èŠ‚çœå®è´µçš„æ—¶é—´å’Œä¿¡æ¯ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> browser</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> puppeteer.</span><span style="color:#B392F0">launch</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  headless: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  devtools: </span><span style="color:#79B8FF">true</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<h3 id="å‡ç¼“æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œé€Ÿåº¦">å‡ç¼“æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œé€Ÿåº¦</h3>
<p>æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·é€Ÿåº¦éå¸¸å¿«ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬èƒ½åœ¨å‡ ç§’é’Ÿå†…è¿è¡Œå¤§é‡æµ‹è¯•ã€‚ç„¶è€Œï¼Œåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªåŠ£åŠ¿ï¼Œå› ä¸ºä½ éœ€è¦ç”¨çœ¼ç›è·Ÿè¸ªé¡µé¢ä¸Šå‘ç”Ÿçš„æƒ…å†µã€‚å‡ç¼“<strong>æ¯ä¸ªåŠ¨ä½œ</strong>å¯èƒ½ä¼šé€‚å¾—å…¶åâ€”â€”å› ä¸ºæ•´ä¸ªæµ‹è¯•å˜å¾—å¾ˆæ…¢â€”â€”ä½†é€šå¸¸è¿™æ˜¯æ‰§è¡Œä¸€äº›å¿«é€Ÿæ£€æŸ¥çš„æœ€ç®€å•æ–¹æ³•ã€‚åœ¨ Puppeteer ä¸­ï¼Œæœ‰ä¸€ä¸ªå…¨å±€è®¾ç½®å¯ä»¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> browser</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> puppeteer.</span><span style="color:#B392F0">launch</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  headless: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  slowMo: </span><span style="color:#79B8FF">250</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// slow down every action by 250ms</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>ä¸€äº›åŠ¨ä½œï¼Œæ¯”å¦‚è¾“å…¥ï¼Œå…è®¸ä½ æ·»åŠ æ›´å…·ä½“çš„å»¶è¿Ÿï¼ˆè¿™ä¼šå åŠ åœ¨å…¨å±€ slowMo è®¾ç½®ä¹‹ä¸Šï¼‰</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">await</span><span style="color:#E1E4E8"> page.</span><span style="color:#B392F0">type</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;.username&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;admin&#39;</span><span style="color:#E1E4E8">, {delay: </span><span style="color:#79B8FF">10</span><span style="color:#E1E4E8">});</span></span></code></pre>
<h3 id="ä½¿ç”¨è°ƒè¯•å™¨è¯­å¥æš‚åœæµ‹è¯•">ä½¿ç”¨è°ƒè¯•å™¨è¯­å¥æš‚åœæµ‹è¯•</h3>
<p>å¦ä¸€æ–¹é¢ï¼Œå°±åƒåœ¨æ ‡å‡†çš„ Web å¼€å‘ä¸­ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œåœ¨é¡µé¢ä¸Šçš„ä»£ç ä¸­æ·»åŠ ä¸€ä¸ªè°ƒè¯•å™¨è¯­å¥æ¥â€œæš‚åœâ€JavaScript æ‰§è¡Œã€‚è¯·æ³¨æ„ï¼šè¯¥è¯­å¥ä»…åœ¨å·²æ‰“å¼€æ§åˆ¶æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ—¶æœ‰æ•ˆã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">await</span><span style="color:#E1E4E8"> page.</span><span style="color:#B392F0">evaluate</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span><span style="color:#F97583">debugger</span><span style="color:#E1E4E8">;});</span></span></code></pre>
<p>é€šè¿‡ç‚¹å‡»â€œç»§ç»­æ‰§è¡Œè„šæœ¬â€æˆ–æŒ‰ä¸‹ F8 é”®ï¼ˆè°ƒè¯•å™¨æ˜¯ä¸€ä¸ªâ€œé£è¡Œâ€æ–­ç‚¹ï¼‰ï¼Œå°†æ¢å¤æµ‹è¯•çš„æ‰§è¡Œã€‚</p>
<h3 id="å»¶é•¿æµ‹è¯•è¶…æ—¶æ—¶é—´">å»¶é•¿æµ‹è¯•è¶…æ—¶æ—¶é—´</h3>
<p>ç±»ä¼¼ Jestã€Jasmine ç­‰çš„æµ‹è¯•è¿è¡Œå™¨éƒ½è®¾æœ‰æµ‹è¯•è¶…æ—¶æ—¶é—´ã€‚è¿™ä¸ªè¶…æ—¶æ—¶é—´çš„ä½œç”¨åœ¨äºï¼Œåœ¨æµ‹è¯•ä¸­å‘ç”Ÿé—®é¢˜å¯¼è‡´æµ‹è¯•æ— æ³•æ­£å¸¸ç»“æŸæ—¶ï¼ŒåŠæ—¶ç»ˆæ­¢æµ‹è¯•ã€‚åœ¨ UI æµ‹è¯•ä¸­ï¼Œè¿™ç§è¡Œä¸ºç›¸å¯¹ç¹çï¼Œå› ä¸ºä½ éœ€è¦åœ¨æµ‹è¯•å¼€å§‹æ—¶æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨æµ‹è¯•ç»“æŸæ—¶å…³é—­æµè§ˆå™¨ã€‚åœ¨æ­£å¸¸çš„æµ‹è¯•ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè®¾å®šè¿‡é«˜çš„è¶…æ—¶æ—¶é—´å¹¶ä¸å®é™…ï¼Œå› ä¸ºä¸€æ—¦æµ‹è¯•å¤±è´¥å°±ä¼šå¯¼è‡´å¤§é‡æ—¶é—´çš„æµªè´¹ï¼Œè€Œè¿‡ä½çš„è¶…æ—¶æ—¶é—´å¯èƒ½åœ¨æµ‹è¯•å®Œæˆä¹‹å‰å°±æå‰â€œæˆªæ–­â€äº†æµ‹è¯•ã€‚</p>
<p>ç›¸åï¼Œä½ éœ€è¦è®¾å®šè¾ƒé•¿çš„è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºä½ ä¸å¸Œæœ›æµ‹è¯•ç»“æŸçš„æ—¶å€™åœ¨ä½ æ£€æŸ¥æµè§ˆå™¨æ—¶å…³é—­å®ƒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è°ƒè¯•å—æ§æµè§ˆå™¨æ—¶ï¼Œè®¾å®šä¸º 10 åˆ†é’Ÿçš„è¶…æ—¶æ—¶é—´å¯èƒ½ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥â€¦</p>
<h3 id="é¿å…åœ¨æµ‹è¯•ç»“æŸæ—¶å…³é—­æµè§ˆå™¨">é¿å…åœ¨æµ‹è¯•ç»“æŸæ—¶å…³é—­æµè§ˆå™¨</h3>
<p>æµ‹è¯•å¼€å§‹æ—¶ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè€Œåœ¨æµ‹è¯•ç»“æŸæ—¶ä¸å…³é—­å®ƒã€‚é¿å…å…³é—­æµè§ˆå™¨å¯è®©ä½ è‡ªç”±åœ°æ£€æŸ¥å‰ç«¯åº”ç”¨ï¼Œè€Œæ— éœ€æ‹…å¿ƒæµ‹è¯•è¶…æ—¶ã€‚è¿™ä»…åœ¨æœ¬åœ°è¿è¡Œæµ‹è¯•æ—¶æœ‰æ•ˆï¼Œä½†åœ¨è¿è¡Œæµ‹è¯•äº CI ç®¡é“ä¹‹å‰ï¼Œå¿…é¡»è¿˜åŸè‡ªåŠ¨å…³é—­ä»¥é¿å…ç”±äºæœªå…³é—­çš„æµè§ˆå™¨å®ä¾‹å¯¼è‡´å†…å­˜ä¸è¶³ã€‚</p>
<h3 id="ä½¿ç”¨æˆªå›¾">ä½¿ç”¨æˆªå›¾</h3>
<p>åœ¨ä»¥æ— å¤´æ¨¡å¼è¿è¡Œæµ‹è¯•æ—¶ï¼Œè¿™åœ¨æµ‹è¯•ç¨³å®šä¸”ä»…åœ¨å‡ºç°å›å½’æ—¶æ‰å¤±è´¥çš„é˜¶æ®µå°¤å…¶æœ‰å¸®åŠ©ã€‚å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå¾ˆå¤šæ—¶å€™æˆªå›¾èƒ½è®©ä½ äº†è§£ä½ æ­£åœ¨å¼€å‘çš„åŠŸèƒ½æ˜¯å¦‚ä½•å½±å“ä¹‹å‰æ­£å¸¸å·¥ä½œçš„åŠŸèƒ½çš„ã€‚æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æµ‹è¯•å¤±è´¥æ—¶æˆªå›¾ï¼Œå¦åˆ™ï¼Œä½ å¯ä»¥åœ¨ UI æµ‹è¯•ä¸­ç¡®å®šä¸€äº›æ£€æŸ¥ç‚¹ï¼Œå¹¶åœ¨è¿™äº›æ­¥éª¤ä¸­æˆªå›¾ã€‚</p>
<h3 id="é¢‘ç¹ä½¿ç”¨æ–­è¨€">é¢‘ç¹ä½¿ç”¨æ–­è¨€</h3>
<p>ä¸€ä¸ªç»éªŒæ³•åˆ™ï¼šå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå®ƒå¿…é¡»ç›´æ¥å¸¦ä½ ç†è§£å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œè€Œä¸æ˜¯é‡æ–°å¯åŠ¨æµ‹è¯•å¹¶æ‰‹åŠ¨è°ƒè¯•ã€‚å°è¯•åœ¨ä½ çš„ä»£ç åº“ä¸­æ‰‹åŠ¨å¼•å…¥ä¸€äº›é”™è¯¯ï¼ˆæ”¹å˜è¯·æ±‚æœ‰æ•ˆè½½è·ï¼Œç§»é™¤å…ƒç´ ç­‰ï¼‰ï¼Œå¹¶æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šã€‚é”™è¯¯æ˜¯å¦ä¸ä½ å¼•å…¥çš„é”™è¯¯ç›¸å…³è”ï¼Ÿé˜…è¯»å¤±è´¥æŠ¥å‘Šçš„äººæ˜¯å¦èƒ½å¤Ÿç†è§£éœ€è¦ä¿®å¤ä»€ä¹ˆï¼Ÿ</p>
<p>ä½ éœ€è¦åœ¨æµ‹è¯•ä¸­æ·»åŠ å¾ˆå¤šæ–­è¨€ï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥çš„ï¼å•å…ƒæµ‹è¯•é€šå¸¸åªåŒ…å«ä¸€ä¸ªæ­¥éª¤å’Œä¸€ä¸ªæˆ–ä¸¤ä¸ªæ–­è¨€ï¼Œä½† UI æµ‹è¯•ä¸åŒï¼Œå®ƒä»¬æœ‰å¾ˆå¤šæ­¥éª¤ï¼Œå› æ­¤ä½ éœ€è¦å¾ˆå¤šæ–­è¨€ã€‚å°†å®ƒä»¬è§†ä¸ºä¸€ç³»åˆ—å•å…ƒæµ‹è¯•ï¼Œå…¶ä¸­å‰ä¸€ä¸ªæµ‹è¯•å¯¹ç¬¬äºŒä¸ªæµ‹è¯•çš„åˆ›å»ºæ˜¯å¿…è¦çš„ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<h3 id="ä½¿ç”¨-testskip-å’Œ-testonly">ä½¿ç”¨ test.skip å’Œ test.only</h3>
<p>è¿™æ˜¯æ¯ä¸ªæµ‹è¯•è¿è¡Œå™¨çš„åŸºç¡€ä¹‹ä¸€ï¼Œä½†ä½ å¯èƒ½ä¸çŸ¥é“ï¼šå¦‚æœä½ ä¸ä¹ æƒ¯ä½¿ç”¨ skip å’Œ onlyï¼Œè¯·ä»ç°åœ¨å¼€å§‹å§ï¼å¦åˆ™ï¼Œä½ å°†æµªè´¹å¾ˆå¤šæ—¶é—´ï¼Œå³ä½¿ä½ çš„æµ‹è¯•æ–‡ä»¶åªåŒ…å«ä¸¤ä¸‰ä¸ªæµ‹è¯•ã€‚å§‹ç»ˆä»…è¿è¡Œä½ æ­£åœ¨å·¥ä½œæˆ–éœ€è¦è°ƒè¯•çš„æœ€å°æ•°é‡çš„æµ‹è¯•ï¼</p>
<h3 id="ä¸²è¡Œè¿è¡Œæµ‹è¯•">ä¸²è¡Œè¿è¡Œæµ‹è¯•</h3>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Puppeteer ç»“åˆ Jestï¼Œè¯·è®°ä½ Jest æœ‰ä¸€ä¸ªä¸“é—¨çš„ runInBand é€‰é¡¹ï¼Œå®ƒé˜²æ­¢æµ‹è¯•çš„æ‰§è¡Œåœ¨ä½ çš„ CPU æ ¸å¿ƒä¸Šåˆ†æ•£ã€‚å°†æµ‹è¯•å¹¶è¡ŒåŒ–å¯ä»¥åŠ å¿«æ‰§è¡Œé€Ÿåº¦ï¼Œä½†åœ¨ä½ éœ€è¦ç”¨çœ¼ç›è·Ÿè¸ªæµ‹è¯•æ“ä½œæ—¶å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°çƒ¦æ‰°ã€‚runInBand é€‰é¡¹ä½¿æµ‹è¯•ä¸²è¡Œè¿è¡Œã€‚å°†å®ƒä¸ test.skipã€test.only ä»¥åŠ <a href="https://github.com/jest-community/jest-watch-typeahead">jest-watch-typeahead</a> ç»“åˆä½¿ç”¨å¯ä»¥é¿å…å¾ˆå¤šè°ƒè¯•çš„éº»çƒ¦ã€‚</p>
<h3 id="ä¿æŒæµ‹è¯•ä»£ç ç®€å•">ä¿æŒæµ‹è¯•ä»£ç ç®€å•</h3>
<p>å®æ„¿æœ‰äº›é‡å¤ï¼Œä¹Ÿä¸è¦è¿‡åº¦æŠ½è±¡ã€‚åŠªåŠ›è®©æµ‹è¯•ä»£ç ç®€å•æ˜“è¯»ã€‚ä½ è°ƒè¯• UI æµ‹è¯•è¶Šå¤šï¼Œå°±è¶Šèƒ½ä½“ä¼šåˆ°å…¶ä¸­çš„å›°éš¾ã€‚å½“ä½ éœ€è¦ç†è§£åº•å±‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä»¥åŠå“ªä¸€æ­¥ä¸æŒ‰é¢„æœŸå·¥ä½œæ—¶ï¼Œä½ é‚£è¶…åº¦æŠ½è±¡ã€å®Œå…¨ç¬¦åˆ DRY åŸåˆ™ï¼ˆä¸é‡å¤è‡ªå·±ï¼‰çš„æµ‹è¯•ä»£ç å°±ä¼šå˜å¾—ä»¤äººå¤´ç—›ã€‚</p>
<p>æ›´ä¸€èˆ¬è€Œè¨€ï¼Œæµ‹è¯•æ˜¯å°å‹è„šæœ¬ï¼Œå®ƒä»¬å¿…é¡»æ¯”å®ƒä»¬æµ‹è¯•çš„ä»£ç ç®€å•ä¸¤ä¸ªæ•°é‡çº§ï¼Œå°†å…¶è§†ä¸ºä¸€ä¸ªç›Ÿå‹ï¼Œè€Œä¸æ˜¯æ›´å¤æ‚çš„ç¨‹åºã€‚</p>
<h3 id="é€‰æ‹©ä¸“é—¨è®¾è®¡çš„å·¥å…·">é€‰æ‹©ä¸“é—¨è®¾è®¡çš„å·¥å…·</h3>
<p>ä¸Šè¿°æåˆ°çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å®ƒä»¬æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼š<strong>å®ƒä»¬éƒ½æ˜¯å˜é€šæ–¹æ³•</strong>ã€‚è¿™æ˜¯å› ä¸ºæˆ‘åœ¨ç¤ºä¾‹ä¸­ä½¿ç”¨çš„å·¥å…· Puppeteer å¹¶éä¸º UI æµ‹è¯•è€Œåˆ›å»ºçš„ï¼Œè€Œæ˜¯ä¸ºé€šç”¨æµè§ˆå™¨è‡ªåŠ¨åŒ–è€Œè®¾è®¡çš„ï¼Œç„¶åï¼Œé€šè¿‡ä¸€äº›å¤–éƒ¨å·¥å…·çš„å¸®åŠ©ï¼Œå¹¶åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ Puppeteerï¼Œä½¿å…¶å¯ä»¥ç”¨äº UI æµ‹è¯•ã€‚æµ‹è¯• Web åº”ç”¨æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œéœ€è¦ä¸åŒçš„å·¥å…·ï¼Œè€Œä¸ä»…ä»…æ˜¯è‡ªåŠ¨åŒ–æ“ä½œã€‚</p>
<p>å¦‚æœä½ éœ€è¦ç¼–å†™ UI æµ‹è¯•ï¼Œä½ åº”è¯¥è€ƒè™‘åˆ‡æ¢åˆ° Cypress æˆ– TestCafÃ©ï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¢«è®¾è®¡æˆç®€åŒ–ä½ çš„æµ‹è¯•å·¥ä½œã€‚å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿé€šè¿‡ä¸€ç³»åˆ—å®ç”¨å·¥å…·å’Œé»˜è®¤è¡Œä¸ºï¼Œä»¥åŠä¸€ç³»åˆ—ä¸€æµçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ä½ èƒ½å¤Ÿç†è§£å¹¶è°ƒè¯•æµè§ˆå™¨ä¸­å‘ç”Ÿçš„æƒ…å†µã€‚è¯·æ³¨æ„ï¼Œæœ¬ç« ä¸­æåˆ°çš„æ‰€æœ‰ Puppeteer <strong>æœ€ä½³å®è·µ</strong>â€¦ <strong>åœ¨ Cypress æˆ– TestCafÃ© ä¸­å®Œå…¨æ— ç”¨</strong> ğŸ˜‰</p>
<p><a href="https://github.com/naodeng/ui-testing-best-practices/blob/master/sections/tools/ui-testing-problems-cypress.zh.md">ä¸€äº› UI æµ‹è¯•é—®é¢˜åŠ Cypress æ–¹æ³•</a> å’Œ <a href="https://github.com/naodeng/ui-testing-best-practices/blob/master/sections/generic-best-practices/use-your-testing-tool-as-your-primary-development-tool.zh.md">å‰ç«¯ç”Ÿäº§åŠ›æå‡ï¼šå°† Cypress ä½œä¸ºä½ çš„ä¸»è¦å¼€å‘æµè§ˆå™¨</a> è¿™ä¸¤ç« åŒ…æ‹¬äº† Cypress ä¸€æµå·¥å…·çš„æ¦‚è¿°ã€‚</p>
<p>ç”±<a href="https://github.com/NoriSte">NoriSte</a> åœ¨ <a href="https://dev.to/noriste/ui-tests-debugging-best-practices-1eg3">dev.to</a> å’Œ <a href="https://medium.com/@NoriSte/ui-tests-debugging-best-practices-789c4ed4daf6?sk=c6056f124f40b15e09669e5839e9f814">Medium</a>ä¸Šè¿›è¡Œè”åˆå‘è¡¨._</p>
<h2 id="åœ¨æµ‹è¯•ä¸­è¾¾åˆ°-ui-çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨-ui">åœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI</h2>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/reaching-ui-state.md">https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/reaching-ui-state.md</a></p>
<h3 id="ä¸€æ®µç®€è¦è¯´æ˜">ä¸€æ®µç®€è¦è¯´æ˜</h3>
<p>åœ¨ UI åœºæ™¯ä¸­è¦†ç›–ä¸€æ¬¡æ˜¯æœ‰ä»·å€¼çš„ï¼Œè€Œåœ¨å…¶ä»–æµ‹è¯•ä¸­å¤åˆ¶å…¶ä¸­ä»»ä½•éƒ¨åˆ†æä¾›çš„ä»·å€¼å¾ˆå°ï¼›è¿™äº›æµ‹è¯•å¯èƒ½éœ€è¦ç³»ç»Ÿçš„ç›¸å…³çŠ¶æ€ã€‚å‡è®¾åœ¨ä¸€ä¸ªæ–°æµ‹è¯•ä¸­ï¼Œä½ éœ€è¦ä¸€ç§çŠ¶æ€ï¼Œè€Œé‚£ç§çŠ¶æ€ - éƒ¨åˆ†æˆ–å…¨éƒ¨ - ä¸ UI æµ‹è¯•ä¸­çš„æŸäº›éƒ¨åˆ†é‡å¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æŠ€æœ¯ï¼š</p>
<ul>
<li>ç›´æ¥å¯¼èˆª</li>
<li>ç½‘ç»œå­˜æ ¹è®°å½•å’Œæ’­æ”¾</li>
<li>åº”ç”¨ç¨‹åºåŠ¨ä½œ</li>
<li>æ•°æ®åº“ç§å­</li>
</ul>
<blockquote>
<p>å…è´£å£°æ˜ï¼šæ•´ä¸ªæŠ€æœ¯åŒ…çš„åº”ç”¨ä»…åœ¨ Cypress ä¸­å¯èƒ½ï¼ˆæ®æˆ‘ä»¬æ‰€çŸ¥ï¼‰ï¼Œå› æ­¤ä»¥ä¸‹ä»£ç ç¤ºä¾‹æ˜¯åœ¨ Cypress ä¸Šä¸‹æ–‡ä¸­ã€‚</p>
</blockquote>
<h3 id="ç›´æ¥å¯¼èˆª">ç›´æ¥å¯¼èˆª</h3>
<p>è¿™æ˜¯æœ€ç®€å•çš„æŠ€æœ¯ï¼Œé€‚ç”¨äºä»»ä½•æ¡†æ¶ã€‚å‡è®¾æµ‹è¯•çš„æ„å›¾ä¸ä½ çš„åº”ç”¨ç¨‹åºä¸­çš„æŸä¸ªé¡µé¢æœ‰å…³ã€‚ä¸å…¶è¿›è¡Œç‚¹å‡»å¯¼èˆªï¼Œç›´æ¥è®¿é—® URLã€‚ä¸€æ—¦åˆ°è¾¾ï¼Œä½ å¯ä»¥ç­‰å¾… UI å…ƒç´ ï¼ˆä»»ä½•æµ‹è¯•æ¡†æ¶ï¼‰æˆ–ç½‘ç»œè°ƒç”¨ï¼ˆä¸€äº›æµ‹è¯•æ¡†æ¶ï¼‰ï¼Œæˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// Test A covers click-navigation to a certain page.</span></span>
<span class="line"><span style="color:#6A737D">// This is Test B, and navigating to that page is the prerequisite step.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// assuming baseUrl is set in cypress.json or config file</span></span>
<span class="line"><span style="color:#6A737D">// directly navigate to the page.</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">visit</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;/endpoint&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// to ensure stability, wait for network (preferred), ui elements, or both</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// note: checking the endpoint you are at is entirely optional, only for sanity that you are at the right page</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">url</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;contain&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;endpoint&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">// cy.url().should(&#39;match&#39;, /endpoint/); // there are many, some more complex, ways of doing it</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// network wait: this is in addition to the sanity url check, and it is more important</span></span>
<span class="line"><span style="color:#6A737D">// because you want the page to &quot;settle&quot; before you start running assertions on it</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// usually a GET request. Is aliased so we can wait for it.</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">intercept</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;some-xhr-call-that-happens-upon-landing&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">as</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;crutcXHR&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">// The default Cypress timeout is 4 seconds. 15 seconds here is arbitrary.</span></span>
<span class="line"><span style="color:#6A737D">// Most pages load faster, but if you need more time then increase the timeout.</span></span>
<span class="line"><span style="color:#6A737D">// The only caveat to increasing timeout is that the tests will take longer to fail, but still run as fast as possible when things work.</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">wait</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;@crutchXHR&#39;</span><span style="color:#E1E4E8">, {timeout: </span><span style="color:#79B8FF">15000</span><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ui-element wait is straightforward, and may be optional, as well as less stable)</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;element-on-page&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;exist&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">and</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;be.visible&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<h4 id="ç›´æ¥å¯¼èˆªçš„ä¼˜ç¼ºç‚¹">ç›´æ¥å¯¼èˆªçš„ä¼˜ç¼ºç‚¹</h4>
<p>ä¼˜ç‚¹ï¼šä¸è¿›è¡Œç‚¹å‡»å¯¼èˆªå¯ä»¥èŠ‚çœæµ‹è¯•æ—¶é—´ï¼Œå¹¶å‡å°‘æµ‹è¯•ç»´æŠ¤çš„å·¥ä½œé‡ã€‚</p>
<p>ç¼ºç‚¹ï¼šè¿™ç§æŠ€æœ¯å¿½ç•¥äº†ç”¨æˆ·é€šè¿‡åº”ç”¨ç¨‹åºçš„ç«¯åˆ°ç«¯ç‚¹å‡»æ–¹å¼ã€‚ç¡®ä¿åœ¨å…¶ä»–æµ‹è¯•ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå·¥ä½œæµç¨‹è¦†ç›–ä¸ç‚¹å‡»å¯¼èˆªç›¸åŒçš„å·¥ä½œæµç¨‹ï¼Œä»¥ç¡®ä¿ç‚¹å‡»å¯¼èˆªåŠŸèƒ½ä¸ä¼šå‡ºç°å›å½’é—®é¢˜ã€‚é€šå¸¸ï¼Œç‚¹å‡»å¯¼èˆªå¯ä»¥æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„æµ‹è¯•ï¼›åœ¨è®¾ç½®å…¶ä»–æµ‹è¯•çš„çŠ¶æ€æ—¶ï¼Œä¸è¦é‡å¤å·²ç»åœ¨å…¶ä»–åœ°æ–¹è¦†ç›–çš„ UI æµ‹è¯•ã€‚æ€è€ƒæ¨¡å¼ç±»ä¼¼äºç™»å½•ï¼›å¦‚æœåœ¨ä¸€ä¸ªæµ‹è¯•ä¸­è¿›è¡Œ UI ç™»å½•ï¼Œåœ¨å…¶ä»–æµ‹è¯•ä¸­å¯ä»¥å®ç°ç¨‹åºåŒ–ç™»å½•ï¼Œè¿™æ—¢å¿«é€Ÿåˆç»æµã€‚</p>
<h3 id="åº”ç”¨ç¨‹åºæ“ä½œ">åº”ç”¨ç¨‹åºæ“ä½œ</h3>
<p>Cypress ä¸ºä½ æä¾›äº†å¯¹åº”ç”¨ç¨‹åºçš„å®Œå…¨æ§åˆ¶æƒã€‚ä½ å¯ä»¥ç»•è¿‡é¡µé¢å¯¹è±¡çš„æŠ½è±¡å±‚ï¼ˆä¸ä½ çš„åº”ç”¨ç¨‹åºåˆ†ç¦»ï¼‰ï¼Œé€šè¿‡ <code>cy.get()</code> ç›´æ¥è®¿é—® UIï¼Œè¿˜å¯ä»¥è®¿é—® APIã€æ•°æ®åº“ï¼Œç”šè‡³å¯ä»¥è®¿é—®æºä»£ç ã€‚</p>
<p>åº”ç”¨ç¨‹åºæ“ä½œæ˜¯ä¸€ç§å¿«æ·æ–¹å¼ï¼Œå…è®¸ä½ è®¿é—®å†…éƒ¨å·¥å…·ä»¥èŠ‚çœæ—¶é—´ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­å¯ä»¥æ˜¯ä¸€ä¸ª <code>cy.signup()</code> è‡ªå®šä¹‰å‘½ä»¤ï¼Œè¯¥å‘½ä»¤è¿›å…¥æ³¨å†Œè¡¨å•å¹¶è°ƒç”¨æ³¨å†Œè¡¨å•çš„å›è°ƒï¼Œè€Œä¸æ˜¯å¡«å†™è¡¨å•å¹¶ç‚¹å‡»æ³¨å†ŒæŒ‰é’®ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¿«é€Ÿç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†åœ¨ Angular åº”ç”¨ç¨‹åºä¸­å¦‚ä½•å…è®¸ Cypress è®¿é—®æºä»£ç ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// Angular Component file example</span></span>
<span class="line"><span style="color:#6A737D">/* setup:</span></span>
<span class="line"><span style="color:#6A737D"> 1. Identify the component in the DOM;</span></span>
<span class="line"><span style="color:#6A737D">  inspect and find the corresponding &lt;app.. tag,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"> 2. Right in the constructor of your component, insert conditional */</span></span>
<span class="line"><span style="color:#B392F0">constructor</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#6A737D">  /* ... */</span></span>
<span class="line"><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  /* if running inside Cypress tests, set the component</span></span>
<span class="line"><span style="color:#6A737D">  may need // @ts-ignore initially */</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (window.Cypress) {</span></span>
<span class="line"><span style="color:#E1E4E8">    window.yourComponent </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// at https://github.com/naodeng/ui-testing-best-practices/blob/master/https://github.com/naodeng/ui-testing-best-practices/blob/master/support/app-actions.ts helper file:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">/** yields  window.yourComponent */</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> yourComponent</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">window</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;have.property&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;yourComponent&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">/** yields the data property on your component */</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> getSomeListData</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span></span>
<span class="line"><span style="color:#B392F0"> yourComponent</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;have.property&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;data&#39;</span><span style="color:#E1E4E8">);</span></span></code></pre>
<p>åœ¨è¿™ä¹‹åï¼Œåœ¨ DevTools ä¸­æŸ¥çœ‹è¯¥ç»„ä»¶å…è®¸çš„å±æ€§ï¼Œæˆ–è€…åœ¨ç»„ä»¶ä»£ç ä¸­æŸ¥çœ‹ä½ å¯ä»¥ä½¿ç”¨ <code>.invoke()</code> è¿›è¡Œçš„å‡½æ•°ã€‚</p>
<p>å¯ä»¥æŸ¥çœ‹ <a href="https://cypress.slides.com/cypress-io/siemens-case-study#/12/3/4">æ¼”ç¤ºå¹»ç¯ç‰‡</a> è·å–ä¸€ä¸ªä½¿ç”¨åº”ç”¨ç¨‹åºæ“ä½œè¿›è¡Œè§†è§‰æµ‹è¯•çš„ä»£ç ç¤ºä¾‹ã€‚</p>
<h4 id="å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæ“ä½œçš„ç¤ºä¾‹åˆ©ç”¨çŠ¶æ€ä½¿ç”¨-siemens-çš„-building-operator-siemens-çš„å»ºç­‘æ§åˆ¶äº§å“">å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæ“ä½œçš„ç¤ºä¾‹ï¼Œåˆ©ç”¨çŠ¶æ€ï¼Œä½¿ç”¨ Siemens çš„ <a href="https://new.siemens.com/us/en/products/buildingtechnologies/automation/talon/software/building-operator.html?stc=ussi100451&sp_source=ussi100451&&s_kwcid=AL!464!3!435315652461!b!!g!!%2Bbuilding%20%2Boperator&ef_id=CjwKCAjw8df2BRA3EiwAvfZWaAsQmgot5Ph-nGBB8rW1QLLr870q2HW-qzMKhqtQb1QvlPBVJxho5BoCmtMQAvD_BwE:G:s">Building Operator</a> Siemens çš„å»ºç­‘æ§åˆ¶äº§å“</h4>
<p>åœ¨ä¸‹é¢çš„çŠ¶æ€å›¾ä¸­æœ‰ 3 ä¸ªçŠ¶æ€ã€‚æˆ‘ä»¬ä»å·¦å³ä¸¤ä¸ªçª—æ ¼éƒ½å­˜åœ¨çš„åœ°æ–¹å¼€å§‹ã€‚å¦‚æœåˆ é™¤å³çª—æ ¼ï¼ˆåˆ é™¤ç‚¹/çº¢è‰²æµï¼‰ï¼Œåˆ™åªå‰©ä¸‹å·¦çª—æ ¼ã€‚å¦‚æœåˆ é™¤å·¦çª—æ ¼ï¼ˆåˆ é™¤è®¾å¤‡ - è“è‰²æµï¼‰ï¼Œä¸¤ä¸ªçª—æ ¼éƒ½æ¶ˆå¤±ï¼Œå¹¶ä¸” UI è¢«é‡å®šå‘ã€‚</p>
<p><img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/ui-state/delete-states.PNG?raw=true" alt="åˆ é™¤å»ºç­‘ç‚¹å’Œæ§åˆ¶å™¨"/></p>
<p>åœ¨æµ‹è¯• UI æ—¶ï¼Œä½ å¯èƒ½é€‰æ‹©åˆ é™¤å³çª—æ ¼ï¼ˆçº¢è‰²æµï¼‰ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªæµ‹è¯•ä¸­ï¼Œä½ å¯èƒ½é€‰æ‹©åˆ é™¤å·¦çª—æ ¼ï¼ˆè“è‰²æµï¼‰ã€‚è¿™é—æ¼äº†é€šè¿‡çŠ¶æ€å›¾çš„æœ€åä¸€æ¡è·¯å¾„ï¼Œå…¶ä¸­å³çª—æ ¼å’Œå·¦çª—æ ¼è¢«é€ä¸€åˆ é™¤ã€‚</p>
<p>æˆ‘ä»¬å·²ç»åœ¨ä¸€ä¸ª UI æµ‹è¯•ä¸­æ¶µç›–äº†åˆ é™¤å³çª—æ ¼ï¼ˆçº¢è‰²è·¯å¾„ï¼‰ã€‚ä¸ºä»€ä¹ˆä¸é¿å…é‡å¤è¿›è¡Œæ­¤æµ‹è¯•ï¼Œåˆ©ç”¨åº”ç”¨ç¨‹åºæ“ä½œï¼Œè·å–æºä»£ç ä¸­çš„åˆ é™¤å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ <code>cy.invoke()</code> è°ƒç”¨å®ƒå‘¢ï¼Ÿ</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#B392F0">it</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;Component test: delete right pane and then left&#39;</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  /* tests a SEQUENCE not covered with UI tests</span></span>
<span class="line"><span style="color:#6A737D">   * tests a COMBINATION of components */</span></span>
<span class="line"><span style="color:#E1E4E8">  appAction.</span><span style="color:#B392F0">deleteRightPane</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">window</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;not.have.property&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;rightPaneComponent&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">window</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;have.property&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;leftPaneComponent&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  appAction.</span><span style="color:#B392F0">deleteLeftPane</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">window</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;not.have.property&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;leftPaneComponent&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">window</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;not.have.property&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;rightPaneComponent&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">url</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;match&#39;</span><span style="color:#E1E4E8">, redirectRoute);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<h4 id="åº”ç”¨ç¨‹åºæ“ä½œçš„ä¼˜ç¼ºç‚¹">åº”ç”¨ç¨‹åºæ“ä½œçš„ä¼˜ç¼ºç‚¹</h4>
<p>ä½¿ç”¨åº”ç”¨ç¨‹åºæ“ä½œ/æ‹¥æœ‰ç»„ä»¶è®¿é—®é€Ÿåº¦å¾ˆå¿«ï¼æµ‹è¯•ä¸å¤ªå®¹æ˜“å—åˆ°å˜åŒ–çš„å½±å“ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ˜¯åœ¨è¾ƒä½çº§åˆ«è¿›è¡Œæµ‹è¯•çš„å¥½å¤„ã€‚ç„¶è€Œï¼Œå¯¹äºå·¥ç¨‹å¸ˆè€Œè¨€ï¼Œè¿™å¯èƒ½ä¼šå˜å¾—è®©äººä¸Šç˜¾ï¼Œå¼€å§‹å¿½è§†å¯¹ç”¨æˆ·ç•Œé¢çš„æµ‹è¯•ï¼›ä¼˜åŠ¿å¯èƒ½å˜æˆåŠ£åŠ¿ã€‚</p>
<p>æœ‰ä¸€äº›åå¯¹åº”ç”¨ç¨‹åºçš„è®ºç‚¹ã€‚å¼€å‘äººå‘˜å¯èƒ½è®¤ä¸º Cypress å¯¹æºä»£ç çš„è®¿é—®ä¸ç†æƒ³ã€‚åœ¨ Cypress å…·æœ‰å®˜æ–¹ç»„ä»¶æµ‹è¯•æ”¯æŒä¹‹å‰ï¼Œè¿™æ²¡æœ‰åé©³çš„ç†ç”±ã€‚</p>
<p>åº”ç”¨ç¨‹åºæ“ä½œçš„çœŸæ­£å¨åŠ›åœ¨äºå°†åº”ç”¨ç¨‹åºæ“ä½œä¸å…¶ä»–æŠ€æœ¯ç»“åˆä½¿ç”¨æ—¶æ˜¾ç°å‡ºæ¥ï¼›ä¸é‡å¤ UI å·¥ä½œæµç¨‹æ¥è®¾ç½®çŠ¶æ€ï¼Œå°†ç»„ä»¶æµ‹è¯•ä¸è§†è§‰æµ‹è¯•ç»“åˆä½¿ç”¨ï¼Œå°†ç»„ä»¶æµ‹è¯•ä¸ç½‘ç»œæ“ä½œç»“åˆä½¿ç”¨ï¼Œè¿™äº›éƒ½æ˜¯è¿™ç§æ–¹æ³•çš„äº®ç‚¹æ‰€åœ¨ã€‚</p>
<h3 id="ç½‘ç»œå­˜æ ¹è®°å½•å’Œå›æ”¾">ç½‘ç»œå­˜æ ¹è®°å½•å’Œå›æ”¾</h3>
<p>è¿™æ˜¯ä¸€ç§ä¸ UI é›†æˆæµ‹è¯•å¯†åˆ‡ç›¸å…³çš„é«˜çº§æŠ€æœ¯ã€‚å›é¡¾ UI é›†æˆå‚è€ƒ <a href="https://github.com/naodeng/ui-testing-best-practices/blob/master/sections/testing-strategy/component-vs-integration-vs-e2e-testing.zh.md">1</a>, <a href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/real-life-examples/test-front-end-with-integration-back-end-with-e2e.md">2</a>ã€‚</p>
<p>Cypress å…è®¸ä½ å¯¹æ‰€æœ‰ç½‘ç»œæµé‡è¿›è¡Œå­˜æ ¹ã€‚æˆ‘ä»¬å¯ä»¥è®°å½•æ¥è‡ªä¸€ä¸ªç«¯ç‚¹çš„ç½‘ç»œæ•°æ®ï¼Œå¹¶åœ¨ UI æ¯æ¬¡è°ƒç”¨ä»»æ„æœåŠ¡å™¨æ—¶å­˜æ ¹è¯¥å“åº”ã€‚</p>
<p>é¦–å…ˆï¼Œä»å¼€å‘è€…å·¥å…·å¤åˆ¶ç½‘ç»œæ•°æ®åˆ°ä¸€ä¸ª json æ–‡ä»¶ä¸­ã€‚å°†å…¶æ”¾ç½®åœ¨ <code>cypress/fixtures</code> æ–‡ä»¶å¤¹ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹ä¸“ä¸ºæ­¤ç›®çš„è€Œåˆ›å»ºï¼Œå¯¹å®ƒçš„ä»»ä½•å¼•ç”¨éƒ½å°†é»˜è®¤æŒ‡å‘æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ã€‚</p>
<p><img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/ui-state/devtools-network.PNG?raw=true" alt="å¼€å‘è€…å·¥å…· > ç½‘ç»œé€‰é¡¹å¡"/></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// prerequisite: the data has been copied to a file `cypress/fixtures/agents.json`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// this is a shorthand for cy.fixture(). More at https://docs.cypress.io/api/commands/fixture.html#Accessing-Fixture-Data</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">intercept</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;some-xhr-call-that-happens-upon-landing&#39;</span><span style="color:#E1E4E8">, { fixture: </span><span style="color:#9ECBFF">&#39;agents.json&#39;</span><span style="color:#E1E4E8">} ).</span><span style="color:#B392F0">as</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;crutcXHR&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">// all calls to the network route will be stubbed by the data in agents.json file</span></span></code></pre>
<h4 id="å¦‚æœæœ‰å¾ˆå¤šç½‘ç»œè¯·æ±‚å‘ç”Ÿæ€ä¹ˆåŠ">å¦‚æœæœ‰å¾ˆå¤šç½‘ç»œè¯·æ±‚å‘ç”Ÿæ€ä¹ˆåŠï¼Ÿ</h4>
<p>æˆ‘ä»¬ä»å“ªé‡Œè·å–æ‰€æœ‰çš„æ¨¡æ‹Ÿæ•°æ®ï¼Ÿæˆ‘ä»¬ä¸æƒ³æ‰‹åŠ¨å¤åˆ¶å’Œä¿å­˜å®ƒä»¬ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨æµ‹è¯•è¿è¡Œæ—¶è®°å½•å®ƒä»¬ï¼Œä»¥ä¾¿ä¸çœŸå®çš„ API è¿›è¡Œæ¯”å¯¹ã€‚</p>
<p>è‡³å°‘æœ‰ä¸¤ä¸ª Cypress æ’ä»¶å¯ä»¥ç”¨äºè¿™ä¸ªç›®çš„ <a href="https://github.com/Nanciee/cypress-autorecord">1</a> å’Œ <a href="https://github.com/scottschafer/cypressautomocker">2</a>ã€‚</p>
<p>å¦‚æœè¿™äº›æ’ä»¶ä¸é€‚ç”¨äºä½ ï¼Œä½ å¯ä»¥è½»æ¾ä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°åˆ›å»ºè‡ªå·±çš„è®°å½•å’Œå›æ”¾å·¥å…·ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> stubRecorder</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">pathToJson</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> xhrData</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> []; </span><span style="color:#6A737D">// an empty array to hold the data</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">server</span><span style="color:#E1E4E8">({ </span><span style="color:#6A737D">// if recording, save the response data in the array</span></span>
<span class="line"><span style="color:#B392F0">    onResponse</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">response</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> url</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> response.url;</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> method</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> response.method;</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> data</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> response.response.body;</span></span>
<span class="line"><span style="color:#6A737D">      // We push a new entry into the xhrData array</span></span>
<span class="line"><span style="color:#E1E4E8">      xhrData.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">({ url, method, data });</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // cy.intercept() specification below is used as a selector for the data you want to record.</span></span>
<span class="line"><span style="color:#6A737D">  // In this example, all GET requests from any url will be selected</span></span>
<span class="line"><span style="color:#6A737D">  // You can specify the methods and routes that are recorded</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;recording!&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">intercept</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">    method: </span><span style="color:#9ECBFF">&#39;GET&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    url: </span><span style="color:#9ECBFF">&#39;*&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // if recording, after the test runs, create a fixture file with the recorded data</span></span>
<span class="line"><span style="color:#B392F0">  after</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#E1E4E8">    cy.</span><span style="color:#B392F0">writeFile</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`./cypress/fixtures/${</span><span style="color:#E1E4E8">pathToJson</span><span style="color:#9ECBFF">}.json`</span><span style="color:#E1E4E8">, xhrData);</span></span>
<span class="line"><span style="color:#E1E4E8">    cy.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`Wrote ${</span><span style="color:#E1E4E8">xhrData</span><span style="color:#9ECBFF">.</span><span style="color:#79B8FF">length</span><span style="color:#9ECBFF">} XHR responses to local file ${</span><span style="color:#E1E4E8">pathToJson</span><span style="color:#9ECBFF">}.json`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">/** Plays recorded fixture with all required network data as json*/</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> playStubbedFixture</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">stateFixture</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`playing fixture from ${</span><span style="color:#E1E4E8">stateFixture</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">fixture</span><span style="color:#E1E4E8">(stateFixture, { timeout: </span><span style="color:#79B8FF">15000</span><span style="color:#E1E4E8"> }) </span><span style="color:#6A737D">// the fixture file may be large and take time in CI</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">each</span><span style="color:#E1E4E8">(({</span><span style="color:#FFAB70">method</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">data</span><span style="color:#E1E4E8">}) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      cy.</span><span style="color:#B392F0">intercept</span><span style="color:#E1E4E8">(method, url, data);</span></span>
<span class="line"><span style="color:#E1E4E8">    }).</span><span style="color:#B392F0">as</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`stateFixture_stub`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">/** Visits the stubbed state */</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> visitStubbedState</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">stubFile</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">wait</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> boolean</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#B392F0">  playStubbedFixture</span><span style="color:#E1E4E8">(stubFile);</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">visit</span><span style="color:#E1E4E8">(url);</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (wait) { </span><span style="color:#6A737D">// sometimes you do not want to wait for network, this gives you the option</span></span>
<span class="line"><span style="color:#E1E4E8">    cy.</span><span style="color:#B392F0">wait</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;@stateFixture_stub&#39;</span><span style="color:#E1E4E8">, { timeout: </span><span style="color:#79B8FF">15000</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//////////</span></span>
<span class="line"><span style="color:#6A737D">// usage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// recording network</span></span>
<span class="line"><span style="color:#B392F0">it</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;should run your test&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#B392F0">  stubrecorder</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;jsonfileNameForNetworkData&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // your original test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">wait</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">5000</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// one-time wait so that the after() step records all the network without missing anything</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // the rest of your original test</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// playing the stubbed network</span></span>
<span class="line"><span style="color:#B392F0">it</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;should run your test&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#6A737D">  // every time we visit this endpoint, all network will be stubbed</span></span>
<span class="line"><span style="color:#6A737D">  // double check this by observing (XHR stubbed) network responses in the test runner</span></span>
<span class="line"><span style="color:#B392F0">  visitStubbedState</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;jsonfileNameForNetworkData&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;/endpoint&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // the rest of your original test</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<h4 id="ç½‘ç»œå­˜æ ¹è®°å½•å’Œå›æ”¾çš„ä¼˜ç¼ºç‚¹">ç½‘ç»œå­˜æ ¹è®°å½•å’Œå›æ”¾çš„ä¼˜ç¼ºç‚¹</h4>
<p>UI é›†æˆæµ‹è¯•æ˜¯ UI æµ‹è¯•çš„æ ¸å¿ƒã€‚å®ƒä»¬åœ¨çœŸå®æµè§ˆå™¨ä¸­è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œè€Œä¸è¿æ¥çœŸå®æœåŠ¡å™¨ã€‚å®ƒä»¬è¿è¡Œé€Ÿåº¦æå¿«ï¼Œå¯¹ç½‘ç»œä¸­çš„éšæœºæ•…éšœæˆ–é”™è¯¯è´Ÿé¢å½±å“è¾ƒå°ã€‚</p>
<p>å·¥ç¨‹å¸ˆä»¬å¿…é¡»è®¤è¯†åˆ°ï¼Œè¿™ç§ä¼˜åŠ¿å¦‚æœè¢«æ»¥ç”¨å¯èƒ½æˆä¸ºä¸€ç§è¯…å’’ã€‚UI åº”ç”¨ç¨‹åºæ˜¯éš”ç¦»çš„ï¼Œä½†å¦‚æœæœ‰ç½‘ç»œæ•…éšœï¼Œå®ƒä»¬ä¼šè¢«å¿½ç•¥ã€‚è¿™å¯¹äºåŠŸèƒ½åˆ†æ”¯æµ‹è¯•éå¸¸æœ‰ç”¨ï¼Œä½†åœ¨è¿›ä¸€æ­¥çš„éƒ¨ç½²ä¸­ï¼Œåº”ç¡®ä¿åç«¯ä¹Ÿæ­£å¸¸è¿è¡Œã€‚è¯·å‚é˜… <a href="https://github.com/naodeng/ui-testing-best-practices/blob/master/real-life-examples/test-front-end-with-integration-back-end-with-e2e.zh.md">ä½¿ç”¨é›†æˆæµ‹è¯•å‰ç«¯ï¼ŒåŒæ—¶ä½¿ç”¨ E2E æµ‹è¯•åç«¯</a> äº†è§£ä½•æ—¶ä½¿ç”¨å“ªç§æŠ€æœ¯ã€‚</p>
<h3 id="å¡«å……æ•°æ®åº“">å¡«å……æ•°æ®åº“</h3>
<p>Cypress <a href="https://docs.cypress.io/api/commands/task.html#Requirements"><code>cy.task()</code></a> åŠŸèƒ½éå¸¸å¼ºå¤§ã€‚å®é™…ä¸Šï¼Œå®ƒå…è®¸ä½ åœ¨ Cypress ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ Node.jsã€‚è¿™å¯ä»¥æ˜¯ä»»ä½•å†…å®¹ï¼Œä» Node.js ä»£ç åˆ°ä½¿ç”¨ npm åŒ…æ¥æ“çºµæ•°æ®åº“ã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä½¿ç”¨ Node.jsï¼Œä½ å¯ä»¥é‡ç”¨åº”ç”¨ç¨‹åºä»£ç æ¥å¸®åŠ©è®¾ç½®å’Œæ“çºµæµ‹è¯•æ•°æ®ã€‚</p>
<p>å…³äºè¿™ä¸ªä¸»é¢˜æœ‰ä¸€ä¸ª <a href="https://github.com/cypress-io/cypress-example-recipes/tree/master/examples/server-communication__seeding-database-in-node">Cypress ç¤ºä¾‹</a>ï¼Œæˆ‘ä»¬å°†ä»¥æ­¤ä½œä¸ºå‚è€ƒç»“æŸã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:<a href="https://github.com/NoriSte/ui-testing-best-practices">https://github.com/NoriSte/ui-testing-best-practices</a></li>
<li>UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:<a href="https://github.com/naodeng/ui-testing-best-practices">https://github.com/naodeng/ui-testing-best-practices</a></li>
</ul>
<hr/>
<p>æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œ<strong>è½¯ä»¶æµ‹è¯•åŒå­¦</strong>â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚</p>


<div style="text-align: center"><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/2023112015'QR Code for å…¬ä¼—å·.jpg" style="width: 100px;"/></div>

 </div> </div> </div> <aside class="article-sidebar" aria-label="ä¾§æ " data-astro-cid-v3cnrnum> <aside class="author-stats-card" aria-label="nao.deng" data-astro-cid-5orn7bli> <a href="/zh-cn/" class="author-avatar-link" data-astro-cid-5orn7bli> <img src="/favicon.svg" alt="nao.deng" class="author-avatar" width="80" height="80" data-astro-cid-5orn7bli> </a> <h3 class="author-name" data-astro-cid-5orn7bli>nao.deng</h3> <p class="author-slogan" data-astro-cid-5orn7bli>è´¨é‡åˆ†æå¸ˆï¼Œè€Œéè´¨é‡ä¿è¯å¸ˆã€‚</p> <hr class="author-divider" data-astro-cid-5orn7bli> <div class="author-stats" data-astro-cid-5orn7bli> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>æ–‡ç« </span> <span class="stat-value" data-astro-cid-5orn7bli>176</span> </div> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>åˆ†ç±»</span> <span class="stat-value" data-astro-cid-5orn7bli>38</span> </div> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>æ ‡ç­¾</span> <span class="stat-value" data-astro-cid-5orn7bli>43</span> </div> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>å­—æ•°</span> <span class="stat-value" data-astro-cid-5orn7bli>1682k</span> </div> </div> </aside>  <aside class="toc-sidebar toc-sidebar--below" aria-label="ç›®å½•" data-astro-cid-xvrfupwn><nav class="toc-nav" data-astro-cid-xvrfupwn><h2 class="toc-title" data-astro-cid-xvrfupwn>ç›®å½•</h2><ul class="toc-list" data-astro-cid-xvrfupwn><li class="toc-item" style="--depth: 2" data-astro-cid-xvrfupwn><a href="#ui-æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µ" class="toc-link" data-astro-cid-xvrfupwn>UI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µ</a></li><li class="toc-item" style="--depth: 2" data-astro-cid-xvrfupwn><a href="#åœ¨æµ‹è¯•ä¸­è¾¾åˆ°-ui-çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨-ui" class="toc-link" data-astro-cid-xvrfupwn>åœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI</a></li><li class="toc-item" style="--depth: 2" data-astro-cid-xvrfupwn><a href="#å‚è€ƒèµ„æ–™" class="toc-link" data-astro-cid-xvrfupwn>å‚è€ƒèµ„æ–™</a></li></ul></nav></aside><script type="module">function d(){const t=document.querySelector(".toc-sidebar--left"),a=t?.closest(".article-with-toc"),u=document.querySelector(".article-main"),l=document.querySelector(".l-footer");if(!t||!a)return;const i=a.getBoundingClientRect(),w=i.top>=window.innerHeight,h=i.bottom>0&&i.top<window.innerHeight;if(w){t.style.position="absolute",t.style.top="0",t.style.bottom="";return}t.style.position="fixed";const o=document.querySelector(".article-title-header, #article-title-header"),r=o?o.getBoundingClientRect().top:i.top,n=h?Math.max(16,r):16;t.style.top=n+"px";let e;if(h){const c=i.bottom<window.innerHeight;u&&c?e=Math.max(16,window.innerHeight-i.bottom):e=288;const s=Math.max(200,Math.floor(window.innerHeight*.7));window.innerHeight-n-e<s&&(e=Math.max(16,window.innerHeight-n-s))}else e=288;if(l){const c=l.getBoundingClientRect(),s=window.innerHeight-c.top+8;e=Math.max(e,s)}else e=Math.max(e,288);t.style.bottom=e+"px"}function g(){const t=document.querySelector(".toc-sidebar"),a=document.querySelector(".article-main");if(!t||!a)return;const u=t.querySelectorAll(".toc-link"),l=a.querySelectorAll("h2[id], h3[id], h4[id]");if(u.length===0||l.length===0)return;const i=o=>{let r=null;u.forEach(c=>{const f=c.getAttribute("href")===`#${o}`;c.setAttribute("aria-current",f?"true":"false"),f&&(r=c)});const n=document.querySelector(".l-footer"),e=n&&n.getBoundingClientRect().top<window.innerHeight;r&&!e&&t.scrollHeight>t.clientHeight&&r.scrollIntoView({block:"nearest",behavior:"smooth"})},w=new IntersectionObserver(o=>{const r=o.filter(n=>n.isIntersecting).sort((n,e)=>{const c=(n.boundingClientRect?.top??0)+window.scrollY,s=(e.boundingClientRect?.top??0)+window.scrollY;return c-s});r.length>0&&i(r[0].target.id)},{rootMargin:"-80px 0px -66% 0px",threshold:0});l.forEach(o=>w.observe(o));const h=Array.from(l).find(o=>o.getBoundingClientRect().top<=window.innerHeight*.5);i(h?.id??l[0]?.id??null)}function m(){d(),g()}document.addEventListener("DOMContentLoaded",m);window.addEventListener("load",d);window.addEventListener("load",()=>setTimeout(d,50));window.addEventListener("scroll",()=>d(),{passive:!0});window.addEventListener("resize",()=>d());typeof ResizeObserver<"u"&&document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".article-with-toc");t&&new ResizeObserver(()=>d()).observe(t)});</script> </aside> </div>  </article>  </main> <footer class="l-footer" data-astro-cid-sz7xmlte> <div class="footer-container l-content" data-astro-cid-sz7xmlte> <!-- ç¤¾äº¤ä¸è¯­è¨€åˆ‡æ¢åŒºåŸŸ --> <div class="social-links" data-astro-cid-sz7xmlte> <a href="https://github.com/naodeng" target="_blank" rel="noopener noreferrer" title="GitHub" class="social-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" data-astro-cid-sz7xmlte></path></svg>      </a><a href="https://x.com/inaodeng" target="_blank" rel="noopener noreferrer" title="X" class="social-icon" data-astro-cid-sz7xmlte>  <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M18.901 1.153h3.68l-8.04 4.617L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z" data-astro-cid-sz7xmlte></path></svg>     </a><a href="https://naodeng.medium.com/" target="_blank" rel="noopener noreferrer" title="Medium" class="social-icon" data-astro-cid-sz7xmlte>   <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42S14.2 15.54 14.2 12s1.51-6.42 3.38-6.42 3.38 2.88 3.38 6.42zM24 12c0 3.17-.53 5.75-1.19 5.75s-1.19-2.58-1.19-5.75.53-5.75 1.19-5.75S24 8.83 24 12z" data-astro-cid-sz7xmlte></path></svg>    </a><a href="https://weibo.com/u/1651778270" target="_blank" rel="noopener noreferrer" title="Weibo" class="social-icon" data-astro-cid-sz7xmlte>    <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M10.08 18.12c-3.12 0-5.64-1.32-5.64-3 0-1.68 2.52-3 5.64-3s5.64 1.32 5.64 3c0 1.68-2.52 3-5.64 3zm13.92-10.8c-.24-.48-.72-.72-1.2-.72h-.24c-1.2.24-2.16 1.44-2.16 2.88 0 1.44.96 2.64 2.16 2.88h.24c.48 0 .96-.24 1.2-.72.24-.48.24-1.2 0-1.68-.24-.48-.24-1.2 0-1.68.24-.48.24-1.2 0-1.68zm-3.36 1.2c-.48-.24-.96-.48-1.44-.48h-.24c-1.44.24-2.64 1.68-2.64 3.36 0 1.68 1.2 3.12 2.64 3.36h.24c.48 0 .96-.24 1.44-.48.48-.24.72-.72.72-1.2 0-.48-.24-.96-.72-1.2-.48-.24-.48-1.2 0-1.44.48-.24.72-.72.72-1.2 0-.48-.24-.96-.72-1.2zM12 2.4c-6.6 0-12 4.08-12 9.12 0 5.04 5.4 9.12 12 9.12s12-4.08 12-9.12c0-5.04-5.4-9.12-12-9.12zm0 15.6c-4.68 0-8.4-2.88-8.4-6.48 0-3.6 3.72-6.48 8.4-6.48s8.4 2.88 8.4 6.48c0 3.6-3.72 6.48-8.4 6.48z" data-astro-cid-sz7xmlte></path></svg>   </a><a href="https://ko-fi.com/naodeng" target="_blank" rel="noopener noreferrer" title="Ko-fi" class="social-icon" data-astro-cid-sz7xmlte>     <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.724c-.604 0-.724.467-.724.467s-.024 11.297 0 14.554c.024 3.258 1.821 4.622 1.821 4.622h12.012c.604 0 .724-.467.724-.467s.024-1.109 0-3.178l.232-.039c4.085-.691 9.113-2.34 9.092-11.361zm-4.805 7.403c-1.053.196-2.306.26-3.509.216l.103-8.847c.301-.004.621.005.952.026 3.29.21 4.269 2.739 4.256 5.075-.012 2.337-.791 3.33-1.802 3.53z" data-astro-cid-sz7xmlte></path></svg>  </a><a href="mailto:dengnao@gmail.com" target="_blank" rel="noopener noreferrer" title="Email" class="social-icon" data-astro-cid-sz7xmlte>      <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="/en/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/" class="social-icon lang-toggle" title="Switch to English" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte> <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 5.11.76-1.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" data-astro-cid-sz7xmlte></path> </svg> <span class="lang-label" data-astro-cid-sz7xmlte>EN</span> </a> </div> <!-- åº•éƒ¨æ¬¡çº§å¯¼èˆª --> <nav class="footer-nav" data-astro-cid-sz7xmlte> <a href="/zh-cn/about/" data-astro-cid-sz7xmlte>å…³äº</a> <a href="/zh-cn/archive/" data-astro-cid-sz7xmlte>å½’æ¡£</a> <a href="/zh-cn/projects/" data-astro-cid-sz7xmlte>é¡¹ç›®</a> <a href="/zh-cn/series/" data-astro-cid-sz7xmlte>ç³»åˆ—</a> <a href="/zh-cn/tags/" data-astro-cid-sz7xmlte>æ ‡ç­¾</a> <a href="/zh-cn/sponsor/" data-astro-cid-sz7xmlte>æ”¯æŒ</a> <a href="https://status.inaodeng.com" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte>çŠ¶æ€</a> <a href="/zh-cn/rss.xml/" target="_blank" data-astro-cid-sz7xmlte>è®¢é˜… RSS</a> <a href="/zh-cn/sitemap/" data-astro-cid-sz7xmlte>ç«™ç‚¹åœ°å›¾</a> </nav> <!-- ç‰ˆæƒä¸è®¸å¯åŒºåŸŸ --> <div class="footer-info" data-astro-cid-sz7xmlte> <p class="footer-slogan" data-astro-cid-sz7xmlte>è´¨é‡åˆ†æå¸ˆï¼Œè€Œéè´¨é‡ä¿è¯å¸ˆã€‚</p> <div class="copyright" data-astro-cid-sz7xmlte> <a class="copy-link" href="https://inaodeng.com/" data-astro-cid-sz7xmlte>
Â© 2026 è½¯ä»¶æµ‹è¯•åŒå­¦ </a> <span class="separator" data-astro-cid-sz7xmlte>|</span> <span class="license" data-astro-cid-sz7xmlte>éµå¾ª CC BY-NC-SA 4.0 è®¸å¯åè®®</span> </div> <div class="tech-stack" data-astro-cid-sz7xmlte> <span class="built-with" data-astro-cid-sz7xmlte>ç”± Astro &amp; Cloudflare &amp; Github &amp; AI é©±åŠ¨</span> <div class="tech-icons" data-astro-cid-sz7xmlte> <a href="https://astro.build" target="_blank" rel="noopener noreferrer" title="Astro" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M16.62 8.35l-5.67 10.8c-.18.34-.64.34-.82 0L4.38 8.35c-.19-.34.09-.7.41-.7h11.22c.32 0 .6.36.41.7zM12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm0 22C6.48 22 2 17.52 2 12S6.48 2 12 2s10 4.48 10 10-4.48 10-10 10z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://www.cloudflare.com" target="_blank" rel="noopener noreferrer" title="Cloudflare" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M16.5 10.5h-9c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h9c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5zm-4.5 4.5h-4.5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5H12c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5zm9-12H3c-1.7 0-3 1.3-3 3v9c0 1.7 1.3 3 3 3h18c1.7 0 3-1.3 3-3v-9c0-1.7-1.3-3-3-3zm0 12H3V6h18v10.5z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com" target="_blank" rel="noopener noreferrer" title="GitHub" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" data-astro-cid-sz7xmlte></path></svg> </a> <span title="AI" class="tech-icon tech-icon-ai" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" data-astro-cid-sz7xmlte></path></svg> </span> </div> </div> </div> </div> </footer>  <dialog id="search-dialog" class="search-dialog" aria-label="æœç´¢æ–‡ç« â€¦" data-astro-cid-qk3db3zz> <div class="search-backdrop" data-close data-astro-cid-qk3db3zz></div> <div class="search-box" data-astro-cid-qk3db3zz> <label for="search-input" class="visually-hidden" data-astro-cid-qk3db3zz>æœç´¢æ–‡ç« â€¦</label> <input id="search-input" type="search" class="search-input" placeholder="æœç´¢æ–‡ç« â€¦" autocomplete="off" enterkeyhint="search" data-astro-cid-qk3db3zz> <span class="search-hint" data-hint data-astro-cid-qk3db3zz>âŒ˜K æˆ– Ctrl+K æ‰“å¼€æœç´¢</span> </div> <div class="search-results" id="search-results" role="list" data-astro-cid-qk3db3zz></div> <p class="search-empty" id="search-empty" hidden data-astro-cid-qk3db3zz>æš‚æ— ç»“æœã€‚</p> </dialog> <script type="module">const o=document.getElementById("search-dialog"),l=document.getElementById("search-input"),s=document.getElementById("search-results"),u=document.getElementById("search-empty"),p=document.querySelector(".search-backdrop[data-close]"),a=document.querySelector("[data-hint]");let r=[],i="en";function y(){return document.documentElement.getAttribute("data-locale")==="zh-cn"?"zh-cn":"en"}async function E(){if(r.length>0)return r;i=y();const e=await fetch(`/${i}/search-index.json`);return e.ok?(r=await e.json(),r):[]}function f(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function g(e,t){s.innerHTML="",s.hidden=e.length===0,u.hidden=e.length>0||!t,e.slice(0,20).forEach(n=>{const c=document.createElement("a");c.href=n.url,c.className="search-result-item",c.setAttribute("role","listitem");const m=new Date(n.date).toLocaleDateString(i==="zh-cn"?"zh-CN":"en-US",{year:"numeric",month:"short",day:"numeric"});c.innerHTML=`
        <span class="search-result-title">${f(n.title)}</span>
        <span class="search-result-meta">${f(m)}${n.tags?.length?" Â· "+n.tags.slice(0,3).join(", "):""}</span>
      `,c.addEventListener("click",()=>o.close()),s.appendChild(c)})}function L(e){const t=e.trim().toLowerCase();return t?r.filter(n=>n.title.toLowerCase().includes(t)||n.description.toLowerCase().includes(t)||n.tags&&n.tags.some(c=>c.toLowerCase().includes(t))):[]}function v(){const e=l.value;if(!r.length){s.hidden=!0,u.hidden=!0;return}const t=e.trim().length>0,n=L(e);g(n,t)}function h(){E().then(()=>{o.showModal(),l.value="",l.focus(),s.hidden=!0,u.hidden=!0,a&&(a.style.display="block")})}function d(){o.close(),a&&(a.style.display="")}o.addEventListener("close",()=>{a&&(a.style.display="")});o.addEventListener("cancel",d);p?.addEventListener("click",d);l.addEventListener("input",v);l.addEventListener("keydown",e=>{if(e.key==="Escape"&&(d(),e.preventDefault()),e.key==="Enter"){const t=s.querySelector(".search-result-item");t&&(t.click(),e.preventDefault())}});document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),o.open?d():h())});document.querySelectorAll("[data-search-open]").forEach(e=>{e.addEventListener("click",h)});window.addEventListener("search-open",h);</script>   </body> </html>  