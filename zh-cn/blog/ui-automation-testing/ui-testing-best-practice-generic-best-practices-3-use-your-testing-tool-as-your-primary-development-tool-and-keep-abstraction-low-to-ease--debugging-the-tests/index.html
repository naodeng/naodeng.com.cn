<!DOCTYPE html><html lang="zh-CN" data-locale="zh-cn"> <head><meta charset="UTF-8"><title>UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆä¸‰ï¼‰ï¼šå°†ä½ çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·å’Œä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯• - è½¯ä»¶æµ‹è¯•åŒå­¦</title><meta name="description" content="naodengï¼Œinaodeng.comï¼Œä¸ªäººåšå®¢ï¼Œè½¯ä»¶æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œæ¥å£æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ•æ·æµ‹è¯•ã€‚"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.17.0"><link rel="alternate" hreflang="en-US" href="https://inaodeng.com/en/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease--debugging-the-tests/"><link rel="alternate" hreflang="zh-CN" href="https://inaodeng.com/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease--debugging-the-tests/"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="icon" sizes="192x192" href="/android-chrome-192x192.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><meta name="color-scheme" content="light dark"><meta property="og:type" content="website"><meta property="og:title" content="UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆä¸‰ï¼‰ï¼šå°†ä½ çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·å’Œä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯• - è½¯ä»¶æµ‹è¯•åŒå­¦"><meta property="og:site_name" content="UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆä¸‰ï¼‰ï¼šå°†ä½ çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·å’Œä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯• - è½¯ä»¶æµ‹è¯•åŒå­¦"><meta property="og:description" content="naodengï¼Œinaodeng.comï¼Œä¸ªäººåšå®¢ï¼Œè½¯ä»¶æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œæ¥å£æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ•æ·æµ‹è¯•ã€‚"><meta property="og:image" content="https://inaodeng.com/ogp.png"><meta property="og:url" content="https://inaodeng.com/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease--debugging-the-tests/"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@inaodeng"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap" media="print" onload="this.media='all'"><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap" media="print" onload="this.media='all'"><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;800&display=swap"><link rel="stylesheet" media="print" onload="this.media='all'" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;800&display=swap"><style>
      body {
        font-family: "Noto Sans SC", sans-serif;
      }
    </style><script async src="https://www.googletagmanager.com/gtag/js?id=G-FSJSZ2E3B9"></script><script>(function(){const gaId = "G-FSJSZ2E3B9";

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', gaId);
    })();</script><style>article[data-astro-cid-uwv4mmhs]{>*{margin-block:1.2em 0;margin-inline:0}p{font-weight:400}h2{margin-block:3em 0;padding-block-end:.2em;border-inline-start:4px solid var(--color-accent);padding-inline-start:var(--sp-s);line-height:1.4;font-size:1.6rem}h3{margin-block:2em 0;padding-block-end:.2em;line-height:1.4;font-size:1.4rem;border-block-end:1px solid color-mix(in srgb,var(--color-main) 10%,transparent)}h4{margin-block:2em -.4em;line-height:1.4;font-size:1.1rem}ul{list-style:disc;padding-inline-start:1.5em}ol{list-style:decimal;padding-inline-start:1.5em}li{margin-block:0 .5em;line-height:1.4}:not(pre) code{font-family:Consolas,Courier New,Courier,Monaco,monospace;color:var(--color-theme);background-color:color-mix(in srgb,var(--color-main) 8%,transparent);padding-block:.2em;padding-inline:.4em;border-radius:2px;font-size:.9rem}blockquote{font-style:italic;color:color-mix(in srgb,var(--color-main) 80%,transparent);background:color-mix(in srgb,var(--color-main) 5%,transparent);padding:1em;border-inline-start:2px solid color-mix(in srgb,var(--color-main) 10%,transparent)}a{text-decoration:underline;color:var(--color-theme);font-weight:500}img{border-radius:4px;background-color:color-mix(in srgb,var(--color-main) 10%,transparent)}pre{direction:ltr;padding:1em;border-radius:4px;border:2px solid color-mix(in srgb,var(--color-main) 20%,transparent)}}header[data-astro-cid-v3cnrnum]{text-align:center;border-block-end:1px solid var(--color-theme);padding-block-end:var(--sp-m);display:flex;flex-direction:column;align-items:center;gap:.5rem}header[data-astro-cid-v3cnrnum] h1[data-astro-cid-v3cnrnum]{color:var(--color-theme);font-size:1.8rem;margin:0}.cover[data-astro-cid-v3cnrnum]{border-radius:16px;margin:0}.tags[data-astro-cid-v3cnrnum]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;margin-block-start:.5rem}.tag[data-astro-cid-v3cnrnum]{background-color:var(--color-theme);color:#fff;padding:.2rem .5rem;border-radius:4px;font-size:.8rem}
</style>
<link rel="stylesheet" href="/_astro/_id_.Cn4Qv-Gv.css"></head> <body> <div id="js-languageSuggest" data-astro-cid-onlux7ho> <a id="js-link" href="#" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>autorenew</span> <span id="js-linkText" data-astro-cid-onlux7ho></span> </a> <button id="js-close" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>close</span> </button> </div> <script>(function(){const currentLocale = "zh-cn";
const LOCALES = {"en":{"label":"English","lang":"en-US"},"zh-cn":{"label":"ç®€ä½“ä¸­æ–‡","lang":"zh-CN"}};

  const browserLang = navigator.language.toLowerCase();
  const suggest = document.getElementById("js-languageSuggest");

  const showSuggest = (lang) => {
    const pathnames = location.pathname.split("/");
    const link = document.getElementById("js-link");
    const linkText = document.getElementById("js-linkText");
    pathnames[1] = lang;
    link.href = pathnames.join("/");
    linkText.innerText = LOCALES[lang].label;
    suggest.style.display = "block";
  };

  if (
    currentLocale === browserLang ||
    currentLocale === browserLang.split("-")[0] ||
    localStorage.languageSuggestDenied ||
    localStorage.selectedLang
  ) {
    return;
  } else if (Object.keys(LOCALES).includes(browserLang)) {
    showSuggest(browserLang);
  } else if (Object.keys(LOCALES).includes(browserLang.split("-")[0])) {
    showSuggest(browserLang.split("-")[0]);
  }

  document.getElementById("js-close").addEventListener("click", () => {
    suggest.style.display = "none";
    localStorage.languageSuggestDenied = true;
  });
})();</script>  <header class="l-header" data-astro-cid-3ef6ksr2> <h1 dir="ltr" data-astro-cid-3ef6ksr2> <a href="/zh-cn/" data-astro-cid-3ef6ksr2> <img src="/favicon.svg" alt="" class="site-logo" width="36" height="36" data-astro-cid-3ef6ksr2> <span data-astro-cid-3ef6ksr2>è½¯ä»¶æµ‹è¯•åŒå­¦</span> </a> </h1> <div class="header-actions" data-astro-cid-3ef6ksr2> <label data-astro-cid-opxux4jt> <span class="material-icons-sharp" data-astro-cid-opxux4jt>translate</span> <select data-languageSelect data-astro-cid-opxux4jt> <option label="English" value="/en/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease--debugging-the-tests/" data-lang="en" data-astro-cid-opxux4jt></option><option label="ç®€ä½“ä¸­æ–‡" value="/zh-cn/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease--debugging-the-tests/" data-lang="zh-cn" selected data-astro-cid-opxux4jt></option> </select> <span class="material-icons-sharp" data-astro-cid-opxux4jt>expand_more</span> </label> <script>
  const selects = document.querySelectorAll("[data-languageSelect]");
  selects.forEach((select) => {
    select.addEventListener("change", (event) => {
      localStorage.selectedLang = event.target?.selectedOptions[0].dataset.lang;
      location.href = event.target?.value;
    });
  });
</script>  <button type="button" class="search-bar-trigger" aria-label="æœç´¢" title="âŒ˜K æˆ– Ctrl+K æ‰“å¼€æœç´¢" data-search-open data-astro-cid-3ef6ksr2> <span class="search-bar-icon material-icons-sharp" aria-hidden="true" data-astro-cid-3ef6ksr2>search</span> <span class="search-bar-placeholder" data-astro-cid-3ef6ksr2>æœç´¢æ–‡ç« â€¦</span> <span class="search-bar-kbd" data-astro-cid-3ef6ksr2><span class="search-bar-kbd-inner" data-astro-cid-3ef6ksr2>âŒ˜ K</span></span> </button> </div> <nav class="l-content" data-astro-cid-3ef6ksr2> <ul data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/" data-astro-cid-3ef6ksr2> é¦–é¡µ </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/blog/" data-astro-cid-3ef6ksr2> åšå®¢ </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/archive/" data-astro-cid-3ef6ksr2> å½’æ¡£ </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/projects/" data-astro-cid-3ef6ksr2> é¡¹ç›® </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/sponsor/" data-astro-cid-3ef6ksr2> èµåŠ© </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/zh-cn/about/" data-astro-cid-3ef6ksr2> å…³äº </a> </li> <li data-astro-cid-3ef6ksr2> <a href="https://github.com/naodeng/inaodeng.com" target="_blank" data-astro-cid-3ef6ksr2>
GitHub
<span class="material-icons-sharp dir" data-astro-cid-3ef6ksr2>open_in_new</span> </a> </li> </ul> </nav> </header>  <main class="l-main l-content">  <article data-astro-cid-uwv4mmhs> <img src="/_astro/UI-Testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease-%20debugging-the-tests-cover.BnyM7GSY_2bWH4C.webp" alt="UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆä¸‰ï¼‰ï¼šå°†ä½ çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·å’Œä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯•" data-astro-cid-v3cnrnum="true" loading="lazy" decoding="async" fetchpriority="auto" width="1200" height="630" class="cover"><header data-astro-cid-v3cnrnum> <h1 data-astro-cid-v3cnrnum>UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆä¸‰ï¼‰ï¼šå°†ä½ çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·å’Œä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯•</h1> <time datetime="2024-01-20T09:06:44.000Z" data-astro-cid-v3cnrnum> 2024/1/20 </time> <div class="tags" data-astro-cid-v3cnrnum> <span class="tag" data-astro-cid-v3cnrnum>UI Testing</span><span class="tag" data-astro-cid-v3cnrnum>Best Practices</span> </div> </header> <p>æ–‡ç« ç”± <a href="https://github.com/NoriSte/ui-testing-best-practices">UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®</a> å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» <a href="https://github.com/NoriSte/ui-testing-best-practices">UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®</a>é˜…è¯»åŸæ–‡ã€‚</p>
<h2 id="å°†æ‚¨çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·">å°†æ‚¨çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·</h2>
<p>åŸæ–‡é“¾æ¥:<a href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/use-your-testing-tool-as-your-primary-development-tool.md">https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/use-your-testing-tool-as-your-primary-development-tool.md</a></p>
<h3 id="ä¸€æ®µç®€è¦è¯´æ˜">ä¸€æ®µç®€è¦è¯´æ˜</h3>
<p>ä¸€ä¸ªå®ä¾‹å±•ç¤ºå‡ºé—®é¢˜çš„æœ¬è´¨ã€‚æ¯”å¦‚è¯´ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªèº«ä»½éªŒè¯è¡¨å•ï¼Œå¯èƒ½çš„æ­¥éª¤æ˜¯ï¼š</p>
<ul>
<li>ç¼–å†™ç”¨æˆ·åè¾“å…¥å­—æ®µçš„ä»£ç </li>
<li><strong>åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨æµ‹è¯•</strong>å®ƒ</li>
<li>ç¼–å†™å¯†ç è¾“å…¥å­—æ®µçš„ä»£ç </li>
<li><strong>åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨æµ‹è¯•</strong>å®ƒ</li>
<li>ç¼–å†™æäº¤æŒ‰é’®çš„ä»£ç </li>
<li>ç¼–å†™ XHR è¯·æ±‚çš„å¤„ç†ä»£ç </li>
</ul>
<p>ç„¶åï¼Œä½ é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºåœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä¸€ä¸ªè™šæ‹Ÿçš„æˆ–æ¨¡æ‹Ÿçš„æœåŠ¡å™¨æ¥å“åº”åº”ç”¨ç¨‹åºçš„ XHR è¯·æ±‚ã€‚<strong>äºæ˜¯ï¼Œä½ å¼€å§‹ç¼–å†™ä¸€ä¸ªé›†æˆæµ‹è¯•</strong>ï¼š</p>
<ul>
<li>å¡«å†™ç”¨æˆ·åè¾“å…¥å­—æ®µ</li>
<li>å¡«å†™å¯†ç è¾“å…¥å­—æ®µ</li>
<li>ç‚¹å‡»æäº¤æŒ‰é’®</li>
<li>æ£€æŸ¥ XHR è¯·æ±‚</li>
<li>æ¨¡æ‹Ÿ XHR çš„å“åº”</li>
<li>æ£€æŸ¥åé¦ˆ</li>
<li>å¯¹æ¯ä¸ªé”™è¯¯æµç¨‹è¿›è¡Œç›¸åŒçš„æµ‹è¯•æ­¥éª¤</li>
<li>ç¼–å†™å¤„ç†é”™è¯¯æµç¨‹çš„ä»£ç </li>
<li>é‡æ–°æ£€æŸ¥æµ‹è¯•ç»“æœ</li>
</ul>
<p>çœ‹ä¸€ä¸‹ç¬¬ä¸€ä¸ªæµ‹è¯•æ­¥éª¤ï¼Œå®ƒä»¬ä¸æˆ‘ä»¬åœ¨ç¼–å†™èº«ä»½éªŒè¯è¡¨å•æ—¶<strong>æ‰‹åŠ¨æ‰§è¡Œçš„æ­¥éª¤ç›¸åŒ</strong>ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¸ºæœåŠ¡å™¨çš„å“åº”åˆ›å»ºäº†å­˜æ ¹ï¼Œå¹¶æ£€æŸ¥è¡¨å•çš„æœ€ç»ˆè¡Œä¸ºï¼ˆåŒ…æ‹¬æˆåŠŸæˆ–å¤±è´¥çš„å“åº”ï¼‰ã€‚</p>
<p>è¿™ä¸ªå·¥ä½œæµç¨‹å¯ä»¥å¾ˆå®¹æ˜“åœ°å¾—åˆ°æ”¹è¿›ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç¼–å†™è¡¨å•çš„åŒæ—¶ç¼–å†™æµ‹è¯•ï¼ˆTDD å¼€å‘è€…å·²ç»è®­ç»ƒæˆè¿™æ ·ï¼‰ï¼š</p>
<ul>
<li><strong>ç¼–å†™ç”¨æˆ·åè¾“å…¥å­—æ®µçš„ä»£ç </strong> *</li>
<li><strong>ç¼–å†™å¡«å……</strong>ç”¨æˆ·åè¾“å…¥å­—æ®µçš„æµ‹è¯•*</li>
<li>ç¼–å†™å¯†ç è¾“å…¥å­—æ®µçš„ä»£ç </li>
<li>æ›´æ–°æµ‹è¯•ä»¥å¡«å……å¯†ç è¾“å…¥å­—æ®µ</li>
<li>ç¼–å†™æäº¤æŒ‰é’®çš„ä»£ç </li>
<li>æ›´æ–°æµ‹è¯•ä»¥ç‚¹å‡»æäº¤æŒ‰é’®</li>
<li>åœ¨æµ‹è¯•ä¸­åˆ›å»º XHR çš„å“åº”å­˜æ ¹</li>
<li>ç¼–å†™ XHR è¯·æ±‚çš„ç®¡ç†ä»£ç </li>
<li>æ£€æŸ¥åé¦ˆ</li>
<li>ç¼–å†™é”™è¯¯æµç¨‹çš„ç®¡ç†ä»£ç </li>
<li>æ›´æ–°æµ‹è¯•ä»¥æ£€æŸ¥é”™è¯¯æµç¨‹</li>
<li>å¯¹äºæ¯ä¸ªé”™è¯¯æµç¨‹ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤</li>
</ul>
<p>* è¯·æ³¨æ„ï¼Œå¦‚æœè¦é‡‡ç”¨ä¸¥æ ¼çš„ TDD æ–¹æ³•ï¼Œå¯ä»¥é¢ å€’ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥çš„é¡ºåºã€‚</p>
<p>è¿™æ ·åšçš„æœ€é‡è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ä½ <strong>å‡ ä¹å®Œå…¨é¿å…æ‰‹åŠ¨æµ‹è¯•</strong>åº”ç”¨ç¨‹åº</li>
<li>å……åˆ†åˆ©ç”¨æµ‹è¯•å·¥å…·çš„é€Ÿåº¦ï¼Œå®ƒä»¥æƒŠäººçš„é€Ÿåº¦å¡«å……è¡¨å•ï¼Œè®©ä½ <strong>èŠ‚çœå¤§é‡æ—¶é—´</strong></li>
<li>æ— éœ€åœ¨ç¼–å†™è¡¨å•åå†ç¼–å†™æµ‹è¯•ï¼ˆTDD å¼€å‘è€…å·²ç»é¿å…è¿™æ ·åšï¼‰ï¼Œå°½ç®¡æœ€åˆå¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹çƒ¦äºº</li>
<li>å®Œå…¨<strong>é¿å…åœ¨æºä»£ç ä¸­å¼•å…¥ä¸€äº›ä¸´æ—¶çŠ¶æ€</strong>ï¼ˆä¾‹å¦‚è¾“å…¥å­—æ®µçš„é»˜è®¤å€¼ã€è™šå‡çš„ XHR å“åº”ï¼‰</li>
<li>ç›´æ¥ç”¨çœŸå®çš„ç½‘ç»œå“åº”æµ‹è¯•ä½ çš„åº”ç”¨ç¨‹åºï¼ˆè¯·è®°ä½ï¼Œåº”ç”¨ç¨‹åºä¸çŸ¥é“ç½‘ç»œè¯·æ±‚æ˜¯ç”±æµ‹è¯•å·¥å…·å­˜æ ¹çš„ï¼‰</li>
<li>æ¯æ¬¡ä¿å­˜æµ‹è¯•æ–‡ä»¶æ—¶éƒ½é‡æ–°å¯åŠ¨æµ‹è¯•</li>
<li>å¯ä»¥å……åˆ†åˆ©ç”¨ Chrome DevTools å’Œæ¡†æ¶ç‰¹å®šçš„å¼€å‘å·¥å…·</li>
</ul>
<p>å¦‚ä½•å……åˆ†åˆ©ç”¨<strong>ç°æœ‰çš„å¼€å‘å·¥å…·</strong>ï¼Ÿ<br/>
å—¯ï¼Œå‡ ä¹æ¯ä¸ªæµ‹è¯•å·¥å…·éƒ½å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½† Cypress åœ¨è¿™æ–¹é¢è„±é¢–è€Œå‡ºã€‚Cypress æ‹¥æœ‰ä¸€ä¸ªä¸“é—¨çš„ Chrome ç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·åœ¨æ‰€æœ‰ä½ çš„æµ‹è¯•å’Œæ‰€æœ‰ä½ çš„é¡¹ç›®ä¸­éƒ½æ˜¯æŒä¹…å­˜åœ¨çš„ã€‚é€šè¿‡è¿™æ ·åšï¼ŒCypress å…è®¸ä½ æ‹¥æœ‰ä¸€ä¸ªçœŸæ­£ä¸“ä¸ºæµ‹è¯•è€Œè®¾çš„æµè§ˆå™¨ï¼Œå…¶ä¸­åŒ…å«ä½ å–œæ¬¢çš„æ‰©å±•ï¼Œå³ä½¿ä½ ä½¿ç”¨çš„æ˜¯ä¸æµè§ˆç›¸åŒçš„ Chrome ç‰ˆæœ¬ã€‚<br/>
å°†å…¶ä¸å‡ºè‰²çš„ç”¨æˆ·ç•Œé¢ç»“åˆèµ·æ¥ï¼Œä½ å°±å¯ä»¥å‡†å¤‡å¥½ç›´æ¥ä½¿ç”¨ Cypress å¼€å‘åº”ç”¨ç¨‹åºã€‚ä¸‹é¢ä½ å¯ä»¥çœ‹åˆ° Cypress ç”¨æˆ·ç•Œé¢çš„ä¸€äº›æˆªå›¾ï¼Œå±•ç¤ºäº†å°†å…¶ä½œä¸ºä¸»è¦å¼€å‘å·¥å…·ä½¿ç”¨çš„ç®€ä¾¿æ€§ã€‚</p>
<p><strong>æµè§ˆå™¨é€‰æ‹©</strong>
<img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/use-your-testing-tool-as-your-primary-development-tool/browser-selection.png?raw=true" alt="Cypress æµè§ˆå™¨é€‰æ‹©" title="Cypress æµè§ˆå™¨é€‰æ‹©"/></p>
<p><strong>Cypress æ§åˆ¶çš„æµè§ˆå™¨å¼€å‘è€…å·¥å…·</strong>
<img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/use-your-testing-tool-as-your-primary-development-tool/devtools.jpg?raw=true" alt="Cypress æµè§ˆå™¨å¼€å‘è€…å·¥å…·" title="Cypress æµè§ˆå™¨å¼€å‘è€…å·¥å…·"/></p>
<p><strong>Cypress <a href="https://github.com/bahmutov/cypress-skip-and-only-ui">Skip å’Œ Only UI æ’ä»¶</a></strong> è¿™ä¸ªå·¥å…·è®©ä½ å¯ä»¥ç›´æ¥åœ¨ Cypress UI ä¸­ä¸ºæµ‹è¯•æ·»åŠ <code>.only</code>æˆ–<code>.skip</code>ã€‚
<img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/use-your-testing-tool-as-your-primary-development-tool/skip-and-only.gif?raw=true" alt="Cypress Skip å’Œ Only UI" title="Cypress Skip å’Œ Only UI"/></p>
<p><strong>Cypress <a href="https://github.com/bahmutov/cypress-watch-and-reload">è§‚å¯Ÿå’Œé‡æ–°åŠ è½½æ’ä»¶</a></strong> æ­¤åŠŸèƒ½ä½¿æ‚¨èƒ½å¤Ÿåœ¨æ¯æ¬¡æºä»£ç ç¼–è¯‘æ—¶é‡æ–°è¿è¡Œ Cypress æµ‹è¯•ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³åœ¨ Cypress æ§åˆ¶çš„æµè§ˆå™¨ä¸­æŸ¥çœ‹ React/Redux å¼€å‘å·¥å…·çš„å®é™…æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/NoriSte/cypress-react-devtools">cypress-react-devtools</a> å­˜å‚¨åº“ã€‚</p>
<p><em>æ­¤æ–‡ç”± <a href="https://github.com/NoriSte">NoriSte</a> åœ¨ <a href="https://dev.to/noriste/front-end-productivity-boost-cypress-as-your-main-development-browser-5cdk">dev.to</a> å’Œ <a href="https://medium.com/@NoriSte/front-end-productivity-boost-cypress-as-your-main-development-browser-f08721123498">Medium</a>ä¸Šè¿›è¡Œè”åˆå‘è¡¨ã€‚</em></p>
<h2 id="ä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯•">ä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯•</h2>
<p>åŸæ–‡é“¾æ¥:<a href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/ui-tests-debugging-best-practices.md">https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/ui-tests-debugging-best-practices.md</a></p>
<h3 id="ä¸€æ®µç®€è¦è¯´æ˜-1">ä¸€æ®µç®€è¦è¯´æ˜</h3>
<p>UI æµ‹è¯•æ¶‰åŠè®¸å¤šæ­¥éª¤ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªå…³é”®ç›®æ ‡ï¼Œä½†å…¶ä¸­ä¸¤ä¸ªå¾€å¾€è¢«ä½ä¼°ï¼š</p>
<ol>
<li><strong>æµ‹è¯•ä¸€ä¸ªåŠŸèƒ½</strong>ï¼ˆæ˜¾è€Œæ˜“è§ï¼‰</li>
<li><strong>å¸®åŠ©è¯»è€…ç†è§£ä»£ç çš„ä½œç”¨</strong>ï¼ˆé€šå¸¸è¢«ä½ä¼°ï¼‰</li>
<li><strong>ç®€åŒ–è°ƒè¯•</strong>ï¼ˆè¢«ä½ä¼°ï¼ŒåŒæ—¶éœ€è¦ç»éªŒï¼‰</li>
</ol>
<p>ä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·äº†è§£ç¼–å†™ UI æµ‹è¯•æ—¶è¦è®°ä½çš„ä¸€äº›ç®€å•ä½†æœ‰æ•ˆçš„æŠ€å·§ã€‚</p>
<h3 id="å¯è¯»æ€§">å¯è¯»æ€§</h3>
<p>å…³äºæµ‹è¯•ä¸­æŠ½è±¡çš„é—®é¢˜æ˜¯ä¸€ä¸ªæœ‰äº‰è®®çš„è¯é¢˜ï¼ˆPage-Object Model çš„ç²‰ä¸å¯èƒ½ä¼šå¯¹æ­¤æœ‰å¼‚è®®ï¼‰ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæˆ‘ä¸å¾—ä¸ä¿®å¤çš„çœŸå®æµ‹è¯•çš„ä¾‹å­ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// spec.ts file</span></span>
<span class="line"><span style="color:#B392F0">it</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;Create Query Action&#39;</span><span style="color:#E1E4E8">, createQueryAction);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// test.ts file (simplified version)</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> createMutationAction</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#B392F0">  clearActionDef</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#B392F0">  typeIntoActionDef</span><span style="color:#E1E4E8">(statements.createMutationActionText);</span></span>
<span class="line"><span style="color:#B392F0">  clearActionTypes</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// test.ts file contains the clearActionDef, typeIntoActionDef, etc.</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> clearActionDef</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;textarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">first</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">type</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;{selectall}&#39;</span><span style="color:#E1E4E8">, { force: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;textarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">first</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">trigger</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;keydown&#39;</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">    keyCode: </span><span style="color:#79B8FF">46</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    which: </span><span style="color:#79B8FF">46</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    force: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// test.ts file contains also the statements</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> statements</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  createMutationActionText: </span><span style="color:#9ECBFF">`type Mutation {</span></span>
<span class="line"><span style="color:#9ECBFF">    login (username: String!, password: String!): LoginResponse</span></span>
<span class="line"><span style="color:#9ECBFF">  }`</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  createMutationCustomType: </span><span style="color:#9ECBFF">`type LoginResponse {</span></span>
<span class="line"><span style="color:#9ECBFF">    accessToken: String!</span></span>
<span class="line"><span style="color:#9ECBFF">  }</span></span>
<span class="line"><span style="color:#9ECBFF">  `</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  createMutationHandler: </span><span style="color:#9ECBFF">&#39;https://hasura-actions-demo.glitch.me/login&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>çŸ­å‡½æ•°çš„èƒŒåæ€è·¯æ˜¯åˆ›å»ºå°è€Œå¯é‡å¤ä½¿ç”¨çš„ä»£ç ç‰‡æ®µï¼Œä»¥å¸®åŠ©å…¶ä»–éœ€è¦åœ¨é¡µé¢ä¸Šæ‰§è¡Œç±»ä¼¼æ“ä½œçš„æµ‹è¯•ã€‚</p>
<p>æˆ‘è®¤ä¸ºè¿™ä¸å¤ªå¥½ï¼Œå› ä¸º<strong>å¾ˆéš¾å»ºç«‹å¯¹æµ‹è¯•çš„æ‰§è¡Œè¿‡ç¨‹çš„å¿ƒæ™ºæ¨¡å‹</strong>ï¼æ‰€æœ‰æµ‹è¯•éƒ¨åˆ†éƒ½è¢«åˆ†å‰²æˆå°å‡½æ•°å’Œå®ç”¨ç¨‹åºï¼Œè€Œæµ‹è¯•çš„ä»£ç å¿…é¡»å°½å¯èƒ½åœ°ç›´æˆªäº†å½“ã€‚</p>
<p>ä½ è¿˜è®°å¾—ç« èŠ‚å¼€å¤´æåˆ°çš„ä¸¤ä¸ªè¢«ä½ä¼°çš„ç‚¹å—ï¼Ÿè¿™ä¸ªæƒ³æ³•æ˜¯æµ‹è¯•åº”è¯¥å®ç°ä¸‰ä¸ªä¸»è¦ç›®æ ‡ï¼š</p>
<ul>
<li>å¸®åŠ©è¯»è€…ç†è§£ä»£ç çš„ä½œç”¨</li>
<li>ä»¥ä¾¿è½»æ¾è¿›è¡Œè°ƒè¯•</li>
</ul>
<p>å‰è€…è¦æ±‚æµ‹è¯•çš„ä»£ç å°½å¯èƒ½ç®€å•ï¼Œè€Œåœ¨æµ‹è¯•çš„ä»£ç ä¸­ä½¿ç”¨æŠ½è±¡å¹¶æ²¡æœ‰å¥½å¤„ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´èŠ±è´¹æ›´å¤šæ—¶é—´è°ƒè¯•å’Œç»´æŠ¤æµ‹è¯•ï¼Œè€Œä¸æ˜¯åº”ç”¨ç¨‹åºã€‚</p>
<p>åè€…ä¸æµ‹è¯•çš„é”™è¯¯éƒ¨åˆ†æœ‰å…³ï¼šè°ƒè¯•/ä¿®å¤å®ƒä»¬ã€‚è°ƒè¯• UI æµ‹è¯•å¾ˆå›°éš¾ï¼Œå› ä¸ºä½ éœ€è¦å¤„ç†ä»¥ä¸‹å…ƒç´ ï¼š</p>
<ul>
<li>ä½ çš„å‰ç«¯åº”ç”¨ç¨‹åº</li>
<li>æµè§ˆå™¨</li>
<li>æ§åˆ¶æµè§ˆå™¨çš„å·¥å…·</li>
<li>ä½ æä¾›ç»™æ§åˆ¶æµè§ˆå™¨çš„å·¥å…·çš„æŒ‡ä»¤</li>
</ul>
<p>ä¸Šè¿°æ¯ä¸ªå…ƒç´ éƒ½å¯èƒ½å‡ºç°é—®é¢˜ï¼Œå³ä½¿æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜ä¹Ÿå¯èƒ½åœ¨ç†è§£æµ‹è¯•å¤±è´¥çš„åŸå› æ—¶æ„Ÿåˆ°å›°æ‰°ã€‚</p>
<p>å› æ­¤ï¼Œç«¯åˆ°ç«¯æµ‹è¯•æ˜¯å¤æ‚çš„ã€‚Cypress æé«˜äº†å¼€å‘äººå‘˜çš„ç”Ÿæ´»è´¨é‡ï¼ˆåœ¨ <a href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/tools/ui-testing-problems-cypress.md">ä¸€äº› UI æµ‹è¯•é—®é¢˜å’Œ Cypress æ–¹æ³•</a> ç« èŠ‚ä¸­äº†è§£æ›´å¤šï¼‰ï¼Œä½†ç›´æˆªäº†å½“çš„ä»£ç ä¼šæå¤§åœ°å¸®åŠ©ã€‚</p>
<h3 id="ä¸ä½¿ç”¨ä»»ä½•æŠ½è±¡">ä¸ä½¿ç”¨ä»»ä½•æŠ½è±¡</h3>
<p>æˆ‘å»ºè®®æ ¹æœ¬ä¸ä½¿ç”¨æŠ½è±¡ï¼ˆç¨åï¼Œæˆ‘å°†è®¨è®ºä¸€äº›ä¾‹å¤–æƒ…å†µä»¥åŠå“ªç§æŠ½è±¡æ˜¯å¥½çš„ï¼‰ï¼æˆ‘å°†ä¸Šè¿°ä¾‹å­æ”¹å†™ä¸ºå¦‚ä¸‹å½¢å¼ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#B392F0">it</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;Test the feature&#39;</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;textarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">eq</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">as</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;actionDefinitionTextarea&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;textarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">eq</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">as</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;typeConfigurationTextarea&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;@actionDefinitionTextarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">clearConsoleTextarea</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">type</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    `type Mutation {</span></span>
<span class="line"><span style="color:#9ECBFF">        login (username: String!, password: String!): LoginResponse</span></span>
<span class="line"><span style="color:#9ECBFF">      }`</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    { force: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">, delay: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8"> }</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;@typeConfigurationTextarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">clearConsoleTextarea</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">type</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    `type LoginResponse {</span></span>
<span class="line"><span style="color:#9ECBFF">      accessToken: String!</span></span>
<span class="line"><span style="color:#9ECBFF">    }</span></span>
<span class="line"><span style="color:#9ECBFF">    `</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    { force: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">, delay: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8"> }</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span></code></pre>
<p>é‡å†™åçš„æµ‹è¯•ä¸åŸå§‹æµ‹è¯•æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä½†å½“ä½ æŸ¥çœ‹æµ‹è¯•ä»£ç æ—¶ï¼Œæ— éœ€æ¥å›è·³è½¬æ¥åœ¨è„‘ä¸­å»ºç«‹è¿æ¥ã€‚</p>
<ul>
<li>æƒ³çŸ¥é“åœ¨æ–‡æœ¬åŒºåŸŸä¸­è¾“å…¥äº†ä»€ä¹ˆå—ï¼Ÿæ¯«ä¸è´¹åŠ›ï¼Œå°±åœ¨é‚£é‡Œï¼</li>
<li>æƒ³çŸ¥é“æ–‡æœ¬ä½¿ç”¨çš„æ˜¯å“ªä¸ªæ–‡æœ¬åŒºåŸŸå—ï¼Ÿæ¯«ä¸è´¹åŠ›ï¼Œå°±åœ¨é‚£é‡Œï¼</li>
</ul>
<h3 id="åœ¨æµ‹è¯•ä¸­ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŠ½è±¡åŒ–æ˜¯å¥½çš„å‘¢">åœ¨æµ‹è¯•ä¸­ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŠ½è±¡åŒ–æ˜¯å¥½çš„å‘¢ï¼Ÿ</h3>
<p>åœ¨æˆ‘çœ‹æ¥ï¼š</p>
<ul>
<li>å½“æˆ‘æƒ³éšè—ä¸€äº›å¯èƒ½æ²¡æœ‰ä»·å€¼ä½†å¯èƒ½åˆ†æ•£è¯»è€…æ³¨æ„åŠ›çš„æµ‹è¯•æ€ªç™–æ—¶</li>
<li>å½“å®ƒä»¬æ˜¯è½¯çš„ï¼Œå‡ ä¹ä¸å¸¦å‚æ•°ï¼Œåªæœ‰ä¸€å±‚æ·±åº¦</li>
<li>å½“å­˜åœ¨ç›¸å½“æ•°é‡çš„é‡å¤ï¼ˆç¡®åˆ‡çš„æ•°é‡æ˜¯ä¸»è§‚çš„ï¼‰</li>
</ul>
<p>ä¸€ä¸ªæµ‹è¯•æ€ªç™–çš„ä¾‹å­æ˜¯ä¸‹é¢è¿™ä¸ª</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">/**</span></span>
<span class="line"><span style="color:#6A737D"> * Clear a Console&#39;s textarea.</span></span>
<span class="line"><span style="color:#6A737D"> * Work around cy.clear sometimes not working in the Console&#39;s textareas.</span></span>
<span class="line"><span style="color:#6A737D"> */</span></span>
<span class="line"><span style="color:#E1E4E8">Cypress.Commands.</span><span style="color:#B392F0">add</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;clearConsoleTextarea&#39;</span><span style="color:#E1E4E8">, { prevSubject: </span><span style="color:#9ECBFF">&#39;element&#39;</span><span style="color:#E1E4E8"> }, </span><span style="color:#FFAB70">el</span><span style="color:#F97583"> =&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">wrap</span><span style="color:#E1E4E8">(el).</span><span style="color:#B392F0">type</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;{selectall}&#39;</span><span style="color:#E1E4E8">, { force: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8"> }).</span><span style="color:#B392F0">trigger</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;keydown&#39;</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">    keyCode: </span><span style="color:#79B8FF">46</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    which: </span><span style="color:#79B8FF">46</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    force: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>æˆ‘åˆ›å»ºäº†ä¸­å¿ƒçš„ <code>cy.clearConsoleTextarea</code>ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<ol>
<li>è¿™æ˜¯ä¸€ç§æƒå®œä¹‹è®¡ ğŸ˜Š</li>
<li>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œé˜…è¯» <code>trigger(&#39;keydown&#39;)</code> è€Œä¸æ˜¯ä½¿ç”¨æ›´ç¬¦åˆä¹ æƒ¯çš„ <code>cy.clear</code> æ˜¯æœ‰ç‚¹å¥‡æ€ªçš„ï¼Œæˆ‘ä¸æƒ³åœ¨æ¯ä¸ªåœ°æ–¹éƒ½ç•™ä¸‹è§£é‡Šçš„æ³¨é‡Šã€‚</li>
<li>è¯¥å‘½ä»¤ç”± 5 è¡Œä»£ç ç»„æˆï¼Œå°†ä½¿æµ‹è¯•ä»£ç å˜å¾—è¿‡é•¿è€Œæ¯«æ— å¿…è¦ã€‚</li>
</ol>
<p>ä»¥ä¸‹å†…å®¹æ˜¯è½¯æŠ½è±¡çš„ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> expectSuccessNotification</span><span style="color:#E1E4E8"> = (</span><span style="color:#FFAB70">title</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;.notification-success&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;be.visible&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;contain&#39;</span><span style="color:#E1E4E8">, title)</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>æˆ‘å–œæ¬¢å®ƒçš„åŸå› æ˜¯</p>
<ol>
<li>å®ƒä¸ä¾èµ–å…¶ä»–æŠ½è±¡ä»£ç ï¼šå¦‚æœæˆ‘çš„æµ‹è¯•åœ¨ <code>expectSuccessNotification(&#39;Table created!&#39;)</code> å¤±è´¥ï¼Œæˆ‘ä¸å¿…é™·å…¥æ·±å¥¥çš„ä»£ç ä¸­ï¼Œç†è§£ <code>expectSuccessNotification</code> èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆã€‚</li>
<li>å®ƒåªæ¥å—ä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯å¾ˆå¤šé€‰é¡¹ï¼›ä¹Ÿæ²¡æœ‰åŒ…å«é‚£äº›åœ¨ç†è§£ä»£ç æœ€ç»ˆæ‰§è¡Œå†…å®¹æ—¶å˜å¾—å¤æ‚çš„æ¡ä»¶ã€‚</li>
<li><strong>å®ƒä¸“æ³¨äºç‰¹å®šç”¨ä¾‹</strong>ã€‚å®ƒä¸è¯•å›¾ä¸€æ¬¡æ€§æ¶µç›–æ‰€æœ‰é€šçŸ¥ç±»å‹ã€å†…å®¹ç­‰ã€‚å…¶ä»–ä¸“æ³¨äºç‰¹å®šç”¨ä¾‹çš„å‡½æ•°ä¼šå¤„ç†ã€‚</li>
<li>å¦‚æœä½ é‡æ„é€šçŸ¥ç³»ç»Ÿï¼Œä½ æœ‰ä¸€ä¸ªä¸­å¿ƒç‚¹è¿›è¡Œé‡æ„ï¼Œä»¥é€‚åº”æ–°çš„é€šçŸ¥ç³»ç»Ÿã€‚</li>
</ol>
<p>ç›¸åï¼Œè¿™æ˜¯æˆ‘ä¸å¸Œæœ›æ‹¥æœ‰çš„ï¼ˆåœ¨è°ˆè®ºé€šçŸ¥å·¥å…·æ—¶ï¼‰ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> const</span><span style="color:#B392F0"> expectNotification</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">  {</span></span>
<span class="line"><span style="color:#FFAB70">    type</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">    title</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">    message</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">    type</span><span style="color:#F97583">:</span><span style="color:#9ECBFF"> &#39;success&#39;</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> &#39;error&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">    title</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">    message</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  timeout </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 10000</span></span>
<span class="line"><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> el</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">    type </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> &#39;success&#39;</span><span style="color:#F97583"> ?</span><span style="color:#9ECBFF"> &#39;.notification-success&#39;</span><span style="color:#F97583"> :</span><span style="color:#9ECBFF"> &#39;.notification-error&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    { timeout }</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  el.</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;be.visible&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  el.</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;contain&#39;</span><span style="color:#E1E4E8">, title);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (message) el.</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;contain&#39;</span><span style="color:#E1E4E8">, message);</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
<p>æˆ‘å¯¹ä¸Šé¢çš„ä¾‹å­ä¸å¤ªå–œæ¬¢ï¼ŒåŸå› æœ‰ä¸¤ç‚¹ï¼š</p>
<ol>
<li>å®ƒè¯•å›¾ä¸€æ¬¡æ€§æ¶µç›–å¤ªå¤šç”¨ä¾‹ã€‚</li>
<li>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œä½ å¿…é¡»å¤„ç†è®©æ•´ä¸ªä½“éªŒå˜æˆå™©æ¢¦çš„å„ç§æ¡ä»¶ã€‚</li>
</ol>
<p>åœ¨<a href="https://dev.to/noriste/hasura-console-ui-coding-patterns-testing-281d">Hasura æ§åˆ¶å° UI ç¼–ç æ¨¡å¼ï¼šæµ‹è¯•</a>æ–‡ç« ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬åœ¨å†…éƒ¨éµå¾ªçš„æ›´å¤šæœ€ä½³å®è·µã€‚</p>
<h3 id="åŒ¹é…æµ‹è¯•ä»£ç å’Œæµ‹è¯•è¿è¡Œå™¨å‘½ä»¤">åŒ¹é…æµ‹è¯•ä»£ç å’Œæµ‹è¯•è¿è¡Œå™¨å‘½ä»¤</h3>
<p><img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/test-code-with-debugging-in-mind/no-match-between-code-and-runner.jpg?raw=true" alt="æµ‹è¯•ä»£ç ä¸ Cypress é¢æ¿å¹¶æ’æ˜¾ç¤ºï¼Œå¸¦æœ‰ä¸€äº›çº¢è‰²ç®­å¤´æ¥åŒ¹é…ä»£ç å’Œ Cypress æ—¥å¿—"/></p>
<p>Cypress æµ‹è¯•è¿è¡Œå™¨æœ‰åŠ©äºç†è§£åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠæ‰§è¡Œäº†å“ªäº›å‘½ä»¤ï¼Œä½†åœ¨è°ƒè¯•æµ‹è¯•æ—¶ï¼Œå¾ˆéš¾ç«‹å³åœ¨æµ‹è¯•è¿è¡Œå™¨å’Œä»£ç ä¹‹é—´å»ºç«‹å…³è”ã€‚è€Œä¸”ï¼Œæ—¥å¿—æ— æ³•å¸®åŠ©ç†è§£æµ‹è¯•ä»åŠŸèƒ½è§’åº¦æ­£åœ¨åšä»€ä¹ˆï¼ˆä¾‹å¦‚ï¼Œæ—¥å¿—è¯´â€œåœ¨æ–‡æœ¬åŒºåŸŸä¸­é”®å…¥â€ï¼Œä½†æ²¡æœ‰è¯´æ˜â€œåœ¨ç±»å‹é…ç½®æ–‡æœ¬åŒºåŸŸä¸­é”®å…¥â€ï¼‰ã€‚å› æ­¤ï¼ŒæŸ¥æ‰¾å¤±è´¥çš„æ ¹æœ¬åŸå› æ˜¯å›°éš¾çš„ã€‚Cypress ä¼šä¸ºå¤±è´¥çš„æµ‹è¯•è®°å½•è§†é¢‘ï¼Œä½†å¦‚æœé˜…è¯»è€…/è°ƒè¯•è€…ä¸èƒ½åœ¨æ—¥å¿—å’Œæµ‹è¯•åœ¨æ™®é€šè‹±è¯­ä¸­æ‰€åšçš„äº‹æƒ…ä¹‹é—´å»ºç«‹ç›´æ¥å…³è”ï¼Œåˆ™è§†é¢‘å°±æ¯«æ— ç”¨å¤„ã€‚</p>
<h4 id="è¯·çœ‹ä¸‹é¢çš„å†…å®¹">è¯·çœ‹ä¸‹é¢çš„å†…å®¹</h4>
<p><img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/test-code-with-debugging-in-mind/match-between-code-and-runner.jpg?raw=true" alt="ä»£ç å’Œ Cypress é¢æ¿å¹¶æ’æ˜¾ç¤ºï¼Œæœ‰è®¸å¤šè‡ªå®šä¹‰æ—¥å¿—ï¼Œå¯ä»¥ç›´æ¥å°† Cypress ä¸­å‘ç”Ÿçš„æƒ…å†µä¸ä»£ç ä¸­çš„ç‰¹å®šç‚¹è¿æ¥èµ·æ¥ã€‚"/></p>
<p>æˆ‘æ·»åŠ äº†ä¸€ä¸ªæ—¥å¿—ï¼ŒæŠ¥å‘Šæµ‹è¯•æ­£åœ¨è¿›è¡Œçš„æ“ä½œï¼Œä½¿æµ‹è¯•ä»£ç ä¸æµ‹è¯•è¿è¡Œç¨‹åºä¹‹é—´èƒ½å¤Ÿç›´æ¥å¯¹åº”ã€‚ (<code>cy.log(&#39;**--- Type in the Webhook Handler field**&#39;);</code>).</p>
<p>è¯·æ³¨æ„ï¼Œä½ å¯ä»¥å‘ â€˜cy.logâ€™ ä¼ é€’æ›´å¤šå‚æ•°ï¼Œè¿™äº›å‚æ•°å°†åœ¨å•å‡»è®°å½•çš„å‘½ä»¤æ—¶ç›´æ¥æ˜¾ç¤ºåœ¨å¼€å‘å·¥å…·çš„æ§åˆ¶å°ä¸­ã€‚</p>
<p><img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/test-code-with-debugging-in-mind/cy-log-console.jpg?raw=true" alt="Cypress æµ‹è¯•è¿è¡Œå™¨å±•ç¤ºäº†å·²è®°å½•å¯¹è±¡çš„å€¼ã€‚"/></p>
<p>Storybook å’Œ Playwright å·²ç»å¼•å…¥äº†<code>step</code>å®ç”¨å·¥å…·çš„æ¦‚å¿µï¼Œå¯ä»¥ç”¨è‹±è¯­è§£é‡Šæµ‹è¯•ä¸­çš„æ­¥éª¤ã€‚Cypress æ²¡æœ‰ç›¸åŒçš„é€‰é¡¹ï¼Œå› æ­¤æˆ‘è®¤ä¸ºæˆ‘æå‡ºçš„<code>cy.log</code>æ˜¯å¾ˆæœ‰ä»·å€¼çš„ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼šä¸è¦å°†<code>cy.log</code>é“¾åœ¨ä¸€èµ·ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªæŸ¥è¯¢å‘½ä»¤ï¼Œä¸ä¼šå¯¹é“¾è¿›è¡Œé‡è¯•ã€‚</p>
<p>æˆªè‡³ Cypress V12 ç‰ˆæœ¬ï¼Œ<code>cy.log</code>åœ¨å‡½æ•°çº§åˆ«ä¸è¿›è¡Œé‡è¯•ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;foo&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;bar&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;baz&#39;</span><span style="color:#E1E4E8">) </span><span style="color:#6A737D">// does not retry</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;bar&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">should</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;baz&#39;</span><span style="color:#E1E4E8">) </span><span style="color:#6A737D">// retries the whole chain until the assertion passes (you have 10 sec timeout set)</span></span></code></pre>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿ Cypress æ²¡æœ‰ <code>step</code>ï¼Œ<a href="https://github.com/filiphric">Filip Hric</a> çš„ <a href="https://github.com/NoriSte/ui-testing-best-practices/issues/43">cypress-plugin-steps</a> ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ›¿ä»£é€‰æ‹©ã€‚</p>
<h3 id="ä½¿ç”¨æ¸…æ™°çš„é€‰æ‹©å™¨">ä½¿ç”¨æ¸…æ™°çš„é€‰æ‹©å™¨</h3>
<p>çœ‹ä¸€ä¸‹è¿™æ®µä»£ç </p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;textarea&#39;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">Â Â .</span><span style="color:#B392F0">eq</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">Â Â .</span><span style="color:#B392F0">type</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`{enter}{uparrow}${</span><span style="color:#E1E4E8">statements</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">createMutationGQLQuery</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">Â  Â Â force: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">Â Â });</span></span></code></pre>
<p><code>cy.get(&#39;textarea&#39;).eq(0)</code> æ˜¯ä»€ä¹ˆï¼Ÿåœ¨æ²¡æœ‰æ›´å¥½çš„é€‰æ‹©å™¨çš„æƒ…å†µä¸‹ï¼Œæˆ‘å»ºè®®å°†å®ƒä»¬æ”¾åœ¨ Cypress çš„åˆ«åä¸‹ï¼Œæ¯”å¦‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// Assign an alias to the most unclear selectors for future references</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;textarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">eq</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">as</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;actionDefinitionTextarea&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;textarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">eq</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">as</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;typeConfigurationTextarea&#39;</span><span style="color:#E1E4E8">);</span></span></code></pre>
<p>ç„¶åé€šè¿‡è¿™ç§æ–¹å¼æ¥å¼•ç”¨å®ƒä»¬</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;@actionDefinitionTextarea&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">clearConsoleTextarea</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">type</span><span style="color:#E1E4E8">(</span><span style="color:#6A737D">/* ... */</span><span style="color:#E1E4E8">);</span></span></code></pre>
<p>ä»¥æé«˜è¯»è€…çš„ä½“éªŒã€‚</p>
<h3 id="å‡å°‘-data-testid-å±æ€§">å‡å°‘ data-testid å±æ€§</h3>
<p>æˆ‘ä¸æƒ³è®¨è®ºæµ‹è¯•æœ¬èº«åŠå…¶å¯¹æµ‹è¯•ç»“æœå¯ä¿¡åº¦çš„ä»·å€¼ï¼Œåªæƒ³è°ˆè°ˆ data-testid å±æ€§åœ¨è°ƒè¯•é˜¶æ®µçš„å½±å“ã€‚</p>
<p>å¦‚æœæ— æ³•ä»é¡µé¢ä¸­æ£€ç´¢å¸¦æœ‰ data-testid å±æ€§çš„å…ƒç´ ï¼Œå¯èƒ½çš„é—®é¢˜æœ‰ï¼š</p>
<ol>
<li>å…ƒç´ ä¸å­˜åœ¨ã€‚</li>
<li>å…ƒç´ å­˜åœ¨ï¼Œä½†å®ƒæ²¡æœ‰è¯¥å±æ€§ã€‚</li>
<li>å…ƒç´ å­˜åœ¨ï¼Œå…·æœ‰è¯¥å±æ€§ï¼Œä½†å€¼ä¸ç¬¦åˆé¢„æœŸã€‚</li>
</ol>
<p>ä¸Šè¿°æ‰€æœ‰é—®é¢˜éƒ½ä¼š<strong>å¯¼è‡´å¼€å‘äººå‘˜é‡æ–°å¯åŠ¨æµ‹è¯•ã€æ£€æŸ¥å…ƒç´ ã€æŸ¥æ‰¾ä¸æµ‹è¯•ç›¸å…³çš„å±æ€§ç­‰</strong>ã€‚ç›¸åï¼Œå¦‚æœæµ‹è¯•åŸºäºæ–‡æœ¬å†…å®¹ï¼Œä»…é€šè¿‡æˆªå›¾å°±è¶³ä»¥äº†è§£æµ‹è¯•æœç´¢çš„æ–‡æœ¬æ˜¯å¦ä¸å­˜åœ¨æˆ–é”™è¯¯ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯¹äºé‚£äº›å¿…é¡»å¤„ç† data-testid çš„å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œè¿˜æœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼š</p>
<ol>
<li>åœ¨é‡æ„æœŸé—´å¿…é¡»ç»´æŠ¤ä¸æµ‹è¯•ç›¸å…³çš„å±æ€§ï¼Œä½†åœ¨æœ‰æ•°ç™¾ä¸ªå±æ€§æ—¶å¹¶ä¸å®¹æ˜“ã€‚</li>
<li>å¦‚æœæµ‹è¯•ç›¸å…³çš„å±æ€§åœ¨é¡µé¢ä¸Šæ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ç„¶è€Œï¼Œå½“ä½ æœ‰æ•°ç™¾ä¸ªè¿™æ ·çš„å±æ€§æ—¶ï¼Œå¾ˆéš¾ä¿è¯å®ƒä»¬æ˜¯å”¯ä¸€çš„ã€‚</li>
</ol>
<p>æˆ‘çš„å»ºè®®æ˜¯ä»…åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ data-testid å±æ€§ï¼š</p>
<ul>
<li>ç”¨äºèŠ‚ï¼Œè€Œä¸æ˜¯å…ƒç´ ï¼ˆä¾‹å¦‚ Headerã€Footer ç­‰ï¼‰ï¼Œä»¥å‡å°åŸºäºæ–‡æœ¬æœç´¢çš„èŒƒå›´ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#E1E4E8">cy.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;[data-test=&quot;Actions list&quot;]&#39;</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">within</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> { </span><span style="color:#6A737D">// &lt;-- reduce the scope</span></span>
<span class="line"><span style="color:#E1E4E8">Â Â cy.</span><span style="color:#B392F0">contains</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;login&#39;</span><span style="color:#E1E4E8">) </span><span style="color:#6A737D">// &lt;-- the &quot;login&quot; text could exist more times in the page</span></span>
<span class="line"><span style="color:#E1E4E8">})</span></span></code></pre>
<ul>
<li>éæ–‡æœ¬å…ƒç´ ï¼Œå¦‚å›¾æ ‡ã€å›¾ç‰‡ç­‰ã€‚</li>
</ul>
<p>æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼šæˆ‘å»ºè®®ä¸ºå®ƒä»¬èµ‹äºˆç”¨æˆ·å‹å¥½çš„å€¼ï¼Œè€Œä¸æ˜¯é‡‡ç”¨ç¨‹åºå‘˜çš„å‘½åé£æ ¼ï¼ˆä¾‹å¦‚ï¼Œâ€œæ“ä½œåˆ—è¡¨â€è€Œä¸æ˜¯â€œactionsListâ€ï¼‰ï¼Œå°¤å…¶æ˜¯å½“è¯¥éƒ¨åˆ†æ˜¾ç¤ºç›¸åŒæ–‡æœ¬æ—¶ã€‚è¿™æ ·å¯ä»¥ç›´æ¥å…³è”æµ‹è¯•ä»£ç ã€Cypress çš„æµ‹è¯•è¿è¡Œå™¨å’Œé¡µé¢çš„æ–‡æœ¬å†…å®¹ã€‚</p>
<h3 id="å°†ç›¸å…³æ“ä½œåˆ†ç»„">å°†ç›¸å…³æ“ä½œåˆ†ç»„</h3>
<p>é€šå¸¸æ¥è¯´ï¼Œé˜…è¯»ä¸€ç³»åˆ—å¹³é¢çš„äº¤äº’å¹¶ä¸èƒ½å¸®åŠ©ç†è§£æµ‹è¯•è¿è¡Œçš„é¡µé¢ç»“æ„ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>è·å– 1 å¹¶ç‚¹å‡»</li>
<li>è·å– 2 å¹¶ç‚¹å‡»</li>
<li>è·å– 3 å¹¶ç‚¹å‡»</li>
<li>è·å– 4 å¹¶ç‚¹å‡»</li>
<li>è·å– 5 å¹¶ç‚¹å‡»</li>
<li>è·å– 6 å¹¶ç‚¹å‡»</li>
<li>è·å– 7 å¹¶ç‚¹å‡»</li>
<li>è·å– 8 å¹¶ç‚¹å‡»</li>
</ul>
<p>ç„¶è€Œï¼Œå°†åˆ—è¡¨å±•å¼€å¯ä»¥å¸®åŠ©è¯»è€…æ„å»ºä¸€ä¸ªæœ‰å…³æ‰€æ¶‰åŠéƒ¨åˆ†ä½ç½®çš„å¿ƒç†æ¨¡å‹</p>
<ul>
<li>åœ¨å— 1 å†…
<ul>
<li>è·å– 1 å¹¶ç‚¹å‡»</li>
<li>è·å– 2 å¹¶ç‚¹å‡»</li>
<li>è·å– 3 å¹¶ç‚¹å‡»</li>
</ul>
</li>
<li>åœ¨å— 2 å†…
<ul>
<li>è·å– 4 å¹¶ç‚¹å‡»</li>
<li>è·å– 5 å¹¶ç‚¹å‡»</li>
<li>è·å– 6 å¹¶ç‚¹å‡»</li>
</ul>
</li>
<li>è·å– 7 å¹¶ç‚¹å‡»</li>
<li>è·å– 8 å¹¶ç‚¹å‡»</li>
</ul>
<p><img src="https://github.com/naodeng/ui-testing-best-practices/blob/master/assets/images/test-code-with-debugging-in-mind/cy-within.png?raw=true" alt="Cypress ç•Œé¢å±•ç¤º cy.within"/></p>
<p>å†å¼ºè°ƒä¸€ä¸‹ï¼šStorybook å’Œ Playwright å·²ç»å¼•å…¥äº†â€œæ­¥éª¤ï¼ˆstepï¼‰â€å®ç”¨ç¨‹åºçš„æ¦‚å¿µï¼Œè¯¥å®ç”¨ç¨‹åºå¯ä»¥å°†æ“ä½œè¿›è¡Œåˆ†ç»„ï¼Œè€Œä¸Šè¿°å»ºè®®åœ¨ Cypress ä¸­éå¸¸å®ç”¨ã€‚</p>
<h3 id="ç›¸å…³ç« èŠ‚">ç›¸å…³ç« èŠ‚</h3>
<ul>
<li>ğŸ”— <a href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/real-life-examples/from-unreadable-react-component-tests-to-simple-ones.md">ä»æ™¦æ¶©éš¾æ‡‚çš„ React ç»„ä»¶æµ‹è¯•åˆ°ç®€å•ã€æ˜“è¯»çš„ç‰ˆæœ¬</a></li>
</ul>
<p><em>ç”± <a href="https://github.com/NoriSte">NoriSte</a> åœ¨ <a href="https://dev.to/noriste/improving-ui-testss-code-to-ease-debugging-them-later-2478j">dev.to</a>è¿›è¡Œå‘è¡¨ã€‚</em></p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:<a href="https://github.com/NoriSte/ui-testing-best-practices">https://github.com/NoriSte/ui-testing-best-practices</a></li>
<li>UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:<a href="https://github.com/naodeng/ui-testing-best-practices">https://github.com/naodeng/ui-testing-best-practices</a></li>
</ul>
<hr/>
<p>æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œ<strong>è½¯ä»¶æµ‹è¯•åŒå­¦</strong>â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚</p>


<div style="text-align: center"><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/2023112015'QR Code for å…¬ä¼—å·.jpg" style="width: 100px;"/></div>

  </article>  </main> <footer class="l-footer" data-astro-cid-sz7xmlte> <div class="footer-container l-content" data-astro-cid-sz7xmlte> <!-- ç¤¾äº¤ä¸è¯­è¨€åˆ‡æ¢åŒºåŸŸ --> <div class="social-links" data-astro-cid-sz7xmlte> <a href="https://github.com/naodeng" target="_blank" rel="noopener noreferrer" title="GitHub" class="social-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" data-astro-cid-sz7xmlte></path></svg>      </a><a href="https://x.com/inaodeng" target="_blank" rel="noopener noreferrer" title="X" class="social-icon" data-astro-cid-sz7xmlte>  <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M18.901 1.153h3.68l-8.04 4.617L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z" data-astro-cid-sz7xmlte></path></svg>     </a><a href="https://naodeng.medium.com/" target="_blank" rel="noopener noreferrer" title="Medium" class="social-icon" data-astro-cid-sz7xmlte>   <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42S14.2 15.54 14.2 12s1.51-6.42 3.38-6.42 3.38 2.88 3.38 6.42zM24 12c0 3.17-.53 5.75-1.19 5.75s-1.19-2.58-1.19-5.75.53-5.75 1.19-5.75S24 8.83 24 12z" data-astro-cid-sz7xmlte></path></svg>    </a><a href="https://weibo.com/u/1651778270" target="_blank" rel="noopener noreferrer" title="Weibo" class="social-icon" data-astro-cid-sz7xmlte>    <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M10.08 18.12c-3.12 0-5.64-1.32-5.64-3 0-1.68 2.52-3 5.64-3s5.64 1.32 5.64 3c0 1.68-2.52 3-5.64 3zm13.92-10.8c-.24-.48-.72-.72-1.2-.72h-.24c-1.2.24-2.16 1.44-2.16 2.88 0 1.44.96 2.64 2.16 2.88h.24c.48 0 .96-.24 1.2-.72.24-.48.24-1.2 0-1.68-.24-.48-.24-1.2 0-1.68.24-.48.24-1.2 0-1.68zm-3.36 1.2c-.48-.24-.96-.48-1.44-.48h-.24c-1.44.24-2.64 1.68-2.64 3.36 0 1.68 1.2 3.12 2.64 3.36h.24c.48 0 .96-.24 1.44-.48.48-.24.72-.72.72-1.2 0-.48-.24-.96-.72-1.2-.48-.24-.48-1.2 0-1.44.48-.24.72-.72.72-1.2 0-.48-.24-.96-.72-1.2zM12 2.4c-6.6 0-12 4.08-12 9.12 0 5.04 5.4 9.12 12 9.12s12-4.08 12-9.12c0-5.04-5.4-9.12-12-9.12zm0 15.6c-4.68 0-8.4-2.88-8.4-6.48 0-3.6 3.72-6.48 8.4-6.48s8.4 2.88 8.4 6.48c0 3.6-3.72 6.48-8.4 6.48z" data-astro-cid-sz7xmlte></path></svg>   </a><a href="https://ko-fi.com/naodeng" target="_blank" rel="noopener noreferrer" title="Ko-fi" class="social-icon" data-astro-cid-sz7xmlte>     <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.724c-.604 0-.724.467-.724.467s-.024 11.297 0 14.554c.024 3.258 1.821 4.622 1.821 4.622h12.012c.604 0 .724-.467.724-.467s.024-1.109 0-3.178l.232-.039c4.085-.691 9.113-2.34 9.092-11.361zm-4.805 7.403c-1.053.196-2.306.26-3.509.216l.103-8.847c.301-.004.621.005.952.026 3.29.21 4.269 2.739 4.256 5.075-.012 2.337-.791 3.33-1.802 3.53z" data-astro-cid-sz7xmlte></path></svg>  </a><a href="mailto:dengnao@gmail.com" target="_blank" rel="noopener noreferrer" title="Email" class="social-icon" data-astro-cid-sz7xmlte>      <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="/en/blog/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease--debugging-the-tests/" class="social-icon lang-toggle" title="Switch to English" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte> <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 5.11.76-1.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" data-astro-cid-sz7xmlte></path> </svg> <span class="lang-label" data-astro-cid-sz7xmlte>EN</span> </a> </div> <!-- åº•éƒ¨æ¬¡çº§å¯¼èˆª --> <nav class="footer-nav" data-astro-cid-sz7xmlte> <a href="/zh-cn/about/" data-astro-cid-sz7xmlte>å…³äº</a> <a href="/zh-cn/archive/" data-astro-cid-sz7xmlte>å½’æ¡£</a> <a href="/zh-cn/projects/" data-astro-cid-sz7xmlte>é¡¹ç›®</a> <a href="/zh-cn/sponsor/" data-astro-cid-sz7xmlte>èµåŠ©</a> <a href="/zh-cn/rss.xml/" target="_blank" data-astro-cid-sz7xmlte>è®¢é˜… RSS</a> <a href="/zh-cn/sitemap/" data-astro-cid-sz7xmlte>ç«™ç‚¹åœ°å›¾</a> </nav> <!-- ç‰ˆæƒä¸è®¸å¯åŒºåŸŸ --> <div class="footer-info" data-astro-cid-sz7xmlte> <div class="copyright" data-astro-cid-sz7xmlte> <a class="copy-link" href="https://inaodeng.com/" data-astro-cid-sz7xmlte>
Â© 2026 è½¯ä»¶æµ‹è¯•åŒå­¦ </a> <span class="separator" data-astro-cid-sz7xmlte>|</span> <span class="license" data-astro-cid-sz7xmlte>éµå¾ª CC BY-NC-SA 4.0 è®¸å¯åè®®</span> </div> <div class="tech-stack" data-astro-cid-sz7xmlte> <span class="built-with" data-astro-cid-sz7xmlte>ç”± Astro &amp; Cloudflare &amp; Github &amp; AI é©±åŠ¨</span> <div class="tech-icons" data-astro-cid-sz7xmlte> <a href="https://astro.build" target="_blank" rel="noopener noreferrer" title="Astro" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M16.62 8.35l-5.67 10.8c-.18.34-.64.34-.82 0L4.38 8.35c-.19-.34.09-.7.41-.7h11.22c.32 0 .6.36.41.7zM12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm0 22C6.48 22 2 17.52 2 12S6.48 2 12 2s10 4.48 10 10-4.48 10-10 10z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://www.cloudflare.com" target="_blank" rel="noopener noreferrer" title="Cloudflare" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M16.5 10.5h-9c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h9c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5zm-4.5 4.5h-4.5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5H12c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5zm9-12H3c-1.7 0-3 1.3-3 3v9c0 1.7 1.3 3 3 3h18c1.7 0 3-1.3 3-3v-9c0-1.7-1.3-3-3-3zm0 12H3V6h18v10.5z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com" target="_blank" rel="noopener noreferrer" title="GitHub" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" data-astro-cid-sz7xmlte></path></svg> </a> <span title="AI" class="tech-icon tech-icon-ai" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" data-astro-cid-sz7xmlte></path></svg> </span> </div> </div> </div> </div> </footer>  <dialog id="search-dialog" class="search-dialog" aria-label="æœç´¢æ–‡ç« â€¦" data-astro-cid-qk3db3zz> <div class="search-backdrop" data-close data-astro-cid-qk3db3zz></div> <div class="search-box" data-astro-cid-qk3db3zz> <label for="search-input" class="visually-hidden" data-astro-cid-qk3db3zz>æœç´¢æ–‡ç« â€¦</label> <input id="search-input" type="search" class="search-input" placeholder="æœç´¢æ–‡ç« â€¦" autocomplete="off" enterkeyhint="search" data-astro-cid-qk3db3zz> <span class="search-hint" data-hint data-astro-cid-qk3db3zz>âŒ˜K æˆ– Ctrl+K æ‰“å¼€æœç´¢</span> </div> <div class="search-results" id="search-results" role="list" data-astro-cid-qk3db3zz></div> <p class="search-empty" id="search-empty" hidden data-astro-cid-qk3db3zz>æš‚æ— ç»“æœã€‚</p> </dialog> <script type="module">const o=document.getElementById("search-dialog"),l=document.getElementById("search-input"),s=document.getElementById("search-results"),u=document.getElementById("search-empty"),p=document.querySelector(".search-backdrop[data-close]"),a=document.querySelector("[data-hint]");let r=[],i="en";function y(){return document.documentElement.getAttribute("data-locale")==="zh-cn"?"zh-cn":"en"}async function E(){if(r.length>0)return r;i=y();const e=await fetch(`/${i}/search-index.json`);return e.ok?(r=await e.json(),r):[]}function f(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function g(e,t){s.innerHTML="",s.hidden=e.length===0,u.hidden=e.length>0||!t,e.slice(0,20).forEach(n=>{const c=document.createElement("a");c.href=n.url,c.className="search-result-item",c.setAttribute("role","listitem");const m=new Date(n.date).toLocaleDateString(i==="zh-cn"?"zh-CN":"en-US",{year:"numeric",month:"short",day:"numeric"});c.innerHTML=`
        <span class="search-result-title">${f(n.title)}</span>
        <span class="search-result-meta">${f(m)}${n.tags?.length?" Â· "+n.tags.slice(0,3).join(", "):""}</span>
      `,c.addEventListener("click",()=>o.close()),s.appendChild(c)})}function L(e){const t=e.trim().toLowerCase();return t?r.filter(n=>n.title.toLowerCase().includes(t)||n.description.toLowerCase().includes(t)||n.tags&&n.tags.some(c=>c.toLowerCase().includes(t))):[]}function v(){const e=l.value;if(!r.length){s.hidden=!0,u.hidden=!0;return}const t=e.trim().length>0,n=L(e);g(n,t)}function h(){E().then(()=>{o.showModal(),l.value="",l.focus(),s.hidden=!0,u.hidden=!0,a&&(a.style.display="block")})}function d(){o.close(),a&&(a.style.display="")}o.addEventListener("close",()=>{a&&(a.style.display="")});o.addEventListener("cancel",d);p?.addEventListener("click",d);l.addEventListener("input",v);l.addEventListener("keydown",e=>{if(e.key==="Escape"&&(d(),e.preventDefault()),e.key==="Enter"){const t=s.querySelector(".search-result-item");t&&(t.click(),e.preventDefault())}});document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),o.open?d():h())});document.querySelectorAll("[data-search-open]").forEach(e=>{e.addEventListener("click",h)});window.addEventListener("search-open",h);</script>   </body> </html>  