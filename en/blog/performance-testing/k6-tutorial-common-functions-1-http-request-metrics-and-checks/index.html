<!DOCTYPE html><html lang="en-US" data-locale="en"> <head><meta charset="UTF-8"><title>K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks | Nao&#39;s Blog</title><meta name="description" content="The article provides a detailed exploration of the HTTP request functionality in K6, dissecting common performance metrics and check features. Learn how to leverage K6 for robust performance testing, simulating user behavior through HTTP requests, and assessing system response by understanding performance metrics. The tutorial delves into configuring and executing checks, ensuring performance aligns with expected standards. Whether you're a beginner or an experienced performance testing professional, this guide equips you with practical knowledge to harness the full potential of K6 in performance testing. Click the link to embark on an efficient journey into performance testing with K6!"><meta name="keywords" content="software testing, QA, quality analyst, automation testing, API testing, performance testing, agile testing, test automation, inaodeng, Nao Deng"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="nao.deng"><link rel="canonical" href="https://inaodeng.com/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.17.0"><link rel="alternate" hreflang="en-US" href="https://inaodeng.com/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"><link rel="alternate" hreflang="zh-CN" href="https://inaodeng.com/zh-cn/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"><link rel="alternate" hreflang="x-default" href="https://inaodeng.com/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="icon" sizes="192x192" href="/android-chrome-192x192.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><meta name="color-scheme" content="light dark"><meta name="algolia-site-verification" content="B0319275B670BBB0"><meta property="og:type" content="article"><meta property="og:title" content="K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks | Nao's Blog"><meta property="og:site_name" content="Nao's Blog"><meta property="og:description" content="The article provides a detailed exploration of the HTTP request functionality in K6, dissecting common performance metrics and check features. Learn how to leverage K6 for robust performance testing, simulating user behavior through HTTP requests, and assessing system response by understanding performance metrics. The tutorial delves into configuring and executing checks, ensuring performance aligns with expected standards. Whether you're a beginner or an experienced performance testing professional, this guide equips you with practical knowledge to harness the full potential of K6 in performance testing. Click the link to embark on an efficient journey into performance testing with K6!"><meta property="og:image" content="https://inaodeng.com/default.jpg"><meta property="og:image:alt" content="K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:url" content="https://inaodeng.com/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"><meta property="og:locale" content="en_US"><meta property="og:locale:alternate" content="zh_CN"><meta property="article:published_time" content="2024-01-11T09:10:00.000Z"><meta property="article:modified_time" content="2024-01-11T09:10:00.000Z"><meta property="article:author" content="nao.deng"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@inaodeng"><meta name="twitter:title" content="K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks | Nao's Blog"><meta name="twitter:description" content="The article provides a detailed exploration of the HTTP request functionality in K6, dissecting common performance metrics and check features. Learn how to leverage K6 for robust performance testing, simulating user behavior through HTTP requests, and assessing system response by understanding performance metrics. The tutorial delves into configuring and executing checks, ensuring performance aligns with expected standards. Whether you're a beginner or an experienced performance testing professional, this guide equips you with practical knowledge to harness the full potential of K6 in performance testing. Click the link to embark on an efficient journey into performance testing with K6!"><meta name="twitter:image" content="https://inaodeng.com/default.jpg"><meta name="twitter:image:alt" content="K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap" media="print" onload="this.media='all'"><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap" media="print" onload="this.media='all'"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Nao's Blog","description":"The article provides a detailed exploration of the HTTP request functionality in K6, dissecting common performance metrics and check features. Learn how to leverage K6 for robust performance testing, simulating user behavior through HTTP requests, and assessing system response by understanding performance metrics. The tutorial delves into configuring and executing checks, ensuring performance aligns with expected standards. Whether you're a beginner or an experienced performance testing professional, this guide equips you with practical knowledge to harness the full potential of K6 in performance testing. Click the link to embark on an efficient journey into performance testing with K6!","url":"https://inaodeng.com","inLanguage":["en"],"publisher":{"@type":"Person","name":"Nao Deng","url":"https://inaodeng.com","sameAs":["https://github.com/naodeng","https://x.com/inaodeng","https://naodeng.medium.com/","https://weibo.com/u/1651778270","https://ko-fi.com/naodeng"]},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://inaodeng.com/en/?q={search_term_string}"},"query-input":"required name=search_term_string"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Nao Deng","url":"https://inaodeng.com","sameAs":["https://github.com/naodeng","https://x.com/inaodeng","https://naodeng.medium.com/","https://weibo.com/u/1651778270","https://ko-fi.com/naodeng"]}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://inaodeng.com/en/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://inaodeng.com/en/blog/"},{"@type":"ListItem","position":3,"name":"K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks","item":"https://inaodeng.com/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"}]}</script><style>
    body {
      font-family: "Noto Sans", sans-serif;
    }
  </style><script async src="https://www.googletagmanager.com/gtag/js?id=G-FSJSZ2E3B9"></script><script>(function(){const gaId = "G-FSJSZ2E3B9";

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', gaId);
    })();</script><!-- Google AdSense --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7249159446737834" crossorigin="anonymous"></script><!-- Counterscale Ëá™ÈÉ®ÁΩ≤ÁªüËÆ° (https://analytics.inaodeng.com) --><script id="counterscale-script" data-site-id="inaodeng.com" src="https://analytics.inaodeng.com/tracker.js" defer></script><link rel="stylesheet" href="/_astro/_id_.WUxLHa_m.css">
<style>.breadcrumb[data-astro-cid-qaanghzh]{margin-block-end:var(--sp-m, 1rem)}.breadcrumb-list[data-astro-cid-qaanghzh]{list-style:none;margin:0;padding:0;display:flex;flex-wrap:wrap;align-items:center;gap:.25rem .5rem;font-size:.875rem;color:color-mix(in srgb,var(--color-main) 65%,transparent)}.breadcrumb-item[data-astro-cid-qaanghzh]{display:inline-flex;align-items:center;gap:.25rem}.breadcrumb-link[data-astro-cid-qaanghzh]{color:inherit;text-decoration:none}.breadcrumb-link[data-astro-cid-qaanghzh]:hover{color:var(--color-theme);text-decoration:underline}.breadcrumb-icon[data-astro-cid-qaanghzh]{display:inline-flex;flex-shrink:0;margin-inline-end:.35em;color:var(--color-theme);opacity:.85}.breadcrumb-icon[data-astro-cid-qaanghzh] svg[data-astro-cid-qaanghzh]{vertical-align:middle}.breadcrumb-icon--current[data-astro-cid-qaanghzh]{opacity:.7}.breadcrumb-current[data-astro-cid-qaanghzh]{color:inherit;display:inline-flex;align-items:center;gap:.35em}.breadcrumb-sep[data-astro-cid-qaanghzh]{display:inline-flex;align-items:center;margin-inline:.4rem;color:color-mix(in srgb,var(--color-main) 45%,transparent);user-select:none}.breadcrumb-sep[data-astro-cid-qaanghzh] svg[data-astro-cid-qaanghzh]{vertical-align:middle}
</style>
<link rel="stylesheet" href="/_astro/_id_.DKZjF0rP.css"></head> <body> <a href="#main" class="skip-link">Skip to main content</a> <div id="js-languageSuggest" data-astro-cid-onlux7ho> <a id="js-link" href="#" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>autorenew</span> <span id="js-linkText" data-astro-cid-onlux7ho></span> </a> <button id="js-close" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>close</span> </button> </div> <script>(function(){const currentLocale = "en";
const LOCALES = {"en":{"label":"English","lang":"en-US"},"zh-cn":{"label":"ÁÆÄ‰Ωì‰∏≠Êñá","lang":"zh-CN"}};

  const browserLang = navigator.language.toLowerCase();
  const suggest = document.getElementById("js-languageSuggest");

  const showSuggest = (lang) => {
    const pathnames = location.pathname.split("/");
    const link = document.getElementById("js-link");
    const linkText = document.getElementById("js-linkText");
    pathnames[1] = lang;
    link.href = pathnames.join("/");
    linkText.innerText = LOCALES[lang].label;
    suggest.style.display = "block";
  };

  if (
    currentLocale === browserLang ||
    currentLocale === browserLang.split("-")[0] ||
    localStorage.languageSuggestDenied ||
    localStorage.selectedLang
  ) {
    return;
  } else if (Object.keys(LOCALES).includes(browserLang)) {
    showSuggest(browserLang);
  } else if (Object.keys(LOCALES).includes(browserLang.split("-")[0])) {
    showSuggest(browserLang.split("-")[0]);
  }

  document.getElementById("js-close").addEventListener("click", () => {
    suggest.style.display = "none";
    localStorage.languageSuggestDenied = true;
  });
})();</script>  <header class="l-header" data-astro-cid-3ef6ksr2> <div class="site-brand" data-astro-cid-3ef6ksr2> <h1 dir="ltr" data-astro-cid-3ef6ksr2> <a href="/en/" data-astro-cid-3ef6ksr2> <img src="/favicon.svg" alt="" class="site-logo" width="36" height="36" data-astro-cid-3ef6ksr2> <span data-astro-cid-3ef6ksr2>Nao&#39;s Blog</span> </a> </h1> <p class="site-slogan" data-astro-cid-3ef6ksr2>Quality Analyst, Not Quality Assurance.</p> </div> <nav class="l-content" data-astro-cid-3ef6ksr2> <ul data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/en/" data-astro-cid-3ef6ksr2> Home </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/blog/" data-astro-cid-3ef6ksr2> Blog </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/archive/" data-astro-cid-3ef6ksr2> Archive </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/projects/" data-astro-cid-3ef6ksr2> Projects </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/about/" data-astro-cid-3ef6ksr2> About </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/sponsor/" data-astro-cid-3ef6ksr2> Support </a> </li> <li class="nav-tool" data-astro-cid-3ef6ksr2> <div class="locale-dropdown compact" data-locale-dropdown data-astro-cid-opxux4jt> <button type="button" class="locale-trigger" aria-label="Language" aria-expanded="false" aria-haspopup="true" data-locale-trigger data-astro-cid-opxux4jt> <span class="material-icons-sharp icon-lang" aria-hidden="true" data-astro-cid-opxux4jt>translate</span> <span class="locale-flag" data-astro-cid-opxux4jt>üá∫üá∏</span>  </button> <div class="locale-panel" hidden data-locale-panel data-astro-cid-opxux4jt> <ul data-astro-cid-opxux4jt> <li data-astro-cid-opxux4jt> <a href="/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/" data-lang="en" data-locale-option data-astro-cid-opxux4jt> English </a> </li><li data-astro-cid-opxux4jt> <a href="/zh-cn/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/" data-lang="zh-cn" data-locale-option data-astro-cid-opxux4jt> ÁÆÄ‰Ωì‰∏≠Êñá </a> </li> </ul> </div> </div> <script type="module">function r(e){const n=e.querySelector("[data-locale-trigger]"),a=e.querySelector("[data-locale-panel]");if(!n||!a)return;const c=()=>{a.hidden=!0,n.setAttribute("aria-expanded","false")},d=()=>{a.hidden=!1,n.setAttribute("aria-expanded","true")},o=()=>a.hidden?d():c();n.addEventListener("click",t=>{t.stopPropagation(),o()}),e.querySelectorAll("[data-locale-option]").forEach(t=>{t.addEventListener("click",()=>{const l=t.dataset.lang;l&&localStorage.setItem("selectedLang",l)})}),document.addEventListener("click",t=>{a.hidden||e.contains(t.target)||c()})}document.querySelectorAll("[data-locale-dropdown]").forEach(e=>r(e));</script>  </li> <li class="nav-tool" data-astro-cid-3ef6ksr2> <button type="button" class="btn-icon" aria-label="Search" title="‚åòK or Ctrl+K to open search" data-search-open data-astro-cid-3ef6ksr2> <span class="material-icons-sharp" aria-hidden="true" data-astro-cid-3ef6ksr2>search</span> <span class="btn-icon-kbd" data-astro-cid-3ef6ksr2>‚åòK</span> </button> </li> </ul> </nav> </header>  <main id="main" class="l-main l-content l-content--with-sidebar"> <nav class="breadcrumb" aria-label="Breadcrumb" data-astro-cid-qaanghzh><ol class="breadcrumb-list" data-astro-cid-qaanghzh><li class="breadcrumb-item" data-astro-cid-qaanghzh><a href="/en/" class="breadcrumb-link" data-astro-cid-qaanghzh><span class="breadcrumb-icon" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" data-astro-cid-qaanghzh></path><polyline points="9 22 9 12 15 12 15 22" data-astro-cid-qaanghzh></polyline></svg></span>Home</a><span class="breadcrumb-sep" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="0.65em" height="0.65em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><polyline points="9 18 15 12 9 6" data-astro-cid-qaanghzh></polyline></svg></span></li><li class="breadcrumb-item" data-astro-cid-qaanghzh><a href="/en/blog/" class="breadcrumb-link" data-astro-cid-qaanghzh><span class="breadcrumb-icon" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" data-astro-cid-qaanghzh></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" data-astro-cid-qaanghzh></path><line x1="8" y1="6" x2="16" y2="6" data-astro-cid-qaanghzh></line><line x1="8" y1="10" x2="16" y2="10" data-astro-cid-qaanghzh></line></svg></span>Blog</a><span class="breadcrumb-sep" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="0.65em" height="0.65em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><polyline points="9 18 15 12 9 6" data-astro-cid-qaanghzh></polyline></svg></span></li><li class="breadcrumb-item" data-astro-cid-qaanghzh><span class="breadcrumb-current" aria-current="page" data-astro-cid-qaanghzh><span class="breadcrumb-icon breadcrumb-icon--current" aria-hidden="true" data-astro-cid-qaanghzh><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qaanghzh><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-astro-cid-qaanghzh></path><polyline points="14 2 14 8 20 8" data-astro-cid-qaanghzh></polyline><line x1="16" y1="13" x2="8" y2="13" data-astro-cid-qaanghzh></line><line x1="16" y1="17" x2="8" y2="17" data-astro-cid-qaanghzh></line><polyline points="10 9 9 9 8 9" data-astro-cid-qaanghzh></polyline></svg></span>K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks</span></li></ol></nav><article data-astro-cid-uwv4mmhs>  <script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks","description":"The article provides a detailed exploration of the HTTP request functionality in K6, dissecting common performance metrics and check features. Learn how to leverage K6 for robust performance testing, simulating user behavior through HTTP requests, and assessing system response by understanding performance metrics. The tutorial delves into configuring and executing checks, ensuring performance aligns with expected standards. Whether you're a beginner or an experienced performance testing professional, this guide equips you with practical knowledge to harness the full potential of K6 in performance testing. Click the link to embark on an efficient journey into performance testing with K6!","datePublished":"2024-01-11T09:10:00.000Z","dateModified":"2024-01-11T09:10:00.000Z","url":"https://inaodeng.com/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/","image":"https://inaodeng.com/default.jpg","author":{"@type":"Person","name":"nao.deng","url":"https://inaodeng.com"},"publisher":{"@type":"Organization","name":"Nao's Blog","url":"https://inaodeng.com"}}</script> <div class="article-with-toc" data-astro-cid-v3cnrnum> <div class="article-body" data-astro-cid-v3cnrnum> <header class="article-title-header" id="article-title-header" data-astro-cid-v3cnrnum> <h1 data-astro-cid-v3cnrnum>K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks</h1> <p class="article-meta" data-astro-cid-v3cnrnum> <span class="meta-item" data-astro-cid-v3cnrnum> <span class="meta-icon" aria-hidden="true" data-astro-cid-v3cnrnum> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-v3cnrnum><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-astro-cid-v3cnrnum></rect><line x1="16" y1="2" x2="16" y2="6" data-astro-cid-v3cnrnum></line><line x1="8" y1="2" x2="8" y2="6" data-astro-cid-v3cnrnum></line><line x1="3" y1="10" x2="21" y2="10" data-astro-cid-v3cnrnum></line></svg> </span> <time datetime="2024-01-11T09:10:00.000Z" data-astro-cid-v3cnrnum> 1/11/2024 </time> </span> <span class="meta-sep" aria-hidden="true" data-astro-cid-v3cnrnum>‚Ä¢</span> <span class="meta-item" data-astro-cid-v3cnrnum> <span class="meta-icon" aria-hidden="true" data-astro-cid-v3cnrnum> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-v3cnrnum><circle cx="12" cy="12" r="10" data-astro-cid-v3cnrnum></circle><polyline points="12 6 12 12 16 14" data-astro-cid-v3cnrnum></polyline></svg> </span> <span data-astro-cid-v3cnrnum>14 min read</span> </span> <span class="meta-sep" aria-hidden="true" data-astro-cid-v3cnrnum>‚Ä¢</span> <span class="meta-item" data-astro-cid-v3cnrnum> <span class="meta-icon" aria-hidden="true" data-astro-cid-v3cnrnum> <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-v3cnrnum><circle cx="12" cy="12" r="10" data-astro-cid-v3cnrnum></circle><path d="M14.83 14.83a4 4 0 1 1-5.66-5.66" data-astro-cid-v3cnrnum></path><path d="M12 12h.01" data-astro-cid-v3cnrnum></path></svg> </span> <span data-astro-cid-v3cnrnum>CC BY-SA 4.0</span> </span>  </p> <div class="tags" data-astro-cid-v3cnrnum> <a href="/en/tags/K6/" class="tag" data-astro-cid-v3cnrnum>K6</a><a href="/en/tags/Performance Testing/" class="tag" data-astro-cid-v3cnrnum>Performance Testing</a> </div> </header> <div class="cover-wrap" data-astro-cid-v3cnrnum> <div class="cover-bg cover-bg--default" role="img" aria-hidden="true" data-astro-cid-v3cnrnum></div> <div class="cover-overlay" data-astro-cid-v3cnrnum> <h2 class="cover-title" data-astro-cid-v3cnrnum>K6 Performance Testing Tutorial: Common Functions (1) - HTTP Request, Metrics and Checks</h2> <p class="cover-meta" data-astro-cid-v3cnrnum> <span class="cover-author" data-astro-cid-v3cnrnum>nao.deng</span> <span class="cover-sep" data-astro-cid-v3cnrnum>¬∑</span> <time datetime="2024-01-11T09:10:00.000Z" data-astro-cid-v3cnrnum>1/11/2024</time> </p> </div> </div> <div class="article-main" data-astro-cid-v3cnrnum> <div class="prose" data-astro-cid-v3cnrnum> <h2 id="k6-common-function">K6 common function</h2>
<h3 id="http-requests">HTTP Requests</h3>
<p>The first step in performance testing with K6 is to define the HTTP requests to be tested.</p>
<h4 id="get-request-example">GET Request Example</h4>
<p>A simple HTTP request for the GET method is already included in the demo test script created with the <code>k6 new</code> command:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> http </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { sleep } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">  http.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://test.k6.io&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">  sleep</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h4 id="post-request-example">POST Request Example</h4>
<p>This POST request example shows the application of some complex scenarios (POST request with email/password authentication load)</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> http </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> url</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> &#39;http://test.k6.io/login&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> payload</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> JSON</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">stringify</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">    email: </span><span style="color:#9ECBFF">&#39;aaa&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    password: </span><span style="color:#9ECBFF">&#39;bbb&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> params</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    headers: {</span></span>
<span class="line"><span style="color:#9ECBFF">      &#39;Content-Type&#39;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&#39;application/json&#39;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  http.</span><span style="color:#B392F0">post</span><span style="color:#E1E4E8">(url, payload, params);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p>The above is taken from <a href="https://k6.io/docs/using-k6/http-requests">K6 Official Documentation</a></p>
</blockquote>
<h4 id="supported-http-methods">Supported HTTP Methods</h4>
<p>The HTTP module provided by K6 can handle various HTTP requests and methods. The following is a list of supported HTTP methods:</p>













































<table><thead><tr><th>NAME</th><th>VALUE</th></tr></thead><tbody><tr><td>batch()</td><td>makes multiple HTTP requests in parallel (like e.g. browsers tend to do).</td></tr><tr><td>del()</td><td>makes an HTTP DELETE request.</td></tr><tr><td>get()</td><td>makes an HTTP GET request.</td></tr><tr><td>head()</td><td>makes an HTTP HEAD request.</td></tr><tr><td>options()</td><td>makes an HTTP OPTIONS request.</td></tr><tr><td>patch()</td><td>makes an HTTP PATCH request.</td></tr><tr><td>post()</td><td>makes an HTTP POST request.</td></tr><tr><td>put()</td><td>makes an HTTP PUT request.</td></tr><tr><td>request()</td><td>makes any type of HTTP request.</td></tr></tbody></table>
<h4 id="http-request-tags">HTTP Request Tags</h4>
<p>K6 allows you to add tags to each HTTP request. Combining tags and grouping makes it easy to better organize in test results, group requests and filter results to organize analysis.</p>
<p>The following is a list of supported tags:</p>





































<table><thead><tr><th>NAME</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>expected_response</td><td>By default, response statuses between 200 and 399 are true. Change the default behavior with <code>setResponseCallback</code>.</td></tr><tr><td>group</td><td>When the request runs inside a <code>group</code>, the tag value is the group name. Default is empty.</td></tr><tr><td>name</td><td>Defaults to URL requested</td></tr><tr><td>method</td><td>Request method (GET, POST, PUT etc.)</td></tr><tr><td>scenario</td><td>When the request runs inside a <code>scenario</code>, the tag value is the scenario name. Default is <code>default</code>.</td></tr><tr><td>status</td><td>response status</td></tr><tr><td>url</td><td>defaults to URL requested</td></tr></tbody></table>
<p>Examples of HTTP requests using tag and group tags will be shown in subsequent demos.</p>
<p>You can also refer to the official examples:<a href="https://grafana.com/docs/k6/latest/using-k6/http-requests/">https://grafana.com/docs/k6/latest/using-k6/http-requests/</a></p>
<h3 id="metrics">Metrics</h3>
<p>The metrics are used to measure the performance of the system under test conditions. By default, k6 automatically collects built-in metrics. In addition to the built-in metrics, you can create custom metrics.</p>
<p>Metrics generally fall into four categories:</p>
<ol>
<li>Counters: Summing values.</li>
<li>Gauges: Tracking the smallest, largest, and most recent values.</li>
<li>Rates: Tracking how often non-zero values occur.</li>
<li>Trends: Calculating statistical information (such as mean, mode, or percentile) for multiple values.</li>
</ol>
<p>To ensure that test assertions meet the criteria, thresholds can be written based on the conditions of the metrics required by the performance test (the specifics of the expression depend on the type of metric).</p>
<p>For subsequent filtering of metrics, labels and groupings can be used, allowing for better organization of test results.</p>
<blockquote>
<p>The test results output file can export metrics in a variety of summary and fine-grained formats. For more information, refer to the results output documentation. (This section will be covered in more detail in the later part of the test results output documentation.)</p>
</blockquote>
<h4 id="k6-built-in-metrics">K6 Built-in Metrics</h4>
<p>Every k6 test execution emits both built-in and custom metrics. Each supported protocol also has its specific metrics.</p>
<h5 id="standard-built-in-metrics">Standard Built-in Metrics</h5>
<p>Regardless of the protocol used in the test, k6 always collects the following metrics:</p>


















































<table><thead><tr><th>Metric Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>vus</td><td>Gauge</td><td>Current number of active virtual users</td></tr><tr><td>vus_max</td><td>Gauge</td><td>Max possible number of virtual users (VU resources are pre-allocated, to avoid affecting performance when scaling up load )</td></tr><tr><td>iterations</td><td>Counter</td><td>The aggregate number of times the VUs execute the JS script (the default function).</td></tr><tr><td>iteration_duration</td><td>Trend</td><td>The time to complete one full iteration, including time spent in setup and teardown. To calculate the duration of the iteration‚Äôs function for the specific scenario, try this workaround</td></tr><tr><td>dropped_iterations</td><td>Counter</td><td>The number of iterations that weren‚Äôt started due to lack of VUs (for the arrival-rate executors) or lack of time (expired maxDuration in the iteration-based executors). About dropped iterations</td></tr><tr><td>data_received</td><td>Counter</td><td>The amount of received data. This example covers how to track data for an individual URL.</td></tr><tr><td>data_sent</td><td>Counter</td><td>The amount of data sent. Track data for an individual URL to track data for an individual URL.</td></tr><tr><td>checks</td><td>Rate</td><td>The rate of successful checks.</td></tr></tbody></table>
<h5 id="http-specific-built-in-metrics">HTTP-specific built-in metrics</h5>
<p>HTTP-specific built-in metrics are generated only when the test makes HTTP requests.Other types of requests, such as WebSocket, do not generate these metrics.</p>
<blockquote>
<p>Note: For all http_req_* metrics, the timestamp is emitted at the end of the request. In other words, the timestamp occurs when k6 receives the end of the response body or when the request times out.</p>
</blockquote>
<p>The following table lists HTTP-specific built-in metrics:</p>























































<table><thead><tr><th>Metric Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>http_reqs</td><td>Counter</td><td>How many total HTTP requests k6 generated.</td></tr><tr><td>http_req_blocked</td><td>Trend</td><td>Time spent blocked (waiting for a free TCP connection slot) before initiating the request. float</td></tr><tr><td>http_req_connecting</td><td>Trend</td><td>Time spent establishing TCP connection to the remote host. float</td></tr><tr><td>http_req_tls_handshaking</td><td>Trend</td><td>Time spent handshaking TLS session with remote host</td></tr><tr><td>http_req_sending</td><td>Trend</td><td>Time spent sending data to the remote host. float</td></tr><tr><td>http_req_waiting</td><td>Trend</td><td>Time spent waiting for response from remote host (a.k.a. ‚Äútime to first byte‚Äù, or ‚ÄúTTFB‚Äù). float</td></tr><tr><td>http_req_receiving</td><td>Trend</td><td>Time spent receiving response data from the remote host. float</td></tr><tr><td>http_req_duration</td><td>Trend</td><td>Total time for the request. It‚Äôs equal to http_req_sending + http_req_waiting + http_req_receiving (i.e. how long did the remote server take to process the request and respond, without the initial DNS lookup/connection times). float</td></tr><tr><td>http_req_failed</td><td>Rate</td><td>The rate of failed requests according to setResponseCallback.</td></tr></tbody></table>
<h5 id="other-built-in-metrics">Other built-in metrics</h5>
<p>In addition to the standard built-in metrics and HTTP-specific built-in metrics, K6 built-in metrics also have other built-in metrics:</p>
<ul>
<li>Browser metrics : <a href="https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#browser">https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#browser</a></li>
<li>Built-in WebSocket metrics : <a href="https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#websockets">https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#websockets</a></li>
<li>Built-in gRPC metrics : <a href="https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#grpc">https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#grpc</a></li>
</ul>
<h4 id="custom-metrics">custom metrics</h4>
<p>Besides the built-in metrics, you can create custom metrics. For example, you can compute a metric for your business logic, or use the Response.timings object to create a metric for a specific set of endpoints.</p>
<p>Each metric type has a constructor to create a custom metric. The constructor creates a metric object of the declared type. Each type has an add method to take metric measurements.</p>
<blockquote>
<p>Note: Custom metrics must be created in the init context. This limits memory and ensures that K6 can verify that all thresholds evaluate the defined metrics.</p>
</blockquote>
<h5 id="custom-metrics-demo">custom metrics demo</h5>
<p>The following example demonstrates how to create a custom trend metrics for wait time:</p>
<blockquote>
<p>The demo_custom_metrics.js file in the project file already contains this demo example, which can be run directly to view the results.</p>
</blockquote>
<h6 id="1import-the-trend-constructor-from-the-k6metrics-module">1.Import the Trend constructor from the k6/metrics module</h6>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Trend } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/metrics&#39;</span><span style="color:#E1E4E8">;</span></span></code></pre>
<blockquote>
<blockquote>
<p>The waiting time trend metrics is a Trends metrics, so the Trend constructor needs to be introduced from the k6/metrics module.</p>
</blockquote>
</blockquote>
<h6 id="2constructs-a-new-custom-metric-trend-object-in-the-init-context">2.Constructs a new custom metric Trend object in the init context</h6>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> myTrend</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Trend</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;waiting_time&#39;</span><span style="color:#E1E4E8">);</span></span></code></pre>
<blockquote>
<p>Construct a new custom metric Trend object in the init context, the object in the script is myTrend, and its metric is displayed as <code>waiting_time</code> in the resulting output.</p>
</blockquote>
<h6 id="3use-the-add-method-in-a-script-to-record-metric-measurements">3.Use the add method in a script to record metric measurements</h6>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> http.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://test.k6.io&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  myTrend.</span><span style="color:#B392F0">add</span><span style="color:#E1E4E8">(res.timings.waiting);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<blockquote>
<p>Use the add method in the script to record the metric measurement values. Here, <code>res.timings.waiting</code> is used, which is the waiting time.</p>
</blockquote>
<h6 id="4demo_custom_metricsjs-complete-code-of-custom-metric">4.demo_custom_metrics.js Complete code of custom metric</h6>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> http </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Trend } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/metrics&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> myTrend</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Trend</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;waiting_time&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> http.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://httpbin.test.k6.io&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  myTrend.</span><span style="color:#B392F0">add</span><span style="color:#E1E4E8">(res.timings.waiting);</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(myTrend.name); </span><span style="color:#6A737D">// waiting_time</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h6 id="5run-demo_custom_metricsjs-and-view-automated-trending-metrics">5.Run demo_custom_metrics.js and view automated trending metrics</h6>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">k6</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> demo_custom_metrics.js</span></span></code></pre>
<p>The running results are as follows:</p>
<p><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/4tbqVc.png" alt=" "/></p>
<blockquote>
<p>As you can see, the custom metric <code>waiting_time</code> has been displayed in the result output.</p>
</blockquote>
<p>For more information about custom metrics, please refer to the official documentation: <a href="https://k6.io/docs/using-k6/metrics/#custom-metrics">https://k6.io/docs/using-k6/metrics/#custom-metrics</a></p>
<h3 id="checks">Checks</h3>
<blockquote>
<p>This can also be understood as assertions, which verify the test results.</p>
</blockquote>
<p>Checks are used to verify whether specific test conditions in different tests are correctly responded to, similar to how we conventionally verify test results in other types of tests to ensure that the system responds as expected.</p>
<p>For example, a check can ensure that the response status of a POST request is 201, or that the size of the response body matches expectations.</p>
<p>Checks are similar to the concept of assertions in many testing frameworks, but <strong>K6 does not abort the test or end it in a failed state when verifications fail. Instead, k6 tracks the failure rate of failed verifications as the test continues to run</strong>.</p>
<blockquote>
<p>Each check creates a rate metric. To make a check abort or cause the test to fail, it can be combined with thresholds.</p>
</blockquote>
<p>Below, we will introduce how to use different types of checks and how to view check results in test results.</p>
<h4 id="1-check-http-response-status">1. Check HTTP Response Status</h4>
<p>K6 checks are particularly useful for response assertions related to HTTP requests.</p>
<p>For example, the following code snippet checks that the HTTP response code is 200:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { check } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> http </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> http.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://httpbin.test.k6.io&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">  check</span><span style="color:#E1E4E8">(res, {</span></span>
<span class="line"><span style="color:#9ECBFF">    &#39;HTTP response code is status 200&#39;</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">r</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> r.status </span><span style="color:#F97583">===</span><span style="color:#79B8FF"> 200</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Running this script, you can see the following results:</p>
<p><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/aTXnpy.png" alt=" "/></p>
<blockquote>
<p>When a script contains checks, the summary report shows how many test checks have passed.</p>
</blockquote>
<p>In this example, note that the check ‚ÄúHTTP response code is status 200‚Äù is 100% successful when called.</p>
<h4 id="2-check-http-response-body">2. Check HTTP Response Body</h4>
<p>In addition to checking the HTTP response status, you can also check the HTTP response body.</p>
<p>For example, the following code snippet checks that the HTTP response body size is 9591 bytes:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { check } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> http </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> http.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://httpbin.test.k6.io&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">  check</span><span style="color:#E1E4E8">(res, {</span></span>
<span class="line"><span style="color:#9ECBFF">    &#39;HTTP response body size is 9591 bytes&#39;</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">r</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> r.body.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> ==</span><span style="color:#79B8FF"> 9591</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Running this script, you can see the following results:</p>
<p><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/AmbL0E.png" alt=" "/></p>
<blockquote>
<p>When a script contains checks, the summary report shows how many test checks have passed.</p>
</blockquote>
<p>In this example, note that the check ‚ÄúHTTP response body size is 9591 bytes‚Äù is 100% successful when called.</p>
<h4 id="3-adding-multiple-checks">3. Adding Multiple Checks</h4>
<p>Sometimes, multiple checks need to be added in a single test script. You can directly add multiple checks in a single check() statement, as shown in the script below:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { check } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> http </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> &#39;k6/http&#39;</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> res</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> http.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;https://httpbin.test.k6.io&#39;</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">  check</span><span style="color:#E1E4E8">(res, {</span></span>
<span class="line"><span style="color:#9ECBFF">    &#39;HTTP response code is status 200&#39;</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">r</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> r.status </span><span style="color:#F97583">===</span><span style="color:#79B8FF"> 200</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">    &#39;HTTP response body size is 9591 bytes&#39;</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">r</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> r.body.</span><span style="color:#79B8FF">length</span><span style="color:#F97583"> ==</span><span style="color:#79B8FF"> 9591</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Running this script, you can see the following results:</p>
<p><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/5yJyBw.png" alt=" "/></p>
<p>In this example, both checks pass successfully (the call is 100% successful).</p>
<blockquote>
<p>Note: When a check fails, the script will continue to execute successfully and will not return a ‚Äúfailed‚Äù exit status. If you need to fail the entire test based on check results, you must combine checks with thresholds. This is particularly useful in specific environments, such as integrating k6 into a CI pipeline or receiving alerts when scheduling performance tests.</p>
</blockquote>
<h2 id="references">References</h2>
<ul>
<li><a href="https://k6.io/docs/">Official K6 documentation: https://k6.io/docs/</a></li>
<li><a href="https://k6.io/">Official website: https://k6.io/</a></li>
<li><a href="https://github.com/Automation-Test-Starter/K6-Performance-Test-starter">K6 Performance Test quick starter: https://github.com/Automation-Test-Starter/K6-Performance-Test-starter/</a></li>
</ul> </div> <section class="article-share" aria-label="Share" data-astro-cid-rhehpfis> <span class="article-share-label" data-astro-cid-rhehpfis>Share</span> <div class="article-share-buttons" data-astro-cid-rhehpfis> <button type="button" class="article-share-btn article-share-copy" data-url="https://inaodeng.com/en/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/" title="Copy link" aria-label="Copy link" data-astro-cid-rhehpfis> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-astro-cid-rhehpfis> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" data-astro-cid-rhehpfis></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" data-astro-cid-rhehpfis></path> </svg> <span class="article-share-btn-text" data-astro-cid-rhehpfis>Copy link</span> </button> <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Finaodeng.com%2Fen%2Fblog%2Fperformance-testing%2Fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2F&text=K6%20Performance%20Testing%20Tutorial%3A%20Common%20Functions%20(1)%20-%20HTTP%20Request%2C%20Metrics%20and%20Checks" target="_blank" rel="noopener noreferrer" class="article-share-btn" title="X (Twitter)" aria-label="X (Twitter)" data-astro-cid-rhehpfis> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-astro-cid-rhehpfis> <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" data-astro-cid-rhehpfis></path> </svg> </a>  <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Finaodeng.com%2Fen%2Fblog%2Fperformance-testing%2Fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2F" target="_blank" rel="noopener noreferrer" class="article-share-btn" title="LinkedIn" aria-label="LinkedIn" data-astro-cid-rhehpfis> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-astro-cid-rhehpfis> <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" data-astro-cid-rhehpfis></path> </svg> </a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Finaodeng.com%2Fen%2Fblog%2Fperformance-testing%2Fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2F" target="_blank" rel="noopener noreferrer" class="article-share-btn" title="Facebook" aria-label="Facebook" data-astro-cid-rhehpfis> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-astro-cid-rhehpfis> <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" data-astro-cid-rhehpfis></path> </svg> </a> <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" class="article-share-btn" title="Instagram" aria-label="Instagram" data-astro-cid-rhehpfis> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-astro-cid-rhehpfis> <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" data-astro-cid-rhehpfis></path> </svg> </a> </div> <span class="article-share-copy-feedback" id="article-share-copy-feedback" aria-live="polite" data-copied="Copied" data-copy-fail="Copy failed" data-copy-unsupported="Please copy the link manually" hidden data-astro-cid-rhehpfis>Copied</span> </section> <script>
  (function () {
    const btn = document.querySelector(".article-share-copy");
    const feedback = document.getElementById("article-share-copy-feedback");
    if (!btn || !feedback) return;
    btn.addEventListener("click", function () {
      const url = btn.getAttribute("data-url") || "";
      if (!url) return;
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(url).then(function () {
          feedback.hidden = false;
          feedback.textContent = feedback.getAttribute("data-copied") || "Copied";
          setTimeout(function () { feedback.hidden = true; }, 1500);
        }).catch(function () {
          feedback.hidden = false;
          feedback.textContent = feedback.getAttribute("data-copy-fail") || "Copy failed";
          setTimeout(function () { feedback.hidden = true; }, 2000);
        });
      } else {
        feedback.hidden = false;
        feedback.textContent = feedback.getAttribute("data-copy-unsupported") || "Copy not supported";
        setTimeout(function () { feedback.hidden = true; }, 2000);
      }
    });
  })();
</script>  <section class="giscus-section" aria-label="Comments" data-astro-cid-an2nl7ar><div class="giscus" data-astro-cid-an2nl7ar></div><script src="https://giscus.app/client.js" data-repo="naodeng/naodeng.com.cn" data-repo-id="R_kgDOHntNtg" data-category="Show and tell" data-category-id="DIC_kwDOHntNts4Cavst" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy" crossorigin="anonymous" async></script></section> </div> </div> <aside class="article-sidebar" aria-label="Sidebar" data-astro-cid-v3cnrnum> <aside class="author-stats-card" aria-label="nao.deng" data-astro-cid-5orn7bli> <a href="/en/" class="author-avatar-link" data-astro-cid-5orn7bli> <img src="/favicon.svg" alt="nao.deng" class="author-avatar" width="80" height="80" data-astro-cid-5orn7bli> </a> <h3 class="author-name" data-astro-cid-5orn7bli>nao.deng</h3> <p class="author-slogan" data-astro-cid-5orn7bli>Quality Analyst, Not Quality Assurance.</p> <hr class="author-divider" data-astro-cid-5orn7bli> <div class="author-stats" data-astro-cid-5orn7bli> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>Articles</span> <span class="stat-value" data-astro-cid-5orn7bli>176</span> </div> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>Categories</span> <span class="stat-value" data-astro-cid-5orn7bli>38</span> </div> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>Tags</span> <span class="stat-value" data-astro-cid-5orn7bli>32</span> </div> <div class="stat-item" data-astro-cid-5orn7bli> <span class="stat-label" data-astro-cid-5orn7bli>Words</span> <span class="stat-value" data-astro-cid-5orn7bli>1682k</span> </div> </div> </aside>  <aside class="toc-sidebar toc-sidebar--below" aria-label="Table of Contents" data-astro-cid-xvrfupwn><nav class="toc-nav" data-astro-cid-xvrfupwn><h2 class="toc-title" data-astro-cid-xvrfupwn>Table of Contents</h2><ul class="toc-list" data-astro-cid-xvrfupwn><li class="toc-item" style="--depth: 2" data-astro-cid-xvrfupwn><a href="#k6-common-function" class="toc-link" data-astro-cid-xvrfupwn>K6 common function</a></li><li class="toc-item" style="--depth: 2" data-astro-cid-xvrfupwn><a href="#references" class="toc-link" data-astro-cid-xvrfupwn>References</a></li></ul></nav></aside><script type="module">function d(){const t=document.querySelector(".toc-sidebar--left"),a=t?.closest(".article-with-toc"),u=document.querySelector(".article-main"),l=document.querySelector(".l-footer");if(!t||!a)return;const i=a.getBoundingClientRect(),w=i.top>=window.innerHeight,h=i.bottom>0&&i.top<window.innerHeight;if(w){t.style.position="absolute",t.style.top="0",t.style.bottom="";return}t.style.position="fixed";const o=document.querySelector(".article-title-header, #article-title-header"),r=o?o.getBoundingClientRect().top:i.top,n=h?Math.max(16,r):16;t.style.top=n+"px";let e;if(h){const c=i.bottom<window.innerHeight;u&&c?e=Math.max(16,window.innerHeight-i.bottom):e=288;const s=Math.max(200,Math.floor(window.innerHeight*.7));window.innerHeight-n-e<s&&(e=Math.max(16,window.innerHeight-n-s))}else e=288;if(l){const c=l.getBoundingClientRect(),s=window.innerHeight-c.top+8;e=Math.max(e,s)}else e=Math.max(e,288);t.style.bottom=e+"px"}function g(){const t=document.querySelector(".toc-sidebar"),a=document.querySelector(".article-main");if(!t||!a)return;const u=t.querySelectorAll(".toc-link"),l=a.querySelectorAll("h2[id], h3[id], h4[id]");if(u.length===0||l.length===0)return;const i=o=>{let r=null;u.forEach(c=>{const f=c.getAttribute("href")===`#${o}`;c.setAttribute("aria-current",f?"true":"false"),f&&(r=c)});const n=document.querySelector(".l-footer"),e=n&&n.getBoundingClientRect().top<window.innerHeight;r&&!e&&t.scrollHeight>t.clientHeight&&r.scrollIntoView({block:"nearest",behavior:"smooth"})},w=new IntersectionObserver(o=>{const r=o.filter(n=>n.isIntersecting).sort((n,e)=>{const c=(n.boundingClientRect?.top??0)+window.scrollY,s=(e.boundingClientRect?.top??0)+window.scrollY;return c-s});r.length>0&&i(r[0].target.id)},{rootMargin:"-80px 0px -66% 0px",threshold:0});l.forEach(o=>w.observe(o));const h=Array.from(l).find(o=>o.getBoundingClientRect().top<=window.innerHeight*.5);i(h?.id??l[0]?.id??null)}function m(){d(),g()}document.addEventListener("DOMContentLoaded",m);window.addEventListener("load",d);window.addEventListener("load",()=>setTimeout(d,50));window.addEventListener("scroll",()=>d(),{passive:!0});window.addEventListener("resize",()=>d());typeof ResizeObserver<"u"&&document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".article-with-toc");t&&new ResizeObserver(()=>d()).observe(t)});</script> </aside> </div>  </article>  </main> <footer class="l-footer" data-astro-cid-sz7xmlte> <div class="footer-container l-content" data-astro-cid-sz7xmlte> <!-- Á§æ‰∫§‰∏éËØ≠Ë®ÄÂàáÊç¢Âå∫Âüü --> <div class="social-links" data-astro-cid-sz7xmlte> <a href="https://github.com/naodeng" target="_blank" rel="noopener noreferrer" title="GitHub" class="social-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" data-astro-cid-sz7xmlte></path></svg>      </a><a href="https://x.com/inaodeng" target="_blank" rel="noopener noreferrer" title="X" class="social-icon" data-astro-cid-sz7xmlte>  <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M18.901 1.153h3.68l-8.04 4.617L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z" data-astro-cid-sz7xmlte></path></svg>     </a><a href="https://naodeng.medium.com/" target="_blank" rel="noopener noreferrer" title="Medium" class="social-icon" data-astro-cid-sz7xmlte>   <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42S14.2 15.54 14.2 12s1.51-6.42 3.38-6.42 3.38 2.88 3.38 6.42zM24 12c0 3.17-.53 5.75-1.19 5.75s-1.19-2.58-1.19-5.75.53-5.75 1.19-5.75S24 8.83 24 12z" data-astro-cid-sz7xmlte></path></svg>    </a><a href="https://weibo.com/u/1651778270" target="_blank" rel="noopener noreferrer" title="Weibo" class="social-icon" data-astro-cid-sz7xmlte>    <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M10.08 18.12c-3.12 0-5.64-1.32-5.64-3 0-1.68 2.52-3 5.64-3s5.64 1.32 5.64 3c0 1.68-2.52 3-5.64 3zm13.92-10.8c-.24-.48-.72-.72-1.2-.72h-.24c-1.2.24-2.16 1.44-2.16 2.88 0 1.44.96 2.64 2.16 2.88h.24c.48 0 .96-.24 1.2-.72.24-.48.24-1.2 0-1.68-.24-.48-.24-1.2 0-1.68.24-.48.24-1.2 0-1.68zm-3.36 1.2c-.48-.24-.96-.48-1.44-.48h-.24c-1.44.24-2.64 1.68-2.64 3.36 0 1.68 1.2 3.12 2.64 3.36h.24c.48 0 .96-.24 1.44-.48.48-.24.72-.72.72-1.2 0-.48-.24-.96-.72-1.2-.48-.24-.48-1.2 0-1.44.48-.24.72-.72.72-1.2 0-.48-.24-.96-.72-1.2zM12 2.4c-6.6 0-12 4.08-12 9.12 0 5.04 5.4 9.12 12 9.12s12-4.08 12-9.12c0-5.04-5.4-9.12-12-9.12zm0 15.6c-4.68 0-8.4-2.88-8.4-6.48 0-3.6 3.72-6.48 8.4-6.48s8.4 2.88 8.4 6.48c0 3.6-3.72 6.48-8.4 6.48z" data-astro-cid-sz7xmlte></path></svg>   </a><a href="https://ko-fi.com/naodeng" target="_blank" rel="noopener noreferrer" title="Ko-fi" class="social-icon" data-astro-cid-sz7xmlte>     <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.724c-.604 0-.724.467-.724.467s-.024 11.297 0 14.554c.024 3.258 1.821 4.622 1.821 4.622h12.012c.604 0 .724-.467.724-.467s.024-1.109 0-3.178l.232-.039c4.085-.691 9.113-2.34 9.092-11.361zm-4.805 7.403c-1.053.196-2.306.26-3.509.216l.103-8.847c.301-.004.621.005.952.026 3.29.21 4.269 2.739 4.256 5.075-.012 2.337-.791 3.33-1.802 3.53z" data-astro-cid-sz7xmlte></path></svg>  </a><a href="mailto:dengnao@gmail.com" target="_blank" rel="noopener noreferrer" title="Email" class="social-icon" data-astro-cid-sz7xmlte>      <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="/zh-cn/blog/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/" class="social-icon lang-toggle" title="ÂàáÊç¢Ëá≥‰∏≠Êñá" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte> <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 5.11.76-1.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" data-astro-cid-sz7xmlte></path> </svg> <span class="lang-label" data-astro-cid-sz7xmlte>ZH</span> </a> </div> <!-- Â∫ïÈÉ®Ê¨°Á∫ßÂØºËà™ --> <nav class="footer-nav" data-astro-cid-sz7xmlte> <a href="/en/about/" data-astro-cid-sz7xmlte>About</a> <a href="/en/archive/" data-astro-cid-sz7xmlte>Archive</a> <a href="/en/projects/" data-astro-cid-sz7xmlte>Projects</a> <a href="/en/series/" data-astro-cid-sz7xmlte>Series</a> <a href="/en/tags/" data-astro-cid-sz7xmlte>Tags</a> <a href="/en/sponsor/" data-astro-cid-sz7xmlte>Support</a> <a href="/en/copyright/" data-astro-cid-sz7xmlte>Copyright</a> <a href="/en/privacy/" data-astro-cid-sz7xmlte>Privacy</a> <a href="/en/links/" data-astro-cid-sz7xmlte>Friends</a> <a href="https://status.inaodeng.com" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte>Status</a> <a href="https://analytics.inaodeng.com/dashboard?site=inaodeng.com" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte>Analytics</a> <a href="/en/rss.xml/" target="_blank" data-astro-cid-sz7xmlte>RSS Feed</a> <a href="/en/sitemap/" data-astro-cid-sz7xmlte>Sitemap</a> </nav> <!-- ÁâàÊùÉ‰∏éËÆ∏ÂèØÂå∫Âüü --> <div class="footer-info" data-astro-cid-sz7xmlte> <p class="footer-slogan" data-astro-cid-sz7xmlte>Quality Analyst, Not Quality Assurance.</p> <div class="copyright" data-astro-cid-sz7xmlte> <a class="copy-link" href="https://inaodeng.com/" data-astro-cid-sz7xmlte>
¬© 2026 Nao&#39;s Blog </a> <span class="separator" data-astro-cid-sz7xmlte>|</span> <a href="/en/copyright/" class="license-link" data-astro-cid-sz7xmlte>Licensed under CC BY-NC-SA 4.0</a> </div> <div class="tech-stack" data-astro-cid-sz7xmlte> <span class="built-with" data-astro-cid-sz7xmlte>Built with Astro &amp; Cloudflare &amp; Github &amp; AI</span> <div class="tech-icons" data-astro-cid-sz7xmlte> <a href="https://astro.build" target="_blank" rel="noopener noreferrer" title="Astro" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M16.62 8.35l-5.67 10.8c-.18.34-.64.34-.82 0L4.38 8.35c-.19-.34.09-.7.41-.7h11.22c.32 0 .6.36.41.7zM12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm0 22C6.48 22 2 17.52 2 12S6.48 2 12 2s10 4.48 10 10-4.48 10-10 10z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://www.cloudflare.com" target="_blank" rel="noopener noreferrer" title="Cloudflare" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M16.5 10.5h-9c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h9c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5zm-4.5 4.5h-4.5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5H12c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5zm9-12H3c-1.7 0-3 1.3-3 3v9c0 1.7 1.3 3 3 3h18c1.7 0 3-1.3 3-3v-9c0-1.7-1.3-3-3-3zm0 12H3V6h18v10.5z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com" target="_blank" rel="noopener noreferrer" title="GitHub" class="tech-icon" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" data-astro-cid-sz7xmlte></path></svg> </a> <span title="AI" class="tech-icon tech-icon-ai" data-astro-cid-sz7xmlte> <svg viewBox="0 0 24 24" fill="currentColor" data-astro-cid-sz7xmlte><path d="M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" data-astro-cid-sz7xmlte></path></svg> </span> </div> </div> </div> </div> </footer>  <dialog id="search-dialog" class="search-dialog" aria-label="Search posts‚Ä¶" data-algolia-key="7bf4a2b4e4f0c324b0cca574ab137f6a" data-astro-cid-qk3db3zz> <div class="search-backdrop" data-close data-astro-cid-qk3db3zz></div> <div class="search-box" data-astro-cid-qk3db3zz> <label for="search-input" class="visually-hidden" data-astro-cid-qk3db3zz>Search posts‚Ä¶</label> <input id="search-input" type="search" class="search-input" placeholder="Search posts‚Ä¶" autocomplete="off" enterkeyhint="search" data-astro-cid-qk3db3zz> <div class="search-hint-row" data-astro-cid-qk3db3zz> <span class="search-hint" data-hint data-astro-cid-qk3db3zz>‚åòK or Ctrl+K to open search</span> <p class="search-algolia-badge" data-astro-cid-qk3db3zz> <a href="https://www.algolia.com/" target="_blank" rel="noopener noreferrer" class="search-algolia-link" aria-label="Search by Algolia" data-astro-cid-qk3db3zz> <span class="search-algolia-icon" aria-hidden="true" data-astro-cid-qk3db3zz> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-qk3db3zz> <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" data-astro-cid-qk3db3zz></path> </svg> </span> <span class="search-algolia-text" data-astro-cid-qk3db3zz><span class="search-algolia-by" data-astro-cid-qk3db3zz>Search by</span> Algolia</span> </a> </p> </div> </div> <div class="search-results" id="search-results" role="list" data-astro-cid-qk3db3zz></div> <p class="search-empty" id="search-empty" hidden data-astro-cid-qk3db3zz>No results.</p> </dialog> <script>(function(){const useAlgolia = true;
const algoliaAppId = "5L1S6UUZVF";
const algoliaIndexName = "inaodeng_com_5l1s6uuzvf_pages.tmp";

  /* @ts-nocheck - define:vars Ê≥®ÂÖ•ÁöÑÂèòÈáèÊó†Ê≥ïË¢´Á±ªÂûãÊ£ÄÊü•ËØÜÂà´ */
  const dialog = document.getElementById("search-dialog");
  const input = document.getElementById("search-input");
  const resultsEl = document.getElementById("search-results");
  const emptyEl = document.getElementById("search-empty");
  const backdrop = document.querySelector(".search-backdrop[data-close]");
  const hintEl = document.querySelector("[data-hint]");
  const algoliaKey = dialog ? (dialog.getAttribute("data-algolia-key") || "") : "";

  let index = [];
  let locale = "en";
  let algoliaClient = null;
  let algoliaDebounce = null;
  let lastAlgoliaQuery = "";

  function getLocale() {
    const el = document.documentElement.getAttribute("data-locale");
    return el === "zh-cn" ? "zh-cn" : "en";
  }

  async function loadIndex() {
    if (index.length > 0) return index;
    locale = getLocale();
    const res = await fetch(`/${locale}/search-index.json`);
    if (!res.ok) return [];
    index = await res.json();
    return index;
  }

  function escapeHtml(s) {
    const div = document.createElement("div");
    div.textContent = s;
    return div.innerHTML;
  }

  /**
   * Ê∏≤ÊüìÊêúÁ¥¢ÁªìÊûú
   * @param {Array} items - ÁªìÊûúÂàóË°®
   * @param {boolean} hasQuery - ÊòØÂê¶ÊúâÊêúÁ¥¢ËØç
   * @param {boolean} fromAlgolia - ÊòØÂê¶‰∏∫ Algolia ËøîÂõûÁöÑÁªìÊûúÔºàÂê¶Âàô‰∏∫Êú¨Âú∞ search-index.jsonÔºâ
   */
  function renderItems(items, hasQuery, fromAlgolia) {
    resultsEl.innerHTML = "";
    resultsEl.hidden = items.length === 0;
    emptyEl.hidden = items.length > 0 || !hasQuery;
    resultsEl.setAttribute("data-search-source", fromAlgolia ? "algolia" : "local");

    items.slice(0, 20).forEach((item) => {
      const a = document.createElement("a");
      const url = item.url && item.url.startsWith("/") ? item.url : "/" + (item.url || "").replace(/^\//, "");
      a.href = url;
      a.className = "search-result-item";
      a.setAttribute("role", "listitem");
      const dateStr = new Date(item.date).toLocaleDateString(locale === "zh-cn" ? "zh-CN" : "en-US", {
        year: "numeric",
        month: "short",
        day: "numeric",
      });
      a.innerHTML = `
        <span class="search-result-title">${escapeHtml(item.title)}</span>
        <span class="search-result-meta">${escapeHtml(dateStr)}${item.tags?.length ? " ¬∑ " + item.tags.slice(0, 3).join(", ") : ""}</span>
      `;
      resultsEl.appendChild(a);
    });
  }

  // ‰ΩøÁî®‰∫ã‰ª∂ÂßîÊâòÔºöÂú®ÁªìÊûúÂÆπÂô®‰∏äÁªü‰∏ÄÂ§ÑÁêÜÁÇπÂáªÔºàËß£ÂÜ≥Èº†Ê†áÁÇπÈìæÊé•/ÂÜÖÂ±Ç span ‰∏çË∑≥ËΩ¨ÁöÑÈóÆÈ¢òÔºâ
  resultsEl.addEventListener("click", (e) => {
    const a = e.target.closest("a.search-result-item");
    if (!a) return;
    e.preventDefault();
    e.stopPropagation();
    const url = a.getAttribute("href");
    if (!url) return;
    dialog.close();
    setTimeout(function () {
      window.location.assign(url);
    }, 80);
  });

  function filter(q) {
    const lower = q.trim().toLowerCase();
    if (!lower) return [];
    return index.filter(
      (item) =>
        item.title.toLowerCase().includes(lower) ||
        item.description.toLowerCase().includes(lower) ||
        (item.tags && item.tags.some((t) => t.toLowerCase().includes(lower)))
    );
  }

  async function algoliaSearch(query) {
    if (!algoliaClient) {
      // is:inline ËÑöÊú¨Êú™ÊâìÂåÖÔºå‰ªé ESM CDN Âä†ËΩΩ
      const mod = await import("https://esm.sh/algoliasearch@5");
      const { algoliasearch } = mod;
      algoliaClient = algoliasearch(algoliaAppId, algoliaKey);
    }
    locale = getLocale();
    const { hits } = await algoliaClient.searchSingleIndex({
      indexName: algoliaIndexName,
      searchParams: {
        query,
        hitsPerPage: 30,
      },
    });
    // ÊåâÂΩìÂâçËØ≠Ë®ÄÂú®ÂÆ¢Êà∑Á´ØÂÜçËøáÊª§ÔºåÈÅøÂÖç facet ‰∏éÁ¥¢Âºï‰∏ç‰∏ÄËá¥ÂØºËá¥ 0 ÁªìÊûú
    const currentLang = locale === "zh-cn" ? "zh-cn" : "en";
    return hits.filter((h) => h.lang === currentLang).slice(0, 20);
  }

  function onInput() {
    const q = input.value;
    const hasQuery = q.trim().length > 0;

    if (useAlgolia) {
      if (!hasQuery) {
        renderItems([], false, false);
        return;
      }
      if (algoliaDebounce) clearTimeout(algoliaDebounce);
      algoliaDebounce = setTimeout(async () => {
        const queryAtRequest = q;
        lastAlgoliaQuery = queryAtRequest;
        algoliaDebounce = null;
        try {
          const items = await algoliaSearch(queryAtRequest);
          if (lastAlgoliaQuery === queryAtRequest) {
            if (items.length === 0) console.warn("[Algolia] Êó†ÁªìÊûú: index=" + algoliaIndexName + " query=" + queryAtRequest + " lang=" + locale);
            renderItems(items, true, true);
          }
        } catch (err) {
          console.error("[Algolia] ËØ∑Ê±ÇÂ§±Ë¥•ÔºàÊ£ÄÊü• Referrer/API Key ÊùÉÈôêÔºâ:", err);
          if (lastAlgoliaQuery === queryAtRequest) renderItems([], true, true);
        }
      }, 200);
      return;
    }

    if (!index.length) {
      resultsEl.hidden = true;
      emptyEl.hidden = true;
      return;
    }
    const items = filter(q);
    renderItems(items, hasQuery, false);
  }

  function openSearch() {
    locale = getLocale();
    if (useAlgolia) {
      dialog.showModal();
      input.value = "";
      input.focus();
      resultsEl.hidden = true;
      emptyEl.hidden = true;
      if (hintEl) hintEl.style.display = "block";
      return;
    }
    loadIndex().then(() => {
      dialog.showModal();
      input.value = "";
      input.focus();
      resultsEl.hidden = true;
      emptyEl.hidden = true;
      if (hintEl) hintEl.style.display = "block";
    });
  }

  function closeSearch() {
    dialog.close();
    if (hintEl) hintEl.style.display = "";
  }

  dialog.addEventListener("close", () => {
    if (hintEl) hintEl.style.display = "";
  });

  dialog.addEventListener("cancel", closeSearch);

  backdrop?.addEventListener("click", closeSearch);

  input.addEventListener("input", onInput);
  input.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      closeSearch();
      e.preventDefault();
    }
    if (e.key === "Enter") {
      const first = resultsEl.querySelector(".search-result-item");
      if (first) {
        first.click();
        e.preventDefault();
      }
    }
  });

  document.addEventListener("keydown", (e) => {
    if ((e.metaKey || e.ctrlKey) && e.key === "k") {
      e.preventDefault();
      if (dialog.open) closeSearch();
      else openSearch();
    }
  });

  document.querySelectorAll("[data-search-open]").forEach((el) => {
    el.addEventListener("click", openSearch);
  });

  window.addEventListener("search-open", openSearch);
})();</script>    </body> </html>  