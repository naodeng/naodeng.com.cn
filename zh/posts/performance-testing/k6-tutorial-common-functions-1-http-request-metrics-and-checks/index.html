<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 | 软件测试同学</title>
<meta name=keywords content><meta name=description content="这篇文章详细介绍了 K6 中的 HTTP 请求（http request）功能，解析了常用的性能指标和检查功能。学会如何使用 K6 进行强大的性能测试，通过 HTTP 请求模拟用户行为，了解性能指标以评估系统响应。文章还深入讲解了如何配置和执行检查，确保性能符合预期标准。无论您是初学者还是经验丰富的性能测试专业人员，这篇教程将为您提供实用知识，助您充分发挥 K6 的性能测试潜力。点击链接，开启高效性能测试之旅！"><meta name=author content="nao.deng"><link rel=canonical href=https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/><meta name=google-site-verification content="google5e9a7c9479924ed2"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://naodeng.com.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://naodeng.com.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://naodeng.com.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://naodeng.com.cn/apple-touch-icon.png><link rel=mask-icon href=https://naodeng.com.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://naodeng.com.cn/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/><link rel=alternate hreflang=zh href=https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=baidu-site-verification content="codeva-2siuZUJUWf"><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "56f727a52e3349f6947d888452fecc8a"}'></script><script defer data-website-id=b3b285c9-3c35-4398-9252-91bb70560b84 src=https://analytics.naodeng.com.cn/hugo></script><meta http-equiv=Content-Type content="text/html;charset=gb2312"><meta name=sogou_site_verification content="iwkYDJrzfK"><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!1})}</script><meta property="og:title" content="K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查"><meta property="og:description" content="这篇文章详细介绍了 K6 中的 HTTP 请求（http request）功能，解析了常用的性能指标和检查功能。学会如何使用 K6 进行强大的性能测试，通过 HTTP 请求模拟用户行为，了解性能指标以评估系统响应。文章还深入讲解了如何配置和执行检查，确保性能符合预期标准。无论您是初学者还是经验丰富的性能测试专业人员，这篇教程将为您提供实用知识，助您充分发挥 K6 的性能测试潜力。点击链接，开启高效性能测试之旅！"><meta property="og:type" content="article"><meta property="og:url" content="https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"><meta property="og:image" content="https://naodeng.com.cn/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-11T17:10:00+08:00"><meta property="article:modified_time" content="2024-01-11T17:10:00+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://naodeng.com.cn/papermod-cover.png"><meta name=twitter:title content="K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查"><meta name=twitter:description content="这篇文章详细介绍了 K6 中的 HTTP 请求（http request）功能，解析了常用的性能指标和检查功能。学会如何使用 K6 进行强大的性能测试，通过 HTTP 请求模拟用户行为，了解性能指标以评估系统响应。文章还深入讲解了如何配置和执行检查，确保性能符合预期标准。无论您是初学者还是经验丰富的性能测试专业人员，这篇教程将为您提供实用知识，助您充分发挥 K6 的性能测试潜力。点击链接，开启高效性能测试之旅！"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://naodeng.com.cn/zh/posts/"},{"@type":"ListItem","position":2,"name":"K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查","item":"https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查","name":"K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查","description":"这篇文章详细介绍了 K6 中的 HTTP 请求（http request）功能，解析了常用的性能指标和检查功能。学会如何使用 K6 进行强大的性能测试，通过 HTTP 请求模拟用户行为，了解性能指标以评估系统响应。文章还深入讲解了如何配置和执行检查，确保性能符合预期标准。无论您是初学者还是经验丰富的性能测试专业人员，这篇教程将为您提供实用知识，助您充分发挥 K6 的性能测试潜力。点击链接，开启高效性能测试之旅！","keywords":[],"articleBody":"K6 常用功能 HTTP Requests 使用 K6 进行性能测试的第一步就是定义要测试的 HTTP 请求。\nGET 请求例子 使用 k6 new 命令创建的 demo 测试脚本中，已经包含了一个简单的 GET 方法 HTTP 请求：\nimport http from 'k6/http'; import { sleep } from 'k6'; export default function() { http.get('https://test.k6.io'); sleep(1); } POST 请求例子 这个 POST 请求例子展示一些复杂的场景的应用（带有电子邮件/密码身份验证负载的 POST 请求）\nimport http from 'k6/http'; export default function () { const url = 'http://test.k6.io/login'; const payload = JSON.stringify({ email: 'aaa', password: 'bbb', }); const params = { headers: { 'Content-Type': 'application/json', }, }; http.post(url, payload, params); } 以上内容参考自 K6 官方文档\n支持的 HTTP 方法 K6 提供的 HTTP 模块能处理各种 HTTP 请求和方法。以下是支持的 HTTP 方法列表：\n方法 作用 batch() 并行发出多个 HTTP 请求（例如浏览器往往会这样做）。 del() 发出 HTTP DELETE 请求。 get() 发出 HTTP GET 请求。 head() 发出 HTTP HEAD 请求。 options() 发出 HTTP OPTIONS 请求。 patch() 发出 HTTP PATCH 请求。 post() 发出 HTTP POST 请求。 put() 发出 HTTP PUT 请求。 request() 发出任何类型的 HTTP 请求。 HTTP 请求标签 K6 允许为每个 HTTP 请求添加标签，结合标签和分组，可以很方便的在测试结果中更好地组织，分组请求和过滤结果组织分析。\n以下为支持的标签列表：\n标签 作用 name 请求名称。默认为请求的 URL method 请求方法（GET、POST、PUT 等） url 默认为请求的 URL。 expected_response 默认情况下，200 到 399 之间的响应状态为 true。使用 setResponseCallback 更改默认行为。 group 当请求在组内运行时，标记值是组名称。默认为空。 scenario 当请求在场景内运行时，标记值是场景名称。默认为 default。 status 响应状态 HTTP 请求使用 tag 和 group 标签的例子会在后续的 demo 中展示。\n大家也可以参考官方的例子：https://grafana.com/docs/k6/latest/using-k6/http-requests/\nMetrics 指标 指标用于衡量系统在测试条件下的性能。默认情况下，k6 会自动收集内置指标。除了内置指标，您还可以创建自定义指标。\n指标一般分为四大类：\n计数器（Counters）：对值求和。 计量器（Gauges）：跟踪最小、最大和最新的值。 比率（Rates）：跟踪非零值发生的频率。 趋势（Trends）：计算多个值的统计信息（如均值、模式或百分位数）。 要使测试断言符合需求标准，可以根据性能测试要求的指标条件编写阈值（表达式的具体内容取决于指标类型）。\n为了后续进行筛选指标，可以使用标签和分组，这样可以更好地组织测试结果。\n测试结果输出文件可以以各种摘要和细粒度格式导出指标，具体信息请参阅结果输出文档。（后面测试结果输出文档会详细介绍这一部分）\nK6 内置指标 每个 k6 测试执行都会发出内置和自定义指标。每个支持的协议也有其特定的指标。\n标准内置指标 无论测试使用什么协议，k6 始终收集以下指标：\n指标名称 指标分类 指标描述 vus Gauge 当前活跃虚拟用户数 vus_max Gauge 最大可能虚拟用户数（VU 资源已预先分配，以避免扩大负载时影响性能） iterations 迭代 Counter VU 执行 JS 脚本（default 函数）的总次数。 iteration_duration Trend 完成一次完整迭代的时间，包括在 setup 和 teardown 中花费的时间。要计算特定场景的迭代函数的持续时间，请尝试此解决方法 dropped_iterations Counter 由于缺少 VU（对于到达率执行程序）或时间不足（基于迭代的执行程序中的 maxDuration 已过期）而未启动的迭代次数。关于删除迭代 data_received Counter 接收到的数据量。此示例介绍如何跟踪单个 URL 的数据。 data_sent Counter 发送的数据量。跟踪单个 URL 的数据以跟踪单个 URL 的数据。 checks Rate 设置的检查成功率。 指标分类分别为：计数器（Counter）、计量器（Gauges）、比率（Rates）、趋势（Trends）\nHTTP 特定的内置指标 HTTP 特定的内置指标是仅在 HTTP 请求期间才会生成和收集的指标。其他类型的请求（例如 WebSocket）不会生成这些指标。\n注意：对于所有 http_req_* 指标，时间戳在请求结束时发出。换句话说，时间戳发生在 k6 收到响应正文末尾或请求超时时。\n下表列出了 HTTP 特定的内置指标：\n指标名称 指标分类 指标描述 http_reqs Counter k6 总共生成了多少个 HTTP 请求。 http_req_blocked Trend 在发起请求之前阻塞（等待空闲 TCP 连接槽）所花费的时间。float类型 http_req_connecting Trend 与远程主机建立 TCP 连接所花费的时间。float类型 http_req_tls_handshaking Trend 与远程主机握手 TLS 会话所花费的时间 http_req_sending Trend 向远程主机发送数据所花费的时间。float类型 http_req_waiting Trend 等待远程主机响应所花费的时间（也称为“第一个字节的时间”或“TTFB”）。float类型 http_req_receiving Trend 从远程主机接收响应数据所花费的时间。float类型 http_req_duration Trend 请求的总时间。它等于 http_req_sending + http_req_waiting + http_req_receiving（即远程服务器处理请求和响应所需的时间，没有初始 DNS 查找/连接时间）。float类型 http_req_failed Rate 根据 setResponseCallback 的失败请求率。 指标分类分别为：计数器（Counter）、计量器（Gauges）、比率（Rates）、趋势（Trends）\n其他内置指标 K6 内置指标除了标准内置指标和 HTTP 特定的内置指标外，还有其他内置指标：\nBrowser metrics 浏览器指标：https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#browser Built-in WebSocket metrics 内置 WebSocket 指标：https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#websockets Built-in gRPC metrics 内置 gRPC 指标：https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#grpc 自定义指标 除了系统内建的指标之外，您还可以创建自定义指标。例如，您可以计算与业务逻辑相关的指标，或者利用 Response.timings 对象为特定的一组端点创建指标。\n每种指标类型都有一个构造函数，用于生成自定义指标。该构造函数会生成一个声明类型的指标对象。每种类型都有一个 add 方法，用于记录指标测量值。\n注意：必须在 init 上下文中创建自定义指标。这会限制内存并确保 K6 可以验证所有阈值是否评估了定义的指标。\n自定义指标 demo 示例 以下示例演示如何创建等待时间的自定义趋势指标：\n项目文件中的 demo_custom_metrics.js 文件已经包含了这个 demo 示例，可以直接运行查看结果。\n1.从导入 k6/metrics 模块引入 Trend 构造函数 import { Trend } from 'k6/metrics'; 等待时间趋势指标属于趋势（Trends）指标，所以需要从 k6/metrics 模块引入 Trend 构造函数。\n2.在 init 上下文中构造一个新的自定义度量 Trend 对象 const myTrend = new Trend('waiting_time'); 在 init 上下文中构造一个新的自定义度量 Trend 对象，脚本中的对象为 myTrend，其指标在结果输出中显示为 waiting_time。\n3.在脚本中使用 add 方法记录指标测量值 export default function() { const res = http.get('https://test.k6.io'); myTrend.add(res.timings.waiting); } 在脚本中使用 add 方法记录指标测量值，这里使用了 res.timings.waiting，即等待时间。\n4.demo_custom_metrics.js 自定义指标完整代码 import http from 'k6/http'; import { Trend } from 'k6/metrics'; const myTrend = new Trend('waiting_time'); export default function () { const res = http.get('https://httpbin.test.k6.io'); myTrend.add(res.timings.waiting); console.log(myTrend.name); // waiting_time } 5.运行 demo_custom_metrics.js 并查看自动化趋势指标 k6 run demo_custom_metrics.js 运行结果如下：\n可以看到，自定义指标 waiting_time 已经在结果输出中显示出来了。\n更多关于自定义指标的内容，请参考官方文档：https://k6.io/docs/using-k6/metrics/#custom-metrics\nChecks 检查 这里也可以理解为断言，即对测试结果进行验证。\n检查用来检验不同测试中的具体测试条件是否正确相应，和我们常规在做其他类型测试时也会对测试结果进行验证，以确保系统是否以期望的内容作出响应。\n例如，一个验证可以确保 POST 请求的响应状态为 201，或者响应体的大小是否符合预期。\n检查类似于许多测试框架中称为断言的概念，但是K6 在验证失败并不会中止测试或以失败状态结束。相反，k6 会在测试继续运行时追踪失败验证的比率。\n每个检查都创建一个速率指标。要使检查中止或导致测试失败，可以将其与阈值结合使用。\n下面会介绍如何使用不同类型的检查，以及如何在测试结果中查看检查结果。\n1.检查 HTTP 响应状态 K6 的检查非常适用于与 HTTP 请求相关的响应断言。\n示例，以下代码片段来检查 HTTP 响应代码为 200：\nimport { check } from 'k6'; import http from 'k6/http'; export default function () { const res = http.get('https://httpbin.test.k6.io'); check(res, { 'HTTP response code is status 200': (r) =\u003e r.status === 200, }); } 运行该脚本，可以看到如下结果：\n当脚本包含检查时，摘要报告会显示通过了多少测试检查。\n在此示例中，请注意检查“HTTP response code is status 200”在调用时是 100% 成功的。\n2.检查 HTTP 响应体 除了检查 HTTP 响应状态外，还可以检查 HTTP 响应体。\n示例，以下代码片段来检查 HTTP 响应体大小为 9591 bytes：\nimport { check } from 'k6'; import http from 'k6/http'; export default function () { const res = http.get('https://httpbin.test.k6.io'); check(res, { 'HTTP response body size is 9591 bytes': (r) =\u003e r.body.length == 9591, }); } 运行该脚本，可以看到如下结果：\n当脚本包含检查时，摘要报告会显示通过了多少测试检查。\n在此示例中，请注意检查“HTTP response body size is 9591 bytes”在调用时是 100% 成功的。\n3.添加多个检查 有时候我们在一个测试脚本中需要添加多个检查，那可以直接在单​​个 check() 语句中添加多个检查，如下面脚本所示：\nimport { check } from 'k6'; import http from 'k6/http'; export default function () { const res = http.get('https://httpbin.test.k6.io'); check(res, { 'HTTP response code is status 200': (r) =\u003e r.status === 200, 'HTTP response body size is 9591 bytes': (r) =\u003e r.body.length == 9591, }); } 运行该脚本，可以看到如下结果：\n在此示例中，两个检查都是正常通过的（调用是 100% 成功的）。\n注意：当检查失败时，脚本将继续成功执行，并且不会返回“失败”退出状态。如果您需要根据检查结果使整个测试失败，则必须将检查与阈值结合起来。这在特定环境中特别有用，例如将 k6 集成到 CI 管道中或在安排性能测试时接收警报。\n参考文档 K6 文档：https://k6.io/docs/ k6 官方网站：https://k6.io/ K6 性能测试快速启动项目：https://github.com/Automation-Test-Starter/K6-Performance-Test-starter/ 欢迎关注软件测试同学的公众号“软件测试同学”，原创 QA 技术文章第一时间推送。\n","wordCount":"642","inLanguage":"zh","image":"https://naodeng.com.cn/papermod-cover.png","datePublished":"2024-01-11T17:10:00+08:00","dateModified":"2024-01-11T17:10:00+08:00","author":{"@type":"Person","name":"nao.deng"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/"},"publisher":{"@type":"Organization","name":"软件测试同学","logo":{"@type":"ImageObject","url":"https://naodeng.com.cn/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://naodeng.com.cn/zh/ accesskey=h title="软件测试同学 (Alt + H)">软件测试同学</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://naodeng.com.cn/ title=🇬🇧English aria-label=🇬🇧English>🇬🇧English</a></li></ul></div></div><ul id=menu><li><a href=https://naodeng.com.cn/zh/archives/ title=归档><span>归档</span></a></li><li><a href=https://naodeng.com.cn/zh/zhcategories title=分类><span>分类</span></a></li><li><a href=https://naodeng.com.cn/zh/search/ title=搜索><span>搜索</span></a></li><li><a href=https://naodeng.com.cn/zh/zhtags title=标签><span>标签</span></a></li><li><a href=https://naodeng.com.cn/zh/zhseries title=系列><span>系列</span></a></li><li><a href=https://analytics.naodeng.com.cn/share/OksEL34H/naodeng.com.cn title=网站统计><span>网站统计</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://naodeng.com.cn/zh/>主页</a>&nbsp;»&nbsp;<a href=https://naodeng.com.cn/zh/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查</h1><div class=post-meta><span title='2024-01-11 17:10:00 +0800 +0800'>一月 11, 2024</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;642 字&nbsp;·&nbsp;nao.deng&nbsp;|&nbsp;语言:<ul class=i18n_list><li><a href=https://naodeng.com.cn/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/>🇬🇧English</a></li></ul>&nbsp;|&nbsp;<a href=https://github.com/naodeng/naodeng.com.cn/tree/main/content/posts/Performance-Testing/K6-tutorial-common-functions-1-http-request-metrics-and-checks.zh.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#k6-%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd aria-label="K6 常用功能">K6 常用功能</a><ul><li><a href=#http-requests aria-label="HTTP Requests">HTTP Requests</a><ul><li><a href=#get-%e8%af%b7%e6%b1%82%e4%be%8b%e5%ad%90 aria-label="GET 请求例子">GET 请求例子</a></li><li><a href=#post-%e8%af%b7%e6%b1%82%e4%be%8b%e5%ad%90 aria-label="POST 请求例子">POST 请求例子</a></li><li><a href=#%e6%94%af%e6%8c%81%e7%9a%84-http-%e6%96%b9%e6%b3%95 aria-label="支持的 HTTP 方法">支持的 HTTP 方法</a></li><li><a href=#http-%e8%af%b7%e6%b1%82%e6%a0%87%e7%ad%be aria-label="HTTP 请求标签">HTTP 请求标签</a></li></ul></li><li><a href=#metrics-%e6%8c%87%e6%a0%87 aria-label="Metrics 指标">Metrics 指标</a><ul><li><a href=#k6-%e5%86%85%e7%bd%ae%e6%8c%87%e6%a0%87 aria-label="K6 内置指标">K6 内置指标</a><ul><li><a href=#%e6%a0%87%e5%87%86%e5%86%85%e7%bd%ae%e6%8c%87%e6%a0%87 aria-label=标准内置指标>标准内置指标</a></li><li><a href=#http-%e7%89%b9%e5%ae%9a%e7%9a%84%e5%86%85%e7%bd%ae%e6%8c%87%e6%a0%87 aria-label="HTTP 特定的内置指标">HTTP 特定的内置指标</a></li><li><a href=#%e5%85%b6%e4%bb%96%e5%86%85%e7%bd%ae%e6%8c%87%e6%a0%87 aria-label=其他内置指标>其他内置指标</a></li></ul></li><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e6%8c%87%e6%a0%87 aria-label=自定义指标>自定义指标</a><ul><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e6%8c%87%e6%a0%87-demo-%e7%a4%ba%e4%be%8b aria-label="自定义指标 demo 示例">自定义指标 demo 示例</a><ul><li><a href=#1%e4%bb%8e%e5%af%bc%e5%85%a5-k6metrics-%e6%a8%a1%e5%9d%97%e5%bc%95%e5%85%a5-trend-%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0 aria-label="1.从导入 k6/metrics 模块引入 Trend 构造函数">1.从导入 k6/metrics 模块引入 Trend 构造函数</a></li><li><a href=#2%e5%9c%a8-init-%e4%b8%8a%e4%b8%8b%e6%96%87%e4%b8%ad%e6%9e%84%e9%80%a0%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e8%87%aa%e5%ae%9a%e4%b9%89%e5%ba%a6%e9%87%8f-trend-%e5%af%b9%e8%b1%a1 aria-label="2.在 init 上下文中构造一个新的自定义度量 Trend 对象">2.在 init 上下文中构造一个新的自定义度量 Trend 对象</a></li><li><a href=#3%e5%9c%a8%e8%84%9a%e6%9c%ac%e4%b8%ad%e4%bd%bf%e7%94%a8-add-%e6%96%b9%e6%b3%95%e8%ae%b0%e5%bd%95%e6%8c%87%e6%a0%87%e6%b5%8b%e9%87%8f%e5%80%bc aria-label="3.在脚本中使用 add 方法记录指标测量值">3.在脚本中使用 add 方法记录指标测量值</a></li><li><a href=#4demo_custom_metricsjs-%e8%87%aa%e5%ae%9a%e4%b9%89%e6%8c%87%e6%a0%87%e5%ae%8c%e6%95%b4%e4%bb%a3%e7%a0%81 aria-label="4.demo_custom_metrics.js 自定义指标完整代码">4.demo_custom_metrics.js 自定义指标完整代码</a></li><li><a href=#5%e8%bf%90%e8%a1%8c-demo_custom_metricsjs-%e5%b9%b6%e6%9f%a5%e7%9c%8b%e8%87%aa%e5%8a%a8%e5%8c%96%e8%b6%8b%e5%8a%bf%e6%8c%87%e6%a0%87 aria-label="5.运行 demo_custom_metrics.js 并查看自动化趋势指标">5.运行 demo_custom_metrics.js 并查看自动化趋势指标</a></li></ul></li></ul></li></ul></li><li><a href=#checks-%e6%a3%80%e6%9f%a5 aria-label="Checks 检查">Checks 检查</a><ul><li><a href=#1%e6%a3%80%e6%9f%a5-http-%e5%93%8d%e5%ba%94%e7%8a%b6%e6%80%81 aria-label="1.检查 HTTP 响应状态">1.检查 HTTP 响应状态</a></li><li><a href=#2%e6%a3%80%e6%9f%a5-http-%e5%93%8d%e5%ba%94%e4%bd%93 aria-label="2.检查 HTTP 响应体">2.检查 HTTP 响应体</a></li><li><a href=#3%e6%b7%bb%e5%8a%a0%e5%a4%9a%e4%b8%aa%e6%a3%80%e6%9f%a5 aria-label=3.添加多个检查>3.添加多个检查</a></li></ul></li></ul></li><li><a href=#%e5%8f%82%e8%80%83%e6%96%87%e6%a1%a3 aria-label=参考文档>参考文档</a></li></ul></div></details></div><div class=post-content><h2 id=k6-常用功能>K6 常用功能<a hidden class=anchor aria-hidden=true href=#k6-常用功能>#</a></h2><h3 id=http-requests>HTTP Requests<a hidden class=anchor aria-hidden=true href=#http-requests>#</a></h3><p>使用 K6 进行性能测试的第一步就是定义要测试的 HTTP 请求。</p><h4 id=get-请求例子>GET 请求例子<a hidden class=anchor aria-hidden=true href=#get-请求例子>#</a></h4><p>使用 <code>k6 new</code> 命令创建的 demo 测试脚本中，已经包含了一个简单的 GET 方法 HTTP 请求：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>sleep</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://test.k6.io&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=post-请求例子>POST 请求例子<a hidden class=anchor aria-hidden=true href=#post-请求例子>#</a></h4><p>这个 POST 请求例子展示一些复杂的场景的应用（带有电子邮件/密码身份验证负载的 POST 请求）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=s1>&#39;http://test.k6.io/login&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>payload</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;aaa&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;bbb&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>params</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>http</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>payload</span><span class=p>,</span> <span class=nx>params</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>以上内容参考自 <a href=https://k6.io/docs/using-k6/http-requests>K6 官方文档</a></p></blockquote><h4 id=支持的-http-方法>支持的 HTTP 方法<a hidden class=anchor aria-hidden=true href=#支持的-http-方法>#</a></h4><p>K6 提供的 HTTP 模块能处理各种 HTTP 请求和方法。以下是支持的 HTTP 方法列表：</p><table><thead><tr><th>方法</th><th>作用</th></tr></thead><tbody><tr><td>batch()</td><td>并行发出多个 HTTP 请求（例如浏览器往往会这样做）。</td></tr><tr><td>del()</td><td>发出 HTTP DELETE 请求。</td></tr><tr><td>get()</td><td>发出 HTTP GET 请求。</td></tr><tr><td>head()</td><td>发出 HTTP HEAD 请求。</td></tr><tr><td>options()</td><td>发出 HTTP OPTIONS 请求。</td></tr><tr><td>patch()</td><td>发出 HTTP PATCH 请求。</td></tr><tr><td>post()</td><td>发出 HTTP POST 请求。</td></tr><tr><td>put()</td><td>发出 HTTP PUT 请求。</td></tr><tr><td>request()</td><td>发出任何类型的 HTTP 请求。</td></tr></tbody></table><h4 id=http-请求标签>HTTP 请求标签<a hidden class=anchor aria-hidden=true href=#http-请求标签>#</a></h4><p>K6 允许为每个 HTTP 请求添加标签，结合标签和分组，可以很方便的在测试结果中更好地组织，分组请求和过滤结果组织分析。</p><p>以下为支持的标签列表：</p><table><thead><tr><th>标签</th><th>作用</th></tr></thead><tbody><tr><td>name</td><td>请求名称。默认为请求的 URL</td></tr><tr><td>method</td><td>请求方法（GET、POST、PUT 等）</td></tr><tr><td>url</td><td>默认为请求的 URL。</td></tr><tr><td>expected_response</td><td>默认情况下，200 到 399 之间的响应状态为 true。使用 setResponseCallback 更改默认行为。</td></tr><tr><td>group</td><td>当请求在组内运行时，标记值是组名称。默认为空。</td></tr><tr><td>scenario</td><td>当请求在场景内运行时，标记值是场景名称。默认为 default。</td></tr><tr><td>status</td><td>响应状态</td></tr></tbody></table><p>HTTP 请求使用 tag 和 group 标签的例子会在后续的 demo 中展示。</p><p>大家也可以参考官方的例子：<a href=https://grafana.com/docs/k6/latest/using-k6/http-requests/>https://grafana.com/docs/k6/latest/using-k6/http-requests/</a></p><h3 id=metrics-指标>Metrics 指标<a hidden class=anchor aria-hidden=true href=#metrics-指标>#</a></h3><p>指标用于衡量系统在测试条件下的性能。默认情况下，k6 会自动收集内置指标。除了内置指标，您还可以创建自定义指标。</p><p>指标一般分为四大类：</p><ol><li>计数器（Counters）：对值求和。</li><li>计量器（Gauges）：跟踪最小、最大和最新的值。</li><li>比率（Rates）：跟踪非零值发生的频率。</li><li>趋势（Trends）：计算多个值的统计信息（如均值、模式或百分位数）。</li></ol><p>要使测试断言符合需求标准，可以根据性能测试要求的指标条件编写阈值（表达式的具体内容取决于指标类型）。</p><p>为了后续进行筛选指标，可以使用标签和分组，这样可以更好地组织测试结果。</p><blockquote><p>测试结果输出文件可以以各种摘要和细粒度格式导出指标，具体信息请参阅结果输出文档。（后面测试结果输出文档会详细介绍这一部分）</p></blockquote><h4 id=k6-内置指标>K6 内置指标<a hidden class=anchor aria-hidden=true href=#k6-内置指标>#</a></h4><p>每个 k6 测试执行都会发出内置和自定义指标。每个支持的协议也有其特定的指标。</p><h5 id=标准内置指标>标准内置指标<a hidden class=anchor aria-hidden=true href=#标准内置指标>#</a></h5><p>无论测试使用什么协议，k6 始终收集以下指标：</p><table><thead><tr><th>指标名称</th><th>指标分类</th><th>指标描述</th></tr></thead><tbody><tr><td>vus</td><td>Gauge</td><td>当前活跃虚拟用户数</td></tr><tr><td>vus_max</td><td>Gauge</td><td>最大可能虚拟用户数（VU 资源已预先分配，以避免扩大负载时影响性能）</td></tr><tr><td>iterations 迭代</td><td>Counter</td><td>VU 执行 JS 脚本（default 函数）的总次数。</td></tr><tr><td>iteration_duration</td><td>Trend</td><td>完成一次完整迭代的时间，包括在 setup 和 teardown 中花费的时间。要计算特定场景的迭代函数的持续时间，请尝试此解决方法</td></tr><tr><td>dropped_iterations</td><td>Counter</td><td>由于缺少 VU（对于到达率执行程序）或时间不足（基于迭代的执行程序中的 maxDuration 已过期）而未启动的迭代次数。关于删除迭代</td></tr><tr><td>data_received</td><td>Counter</td><td>接收到的数据量。此示例介绍如何跟踪单个 URL 的数据。</td></tr><tr><td>data_sent</td><td>Counter</td><td>发送的数据量。跟踪单个 URL 的数据以跟踪单个 URL 的数据。</td></tr><tr><td>checks</td><td>Rate</td><td>设置的检查成功率。</td></tr></tbody></table><blockquote><p>指标分类分别为：计数器（Counter）、计量器（Gauges）、比率（Rates）、趋势（Trends）</p></blockquote><h5 id=http-特定的内置指标>HTTP 特定的内置指标<a hidden class=anchor aria-hidden=true href=#http-特定的内置指标>#</a></h5><p>HTTP 特定的内置指标是仅在 HTTP 请求期间才会生成和收集的指标。其他类型的请求（例如 WebSocket）不会生成这些指标。</p><blockquote><p>注意：对于所有 http_req_* 指标，时间戳在请求结束时发出。换句话说，时间戳发生在 k6 收到响应正文末尾或请求超时时。</p></blockquote><p>下表列出了 HTTP 特定的内置指标：</p><table><thead><tr><th>指标名称</th><th>指标分类</th><th>指标描述</th></tr></thead><tbody><tr><td>http_reqs</td><td>Counter</td><td>k6 总共生成了多少个 HTTP 请求。</td></tr><tr><td>http_req_blocked</td><td>Trend</td><td>在发起请求之前阻塞（等待空闲 TCP 连接槽）所花费的时间。<code>float</code>类型</td></tr><tr><td>http_req_connecting</td><td>Trend</td><td>与远程主机建立 TCP 连接所花费的时间。<code>float</code>类型</td></tr><tr><td>http_req_tls_handshaking</td><td>Trend</td><td>与远程主机握手 TLS 会话所花费的时间</td></tr><tr><td>http_req_sending</td><td>Trend</td><td>向远程主机发送数据所花费的时间。<code>float</code>类型</td></tr><tr><td>http_req_waiting</td><td>Trend</td><td>等待远程主机响应所花费的时间（也称为“第一个字节的时间”或“TTFB”）。<code>float</code>类型</td></tr><tr><td>http_req_receiving</td><td>Trend</td><td>从远程主机接收响应数据所花费的时间。<code>float</code>类型</td></tr><tr><td>http_req_duration</td><td>Trend</td><td>请求的总时间。它等于 http_req_sending + http_req_waiting + http_req_receiving（即远程服务器处理请求和响应所需的时间，没有初始 DNS 查找/连接时间）。<code>float</code>类型</td></tr><tr><td>http_req_failed</td><td>Rate</td><td>根据 setResponseCallback 的失败请求率。</td></tr></tbody></table><blockquote><p>指标分类分别为：计数器（Counter）、计量器（Gauges）、比率（Rates）、趋势（Trends）</p></blockquote><h5 id=其他内置指标>其他内置指标<a hidden class=anchor aria-hidden=true href=#其他内置指标>#</a></h5><p>K6 内置指标除了标准内置指标和 HTTP 特定的内置指标外，还有其他内置指标：</p><ul><li>Browser metrics 浏览器指标：<a href=https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#browser>https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#browser</a></li><li>Built-in WebSocket metrics 内置 WebSocket 指标：<a href=https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#websockets>https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#websockets</a></li><li>Built-in gRPC metrics 内置 gRPC 指标：<a href=https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#grpc>https://grafana.com/docs/k6/latest/using-k6/metrics/reference/#grpc</a></li></ul><h4 id=自定义指标>自定义指标<a hidden class=anchor aria-hidden=true href=#自定义指标>#</a></h4><p>除了系统内建的指标之外，您还可以创建自定义指标。例如，您可以计算与业务逻辑相关的指标，或者利用 Response.timings 对象为特定的一组端点创建指标。</p><p>每种指标类型都有一个构造函数，用于生成自定义指标。该构造函数会生成一个声明类型的指标对象。每种类型都有一个 add 方法，用于记录指标测量值。</p><blockquote><p>注意：必须在 init 上下文中创建自定义指标。这会限制内存并确保 K6 可以验证所有阈值是否评估了定义的指标。</p></blockquote><h5 id=自定义指标-demo-示例>自定义指标 demo 示例<a hidden class=anchor aria-hidden=true href=#自定义指标-demo-示例>#</a></h5><p>以下示例演示如何创建等待时间的自定义趋势指标：</p><blockquote><p>项目文件中的 demo_custom_metrics.js 文件已经包含了这个 demo 示例，可以直接运行查看结果。</p></blockquote><h6 id=1从导入-k6metrics-模块引入-trend-构造函数>1.从导入 k6/metrics 模块引入 Trend 构造函数<a hidden class=anchor aria-hidden=true href=#1从导入-k6metrics-模块引入-trend-构造函数>#</a></h6><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Trend</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6/metrics&#39;</span><span class=p>;</span>
</span></span></code></pre></div><blockquote><p>等待时间趋势指标属于趋势（Trends）指标，所以需要从 k6/metrics 模块引入 Trend 构造函数。</p></blockquote><h6 id=2在-init-上下文中构造一个新的自定义度量-trend-对象>2.在 init 上下文中构造一个新的自定义度量 Trend 对象<a hidden class=anchor aria-hidden=true href=#2在-init-上下文中构造一个新的自定义度量-trend-对象>#</a></h6><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>myTrend</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Trend</span><span class=p>(</span><span class=s1>&#39;waiting_time&#39;</span><span class=p>);</span>
</span></span></code></pre></div><blockquote><p>在 init 上下文中构造一个新的自定义度量 Trend 对象，脚本中的对象为 myTrend，其指标在结果输出中显示为 <code>waiting_time</code>。</p></blockquote><h6 id=3在脚本中使用-add-方法记录指标测量值>3.在脚本中使用 add 方法记录指标测量值<a hidden class=anchor aria-hidden=true href=#3在脚本中使用-add-方法记录指标测量值>#</a></h6><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://test.k6.io&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>myTrend</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>timings</span><span class=p>.</span><span class=nx>waiting</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>在脚本中使用 add 方法记录指标测量值，这里使用了 <code>res.timings.waiting</code>，即等待时间。</p></blockquote><h6 id=4demo_custom_metricsjs-自定义指标完整代码>4.demo_custom_metrics.js 自定义指标完整代码<a hidden class=anchor aria-hidden=true href=#4demo_custom_metricsjs-自定义指标完整代码>#</a></h6><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Trend</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6/metrics&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>myTrend</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Trend</span><span class=p>(</span><span class=s1>&#39;waiting_time&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://httpbin.test.k6.io&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>myTrend</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>timings</span><span class=p>.</span><span class=nx>waiting</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>myTrend</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span> <span class=c1>// waiting_time
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><h6 id=5运行-demo_custom_metricsjs-并查看自动化趋势指标>5.运行 demo_custom_metrics.js 并查看自动化趋势指标<a hidden class=anchor aria-hidden=true href=#5运行-demo_custom_metricsjs-并查看自动化趋势指标>#</a></h6><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>k6 run demo_custom_metrics.js
</span></span></code></pre></div><p>运行结果如下：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/4tbqVc.png alt=" "></p><blockquote><p>可以看到，自定义指标 <code>waiting_time</code> 已经在结果输出中显示出来了。</p></blockquote><p>更多关于自定义指标的内容，请参考官方文档：<a href=https://k6.io/docs/using-k6/metrics/#custom-metrics>https://k6.io/docs/using-k6/metrics/#custom-metrics</a></p><h3 id=checks-检查>Checks 检查<a hidden class=anchor aria-hidden=true href=#checks-检查>#</a></h3><blockquote><p>这里也可以理解为断言，即对测试结果进行验证。</p></blockquote><p>检查用来检验不同测试中的具体测试条件是否正确相应，和我们常规在做其他类型测试时也会对测试结果进行验证，以确保系统是否以期望的内容作出响应。</p><p>例如，一个验证可以确保 POST 请求的响应状态为 201，或者响应体的大小是否符合预期。</p><p>检查类似于许多测试框架中称为断言的概念，但是<strong>K6 在验证失败并不会中止测试或以失败状态结束。相反，k6 会在测试继续运行时追踪失败验证的比率</strong>。</p><blockquote><p>每个检查都创建一个速率指标。要使检查中止或导致测试失败，可以将其与阈值结合使用。</p></blockquote><p>下面会介绍如何使用不同类型的检查，以及如何在测试结果中查看检查结果。</p><h4 id=1检查-http-响应状态>1.检查 HTTP 响应状态<a hidden class=anchor aria-hidden=true href=#1检查-http-响应状态>#</a></h4><p>K6 的检查非常适用于与 HTTP 请求相关的响应断言。</p><p>示例，以下代码片段来检查 HTTP 响应代码为 200：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>check</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://httpbin.test.k6.io&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>check</span><span class=p>(</span><span class=nx>res</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;HTTP response code is status 200&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>运行该脚本，可以看到如下结果：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/aTXnpy.png alt=" "></p><blockquote><p>当脚本包含检查时，摘要报告会显示通过了多少测试检查。</p></blockquote><p>在此示例中，请注意检查“HTTP response code is status 200”在调用时是 100% 成功的。</p><h4 id=2检查-http-响应体>2.检查 HTTP 响应体<a hidden class=anchor aria-hidden=true href=#2检查-http-响应体>#</a></h4><p>除了检查 HTTP 响应状态外，还可以检查 HTTP 响应体。</p><p>示例，以下代码片段来检查 HTTP 响应体大小为 9591 bytes：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>check</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://httpbin.test.k6.io&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>check</span><span class=p>(</span><span class=nx>res</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;HTTP response body size is 9591 bytes&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>length</span> <span class=o>==</span> <span class=mi>9591</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>运行该脚本，可以看到如下结果：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/AmbL0E.png alt=" "></p><blockquote><p>当脚本包含检查时，摘要报告会显示通过了多少测试检查。</p></blockquote><p>在此示例中，请注意检查“HTTP response body size is 9591 bytes”在调用时是 100% 成功的。</p><h4 id=3添加多个检查>3.添加多个检查<a hidden class=anchor aria-hidden=true href=#3添加多个检查>#</a></h4><p>有时候我们在一个测试脚本中需要添加多个检查，那可以直接在单​​个 check() 语句中添加多个检查，如下面脚本所示：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>check</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://httpbin.test.k6.io&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>check</span><span class=p>(</span><span class=nx>res</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;HTTP response code is status 200&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;HTTP response body size is 9591 bytes&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>length</span> <span class=o>==</span> <span class=mi>9591</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>运行该脚本，可以看到如下结果：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/5yJyBw.png alt=" "></p><p>在此示例中，两个检查都是正常通过的（调用是 100% 成功的）。</p><blockquote><p>注意：当检查失败时，脚本将继续成功执行，并且不会返回“失败”退出状态。如果您需要根据检查结果使整个测试失败，则必须将检查与阈值结合起来。这在特定环境中特别有用，例如将 k6 集成到 CI 管道中或在安排性能测试时接收警报。</p></blockquote><h2 id=参考文档>参考文档<a hidden class=anchor aria-hidden=true href=#参考文档>#</a></h2><ul><li><a href=https://k6.io/docs/>K6 文档：https://k6.io/docs/</a></li><li><a href=https://k6.io/>k6 官方网站：https://k6.io/</a></li><li><a href=https://github.com/Automation-Test-Starter/K6-Performance-Test-starter>K6 性能测试快速启动项目：https://github.com/Automation-Test-Starter/K6-Performance-Test-starter/</a></li></ul><hr><p>欢迎关注软件测试同学的公众号“<strong>软件测试同学</strong>”，原创 QA 技术文章第一时间推送。</p><center><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/2023112015'QR Code for 公众号.jpg" style=width:100px></center></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-generic-best-practices-1-await-dont-sleep-and-name-test-files-wisely/><span class=title>« 上一页</span><br><span>UI 测试最佳实践的通用最佳实践（一）：等待，不要休眠和明智地为测试文件命名</span>
</a><a class=next href=https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-testing-strategy-2-more-reasonable-testing-strategy-for-ui-testing/><span class=title>下一页 »</span><br><span>UI 测试最佳实践的测试策略（二）：什么样的测试策略才更合理</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 on x" href="https://x.com/intent/tweet/?text=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%ef%bc%9a%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd%ef%bc%881%ef%bc%89-%20HTTP%20%e8%af%b7%e6%b1%82%ef%bc%8c%e6%8c%87%e6%a0%87%e5%92%8c%e6%a3%80%e6%9f%a5&amp;url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f&amp;title=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%ef%bc%9a%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd%ef%bc%881%ef%bc%89-%20HTTP%20%e8%af%b7%e6%b1%82%ef%bc%8c%e6%8c%87%e6%a0%87%e5%92%8c%e6%a3%80%e6%9f%a5&amp;summary=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%ef%bc%9a%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd%ef%bc%881%ef%bc%89-%20HTTP%20%e8%af%b7%e6%b1%82%ef%bc%8c%e6%8c%87%e6%a0%87%e5%92%8c%e6%a3%80%e6%9f%a5&amp;source=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f&title=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%ef%bc%9a%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd%ef%bc%881%ef%bc%89-%20HTTP%20%e8%af%b7%e6%b1%82%ef%bc%8c%e6%8c%87%e6%a0%87%e5%92%8c%e6%a3%80%e6%9f%a5"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 on whatsapp" href="https://api.whatsapp.com/send?text=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%ef%bc%9a%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd%ef%bc%881%ef%bc%89-%20HTTP%20%e8%af%b7%e6%b1%82%ef%bc%8c%e6%8c%87%e6%a0%87%e5%92%8c%e6%a3%80%e6%9f%a5%20-%20https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 on telegram" href="https://telegram.me/share/url?text=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%ef%bc%9a%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd%ef%bc%881%ef%bc%89-%20HTTP%20%e8%af%b7%e6%b1%82%ef%bc%8c%e6%8c%87%e6%a0%87%e5%92%8c%e6%a3%80%e6%9f%a5&amp;url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K6 性能测试教程：常用功能（1）- HTTP 请求，指标和检查 on ycombinator" href="https://news.ycombinator.com/submitlink?t=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%ef%bc%9a%e5%b8%b8%e7%94%a8%e5%8a%9f%e8%83%bd%ef%bc%881%ef%bc%89-%20HTTP%20%e8%af%b7%e6%b1%82%ef%bc%8c%e6%8c%87%e6%a0%87%e5%92%8c%e6%a3%80%e6%9f%a5&u=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-common-functions-1-http-request-metrics-and-checks%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=naodeng/naodeng.com.cn data-repo-id=R_kgDOHntNtg data-category="Show and tell" data-category-id=DIC_kwDOHntNts4Cavst data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=light data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://naodeng.com.cn/zh/>软件测试同学</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>