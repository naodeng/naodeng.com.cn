<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 | 软件测试同学</title>
<meta name=keywords content><meta name=description content="这篇博文深入探讨了 UI 测试最佳实践中的服务通信测试，重点关注请求和响应负载的验证以及测试监控。读者将学到如何有效检验 UI 与服务之间的请求和响应负载，以确保系统交互的正确性和可靠性。博文还介绍了在 UI 测试中如何进行监控，以及监测服务通信过程中的性能和可用性。通过这些实践，读者能够更全面地覆盖 UI 测试中的服务通信方面，提高测试的全面性和准确性，确保系统的正常运行。"><meta name=author content="nao.deng"><link rel=canonical href=https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests/><meta name=google-site-verification content="google5e9a7c9479924ed2"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://naodeng.com.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://naodeng.com.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://naodeng.com.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://naodeng.com.cn/apple-touch-icon.png><link rel=mask-icon href=https://naodeng.com.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta name=baidu-site-verification content="codeva-2siuZUJUWf"><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "56f727a52e3349f6947d888452fecc8a"}'></script><script defer data-website-id=b3b285c9-3c35-4398-9252-91bb70560b84 src=https://analytics.naodeng.com.cn/hugo></script><meta http-equiv=Content-Type content="text/html;charset=gb2312"><meta name=sogou_site_verification content="iwkYDJrzfK"><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ")}</script><meta property="og:title" content="UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控"><meta property="og:description" content="这篇博文深入探讨了 UI 测试最佳实践中的服务通信测试，重点关注请求和响应负载的验证以及测试监控。读者将学到如何有效检验 UI 与服务之间的请求和响应负载，以确保系统交互的正确性和可靠性。博文还介绍了在 UI 测试中如何进行监控，以及监测服务通信过程中的性能和可用性。通过这些实践，读者能够更全面地覆盖 UI 测试中的服务通信方面，提高测试的全面性和准确性，确保系统的正常运行。"><meta property="og:type" content="article"><meta property="og:url" content="https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests/"><meta property="og:image" content="https://naodeng.com.cn/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-21T17:06:44+08:00"><meta property="article:modified_time" content="2024-01-21T17:06:44+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://naodeng.com.cn/papermod-cover.png"><meta name=twitter:title content="UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控"><meta name=twitter:description content="这篇博文深入探讨了 UI 测试最佳实践中的服务通信测试，重点关注请求和响应负载的验证以及测试监控。读者将学到如何有效检验 UI 与服务之间的请求和响应负载，以确保系统交互的正确性和可靠性。博文还介绍了在 UI 测试中如何进行监控，以及监测服务通信过程中的性能和可用性。通过这些实践，读者能够更全面地覆盖 UI 测试中的服务通信方面，提高测试的全面性和准确性，确保系统的正常运行。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://naodeng.com.cn/zh/posts/"},{"@type":"ListItem","position":2,"name":"UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控","item":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控","name":"UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控","description":"这篇博文深入探讨了 UI 测试最佳实践中的服务通信测试，重点关注请求和响应负载的验证以及测试监控。读者将学到如何有效检验 UI 与服务之间的请求和响应负载，以确保系统交互的正确性和可靠性。博文还介绍了在 UI 测试中如何进行监控，以及监测服务通信过程中的性能和可用性。通过这些实践，读者能够更全面地覆盖 UI 测试中的服务通信方面，提高测试的全面性和准确性，确保系统的正常运行。","keywords":[],"articleBody":"文章由 UI 测试最佳实践项目 内容翻译而来，大家有条件的话可以去 UI 测试最佳实践项目阅读原文。\n检验请求和响应负载 原文链接:https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/test-request-and-response-payload.md\n一段简要说明 前端应用因与后端通信不协调而导致停止工作的频率有多高？\n前端应用和后端应用之间存在一份合同，你始终需要测试合同是否得到遵守。每一次前后端应用之间的通信都由以下几个方面定义：\n请求的 URL 所使用的 HTTP 动词（GET、POST 等） 请求的有效负载和标头：前端应用发送给后端应用的数据 响应的有效负载、标头和状态：后端应用发送回前端应用的数据 你需要对所有这些方面进行测试，更广义地说，你需要等待每个相关的 AJAX 请求，为什么呢？\n相关的 XHR 请求是你正在测试的应用程序流程的一部分 即使 XHR 请求不是你正在测试的流程的一部分，它对达到期望的 UI 状态也可能是相关的 等待 XHR 请求可以使你的测试更为健壮，参见等待，不要休眠章节及其XHR 请求等待部分 在现有的测试工具中，完全等待和检查 XHR 请求并不那么常见，目前 Cypress 提供了最全面的检查支持。\n请注意：以下所有示例均基于 Cypress，它目前提供了最佳的 XHR 测试支持。\n对 XHR 请求进行断言的完整示例 // ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\"POST\", \"**/authentication\").as(\"authentication-xhr\"); // ... your test actions... cy.wait(\"@authentication-xhr\").then(interception =\u003e { // request headers assertion expect(interception.request.headers).to.have.property(\"Content-Type\", \"application/json\"); // request payload assertions expect(interception.request.body).to.have.property(\"username\", \"admin\"); expect(interception.request.body).to.have.property(\"password\", \"asupersecretpassword\"); // status assertion expect(interception.response.statusCode).to.equal(200); // response headers assertions expect(interception.response.body).to.have.property(\"access-control-allow-origin\", \"*\"); // response payload assertions expect(interception.response.body).to.have.property(\"token\"); }); 在下面的章节中，我们将详细讨论 XHR 请求的不同特征。\n验证 XHR 请求的 URL 在 Cypress 中，用于请求的 URL 是通过cy.intercept调用定义的。你可能需要检查 URL 的查询字符串。\n// ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\"**/authentication**\").as(\"authentication-xhr\"); // ... your test actions... cy.wait(\"@authentication-xhr\").then(interception =\u003e { // query string assertion expect(interception.request.url).to.contain(\"username=admin\"); expect(interception.request.url).to.contain(\"password=asupersecretpassword\"); }); 请注意，当你需要对多个主题进行断言时，Cypress 的then =\u003e expect语法非常有帮助（例如，URL 和状态）。如果你只需要对单个主题进行断言，可以使用更具表现力的should语法。\ncy.wait(\"@authentication-xhr\") .its(\"url\") .should(\"contain\", \"username=admin\") .and(\"contain\", \"password=asupersecretpassword\"); XHR 请求的方法 在 Cypress 中，请求使用cy.intercept函数定义。你可以通过指定它来定义要拦截的请求类型。\n// the most compact `cy.intercept` call, the GET method is implied cy.intercept(\"**/authentication\").as(\"authentication-xhr\"); // method can be explicitly defined cy.intercept(\"POST\", \"**/authentication\").as(\"authentication-xhr\"); // the extended `cy.intercept` call is available too cy.intercept({ method: \"POST\", url: \"**/authentication\" }).as(\"authentication-xhr\"); 验证 XHR 请求的 payload 和 headers 对 XHR 请求的 payload 和 headers 进行断言允许你立即获得有关糟糕的 XHR 请求原因的详细反馈。必须在每个 XHR 请求上进行检查，以确保一切都正确地表示了测试执行的 UI 操作。\n// ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\"POST\", \"**/authentication\").as(\"authentication-xhr\"); // ... your test actions... cy.wait(\"@authentication-xhr\").then(interception =\u003e { // request headers assertion expect(interception.request.headers).to.have.property(\"Content-Type\", \"application/json\"); // request payload assertions expect(interception.request.body).to.have.property(\"username\", \"admin\"); expect(interception.request.body).to.have.property(\"password\", \"asupersecretpassword\"); }); 验证 XHR 请求响应的 payload, headers 和 status 响应必须百分之百符合前端应用的预期，否则可能向用户展示意料之外的状态。响应断言在完整的端到端测试中很有用，但在 UI 集成测试中则无关紧要（TODO：链接到集成测试页面）。\n// ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\"POST\", \"**/authentication\").as(\"authentication-xhr\"); // ... your test actions... cy.wait(\"@authentication-xhr\").then(intercept =\u003e { // status assertions expect(intercept.response.statusCode).to.equal(200); // response headers assertions expect(intercept.response.body).to.have.property(\"access-control-allow-origin\", \"*\"); // response payload assertions expect(intercept.response.body).to.have.property(\"token\"); }); 测试监控 原文链接：:https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/monitoring-tests.md\n一段简要说明 随着前端期望的提高，服务器和服务的复杂性也在增加。前端应用需要变得越来越快：代码拆分、懒加载、Brotli 压缩等性能优化解决方案已成为标准。还有一些令人惊叹的解决方案，如基于机器学习和分析数据的代码拆分和资源预加载。此外，JAMstack 站点生成器可用于避免手动管理许多性能优化，但它们的配置和构建过程可能会破坏已经测试过的功能。\n有很多我们一旦测试过就认为理所当然的功能，但它们并非无法回归，可能会导致灾难。例如：\nsitemap.xml 和 robots.txt 的爬行配置（通常每个环境都不同） 使用 Brotli/gzip 提供的资产：错误的内容编码可能会破坏站点的所有功能 针对静态或动态资产的不同配置的缓存管理 这些问题可能看起来很明显，但比你想象的更微妙。如果你关心用户体验，就应该保持监控，因为通常在发现问题时已经为时过晚。我知道不能监控所有事物，但是测试应用的次数越多，测试就越能成为首要的质量检查工具。\n监控测试也可以与 E2E 测试集成（毕竟，它们只是简单的 E2E 测试），但将它们保持分开可以帮助你在需要时运行它们。上述大多数事项与 DevOps 相关，有了超快的监控测试，您可以获得即时而专注的反馈。\nCypress 示例 缓存监控测试示例 const urls = { staging: \"https://staging.example.com\", production: \"https://example.com\", } const shouldNotBeCached = (xhr) =\u003e cy.wrap(xhr).its(\"headers.cache-control\").should(\"equal\", \"public,max-age=0,must-revalidate\") const shouldBeCached = (xhr) =\u003e cy.wrap(xhr).its(\"headers.cache-control\").should(\"equal\", \"public,max-age=31536000,immutable\") // extract the main JS file from the source code of the page const getMainJsUrl = pageSource =\u003e \"/app-56a3f6cb9e6156c82be6.js\" context('Site monitoring', () =\u003e { context('The HTML should not be cached', () =\u003e { const test = url =\u003e cy.request(url) .then(shouldNotBeCached) it(\"staging\", () =\u003e test(urls.staging)) it(\"production\", () =\u003e test(urls.production)) }) context('The static assets should be cached', () =\u003e { const test = url =\u003e cy.request(url) .its(\"body\") .then(getMainJsUrl) .then(appUrl =\u003e url+appUrl) .then(cy.request) .then(shouldBeCached) it('staging', () =\u003e test(urls.staging)) it('production', () =\u003e test(urls.production)) }) }) 内容编码监控测试示例 context('The Brotli-compressed assets should be served with the correct content encoding', () =\u003e { const test = url =\u003e { cy.request(url) .its(\"body\") .then(getMainJsUrl) .then(appUrl =\u003e cy.request({url: url + appUrl, headers: {\"Accept-Encoding\": \"br\"}}) .its(\"headers.content-encoding\") .should(\"equal\", \"br\")) } it('staging', () =\u003e test(urls.staging)) it('production', () =\u003e test(urls.production)) }) 抓取监测测试示例 context('The robots.txt file should disallow the crawling of the staging site and allow the production one', () =\u003e { const test = (url, content) =\u003e cy.request(`${url}/robots.txt`) .its(\"body\") .should(\"contain\", content) it('staging', () =\u003e test(urls.staging, \"Disallow: /\")) it('production', () =\u003e test(urls.production, \"Allow: /\")) }) 由NoriSte 在 dev.to 和 Medium进行联合发表。\n参考资料 UI 测试最佳实践项目:https://github.com/NoriSte/ui-testing-best-practices UI 测试最佳实践项目中文翻译:https://github.com/naodeng/ui-testing-best-practices 欢迎关注软件测试同学的公众号“软件测试同学”，原创 QA 技术文章第一时间推送。\n","wordCount":"538","inLanguage":"zh","image":"https://naodeng.com.cn/papermod-cover.png","datePublished":"2024-01-21T17:06:44+08:00","dateModified":"2024-01-21T17:06:44+08:00","author":{"@type":"Person","name":"nao.deng"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests/"},"publisher":{"@type":"Organization","name":"软件测试同学","logo":{"@type":"ImageObject","url":"https://naodeng.com.cn/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://naodeng.com.cn/zh/ accesskey=h title="软件测试同学 (Alt + H)">软件测试同学</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://naodeng.com.cn/ title=🇬🇧English aria-label=🇬🇧English>🇬🇧English</a></li></ul></div></div><ul id=menu><li><a href=https://naodeng.com.cn/zh/archives/ title=归档><span>归档</span></a></li><li><a href=https://naodeng.com.cn/zh/zhcategories title=分类><span>分类</span></a></li><li><a href=https://naodeng.com.cn/zh/search/ title=搜索><span>搜索</span></a></li><li><a href=https://naodeng.com.cn/zh/zhtags title=标签><span>标签</span></a></li><li><a href=https://naodeng.com.cn/zh/zhseries title=系列><span>系列</span></a></li><li><a href=https://status.naodeng.com.cn title=状态><span>状态</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://analytics.naodeng.com.cn/share/OksEL34H/naodeng.com.cn title=网站统计><span>网站统计</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://naodeng.com.cn/zh/>主页</a>&nbsp;»&nbsp;<a href=https://naodeng.com.cn/zh/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控</h1><div class=post-meta><span title='2024-01-21 17:06:44 +0800 +0800'>一月 21, 2024</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;538 字&nbsp;·&nbsp;nao.deng&nbsp;|&nbsp;<a href=https://github.com/naodeng/naodeng.com.cn/tree/main/content/posts/UI-Automation-Testing/UI-Testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests.zh.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd aria-label=检验请求和响应负载>检验请求和响应负载</a><ul><li><a href=#%e4%b8%80%e6%ae%b5%e7%ae%80%e8%a6%81%e8%af%b4%e6%98%8e aria-label=一段简要说明>一段简要说明</a></li></ul></li><li><a href=#%e5%af%b9-xhr-%e8%af%b7%e6%b1%82%e8%bf%9b%e8%a1%8c%e6%96%ad%e8%a8%80%e7%9a%84%e5%ae%8c%e6%95%b4%e7%a4%ba%e4%be%8b aria-label="对 XHR 请求进行断言的完整示例">对 XHR 请求进行断言的完整示例</a></li><li><a href=#%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7 aria-label=测试监控>测试监控</a><ul><li><a href=#%e4%b8%80%e6%ae%b5%e7%ae%80%e8%a6%81%e8%af%b4%e6%98%8e-1 aria-label=一段简要说明>一段简要说明</a></li></ul></li><li><a href=#cypress-%e7%a4%ba%e4%be%8b aria-label="Cypress 示例">Cypress 示例</a></li><li><a href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99 aria-label=参考资料>参考资料</a></li></ul></div></details></div><div class=post-content><p>文章由 <a href=https://github.com/NoriSte/ui-testing-best-practices>UI 测试最佳实践项目</a> 内容翻译而来，大家有条件的话可以去 <a href=https://github.com/NoriSte/ui-testing-best-practices>UI 测试最佳实践项目</a>阅读原文。</p><h2 id=检验请求和响应负载>检验请求和响应负载<a hidden class=anchor aria-hidden=true href=#检验请求和响应负载>#</a></h2><p>原文链接:<a href=https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/test-request-and-response-payload.md>https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/test-request-and-response-payload.md</a></p><h3 id=一段简要说明>一段简要说明<a hidden class=anchor aria-hidden=true href=#一段简要说明>#</a></h3><p>前端应用因与后端通信不协调而导致停止工作的频率有多高？</p><p>前端应用和后端应用之间存在一份合同，你始终需要测试合同是否得到遵守。每一次前后端应用之间的通信都由以下几个方面定义：</p><ul><li>请求的 URL</li><li>所使用的 HTTP 动词（GET、POST 等）</li><li>请求的有效负载和标头：前端应用发送给后端应用的数据</li><li>响应的有效负载、标头和状态：后端应用发送回前端应用的数据</li></ul><p>你需要对所有这些方面进行测试，更广义地说，你需要等待每个相关的 AJAX 请求，为什么呢？</p><ul><li>相关的 XHR 请求是你正在测试的应用程序流程的一部分</li><li>即使 XHR 请求不是你正在测试的流程的一部分，它对达到期望的 UI 状态也可能是相关的</li><li>等待 XHR 请求可以使你的测试更为健壮，参见<a href=https://github.com/naodeng/ui-testing-best-practices/blob/master/sections/generic-best-practices/await-dont-sleep.zh.md>等待，不要休眠</a>章节及其<a href=https://github.com/naodeng/ui-testing-best-practices/blob/master/sections/generic-best-practices/await-dont-sleep.zh.md#XHR-%E8%AF%B7%E6%B1%82%E7%AD%89%E5%BE%85>XHR 请求等待</a>部分</li></ul><p>在现有的测试工具中，完全等待和检查 XHR 请求并不那么常见，目前 Cypress 提供了最全面的检查支持。</p><p><em>请注意：以下所有示例均基于 Cypress，它目前提供了最佳的 XHR 测试支持。</em></p><h2 id=对-xhr-请求进行断言的完整示例>对 XHR 请求进行断言的完整示例<a hidden class=anchor aria-hidden=true href=#对-xhr-请求进行断言的完整示例>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ask Cypress to intercept every XHR request made to a URL ending with `/authentication`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s2>&#34;POST&#34;</span><span class=p>,</span> <span class=s2>&#34;**/authentication&#34;</span><span class=p>).</span><span class=nx>as</span><span class=p>(</span><span class=s2>&#34;authentication-xhr&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ... your test actions...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=s2>&#34;@authentication-xhr&#34;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>interception</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// request headers assertion
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>headers</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;Content-Type&#34;</span><span class=p>,</span> <span class=s2>&#34;application/json&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// request payload assertions
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;username&#34;</span><span class=p>,</span> <span class=s2>&#34;admin&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;password&#34;</span><span class=p>,</span> <span class=s2>&#34;asupersecretpassword&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// status assertion
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>statusCode</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// response headers assertions
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;access-control-allow-origin&#34;</span><span class=p>,</span> <span class=s2>&#34;*&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// response payload assertions
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;token&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>在下面的章节中，我们将详细讨论 XHR 请求的不同特征。</p><details><summary>验证 XHR 请求的 URL</summary><p>在 Cypress 中，用于请求的 URL 是通过<code>cy.intercept</code>调用定义的。你可能需要检查 URL 的查询字符串。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ask Cypress to intercept every XHR request made to a URL ending with `/authentication`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s2>&#34;**/authentication**&#34;</span><span class=p>).</span><span class=nx>as</span><span class=p>(</span><span class=s2>&#34;authentication-xhr&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ... your test actions...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=s2>&#34;@authentication-xhr&#34;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>interception</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// query string assertion
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>contain</span><span class=p>(</span><span class=s2>&#34;username=admin&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>contain</span><span class=p>(</span><span class=s2>&#34;password=asupersecretpassword&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>请注意，当你需要对多个主题进行断言时，Cypress 的<code>then => expect</code>语法非常有帮助（例如，URL 和状态）。如果你只需要对单个主题进行断言，可以使用更具表现力的<code>should</code>语法。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=s2>&#34;@authentication-xhr&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>its</span><span class=p>(</span><span class=s2>&#34;url&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>should</span><span class=p>(</span><span class=s2>&#34;contain&#34;</span><span class=p>,</span> <span class=s2>&#34;username=admin&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>and</span><span class=p>(</span><span class=s2>&#34;contain&#34;</span><span class=p>,</span> <span class=s2>&#34;password=asupersecretpassword&#34;</span><span class=p>);</span>
</span></span></code></pre></div></details><details><summary>XHR 请求的方法</summary><p>在 Cypress 中，请求使用<code>cy.intercept</code>函数定义。你可以通过指定它来定义要拦截的请求类型。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// the most compact `cy.intercept` call, the GET method is implied
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s2>&#34;**/authentication&#34;</span><span class=p>).</span><span class=nx>as</span><span class=p>(</span><span class=s2>&#34;authentication-xhr&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// method can be explicitly defined
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s2>&#34;POST&#34;</span><span class=p>,</span> <span class=s2>&#34;**/authentication&#34;</span><span class=p>).</span><span class=nx>as</span><span class=p>(</span><span class=s2>&#34;authentication-xhr&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// the extended `cy.intercept` call is available too
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>method</span><span class=o>:</span> <span class=s2>&#34;POST&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>url</span><span class=o>:</span> <span class=s2>&#34;**/authentication&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}).</span><span class=nx>as</span><span class=p>(</span><span class=s2>&#34;authentication-xhr&#34;</span><span class=p>);</span>
</span></span></code></pre></div></details><details><summary>验证 XHR 请求的 payload 和 headers</summary><p>对 XHR 请求的 payload 和 headers 进行断言允许你立即获得有关糟糕的 XHR 请求原因的详细反馈。必须在每个 XHR 请求上进行检查，以确保一切都正确地表示了测试执行的 UI 操作。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ask Cypress to intercept every XHR request made to a URL ending with `/authentication`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s2>&#34;POST&#34;</span><span class=p>,</span> <span class=s2>&#34;**/authentication&#34;</span><span class=p>).</span><span class=nx>as</span><span class=p>(</span><span class=s2>&#34;authentication-xhr&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ... your test actions...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=s2>&#34;@authentication-xhr&#34;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>interception</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// request headers assertion
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>headers</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;Content-Type&#34;</span><span class=p>,</span> <span class=s2>&#34;application/json&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// request payload assertions
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;username&#34;</span><span class=p>,</span> <span class=s2>&#34;admin&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>expect</span><span class=p>(</span><span class=nx>interception</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;password&#34;</span><span class=p>,</span> <span class=s2>&#34;asupersecretpassword&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div></details><details><summary>验证 XHR 请求响应的 payload, headers 和 status</summary><p>响应必须百分之百符合前端应用的预期，否则可能向用户展示意料之外的状态。响应断言在完整的端到端测试中很有用，但在 UI 集成测试中则无关紧要（TODO：链接到集成测试页面）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ask Cypress to intercept every XHR request made to a URL ending with `/authentication`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cy</span><span class=p>.</span><span class=nx>intercept</span><span class=p>(</span><span class=s2>&#34;POST&#34;</span><span class=p>,</span> <span class=s2>&#34;**/authentication&#34;</span><span class=p>).</span><span class=nx>as</span><span class=p>(</span><span class=s2>&#34;authentication-xhr&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ... your test actions...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=s2>&#34;@authentication-xhr&#34;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>intercept</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// status assertions
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>intercept</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>statusCode</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>equal</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// response headers assertions
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>intercept</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;access-control-allow-origin&#34;</span><span class=p>,</span> <span class=s2>&#34;*&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// response payload assertions
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>expect</span><span class=p>(</span><span class=nx>intercept</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>).</span><span class=nx>to</span><span class=p>.</span><span class=nx>have</span><span class=p>.</span><span class=nx>property</span><span class=p>(</span><span class=s2>&#34;token&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div></details><h2 id=测试监控>测试监控<a hidden class=anchor aria-hidden=true href=#测试监控>#</a></h2><p>原文链接：:<a href=https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/monitoring-tests.md>https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/monitoring-tests.md</a></p><h3 id=一段简要说明-1>一段简要说明<a hidden class=anchor aria-hidden=true href=#一段简要说明-1>#</a></h3><p>随着前端期望的提高，服务器和服务的复杂性也在增加。前端应用需要变得越来越快：代码拆分、懒加载、Brotli 压缩等性能优化解决方案已成为标准。还有一些令人惊叹的解决方案，如基于机器学习和分析数据的代码拆分和资源预加载。此外，JAMstack 站点生成器可用于避免手动管理许多性能优化，但它们的配置和构建过程可能会破坏<strong>已经测试过的功能</strong>。</p><p>有很多我们一旦测试过就认为理所当然的功能，但它们并非无法回归，可能会导致灾难。例如：</p><ul><li><code>sitemap.xml</code> 和 <code>robots.txt</code> 的爬行配置（通常每个环境都不同）</li><li>使用 Brotli/gzip 提供的资产：错误的内容编码可能会破坏站点的所有功能</li><li>针对静态或动态资产的不同配置的缓存管理</li></ul><p>这些问题可能看起来很明显，但比你想象的更微妙。如果你关心用户体验，就应该保持监控，因为通常在发现问题时已经为时过晚。我知道不能监控所有事物，但是测试应用的次数越多，测试就越能成为首要的质量检查工具。</p><p>监控测试也可以与 E2E 测试集成（毕竟，它们只是简单的 E2E 测试），但将它们保持分开可以帮助你在需要时运行它们。上述大多数事项与 DevOps 相关，有了超快的监控测试，您可以获得即时而专注的反馈。</p><h2 id=cypress-示例>Cypress 示例<a hidden class=anchor aria-hidden=true href=#cypress-示例>#</a></h2><ul><li>缓存监控测试示例</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>urls</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>staging</span><span class=o>:</span> <span class=s2>&#34;https://staging.example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>production</span><span class=o>:</span> <span class=s2>&#34;https://example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>shouldNotBeCached</span> <span class=o>=</span> <span class=p>(</span><span class=nx>xhr</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>cy</span><span class=p>.</span><span class=nx>wrap</span><span class=p>(</span><span class=nx>xhr</span><span class=p>).</span><span class=nx>its</span><span class=p>(</span><span class=s2>&#34;headers.cache-control&#34;</span><span class=p>).</span><span class=nx>should</span><span class=p>(</span><span class=s2>&#34;equal&#34;</span><span class=p>,</span> <span class=s2>&#34;public,max-age=0,must-revalidate&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>shouldBeCached</span> <span class=o>=</span> <span class=p>(</span><span class=nx>xhr</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>cy</span><span class=p>.</span><span class=nx>wrap</span><span class=p>(</span><span class=nx>xhr</span><span class=p>).</span><span class=nx>its</span><span class=p>(</span><span class=s2>&#34;headers.cache-control&#34;</span><span class=p>).</span><span class=nx>should</span><span class=p>(</span><span class=s2>&#34;equal&#34;</span><span class=p>,</span> <span class=s2>&#34;public,max-age=31536000,immutable&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// extract the main JS file from the source code of the page
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>getMainJsUrl</span> <span class=o>=</span> <span class=nx>pageSource</span> <span class=p>=&gt;</span> <span class=s2>&#34;/app-56a3f6cb9e6156c82be6.js&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>context</span><span class=p>(</span><span class=s1>&#39;Site monitoring&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>context</span><span class=p>(</span><span class=s1>&#39;The HTML should not be cached&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>test</span> <span class=o>=</span> <span class=nx>url</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>cy</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>shouldNotBeCached</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>it</span><span class=p>(</span><span class=s2>&#34;staging&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>staging</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>it</span><span class=p>(</span><span class=s2>&#34;production&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>production</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>context</span><span class=p>(</span><span class=s1>&#39;The static assets should be cached&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>test</span> <span class=o>=</span> <span class=nx>url</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nx>cy</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>its</span><span class=p>(</span><span class=s2>&#34;body&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>getMainJsUrl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>appUrl</span> <span class=p>=&gt;</span> <span class=nx>url</span><span class=o>+</span><span class=nx>appUrl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>cy</span><span class=p>.</span><span class=nx>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>shouldBeCached</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;staging&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>staging</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;production&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>production</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><ul><li>内容编码监控测试示例</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>context</span><span class=p>(</span><span class=s1>&#39;The Brotli-compressed assets should be served with the correct content encoding&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>test</span> <span class=o>=</span> <span class=nx>url</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cy</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>its</span><span class=p>(</span><span class=s2>&#34;body&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>getMainJsUrl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>appUrl</span> <span class=p>=&gt;</span> <span class=nx>cy</span><span class=p>.</span><span class=nx>request</span><span class=p>({</span><span class=nx>url</span><span class=o>:</span> <span class=nx>url</span> <span class=o>+</span> <span class=nx>appUrl</span><span class=p>,</span> <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span><span class=s2>&#34;Accept-Encoding&#34;</span><span class=o>:</span> <span class=s2>&#34;br&#34;</span><span class=p>}})</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>its</span><span class=p>(</span><span class=s2>&#34;headers.content-encoding&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>should</span><span class=p>(</span><span class=s2>&#34;equal&#34;</span><span class=p>,</span> <span class=s2>&#34;br&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;staging&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>staging</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;production&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>production</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><ul><li>抓取监测测试示例</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>context</span><span class=p>(</span><span class=s1>&#39;The robots.txt file should disallow the crawling of the staging site and allow the production one&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>test</span> <span class=o>=</span> <span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>content</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>cy</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>url</span><span class=si>}</span><span class=sb>/robots.txt`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>its</span><span class=p>(</span><span class=s2>&#34;body&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>should</span><span class=p>(</span><span class=s2>&#34;contain&#34;</span><span class=p>,</span> <span class=nx>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;staging&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>staging</span><span class=p>,</span> <span class=s2>&#34;Disallow: /&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;production&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>test</span><span class=p>(</span><span class=nx>urls</span><span class=p>.</span><span class=nx>production</span><span class=p>,</span> <span class=s2>&#34;Allow: /&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p><em>由<a href=https://github.com/NoriSte>NoriSte</a> 在 <a href=https://dev.to/noriste/the-concept-of-monitoring-tests-4l5j>dev.to</a> 和 <a href=https://medium.com/@NoriSte/the-concept-of-monitoring-tests-d7cb5af514e5>Medium</a>进行联合发表。</em></p><h2 id=参考资料>参考资料<a hidden class=anchor aria-hidden=true href=#参考资料>#</a></h2><ul><li>UI 测试最佳实践项目:<a href=https://github.com/NoriSte/ui-testing-best-practices>https://github.com/NoriSte/ui-testing-best-practices</a></li><li>UI 测试最佳实践项目中文翻译:<a href=https://github.com/naodeng/ui-testing-best-practices>https://github.com/naodeng/ui-testing-best-practices</a></li></ul><hr><p>欢迎关注软件测试同学的公众号“<strong>软件测试同学</strong>”，原创 QA 技术文章第一时间推送。</p><center><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/2023112015'QR Code for 公众号.jpg" style=width:100px></center></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-beginners-top-to-botton-approach/><span class=title>« 上一页</span><br><span>UI 测试最佳实践的初学者篇：从金字塔顶层入手测试</span>
</a><a class=next href=https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-advanced-usage-output-html-report-and-ci-cd-integration/><span class=title>下一页 »</span><br><span>K6 性能测试教程 - 进阶用法：输出 html 报告和 CI/CD 集成</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 on x" href="https://x.com/intent/tweet/?text=UI%20%e6%b5%8b%e8%af%95%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e7%9a%84%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1%e6%b5%8b%e8%af%95%ef%bc%9a%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd%ef%bc%8c%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7&amp;url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f&amp;title=UI%20%e6%b5%8b%e8%af%95%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e7%9a%84%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1%e6%b5%8b%e8%af%95%ef%bc%9a%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd%ef%bc%8c%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7&amp;summary=UI%20%e6%b5%8b%e8%af%95%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e7%9a%84%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1%e6%b5%8b%e8%af%95%ef%bc%9a%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd%ef%bc%8c%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7&amp;source=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f&title=UI%20%e6%b5%8b%e8%af%95%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e7%9a%84%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1%e6%b5%8b%e8%af%95%ef%bc%9a%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd%ef%bc%8c%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 on whatsapp" href="https://api.whatsapp.com/send?text=UI%20%e6%b5%8b%e8%af%95%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e7%9a%84%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1%e6%b5%8b%e8%af%95%ef%bc%9a%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd%ef%bc%8c%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7%20-%20https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 on telegram" href="https://telegram.me/share/url?text=UI%20%e6%b5%8b%e8%af%95%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e7%9a%84%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1%e6%b5%8b%e8%af%95%ef%bc%9a%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd%ef%bc%8c%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7&amp;url=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share UI 测试最佳实践的服务通信测试：检验请求和响应负载，测试监控 on ycombinator" href="https://news.ycombinator.com/submitlink?t=UI%20%e6%b5%8b%e8%af%95%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e7%9a%84%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1%e6%b5%8b%e8%af%95%ef%bc%9a%e6%a3%80%e9%aa%8c%e8%af%b7%e6%b1%82%e5%92%8c%e5%93%8d%e5%ba%94%e8%b4%9f%e8%bd%bd%ef%bc%8c%e6%b5%8b%e8%af%95%e7%9b%91%e6%8e%a7&u=https%3a%2f%2fnaodeng.com.cn%2fzh%2fposts%2fui-automation-testing%2fui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=naodeng/naodeng.com.cn data-repo-id=R_kgDOHntNtg data-category="Show and tell" data-category-id=DIC_kwDOHntNts4Cavst data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://naodeng.com.cn/zh/>软件测试同学</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>