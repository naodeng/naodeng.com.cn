<!doctype html><html dir=ltr lang=zh data-theme class="html theme--light"><head><title>Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架 |
Nao
</title><meta charset=utf-8><meta name=generator content="Hugo 0.120.4"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Nao"><meta name=description content="文章介绍如何去使用 cypress 的数据驱动方法封装参数化和测试框架"><meta name=google-site-verification content="google5e9a7c9479924ed2"><link rel=stylesheet href=/scss/main.min.772eefee9824c26da5d3828c2507ea318c8e7a37b0b1d18cd4f224edc2755fea.css integrity="sha256-dy7v7pgkwm2l04KMJQfqMYyOejewsdGM1PIk7cJ1X+o=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://naodeng.tech/zh/post/cypress-demo4/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script><script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><script async defer src=https://naodeng-umami.vercel.app/hugo.js data-website-id=b3b285c9-3c35-4398-9252-91bb70560b84></script><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://naodeng.tech/images/site-feature-image.png"><meta name=twitter:title content="Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架"><meta name=twitter:description content="文章介绍如何去使用 cypress 的数据驱动方法封装参数化和测试框架"><meta property="og:title" content="Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架"><meta property="og:description" content="文章介绍如何去使用 cypress 的数据驱动方法封装参数化和测试框架"><meta property="og:type" content="article"><meta property="og:url" content="https://naodeng.tech/zh/post/cypress-demo4/"><meta property="og:image" content="https://naodeng.tech/images/site-feature-image.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-05-11T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-11T00:00:00+00:00"><meta property="og:site_name" content="QA Discovery"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架","headline":"Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架","alternativeHeadline":"","description":"
      文章介绍如何去使用 cypress 的数据驱动方法封装参数化和测试框架


    ","inLanguage":"zh","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/naodeng.tech\/zh\/post\/cypress-demo4\/"},"author":{"@type":"Person","name":"nao.deng"},"creator":{"@type":"Person","name":"nao.deng"},"accountablePerson":{"@type":"Person","name":"nao.deng"},"copyrightHolder":{"@type":"Person","name":"nao.deng"},"copyrightYear":"2022","dateCreated":"2022-05-11T00:00:00.00Z","datePublished":"2022-05-11T00:00:00.00Z","dateModified":"2022-05-11T00:00:00.00Z","publisher":{"@type":"Organization","name":"nao.deng","url":"https://naodeng.tech/","logo":{"@type":"ImageObject","url":"https:\/\/naodeng.tech\/favicon-32x32.png","width":"32","height":"32"}},"image":["https://naodeng.tech/images/site-feature-image.png"],"url":"https:\/\/naodeng.tech\/zh\/post\/cypress-demo4\/","wordCount":"661","genre":[],"keywords":["自动化测试","cypress"]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src="https://avatars.githubusercontent.com/u/7599466?v=4" alt="profile picture"><div class=sidebar__introduction-title><a href=/zh>QA Discovery</a></div><div class=sidebar__introduction-description><p>A Quality Analyst, Not A Quality Assurance</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://github.com/naodeng/ target=_blank rel="noopener me" aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://naodeng.medium.com/ target=_blank rel="noopener me" aria-label=medium title=medium><i class="fab fa-medium fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:dengnao@gmail.com target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
2015-2023 naodeng ｜ wechat: teststudents</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!1})}</script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/zh/ title>首页</a></li><li class=nav__list-item><a href=/zh/post/ title>文章</a></li><li class=nav__list-item><a href=/zh/categories/ title>分类</a></li><li class=nav__list-item><a href=/zh/tags/ title>标签</a></li><li class=nav__list-item><a href=https://github.com/naodeng/naodeng/blob/master/README_CN.md target=_blank rel="noopener noreferrer" title>关于</a></li><li class=nav__list-item><a href=https://naodeng-umami.vercel.app/share/OksEL34H/nao.deng target=_blank rel="noopener noreferrer" title>网站统计</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Cypress UI 自动化测试框架学习（4）- 数据驱动，方法封装参数化和测试框架</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>Wed, May 11, 2022</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>4-minute read</span></li></ul><p>下面的信息是自动化测试框架学习第四篇数据驱动方法封装参数化和测试框架的介绍。
在自动化测试框架学习中，有很多方法可以用来驱动测试框架。例如，数据驱动方法封装参数化和测试框架。这两个方法都可以将测试框架的数据处理和预设环境等现有模型结合起来。这样就可以方便地开发、测试和运行新的测试框架。</p><h2 id=测试数据驱动>测试数据驱动</h2><h3 id=js-格式测试数据驱动>js 格式测试数据驱动</h3><h4 id=简介>简介</h4><p>数据以 js 格式存储，使用 js 的 import 方法导入使用</p><h4 id=使用方法>使用方法</h4><h5 id=新建测试数据-js-文件>新建测试数据 js 文件</h5><ul><li><p>示例：在项目的 cypress/integration 文件夹下新建 testData 目录，然后在该目录下创建一个 js 文件，示例文件名为：testLogin.data.js</p></li><li><p>testLogin.data.js 示例代码如下：</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>export</span> <span class=k>const</span> <span class=n>testLoginUserEmail</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>summary</span><span class=p>:</span> <span class=s2>&#34;正确邮箱账号登录验证&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>username</span><span class=p>:</span><span class=s2>&#34;dengnao.123@163.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span><span class=p>:</span><span class=s2>&#34;xxxx&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=k>export</span> <span class=k>const</span> <span class=n>testLoginUserId</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>summary</span><span class=p>:</span> <span class=s2>&#34;正确id账号登录验证&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>username</span><span class=p>:</span><span class=s2>&#34;waitnoww&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span><span class=p>:</span><span class=s2>&#34;xxxx&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=k>export</span> <span class=k>const</span> <span class=n>testLoginUserMobilephone</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>summary</span><span class=p>:</span> <span class=s2>&#34;正确手机号账号登录验证&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>username</span><span class=p>:</span><span class=s2>&#34;18888139031&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span><span class=p>:</span><span class=s2>&#34;xxxx&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h5 id=编写测试用例>编写测试用例</h5><ul><li><p>在项目 cypress/integration 文件夹下新建 js 测试用例文件，示例文件名为：testLogin_guanggoo_data_by_js.js</p></li><li><p>示例代码如下：</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>import {
</span></span><span class=line><span class=cl>testLoginUserEmail,
</span></span><span class=line><span class=cl>testLoginUserId,
</span></span><span class=line><span class=cl>testLoginUserMobilephone
</span></span><span class=line><span class=cl>} from &#34;./testData/testLogin.data&#34;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 测试用例
</span></span><span class=line><span class=cl>describe(&#34;光谷社区登录验证&#34;, function () {
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 执行用例执行用例之前先进入首页
</span></span><span class=line><span class=cl>    beforeEach(function () {
</span></span><span class=line><span class=cl>        // 访问并登录光谷社区
</span></span><span class=line><span class=cl>        cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问url
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>        cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确邮箱账号登录
</span></span><span class=line><span class=cl>    it(testLoginUserEmail[0].summary, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserEmail[0].username) //输入邮箱用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserEmail[0].password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确ID账号登录
</span></span><span class=line><span class=cl>    it(testLoginUserId[0].summary, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserId[0].username) //输入ID用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserId[0].password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确手机账号登录
</span></span><span class=line><span class=cl>    it(testLoginUserMobilephone[0].summary, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserMobilephone[0].username) //输入手机号用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(testLoginUserMobilephone[0].password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // 执行用例执行用例之后清除登录信息
</span></span><span class=line><span class=cl>        afterEach(function () {
</span></span><span class=line><span class=cl>            // 清除cookies
</span></span><span class=line><span class=cl>            cy.clearCookies()
</span></span><span class=line><span class=cl>        })
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h5 id=运行测试用例>运行测试用例</h5><ul><li>运行脚本：npm run cypress:open</li><li>点击运行 testLogin_guanggoo_data_by_js.js 用例</li><li>查看运行结果 (测试数据能正常获取到)</li></ul><h3 id=fixture-测试数据驱动介绍>fixture 测试数据驱动介绍</h3><blockquote><p>fixture 数据驱动方式是 cypress 框架推荐的方法，支持的格式也很多，如.json/txt/html/jpg/gif/mp3/zip 等，具体可参考：https://docs.cypress.io/api/commands/fixture</p></blockquote><h4 id=简介-1>简介</h4><p>Cypress 使用 cypress/fixture 目录存放 json 文件数据，cy.fixture() 加载测试数据，如果不指定文件路径，默认从 cypress/fixtures 文件下去查找，也可以自己设置文件路径</p><h4 id=使用方法-1>使用方法</h4><blockquote><p>以 json 格式读取举例介绍</p></blockquote><h5 id=新建测试数据-json-文件>新建测试数据 json 文件</h5><ul><li><p>示例：在项目的 cypress/fixtures 文件夹下新建一个 json 文件，示例文件名为：testLoginData.json</p></li><li><p>testLoginData.json 示例代码如下（账号密码记得换成自己的）：</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;testLoginUserEmail&#34;: {
</span></span><span class=line><span class=cl>&#34;summary&#34;: &#34;正确邮箱账号登录验证&#34;,
</span></span><span class=line><span class=cl>&#34;username&#34;: &#34;dengnao.123@163.com&#34;,
</span></span><span class=line><span class=cl>&#34;password&#34;: &#34;xxxx&#34;
</span></span><span class=line><span class=cl>},
</span></span><span class=line><span class=cl>&#34;testLoginUserId&#34;: {
</span></span><span class=line><span class=cl>&#34;summary&#34;: &#34;正确 id 账号登录验证&#34;,
</span></span><span class=line><span class=cl>&#34;username&#34;: &#34;waitnoww&#34;,
</span></span><span class=line><span class=cl>&#34;password&#34;: &#34;xxxx&#34;
</span></span><span class=line><span class=cl>},
</span></span><span class=line><span class=cl>&#34;testLoginUserMobilephone&#34;: {
</span></span><span class=line><span class=cl>&#34;summary&#34;: &#34;正确手机号账号登录验证&#34;,
</span></span><span class=line><span class=cl>&#34;username&#34;: &#34;18888889031&#34;,
</span></span><span class=line><span class=cl>&#34;password&#34;: &#34;xxxx&#34;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h5 id=编写测试用例-1>编写测试用例</h5><ul><li><p>在项目 cypress/integration 文件夹下新建 js 测试用例文件，示例文件名为：testLogin_guanggoo_data_by_fixture.js</p></li><li><p>示例代码如下：</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>describe(&#34;光谷社区登录验证&#34;, function () {
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 执行用例执行用例之前先进入首页
</span></span><span class=line><span class=cl>    beforeEach(function () {
</span></span><span class=line><span class=cl>        // 访问并登录光谷社区
</span></span><span class=line><span class=cl>        cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问url
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>        cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>        // 获取测试数据
</span></span><span class=line><span class=cl>        cy.fixture(&#39;testLoginData.json&#39;).as(&#39;loginData&#39;)
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确邮箱账号登录
</span></span><span class=line><span class=cl>    it(&#34;正确邮箱账号登录验证&#34;, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserEmail.username) //输入邮箱用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserEmail.password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确ID账号登录
</span></span><span class=line><span class=cl>    it(&#34;正确id账号登录验证&#34;, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserId.username) //输入ID用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserId.password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    }),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    //正确手机账号登录
</span></span><span class=line><span class=cl>    it(&#34;正确手机号账号登录验证&#34;, function () {
</span></span><span class=line><span class=cl>        cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>        cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserMobilephone.username) //输入手机号用户名
</span></span><span class=line><span class=cl>        cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>            .type(this.loginData.testLoginUserMobilephone.password) //输入密码
</span></span><span class=line><span class=cl>        cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>        cy.get(&#39;.ui-header &gt; .username&#39;)
</span></span><span class=line><span class=cl>            .should(&#39;have.text&#39;, &#39;waitnoww&#39;) //验证登录正确返回到首页，登录信息返回正确
</span></span><span class=line><span class=cl>    })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // 执行用例执行用例之后清除登录信息
</span></span><span class=line><span class=cl>        afterEach(function () {
</span></span><span class=line><span class=cl>            // 清除cookies
</span></span><span class=line><span class=cl>            cy.clearCookies()
</span></span><span class=line><span class=cl>        })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h5 id=运行测试用例-1>运行测试用例</h5><ul><li>运行脚本：npm run cypress:open</li><li>点击运行 testLogin_guanggoo_data_by_fixture.js 用例</li><li>查看运行结果 (测试数据能正常获取到)</li></ul><h2 id=方法封装参数化>方法封装参数化</h2><h3 id=简介-2>简介</h3><p>cypress 框架提供了一个 commands.js 可以自定义各种命令，用来封装各种通用方法，参数化方法，常用脚本等；</p><p>将常用的通用方法如登录方法在 cypress/support/commands.js 中编写完成之后，与 cy.get()/cy.visit() 一样，可以直接用 cy.xxx() 形式调用，非常方便，减少维护成本</p><h3 id=使用介绍>使用介绍</h3><blockquote><p>示例会介绍常用的参数化登录命令和进入首页命令</p></blockquote><h4 id=登录参数化登录封装>登录参数化登录封装</h4><h5 id=代码编写>代码编写</h5><ul><li>打开 cypress/support/commands.js 文件</li><li>输入如下代码：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Cypress.Commands.add(&#34;login&#34;,(username,password) =&gt; {
</span></span><span class=line><span class=cl>cy.clearCookies() //清除 cookies,保证页面为未登录状态
</span></span><span class=line><span class=cl>cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问 url
</span></span><span class=line><span class=cl>cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标 url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>cy.get(&#39;:nth-child(1) &gt; .nav-collapse&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>cy.url().should(&#39;include&#39;, &#39;login&#39;) //验证正确跳转到登录页面
</span></span><span class=line><span class=cl>cy.get(&#39;#email&#39;) //根据 css 定位用户名输入框
</span></span><span class=line><span class=cl>.type(username) //输入参数化的用户名
</span></span><span class=line><span class=cl>cy.get(&#39;#password&#39;) //根据 css 定位密码输入框
</span></span><span class=line><span class=cl>.type(password) //输入参数化的密码
</span></span><span class=line><span class=cl>cy.get(&#39;.btn-success&#39;).click() //点击登录按钮
</span></span><span class=line><span class=cl>cy.get(&#39;:nth-child(2) &gt; .nav-collapse&#39;).should(&#39;contain&#39;, &#39;设置&#39;) //验证登录成功回到首页，设置按钮展示正确
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h4 id=代码使用>代码使用</h4><ul><li>在测试用例中可直接进行方法调用 cy.login(username,password) 换成自己的账号密码进行登录操作了</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cy.login(&#34;dengnao.123@163.com&#34;,&#34;xxxx&#34;)
</span></span></code></pre></div><h4 id=进入首页方法封装>进入首页方法封装</h4><h5 id=代码编写-1>代码编写</h5><ul><li>打开 cypress/support/commands.js 文件</li><li>输入如下代码：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Cypress.Commands.add(&#34;initHomePage&#34;,() =&gt; {
</span></span><span class=line><span class=cl>cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问 url
</span></span><span class=line><span class=cl>cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标 url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h4 id=代码使用-1>代码使用</h4><ul><li>在测试用例中可直接进行方法调用 cy.initHomePage() 即可进入首页</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cy.initHomePage()
</span></span></code></pre></div><h2 id=测试框架介绍>测试框架介绍</h2><h3 id=简介-3>简介</h3><p>Cypress 框架采用了 Mocha 框架的语法，故 Mocha 框架的测试语法可在 cypress 上直接使用</p><h3 id=语法介绍>语法介绍</h3><h4 id=describe>describe()</h4><p>定义测试套件，里面还可以定义多个 context 或 it</p><h4 id=context>context()</h4><p>定义测试套件，是 describe() 的别名，可以替代 describe</p><h4 id=it>it()</h4><p>定义测试用例</p><h4 id=before>before()</h4><p>在一个测试套件中的所有测试用例之前执行，设置一些运行 testcase 的前置条件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// runs once before the first test in this block
</span></span><span class=line><span class=cl>});
</span></span></code></pre></div><h4 id=beforeeach>beforeEach()</h4><p>在每个测试用例之前执行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>        // 访问并登录光谷社区
</span></span><span class=line><span class=cl>        cy.visit(&#39;http://www.guanggoo.com/&#39;) //访问url
</span></span><span class=line><span class=cl>        cy.url().should(&#39;include&#39;, &#39;www.guanggoo.com&#39;) //验证目标url 是否正确包含光谷社区正确域名 验证是否正确跳转到光谷社区页面
</span></span><span class=line><span class=cl>        cy.title().should(&#39;contain&#39;, &#39;光谷社区&#39;) //验证页面 title 是否正确
</span></span><span class=line><span class=cl>    })
</span></span></code></pre></div><h4 id=aftereach>afterEach()</h4><p>在每个测试用例之后执行，可以执行清除数据等操作</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 清除 cookies
</span></span><span class=line><span class=cl>cy.clearCookies()
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h4 id=after>after()</h4><p>在一个测试套件中的所有测试用例之后执行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// runs once after the last test in this block
</span></span><span class=line><span class=cl>});
</span></span></code></pre></div><h4 id=only>.only()</h4><p>设置只执行某个 testcase/testsuite</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>describe.only(&#39;#indexOf()&#39;, function() {
</span></span><span class=line><span class=cl>// ...
</span></span><span class=line><span class=cl>});
</span></span><span class=line><span class=cl>});
</span></span></code></pre></div><h4 id=skip>.skip()</h4><p>设置跳过执行某个 testcase/testsuite</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>describe(&#39;#indexOf()&#39;, function() {
</span></span><span class=line><span class=cl>it.skip(&#39;should return -1 unless present&#39;, function() {
</span></span><span class=line><span class=cl>// this test will not be run
</span></span><span class=line><span class=cl>});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    it(&#39;should return the index when present&#39;, function() {
</span></span><span class=line><span class=cl>      // this test will be run
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>});
</span></span><span class=line><span class=cl>});
</span></span></code></pre></div><h3 id=参考网址>参考网址</h3><ul><li><a href=https://docs.cypress.io/guides/references/bundled-tools#Mocha>https://docs.cypress.io/guides/references/bundled-tools#Mocha</a></li></ul><h3>Related Posts</h3><ul><li><a href=/zh/post/cypress-demo6/>Cypress UI 自动化测试框架学习（6）- 用例编辑和脚本录制工具 Cypress Studio 介绍</a></li><li><a href=/zh/post/cypress-demo5/>Cypress UI 自动化测试框架学习（5）- 命令大全</a></li><li><a href=/zh/post/cypress-demo3/>Cypress UI 自动化测试框架学习（3）- 元素定位，操作和断言</a></li><li><a href=/zh/post/cypress-demo2/>Cypress UI 自动化测试框架学习（2）- 测试报告</a></li></ul></div><div class=post__footer><span><a class=tag href=/zh/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/>自动化测试</a><a class=tag href=/zh/tags/cypress/>cypress</a></span></div><div id=comment><h2>comments</h2><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//naodeng-tech.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
2015-2023 naodeng ｜ wechat: teststudents</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!1})}</script></body></html>