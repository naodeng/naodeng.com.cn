<!doctype html><html dir=ltr lang=en data-theme class="html theme--light"><head><title>REST Assured 教程：进阶用法 - 验证响应和日志记录，过滤器，文件上传 |
Nao
</title><meta charset=utf-8><meta name=generator content="Hugo 0.120.3"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Nao"><meta name=description content="这个博客将深入介绍 REST Assured 的进阶用法，重点放在验证 API 响应、日志记录和过滤器的应用上。读者将学习如何使用 REST Assured 来有效地验证 API 响应，包括状态码、响应内容和响应头部信息。此外，博客还将涵盖如何记录 API 请求和响应的日志，以便进行调试和故障排除。最后，博客还将介绍如何使用 REST Assured 的过滤器来处理和转换 API 响应，以满足特定需求或执行进一步的操作。这个博客将帮助那些已经熟悉基本 REST Assured 用法的人深入了解如何利用这个工具的高级功能来更有效地进行 API 测试和自动化。"><meta name=google-site-verification content="google5e9a7c9479924ed2"><link rel=stylesheet href=/scss/main.min.772eefee9824c26da5d3828c2507ea318c8e7a37b0b1d18cd4f224edc2755fea.css integrity="sha256-dy7v7pgkwm2l04KMJQfqMYyOejewsdGM1PIk7cJ1X+o=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://naodeng.tech/zh/post/rest-assured-tutorial-advance-usage-verifying-response-and-logging/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script><script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><script async defer src=https://naodeng-umami.vercel.app/hugo.js data-website-id=b3b285c9-3c35-4398-9252-91bb70560b84></script><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://naodeng.tech/images/site-feature-image.png"><meta name=twitter:title content="REST Assured 教程：进阶用法 - 验证响应和日志记录，过滤器，文件上传"><meta name=twitter:description content="这个博客将深入介绍 REST Assured 的进阶用法，重点放在验证 API 响应、日志记录和过滤器的应用上。读者将学习如何使用 REST Assured 来有效地验证 API 响应，包括状态码、响应内容和响应头部信息。此外，博客还将涵盖如何记录 API 请求和响应的日志，以便进行调试和故障排除。最后，博客还将介绍如何使用 REST Assured 的过滤器来处理和转换 API 响应，以满足特定需求或执行进一步的操作。这个博客将帮助那些已经熟悉基本 REST Assured 用法的人深入了解如何利用这个工具的高级功能来更有效地进行 API 测试和自动化。"><meta property="og:title" content="REST Assured 教程：进阶用法 - 验证响应和日志记录，过滤器，文件上传"><meta property="og:description" content="这个博客将深入介绍 REST Assured 的进阶用法，重点放在验证 API 响应、日志记录和过滤器的应用上。读者将学习如何使用 REST Assured 来有效地验证 API 响应，包括状态码、响应内容和响应头部信息。此外，博客还将涵盖如何记录 API 请求和响应的日志，以便进行调试和故障排除。最后，博客还将介绍如何使用 REST Assured 的过滤器来处理和转换 API 响应，以满足特定需求或执行进一步的操作。这个博客将帮助那些已经熟悉基本 REST Assured 用法的人深入了解如何利用这个工具的高级功能来更有效地进行 API 测试和自动化。"><meta property="og:type" content="article"><meta property="og:url" content="https://naodeng.tech/zh/post/rest-assured-tutorial-advance-usage-verifying-response-and-logging/"><meta property="og:image" content="https://naodeng.tech/images/site-feature-image.png"><meta property="article:section" content="zh"><meta property="article:published_time" content="2023-11-03T09:25:19+08:00"><meta property="article:modified_time" content="2023-11-03T09:25:19+08:00"><meta property="og:site_name" content="QA Discovery"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"zh","name":"REST Assured 教程：进阶用法 - 验证响应和日志记录，过滤器，文件上传","headline":"REST Assured 教程：进阶用法 - 验证响应和日志记录，过滤器，文件上传","alternativeHeadline":"","description":"
      这个博客将深入介绍 REST Assured 的进阶用法，重点放在验证 API 响应、日志记录和过滤器的应用上。读者将学习如何使用 REST Assured 来有效地验证 API 响应，包括状态码、响应内容和响应头部信息。此外，博客还将涵盖如何记录 API 请求和响应的日志，以便进行调试和故障排除。最后，博客还将介绍如何使用 REST Assured 的过滤器来处理和转换 API 响应，以满足特定需求或执行进一步的操作。这个博客将帮助那些已经熟悉基本 REST Assured 用法的人深入了解如何利用这个工具的高级功能来更有效地进行 API 测试和自动化。


    ","inLanguage":"en","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/naodeng.tech\/zh\/post\/rest-assured-tutorial-advance-usage-verifying-response-and-logging\/"},"author":{"@type":"Person","name":"nao.deng"},"creator":{"@type":"Person","name":"nao.deng"},"accountablePerson":{"@type":"Person","name":"nao.deng"},"copyrightHolder":{"@type":"Person","name":"nao.deng"},"copyrightYear":"2023","dateCreated":"2023-11-03T09:25:19.00Z","datePublished":"2023-11-03T09:25:19.00Z","dateModified":"2023-11-03T09:25:19.00Z","publisher":{"@type":"Organization","name":"nao.deng","url":"https://naodeng.tech/","logo":{"@type":"ImageObject","url":"https:\/\/naodeng.tech\/favicon-32x32.png","width":"32","height":"32"}},"image":["https://naodeng.tech/images/site-feature-image.png"],"url":"https:\/\/naodeng.tech\/zh\/post\/rest-assured-tutorial-advance-usage-verifying-response-and-logging\/","wordCount":"755","genre":[],"keywords":["API 测试","REST Assured","接口自动化测试","自动化测试"]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src="https://avatars.githubusercontent.com/u/7599466?v=4" alt="profile picture"><div class=sidebar__introduction-title><a href=/>QA Discovery</a></div><div class=sidebar__introduction-description><p>A Quality Analyst, Not A Quality Assurance</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://github.com/naodeng/ target=_blank rel="noopener me" aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://naodeng.medium.com/ target=_blank rel="noopener me" aria-label=medium title=medium><i class="fab fa-medium fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:dengnao@gmail.com target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
2015-2023 naodeng ｜ wechat: teststudents</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!1})}</script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/post/ title>Posts</a></li><li class=nav__list-item><a href=https://github.com/naodeng/naodeng target=_blank rel="noopener noreferrer" title>About</a></li><li class=nav__list-item><a href=https://naodeng-umami.vercel.app/share/OksEL34H/nao.deng target=_blank rel="noopener noreferrer" title>Dashboard</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>REST Assured 教程：进阶用法 - 验证响应和日志记录，过滤器，文件上传</h1><ul><li><a href=#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95>进阶用法</a><ul><li><a href=#%E9%AA%8C%E8%AF%81%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE>验证响应数据</a><ul><li><a href=#%E5%93%8D%E5%BA%94%E4%BD%93%E6%96%AD%E8%A8%80>响应体断言</a><ul><li><a href=#json-%E6%A0%BC%E5%BC%8F%E6%96%AD%E8%A8%80>json 格式断言</a></li><li><a href=#xml-%E6%A0%BC%E5%BC%8F%E6%96%AD%E8%A8%80>xml 格式断言</a></li></ul></li><li><a href=#cookie-%E6%96%AD%E8%A8%80>Cookie 断言</a></li><li><a href=#%E7%8A%B6%E6%80%81%E7%A0%81-status-code-%E6%96%AD%E8%A8%80>状态码 Status Code 断言</a></li><li><a href=#header-%E6%96%AD%E8%A8%80>Header 断言</a></li><li><a href=#content-type-%E6%96%AD%E8%A8%80>Content-Type 断言</a></li><li><a href=#%E5%86%85%E5%AE%B9%E5%85%A8%E5%8C%B9%E9%85%8D%E6%96%AD%E8%A8%80>内容全匹配断言</a></li><li><a href=#%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%E6%96%AD%E8%A8%80>响应时间断言</a></li></ul></li><li><a href=#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0>文件上传</a></li><li><a href=#logging-%E6%97%A5%E5%BF%97>Logging 日志</a><ul><li><a href=#%E5%85%A8%E5%B1%80%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE>全局日志配置</a><ul><li><a href=#%E6%B7%BB%E5%8A%A0%E5%85%A8%E5%B1%80%E6%97%A5%E5%BF%97%E6%AD%A5%E9%AA%A4>添加全局日志步骤</a></li><li><a href=#%E5%85%A8%E5%B1%80%E6%97%A5%E5%BF%97%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B>全局日志代码示例</a></li><li><a href=#%E6%9F%A5%E7%9C%8B%E5%85%A8%E5%B1%80%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA>查看全局日志输出</a></li></ul></li><li><a href=#%E5%B1%80%E9%83%A8%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE>局部日志配置</a><ul><li><a href=#%E6%B7%BB%E5%8A%A0%E6%97%A5%E5%BF%97%E6%AD%A5%E9%AA%A4>添加日志步骤</a></li><li><a href=#%E6%9F%A5%E7%9C%8B%E5%B1%80%E9%83%A8%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA>查看局部日志输出</a></li></ul></li><li><a href=#logconfig-%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E>LogConfig 配置说明</a></li><li><a href=#request-logging-%E8%AF%B7%E6%B1%82%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95>Request Logging 请求日志记录</a></li><li><a href=#response-logging-%E5%93%8D%E5%BA%94%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95>Response Logging 响应日志记录</a></li><li><a href=#%E5%8F%AA%E5%9C%A8%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5%E6%97%B6%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97>只在验证失败时记录日志</a></li><li><a href=#header-%E9%BB%91%E5%90%8D%E5%8D%95%E9%85%8D%E7%BD%AE>Header 黑名单配置</a></li></ul></li><li><a href=#filters-%E8%BF%87%E6%BB%A4%E5%99%A8>Filters 过滤器</a><ul><li><a href=#ordered-filters-%E6%9C%89%E5%BA%8F%E8%BF%87%E6%BB%A4%E5%99%A8>Ordered Filters 有序过滤器</a></li><li><a href=#response-builder-%E5%93%8D%E5%BA%94%E7%94%9F%E6%88%90%E5%99%A8>Response Builder 响应生成器</a></li></ul></li></ul></li></ul><h2 id=进阶用法>进阶用法</h2><h3 id=验证响应数据>验证响应数据</h3><p>您还可以验证状态码，状态行，Cookie，headers，内容类型和正文。</p><h4 id=响应体断言>响应体断言</h4><h5 id=json-格式断言>json 格式断言</h5><p>假设某个 get 请求 (http://localhost:8080/lotto) 返回 JSON 如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nt>&#34;lotto&#34;</span><span class=p>:{</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;lottoId&#34;</span><span class=p>:</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;winning-numbers&#34;</span><span class=p>:[</span><span class=mi>2</span><span class=p>,</span><span class=mi>45</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>23</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>3</span><span class=p>],</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;winners&#34;</span><span class=p>:[{</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;winnerId&#34;</span><span class=p>:</span><span class=mi>23</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;numbers&#34;</span><span class=p>:[</span><span class=mi>2</span><span class=p>,</span><span class=mi>45</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>23</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=p>},{</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;winnerId&#34;</span><span class=p>:</span><span class=mi>54</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;numbers&#34;</span><span class=p>:[</span><span class=mi>52</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>22</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=p>}]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>REST assured 可以帮您轻松地进行 get 请求并对响应信息进行处理。</p><ul><li>断言 lottoId 的值是否等于 5，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/lotto&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;lotto.lottoId&#34;</span><span class=p>,</span><span class=w> </span><span class=n>equalTo</span><span class=p>(</span><span class=n>5</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><ul><li>断言 winnerId 的取值包括 23 和 54，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/lotto&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;lotto.winners.winnerId&#34;</span><span class=p>,</span><span class=w> </span><span class=n>hasItems</span><span class=p>(</span><span class=n>23</span><span class=p>,</span><span class=w> </span><span class=n>54</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><blockquote><p>提醒一下：<code>equalTo</code> 和 <code>hasItems</code>是 Hamcrest matchers 提供的方法，所以需要静态导入入 <code>org.hamcrest.Matchers</code>。</p></blockquote><h5 id=xml-格式断言>xml 格式断言</h5><p>XML 可以一种通过简单的方式解析。假设一个 POST 请求<code>http://localhost:8080/greetXML</code>返回：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;greeting&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;firstName&gt;</span>{params(&#34;firstName&#34;)}<span class=nt>&lt;/firstName&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;lastName&gt;</span>{params(&#34;lastName&#34;)}<span class=nt>&lt;/lastName&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/greeting&gt;</span>
</span></span></code></pre></div><ul><li>断言 firstName 是否返回正确，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>parameters</span><span class=p>(</span><span class=s>&#34;firstName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;John&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;lastName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Doe&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>post</span><span class=p>(</span><span class=s>&#34;/greetXML&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>then</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>body</span><span class=p>(</span><span class=s>&#34;greeting.firstName&#34;</span><span class=p>,</span><span class=w> </span><span class=n>equalTo</span><span class=p>(</span><span class=s>&#34;John&#34;</span><span class=p>)).</span><span class=w>
</span></span></span></code></pre></div><ul><li>同时断言 firstname 和 lastname 是否返回正确，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>parameters</span><span class=p>(</span><span class=s>&#34;firstName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;John&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;lastName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Doe&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>post</span><span class=p>(</span><span class=s>&#34;/greetXML&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>then</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>body</span><span class=p>(</span><span class=s>&#34;greeting.firstName&#34;</span><span class=p>,</span><span class=w> </span><span class=n>equalTo</span><span class=p>(</span><span class=s>&#34;John&#34;</span><span class=p>)).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>body</span><span class=p>(</span><span class=s>&#34;greeting.lastName&#34;</span><span class=p>,</span><span class=w> </span><span class=n>equalTo</span><span class=p>(</span><span class=s>&#34;Doe&#34;</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>with</span><span class=p>().</span><span class=na>parameters</span><span class=p>(</span><span class=s>&#34;firstName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;John&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;lastName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Doe&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>when</span><span class=p>().</span><span class=na>post</span><span class=p>(</span><span class=s>&#34;/greetXML&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>then</span><span class=p>().</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;greeting.firstName&#34;</span><span class=p>,</span><span class=w> </span><span class=n>equalTo</span><span class=p>(</span><span class=s>&#34;John&#34;</span><span class=p>),</span><span class=w> </span><span class=s>&#34;greeting.lastName&#34;</span><span class=p>,</span><span class=w> </span><span class=n>equalTo</span><span class=p>(</span><span class=s>&#34;Doe&#34;</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><h4 id=cookie-断言>Cookie 断言</h4><ul><li>断言 cookie 的值是否等于 cookieValue，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>assertThat</span><span class=p>().</span><span class=na>cookie</span><span class=p>(</span><span class=s>&#34;cookieName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;cookieValue&#34;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><ul><li>同时断言 多个 cookie 的值是否等于 cookieValue，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>assertThat</span><span class=p>().</span><span class=na>cookies</span><span class=p>(</span><span class=s>&#34;cookieName1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;cookieValue1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;cookieName2&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;cookieValue2&#34;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><ul><li>断言 cookie 的值是否包含 cookieValue，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>assertThat</span><span class=p>().</span><span class=na>cookies</span><span class=p>(</span><span class=s>&#34;cookieName1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;cookieValue1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;cookieName2&#34;</span><span class=p>,</span><span class=w> </span><span class=n>containsString</span><span class=p>(</span><span class=s>&#34;Value2&#34;</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><h4 id=状态码-status-code-断言>状态码 Status Code 断言</h4><ul><li>断言 状态码是否等于 200，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>assertThat</span><span class=p>().</span><span class=na>statusCode</span><span class=p>(</span><span class=n>200</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><ul><li>断言 状态行是否为 something，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>assertThat</span><span class=p>().</span><span class=na>statusLine</span><span class=p>(</span><span class=s>&#34;something&#34;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><ul><li>断言 状态行是否包含 some，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>assertThat</span><span class=p>().</span><span class=na>statusLine</span><span class=p>(</span><span class=n>containsString</span><span class=p>(</span><span class=s>&#34;some&#34;</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><h4 id=header-断言>Header 断言</h4><ul><li>断言 Header 的值是否等于 HeaderValue，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>assertThat</span><span class=p>().</span><span class=na>header</span><span class=p>(</span><span class=s>&#34;headerName&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;headerValue&#34;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><ul><li>同时断言 多个 Header 的值是否等于 HeaderValue，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>assertThat</span><span class=p>().</span><span class=na>headers</span><span class=p>(</span><span class=s>&#34;headerName1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;headerValue1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;headerName2&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;headerValue2&#34;</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><ul><li>断言 Header 的值是否包含 HeaderValue，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>assertThat</span><span class=p>().</span><span class=na>headers</span><span class=p>(</span><span class=s>&#34;headerName1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;headerValue1&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;headerName2&#34;</span><span class=p>,</span><span class=w> </span><span class=n>containsString</span><span class=p>(</span><span class=s>&#34;Value2&#34;</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><ul><li>断言 Header 的“Content-Length”小于 1000，示例：</li></ul><blockquote><p>可以先使用映射函数首先将头值转换为 int，然后在使用 Hamcrest 验证前使用“整数”匹配器进行断言：</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/something&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>assertThat</span><span class=p>().</span><span class=na>header</span><span class=p>(</span><span class=s>&#34;Content-Length&#34;</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=p>::</span><span class=n>parseInt</span><span class=p>,</span><span class=w> </span><span class=n>lessThan</span><span class=p>(</span><span class=n>1000</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><h4 id=content-type-断言>Content-Type 断言</h4><ul><li>断言 Content-Type 的值是否等于 application/json，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>assertThat</span><span class=p>().</span><span class=na>contentType</span><span class=p>(</span><span class=n>ContentType</span><span class=p>.</span><span class=na>JSON</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=内容全匹配断言>内容全匹配断言</h4><ul><li>断言 响应体是否完全等于 something，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>assertThat</span><span class=p>().</span><span class=na>body</span><span class=p>(</span><span class=n>equalTo</span><span class=p>(</span><span class=s>&#34;something&#34;</span><span class=p>))</span><span class=w>
</span></span></span></code></pre></div><h4 id=响应时间断言>响应时间断言</h4><blockquote><p>REST Assured 2.8.0 开始支持测量响应时间，例如：</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>long</span><span class=w> </span><span class=n>timeInMs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>get</span><span class=p>(</span><span class=s>&#34;/lotto&#34;</span><span class=p>).</span><span class=na>time</span><span class=p>()</span><span class=w>
</span></span></span></code></pre></div><p>或使用特定时间单位：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>long</span><span class=w> </span><span class=n>timeInSeconds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>get</span><span class=p>(</span><span class=s>&#34;/lotto&#34;</span><span class=p>).</span><span class=na>timeIn</span><span class=p>(</span><span class=n>SECONDS</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>其中 SECONDS 只是一个标准的 TimeUnit。您还可以使用 DSL 验证：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>get</span><span class=p>(</span><span class=s>&#34;/lotto&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>then</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>time</span><span class=p>(</span><span class=n>lessThan</span><span class=p>(</span><span class=n>2000L</span><span class=p>));</span><span class=w> </span><span class=c1>// Milliseconds</span><span class=w>
</span></span></span></code></pre></div><p>或</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>get</span><span class=p>(</span><span class=s>&#34;/lotto&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>then</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>time</span><span class=p>(</span><span class=n>lessThan</span><span class=p>(</span><span class=n>2L</span><span class=p>),</span><span class=w> </span><span class=n>SECONDS</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>需要注意的是，您只能参考性地将这些测量数据与服务器请求处理时间相关联（因为响应时间将包括 HTTP 往返和 REST Assured 处理时间等，不能做到十分准确）。</p><h3 id=文件上传>文件上传</h3><p>通常我们在向服务器传输大容量的数据时，比如文件时会使用 multipart 表单数据技术。
rest-assured 提供了一种<code>multiPart</code>方法来辨别这究竟是文件、二进制序列、输入流还是上传的文本。</p><ul><li>表单中上只传一个文件，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>multiPart</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&#34;/path/to/file&#34;</span><span class=p>)).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>post</span><span class=p>(</span><span class=s>&#34;/upload&#34;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><ul><li>存在 control 名的情况下上传文件，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>multiPart</span><span class=p>(</span><span class=s>&#34;controlName&#34;</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&#34;/path/to/file&#34;</span><span class=p>)).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>post</span><span class=p>(</span><span class=s>&#34;/upload&#34;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><ul><li>同一个请求中存在多个"multi-parts"事务，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>someData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>..</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>multiPart</span><span class=p>(</span><span class=s>&#34;controlName1&#34;</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&#34;/path/to/file&#34;</span><span class=p>)).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>multiPart</span><span class=p>(</span><span class=s>&#34;controlName2&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;my_file_name.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=n>someData</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>multiPart</span><span class=p>(</span><span class=s>&#34;controlName3&#34;</span><span class=p>,</span><span class=w> </span><span class=n>someJavaObject</span><span class=p>,</span><span class=w> </span><span class=s>&#34;application/json&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>post</span><span class=p>(</span><span class=s>&#34;/upload&#34;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><ul><li>MultiPartSpecBuilder 用法，示例：</li></ul><blockquote><p>更多使用方法可以使用<a href=http://static.javadoc.io/io.rest-assured/rest-assured/3.0.1/io/restassured/builder/MultiPartSpecBuilder.html>MultiPartSpecBuilder</a>：</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Greeting</span><span class=w> </span><span class=n>greeting</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Greeting</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>greeting</span><span class=p>.</span><span class=na>setFirstName</span><span class=p>(</span><span class=s>&#34;John&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>greeting</span><span class=p>.</span><span class=na>setLastName</span><span class=p>(</span><span class=s>&#34;Doe&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>multiPart</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>MultiPartSpecBuilder</span><span class=p>(</span><span class=n>greeting</span><span class=p>,</span><span class=w> </span><span class=n>ObjectMapperType</span><span class=p>.</span><span class=na>JACKSON_2</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>fileName</span><span class=p>(</span><span class=s>&#34;greeting.json&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>controlName</span><span class=p>(</span><span class=s>&#34;text&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>mimeType</span><span class=p>(</span><span class=s>&#34;application/vnd.custom+json&#34;</span><span class=p>).</span><span class=na>build</span><span class=p>()).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>post</span><span class=p>(</span><span class=s>&#34;/multipart/json&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>then</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>statusCode</span><span class=p>(</span><span class=n>200</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><ul><li>MultiPartConfig 用法，示例：</li></ul><blockquote><p><a href=http://static.javadoc.io/io.rest-assured/rest-assured/3.0.1/io/restassured/config/MultiPartConfig.html>MultiPartConfig</a>可用来指定默认的 control 名和文件名</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=na>config</span><span class=p>(</span><span class=n>config</span><span class=p>().</span><span class=na>multiPartConfig</span><span class=p>(</span><span class=n>multiPartConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>defaultControlName</span><span class=p>(</span><span class=s>&#34;something-else&#34;</span><span class=p>)))</span><span class=w>  
</span></span></span></code></pre></div><blockquote><p>默认把 control 名配置为"something-else"而不是"file"。
更多用法查看 <a href=http://blog.jayway.com/2011/09/15/multipart-form-data-file-uploading-made-simple-with-rest-assured/>博客介绍</a></p></blockquote><h3 id=logging-日志>Logging 日志</h3><p>当我们在编写接口测试脚本的时候，我们可能需要在测试过程中打印一些日志，以便于我们在测试过程中查看接口的请求和响应信息，以及一些其他的信息。RestAssured 提供了一些方法来打印日志，我们可以根据需要选择合适的方法来打印日志。</p><ul><li><p>RestAssured 提供了一个全局的日志配置方法，可以在测试开始前配置日志，然后在测试过程中打印日志。这种方法适用于所有的测试用例，但是它只能打印请求和响应的信息，不能打印其他的信息。</p></li><li><p>RestAssured 还提供了一个局部的日志配置方法，可以在测试过程中打印日志。这种方法可以打印请求和响应的信息，也可以打印其他的信息。</p></li></ul><h4 id=全局日志配置>全局日志配置</h4><h5 id=添加全局日志步骤>添加全局日志步骤</h5><ul><li>引入日志相关的依赖类</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.config.LogConfig</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.filter.log.LogDetail</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.filter.log.RequestLoggingFilter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.filter.log.ResponseLoggingFilter</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><ul><li>在 setup() 方法中添加日志配置</li></ul><blockquote><p>使用 LogConfig 配置，启用了请求和响应的日志记录，以及启用了漂亮的输出格式。启用了请求和响应的日志记录过滤器，这将记录请求和响应的详细信息。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 启用全局请求和响应日志记录</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>logConfig</span><span class=p>(</span><span class=n>LogConfig</span><span class=p>.</span><span class=na>logConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>(</span><span class=n>LogDetail</span><span class=p>.</span><span class=na>ALL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>enablePrettyPrinting</span><span class=p>(</span><span class=kc>true</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><ul><li>在 setup() 方法中启用了全局日志记录过滤器</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 启用全局请求和响应日志记录过滤器</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>filters</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>RequestLoggingFilter</span><span class=p>(),</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ResponseLoggingFilter</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></div><h5 id=全局日志代码示例>全局日志代码示例</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nn>com.example</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.RestAssured</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 引入日志相关的类</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.config.LogConfig</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.filter.log.LogDetail</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.filter.log.RequestLoggingFilter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.restassured.filter.log.ResponseLoggingFilter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.testng.annotations.BeforeClass</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.testng.annotations.Test</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import static</span><span class=w> </span><span class=nn>io.restassured.RestAssured.given</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import static</span><span class=w> </span><span class=nn>org.hamcrest.Matchers.equalTo</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>TestDemo</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@BeforeClass</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setup</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 启用全局请求和响应日志记录</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>logConfig</span><span class=p>(</span><span class=n>LogConfig</span><span class=p>.</span><span class=na>logConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>(</span><span class=n>LogDetail</span><span class=p>.</span><span class=na>ALL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>enablePrettyPrinting</span><span class=p>(</span><span class=kc>true</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 启用全局请求和响应日志记录过滤器</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>filters</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>RequestLoggingFilter</span><span class=p>(),</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ResponseLoggingFilter</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Test</span><span class=p>(</span><span class=n>description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Verify that the Get Post API returns correctly&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>verifyGetAPI</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>// 测试用例已省略，可参考 demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Test</span><span class=p>(</span><span class=n>description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Verify that the publish post API returns correctly&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>verifyPostAPI</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c1>// 测试用例已省略，可参考 demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h5 id=查看全局日志输出>查看全局日志输出</h5><ul><li>打开本项目的 Terminal 窗口，执行以下命令运行测试脚本</li><li>查看日志输出</li></ul><p><img src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/9Mh9Z8.png alt=log-sceenshot1></p><h4 id=局部日志配置>局部日志配置</h4><p>在 RestAssured 中，你可以进行局部日志配置，以便在特定的测试方法或请求中启用或禁用日志记录，而不影响全局配置。</p><h5 id=添加日志步骤>添加日志步骤</h5><ul><li>在想要打印日志的测试方法中启用了添加日志配置，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>    </span><span class=nd>@Test</span><span class=p>(</span><span class=n>description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Verify that the Get Post API returns correctly&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>verifyGetAPI</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Given</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>given</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>log</span><span class=p>().</span><span class=na>everything</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w>  </span><span class=c1>// 输出 request 相关日志</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>baseUri</span><span class=p>(</span><span class=s>&#34;https://jsonplaceholder.typicode.com&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>header</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;application/json&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// When</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>when</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;/posts/1&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// Then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>then</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>log</span><span class=p>().</span><span class=na>everything</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w>  </span><span class=c1>// 输出 response 相关日志</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>statusCode</span><span class=p>(</span><span class=n>200</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h5 id=查看局部日志输出>查看局部日志输出</h5><ul><li>打开本项目的 Terminal 窗口，执行以下命令运行测试脚本</li><li>查看日志输出</li></ul><p><img src=https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/GxZyyG.png alt=report1></p><h4 id=logconfig-配置说明>LogConfig 配置说明</h4><p>在 RestAssured 中，你可以使用 <code>LogConfig</code> 类来配置请求和响应的日志记录。<code>LogConfig</code> 允许你定义日志详细程度、输出格式、输出位置等。以下是一些常见的 <code>LogConfig</code> 配置示例：</p><ol><li><p><strong>启用请求和响应的日志记录：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>logConfig</span><span class=p>(</span><span class=n>LogConfig</span><span class=p>.</span><span class=na>logConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>(</span><span class=n>LogDetail</span><span class=p>.</span><span class=na>ALL</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><p>这将启用请求和响应的日志记录，只有当验证失败时才记录。</p></li><li><p><strong>配置输出级别：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>logConfig</span><span class=p>(</span><span class=n>LogConfig</span><span class=p>.</span><span class=na>logConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>(</span><span class=n>LogDetail</span><span class=p>.</span><span class=na>HEADERS</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><p>这将只记录请求和响应的头部信息。</p></li><li><p><strong>配置输出位置：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>logConfig</span><span class=p>(</span><span class=n>LogConfig</span><span class=p>.</span><span class=na>logConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>(</span><span class=n>LogDetail</span><span class=p>.</span><span class=na>ALL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>enablePrettyPrinting</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>defaultStream</span><span class=p>(</span><span class=n>FileOutputStream</span><span class=p>(</span><span class=s>&#34;log.txt&#34;</span><span class=p>)));</span><span class=w>
</span></span></span></code></pre></div><p>这将日志记录输出到名为 &ldquo;log.txt&rdquo; 的文件。</p></li><li><p><strong>配置漂亮的输出格式：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>logConfig</span><span class=p>(</span><span class=n>LogConfig</span><span class=p>.</span><span class=na>logConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>(</span><span class=n>LogDetail</span><span class=p>.</span><span class=na>ALL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>enablePrettyPrinting</span><span class=p>(</span><span class=kc>true</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><p>这将启用漂亮的输出格式，使日志更易于阅读。</p></li></ol><p>你可以根据你的具体需求组合这些配置选项，并将其设置为 <code>RestAssured.config</code> 以配置全局的请求和响应日志记录。这将有助于在 RestAssured 中记录和审查请求和响应，以便调试和分析问题。</p><h4 id=request-logging-请求日志记录>Request Logging 请求日志记录</h4><p>从版本 1.5 开始，REST Assured 支持在使用 RequestLoggingFilter 将请求规范发送到服务器之前记录请求规范。请注意，HTTP Builder 和 HTTP Client 可能会添加日志中打印的内容之外的其他标头。筛选器将仅记录请求规范中指定的详细信息。也就是说，您不能将 RequestLoggingFilter 记录的详细信息视为实际发送到服务器的详细信息。此外，后续筛选器可能会在日志记录发生后更改请求。如果您需要记录网络上实际发送的内容，请参阅 HTTP 客户端日志记录文档或使用外部工具，例如 Wireshark。</p><p>示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>all</span><span class=p>()</span><span class=w>   </span><span class=c1>// 记录所有请求规范细节，包括参数、标头和正文</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>params</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录请求的参数</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>body</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录请求正文</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>headers</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录请求头</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>cookies</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录请求 cookies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>method</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录请求方法</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>path</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录请求路径</span><span class=w>
</span></span></span></code></pre></div><h4 id=response-logging-响应日志记录>Response Logging 响应日志记录</h4><ul><li>只想要打印响应正文，而不考虑状态代码，可以执行以下操作，
示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>body</span><span class=p>()</span><span class=w>
</span></span></span></code></pre></div><ul><li>不管是否发生错误，都将打印响应正文。如果只对在发生错误时打印响应正文感兴趣，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>ifError</span><span class=p>()</span><span class=w>
</span></span></span></code></pre></div><ul><li>在响应中记录所有详细信息，包括状态行、标头和 Cookie，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>all</span><span class=p>()</span><span class=w>   
</span></span></span></code></pre></div><ul><li>在响应中记录只记录状态行、标题或 Cookie，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>statusLine</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录状态行</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>headers</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录响应头</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>cookies</span><span class=p>()</span><span class=w>   </span><span class=c1>// 只记录响应 cookies</span><span class=w>
</span></span></span></code></pre></div><ul><li>配置为仅当状态代码与某个值匹配时才记录响应，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>ifStatusCodeIsEqualTo</span><span class=p>(</span><span class=n>302</span><span class=p>)</span><span class=w>   </span><span class=c1>// 仅在状态代码等于 302 时记录日志</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>get</span><span class=p>(</span><span class=s>&#34;/x&#34;</span><span class=p>).</span><span class=na>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>ifStatusCodeMatches</span><span class=p>(</span><span class=n>matcher</span><span class=p>)</span><span class=w>   </span><span class=c1>// 仅在状态代码与提供的配置匹配时才记录日志</span><span class=w>
</span></span></span></code></pre></div><h4 id=只在验证失败时记录日志>只在验证失败时记录日志</h4><ul><li>从 REST Assured 2.3.1 开始，只有在验证失败时才能记录请求或响应。要记录请求日志，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>ifValidationFails</span><span class=p>()</span><span class=w>
</span></span></span></code></pre></div><ul><li>要记录响应日志，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>then</span><span class=p>().</span><span class=na>log</span><span class=p>().</span><span class=na>ifValidationFails</span><span class=p>()</span><span class=w>
</span></span></span></code></pre></div><ul><li>可以使用 LogConfig 同时为请求和响应启用此功能，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=na>config</span><span class=p>(</span><span class=n>RestAssured</span><span class=p>.</span><span class=na>config</span><span class=p>().</span><span class=na>logConfig</span><span class=p>(</span><span class=n>logConfig</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>(</span><span class=n>HEADERS</span><span class=p>)))</span><span class=w>
</span></span></span></code></pre></div><blockquote><p>如果验证失败，日志仅记录请求头。</p></blockquote><ul><li>另外一个快捷方式，用于在验证失败时为所有请求启用请求和响应的日志记录，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RestAssured</span><span class=p>.</span><span class=na>enableLoggingOfRequestAndResponseIfValidationFails</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></div><ul><li>从版本 4.5.0 开始，您还可以使用 指定 onFailMessage 测试失败时将显示的消息，示例：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>when</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>get</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>then</span><span class=p>().</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>onFailMessage</span><span class=p>(</span><span class=s>&#34;Some specific message&#34;</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>statusCode</span><span class=p>(</span><span class=n>200</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h4 id=header-黑名单配置>Header 黑名单配置</h4><p>从 REST Assured 4.2.0 开始，可以将标头列入黑名单，以便它们不会显示在请求或响应日志中。相反，标头值将替换为 [ BLACKLISTED ] .您可以使用 LogConfig 启用此基于每个标头的功能，示例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=na>config</span><span class=p>(</span><span class=n>config</span><span class=p>().</span><span class=na>logConfig</span><span class=p>(</span><span class=n>logConfig</span><span class=p>().</span><span class=na>blacklistHeader</span><span class=p>(</span><span class=s>&#34;Accept&#34;</span><span class=p>)))</span><span class=w>  
</span></span></span></code></pre></div><h3 id=filters-过滤器>Filters 过滤器</h3><p>在 RestAssured 中，你可以使用过滤器来修改请求和响应。过滤器允许你在请求和响应的不同阶段修改请求和响应。例如，你可以在请求之前修改请求，或者在响应之后修改响应。你可以使用过滤器来添加请求头、请求参数、请求体、响应头、响应体等。</p><p>过滤器可用于实现自定义身份验证方案、会话管理、日志记录等。若要创建筛选器，需要实现 io.restassured.filter.Filter 接口。要使用过滤器，您可以执行以下操作：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>given</span><span class=p>().</span><span class=na>filter</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>MyFilter</span><span class=p>())</span><span class=w>  
</span></span></span></code></pre></div><p>REST Assured 提供了几个可供使用的过滤器：</p><ul><li><code>io.restassured.filter.log.RequestLoggingFilter</code> ：将打印请求规范详细信息的筛选器。</li><li><code>io.restassured.filter.log.ResponseLoggingFilter</code> ：如果响应与给定状态代码匹配，则将打印响应详细信息的筛选器。</li><li><code>io.restassured.filter.log.ErrorLoggingFilter</code> ：在发生错误时打印响应正文的筛选器（状态代码介于 400 和 500 之间）。</li></ul><h4 id=ordered-filters-有序过滤器>Ordered Filters 有序过滤器</h4><p>从 REST Assured 3.0.2 开始，如果需要控制筛选器排序，可以实现 io.restassured.filter.OrderedFilter 接口。在这里，您将实现返回一个整数的方法，getOrder 该整数表示筛选器的优先级。值越低，优先级越高。您可以定义的最高优先级是 Integer.MIN_VALUE，最低优先级是 Integer.MAX_VALUE。未实现 io.restassured.filter.OrderedFilter 的过滤器的默认优先级为 1000。</p><p><a href=https://github.com/rest-assured/rest-assured/blob/master/examples/rest-assured-itest-java/src/test/java/io/restassured/itest/java/OrderedFilterITest.java>示例</a></p><h4 id=response-builder-响应生成器>Response Builder 响应生成器</h4><p>如果需要更改筛选器中的响应内容，可以使用 ResponseBuilder 基于原始响应创建新的响应。例如，如果要将原始响应的正文更改为其他内容，可以执行以下操作：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Response</span><span class=w> </span><span class=n>newResponse</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ResponseBuilder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>.</span><span class=na>clone</span><span class=p>(</span><span class=n>originalResponse</span><span class=p>).</span><span class=na>setBody</span><span class=p>(</span><span class=s>&#34;Something&#34;</span><span class=p>).</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></div><h3>Related Posts</h3><ul><li><a href=/zh/post/rest-assured-tutorial-advance-usage-integration-ci-cd-and-allure-report/>REST Assured 教程：进阶用法 - 集成 CI/CD 和集成 allure 测试报告</a></li><li><a href=/zh/post/rest-assured-tutorial-building-your-own-project-from-0-to-1/>REST Assured 教程：从 0 到 1 搭建 REST Assured 接口自动化测试项目</a></li><li><a href=/zh/post/rest-assured-tutorial-and-environment-preparation/>REST Assured 教程：入门介绍和环境搭建准备</a></li><li><a href=/zh/post/supertest-tutorial-advance-usage-integration-ci-cd-and-github-action/>Supertest 教程：进阶用法 - 集成 CI/CD 和 Github action</a></li></ul></div><div class=post__footer><span><a class=tag href=/tags/api-%E6%B5%8B%E8%AF%95/>API 测试</a><a class=tag href=/tags/rest-assured/>REST Assured</a><a class=tag href=/tags/%E6%8E%A5%E5%8F%A3%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/>接口自动化测试</a><a class=tag href=/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/>自动化测试</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
2015-2023 naodeng ｜ wechat: teststudents</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JBX883ZDJJ",{anonymize_ip:!1})}</script></body></html>