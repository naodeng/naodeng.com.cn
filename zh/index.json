[{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nçœŸå®æ¡ˆä¾‹ï¼šä»éš¾ä»¥ç†è§£çš„ React ç»„ä»¶æµ‹è¯•åˆ°ç®€å•æ„šè ¢çš„æµ‹è¯• åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/real-life-examples/from-unreadable-react-component-tests-to-simple-ones.md\nä¸€æ®µç®€è¦è¯´æ˜ æµ‹è¯•çš„ä»£ç åº”è¯¥å°½é‡æ¸…æ™°æ˜“æ‡‚ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯åœ¨éœ€è¦ç†è§£ã€æ›´æ–°ã€é‡æ„æˆ–ä¿®å¤ä»£ç æ—¶ï¼Œèƒ½å¤ŸèŠ‚çœå¤§é‡æ—¶é—´ã€‚ç›¸åï¼Œå¦‚æœä½ è¿è‡ªå·±å†™çš„æµ‹è¯•éƒ½è¯»ä¸æ‡‚ï¼Œé‚£å¯å°±æ˜¯ä¸ªç³Ÿç³•çš„åœºæ™¯äº†ï¼\nè¿™é‡Œæˆ‘å°†åˆ†äº«ä¸€ä¸‹æˆ‘å¯¹ä¸€äº›æ—§çš„ React ç»„ä»¶æµ‹è¯•è¿›è¡Œé‡æ„çš„åŸå› ã€æ€è€ƒè¿‡ç¨‹å’Œæ¨¡å¼ã€‚\né—®é¢˜ åœ¨æ·»åŠ äº†\u0026ldquo;ä½¿ç”¨ Cypress å’Œ Storybook æµ‹è¯•è™šæ‹Ÿåˆ—è¡¨ç»„ä»¶\u0026rdquo;ç« èŠ‚å’Œ\u0026ldquo;ä½¿ç”¨ Cypress è¿›è¡Œ React ç»„ä»¶å•å…ƒæµ‹è¯•\u0026rdquo;ç« èŠ‚ä¸€å¹´åï¼Œæˆ‘å‘ç°æˆ‘çš„æµ‹è¯•å‡ ä¹æ— æ³•é˜…è¯»ã€‚è®¸å¤šæŠ½è±¡å±‚æ¬¡ä½¿æˆ‘æ— æ³•ä»”ç»†ç†è§£æµ‹è¯•åœ¨åšä»€ä¹ˆï¼Œå¯¼è‡´èŠ±è´¹å¾ˆé•¿æ—¶é—´é˜…è¯»å®ƒä»¬ã€‚è¿™æ˜¯æ— æ³•æ¥å—çš„é˜»åŠ›ã€‚\nå¦‚ä½•æé«˜æµ‹è¯•çš„å¯è¯»æ€§ï¼Ÿ TDD ä¹‹çˆ¶ Kent Beck æ›¾è¯´ï¼š\næµ‹è¯•ä»£ç ä¸æ˜¯ç”Ÿäº§ä»£ç ã€‚å®ƒå¿…é¡»ç®€å•ä¸”å° 1000 å€ã€‚\nä½†æ˜¯ï¼Œå¦‚ä½•åšåˆ°å‘¢ï¼Ÿæ˜¯ä»€ä¹ˆå¯¼è‡´æˆ‘çš„æµ‹è¯•å¦‚æ­¤éš¾ä»¥é˜…è¯»ï¼Ÿæ˜¯ä»€ä¹ˆä½¿å¯è¯»æ€§å˜å·®ï¼Ÿ\næˆ‘å°†åˆ†æä¸€å †æˆ‘çš„æµ‹è¯•ï¼Œå¯¹å®ƒä»¬è¿›è¡Œæ€è€ƒï¼Œå¹¶æå‡ºæ›´ä¸ºç›´è§‚çš„æ–¹æ³•ã€‚è¢«æµ‹è¯•çš„ç»„ä»¶æ˜¯å‰æ–‡æåˆ°çš„ VirtualListã€‚\næµ‹è¯• 1ï¼Œå¤æ‚åº¦ä½ æ¥ä¸‹æ¥çš„æµ‹è¯•æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªï¼šæ£€æŸ¥å½“æ²¡æœ‰ä¼ é€’ä»»ä½•å†…å®¹æ—¶ï¼ŒVirtualList æ˜¯å¦ä¸æ¸²æŸ“ä»»ä½•ä¸œè¥¿ã€‚ä»¥ä¸‹æ˜¯åŸå§‹æµ‹è¯•\nit(\u0026#39;When there are no items, then nothing is showed\u0026#39;, () =\u0026gt; { const itemsAmount = 0 const itemHeight = 30 const listHeight = 300 const items = getStoryItems({ amount: itemsAmount }) mount( \u0026lt;VirtualList items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={createRenderItem({ height: itemHeight })} listHeight={listHeight} /\u0026gt;, ) cy.findByTestId(\u0026#39;VirtualList\u0026#39;) .then($el =\u0026gt; $el.text()) .should(\u0026#39;be.empty\u0026#39;) }) è€ƒè™‘åˆ°æµ‹è¯•çš„ç®€å•æ€§ï¼Œè°ˆè®ºå¯è¯»æ€§æ˜¯å¦æœ‰ç‚¹è¿‡äºçç¢ï¼Ÿä¸ï¼Œæˆ‘å·²ç»å¯¹æ­¤æœ‰ä¸€äº›ç–‘é—®ï¼Œæ¯”å¦‚ï¼š\ngetStoryItems æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ createRenderItem æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ æˆ‘è¿™é‡Œæ²¡æœ‰è´´å‡º getStoryItems çš„ä»£ç ï¼Œä½†å®ƒåªæ˜¯ä¸€ä¸ªç”ŸæˆåŒ…å« X ä¸ªé¡¹ç›®çš„æ•°ç»„çš„å‡½æ•°ï¼Œå½¢å¼ä¸º [{ id: 1, name: 'Item 1' }, { id: 2, name: 'Item 2' }, /* ç­‰ç­‰ */]ã€‚å®ƒçš„ç›®çš„æ˜¯è½»æ¾ç”Ÿæˆæ•°åƒä¸ªé¡¹ç›®ï¼Œä½†æˆ‘ç¼–å†™å®ƒçš„åˆè¡·æ˜¯ä¸ºäº†æ›´è½»æ¾åœ°ç¼–å†™æ²¡æœ‰æµ‹è¯•æ„è¯†çš„ Storybook æ•…äº‹ï¼ç„¶åï¼Œæˆ‘å°†å…¶é‡æ–°ç”¨äºæµ‹è¯•ï¼Œä½†æ•…äº‹å’Œæµ‹è¯•æœ‰å®Œå…¨ä¸åŒçš„éœ€æ±‚å’Œç›®çš„ï¼\nä¸æ­¤åŒæ—¶ï¼ŒcreateRenderItem æ˜¯ä¸€ä¸ªå·¥å‚ï¼Œç”Ÿæˆåˆ—è¡¨é¡¹ï¼ˆä¸€äº› React ç»„ä»¶ï¼‰ã€‚åŒæ ·ï¼Œæˆ‘ä¸º Storybook è®¾è®¡å®ƒæ˜¯ä¸ºäº†ä½¿å…¶æ›´å…·åŠ¨æ€æ€§ï¼Œè€Œæµ‹è¯•å¹¶ä¸æ˜¯æˆ‘æœ€åˆè€ƒè™‘çš„ã€‚\nè¿™ä¸¤ä¸ªå‡½æ•°éƒ½å¾ˆå®¹æ˜“é˜…è¯»ï¼Œä½†ä¸ºä»€ä¹ˆè¦å¼ºè¿«è¯»è€…è·Ÿéšè¿™äº›æŠ½è±¡ï¼Ÿå®ƒä»¬æ˜¯å¿…éœ€çš„å—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚\nä»¥ä¸‹æ˜¯æµ‹è¯•çš„ç®€åŒ–ä»£ç ï¼Œåˆ—å‡ºäº†å…¶ä¸­çš„å·®å¼‚ã€‚\nit(\u0026#39;When there are no items, then nothing is showed\u0026#39;, () =\u0026gt; { // ------------------------------------------ // Arrange const items = []; mount( \u0026lt;VirtualList items={items} listHeight={90} getItemHeights={() =\u0026gt; 30} RenderItem={RenderItem} /\u0026gt; ); // ------------------------------------------ // Assert cy.findByTestId(\u0026#39;VirtualList\u0026#39;) .then(($el) =\u0026gt; $el.text()) .should(\u0026#39;be.empty\u0026#39;); }); -const itemsAmount = 0 -const itemHeight = 30 -const listHeight = 300 -const items = getStoryItems({ amount: itemsAmount }) +const items = []; mount( \u0026lt;VirtualList items={items} listHeight={listHeight} - getItemHeights={() =\u0026gt; itemHeight} + getItemHeights={() =\u0026gt; 30} - RenderItem={createRenderItem({ height: itemHeight })} + RenderItem={RenderItem} /\u0026gt;, ) åœ¨ç®€åŒ–çš„æµ‹è¯•ä¸­ï¼Œæœ€æ˜¾è‘—çš„å˜åŒ–æœ‰ï¼š\næˆ‘æ˜¾å¼æŒ‡å®šäº† itemsï¼Œè€Œä¸æ˜¯é€šè¿‡ getStoryItems ç”Ÿæˆå®ƒä»¬ã€‚è¿™æ ·åšçš„ç›®æ ‡æ˜¯ç«‹å³å‘è¯»è€…æ¾„æ¸… VirtualList æ¸²æŸ“çš„æ˜¯å“ªäº›é¡¹ç›®ã€‚ æˆ‘ç§»é™¤äº†â€œä¸å¿…è¦çš„â€å¸¸é‡ã€‚å¦‚æœæ²¡æœ‰æ¸²æŸ“ä»»ä½•é¡¹ç›®ï¼Œé¡¹ç›®çš„é«˜åº¦å’Œåˆ—è¡¨çš„é«˜åº¦æ˜¯æ— å…³ç´§è¦çš„ã€‚ æˆ‘å–æ¶ˆäº† createRenderItem å·¥å‚çš„å¿…è¦æ€§ã€‚åœ¨è¿™é‡Œï¼Œç”Ÿæˆé¢„å…ˆè®¾ç½®é«˜åº¦çš„ç»„ä»¶æ˜¯æ— ç”¨çš„ã€‚ æµ‹è¯• 2ï¼Œä¸­ç­‰å¤æ‚åº¦ æ¥ä¸‹æ¥çš„æµ‹è¯•å¹¶ä¸å¤æ‚ã€‚ä½†æˆ‘å®ç°å®ƒçš„æ–¹å¼åœ¨ä¸å¿…è¦çš„æƒ…å†µä¸‹å¢åŠ äº†å¤æ‚åº¦\nit(\u0026#39;When the list receives 10000 items, then only the minimum number of them are rendered\u0026#39;, () =\u0026gt; { const itemsAmount = 10000 const itemHeight = 30 const listHeight = 300 const items = getStoryItems({ amount: itemsAmount }) const visibleItemsAmount = listHeight / itemHeight mount( \u0026lt;VirtualList items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={createRenderItem({ height: itemHeight })} listHeight={listHeight} /\u0026gt;, ) const visibleItems = items.slice(0, visibleItemsAmount - 1) itemsShouldBeVisible(visibleItems) // first not-rendered item check cy.findByText(getItemText(items[visibleItemsAmount])).should(\u0026#39;not.exist\u0026#39;) }) åœ¨è¿™é‡Œæƒ…å†µå˜å¾—æ›´åŠ å¥‡æ€ªã€‚å†æ¬¡å‡ºç°äº†ä¸€äº›ç®€å•çš„æŠ½è±¡ï¼Œä½†è¯»è€…å¿…é¡»ï¼š\nç†è§£ visibleItemsAmount çš„å€¼ã€‚ é€šè¿‡é˜…è¯» items.slice ç†è§£ visibleItems åŒ…å«ä»€ä¹ˆã€‚å†ä¸€æ¬¡ï¼Œå¤šäº†ä¸€å±‚å¤æ‚æ€§ã€‚ çŒœæµ‹ itemsShouldBeVisible æ˜¯åšä»€ä¹ˆçš„ï¼Œæˆ–è€…é˜…è¯»å®ƒçš„ä»£ç ã€‚ çŒœæµ‹ items[visibleItemsAmount] åŒ…å«ä»€ä¹ˆã€‚ æ˜¯çš„ï¼Œæœ‰ä¸€äº›æ³¨é‡Šã€‚æ˜¯çš„ï¼Œæˆ‘å°è¯•åˆ›å»ºæœ‰æ„ä¹‰çš„åç§°ã€‚ä½†æˆ‘å¯ä»¥ç®€åŒ–å®ƒå¾ˆå¤šã€‚\nè¿˜æœ‰ä¸€ä»¶äº‹ã€‚æƒ³è±¡ä¸€ä¸‹è¿™ç§æƒ…å†µï¼šæµ‹è¯•å¤±è´¥äº†ã€‚ä¸ç®¡ä½ åšäº†ä»€ä¹ˆï¼Œè¿™ä¸ªæµ‹è¯•éƒ½å¤±è´¥äº†ã€‚ä½ å¼€å§‹è°ƒè¯•å®ƒï¼Œä½†ä½ çŸ¥é“è°ƒè¯•ä¸€ä¸ªé«˜åº¦åŠ¨æ€çš„æµ‹è¯•ï¼ˆä½ ä¸çŸ¥é“ itemsï¼ŒvisibleItemsAmountï¼ŒvisibleItemsï¼Œitems[visibleItemsAmount] åœ¨å‰æœŸåŒ…å«ä»€ä¹ˆï¼‰æ˜¯å¾ˆå›°éš¾çš„ã€‚ä½ éœ€è¦åœ¨æµ‹è¯•ä»£ç ä¸­æ·»åŠ  console.log/cy.log/debugger/æ–­ç‚¹ï¼Œä»¥å¯¹æµ‹è¯•ç®¡ç†çš„å†…å®¹æœ‰ä¸€ä¸ªæ•´ä½“çš„æ¦‚å¿µï¼Œç„¶åæ‰èƒ½å¼€å§‹è°ƒè¯• VirtualListã€‚æˆ‘èƒ½é¿å…æœªæ¥çš„è°ƒè¯•é—®é¢˜å—ï¼Ÿæˆ‘éœ€è¦æµ‹è¯•æ¸²æŸ“ 10,000 ä¸ªé¡¹ç›®å—ï¼Ÿ\nä»¥ä¸‹æ˜¯æˆ‘å¦‚ä½•æ”¹è¿›æµ‹è¯•çš„æ–¹å¼ã€‚\nit(\u0026#39;When the list is longer than the available space, then only the minimum number of items are rendered\u0026#39;, () =\u0026gt; { // ------------------------------------------ // Arrange // creating the data const items = [ // visible ones { id: 1, name: \u0026#39;Item 1\u0026#39; }, { id: 2, name: \u0026#39;Item 2\u0026#39; }, { id: 3, name: \u0026#39;Item 3\u0026#39; }, // invisible one { id: 3, name: \u0026#39;Item 4\u0026#39; }, ]; // only 3 items are visible const itemHeight = 30; const listHeight = 90; // mounting the component mount( \u0026lt;VirtualList items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={RenderItem} listHeight={listHeight} /\u0026gt; ); // ------------------------------------------ // Act // ------------------------------------------ // Assert cy.findByText(\u0026#39;Item 1\u0026#39;).should(\u0026#39;be.visible\u0026#39;); cy.findByText(\u0026#39;Item 2\u0026#39;).should(\u0026#39;be.visible\u0026#39;); cy.findByText(\u0026#39;Item 3\u0026#39;).should(\u0026#39;be.visible\u0026#39;); cy.findByText(\u0026#39;Item 4\u0026#39;).should(\u0026#39;not.exist\u0026#39;); }); åŒæ ·ï¼Œåœ¨è¿™é‡Œï¼Œå”¯ä¸€è€Œä¸”å…³é”®çš„æ”¹å˜æ˜¯ä¸ºæœªæ¥çš„è¯»è€…/è°ƒè¯•è€…æä¾›äº†æ›´è½»æ¾çš„ä½“éªŒã€‚ä½ ä¸éœ€è¦çŒœæµ‹/è®¡ç®—/è®°å½•å¸¸é‡çš„å€¼ï¼Œä¹Ÿä¸éœ€è¦å¼„æ¸…æ¥šæŠ½è±¡çš„ä½œç”¨ã€‚ä»£ç å°±åœ¨ä½ çœ¼å‰ï¼Œéµå¾ª KISS åŸåˆ™ï¼ˆä¿æŒç®€å•ï¼Œå‚»ç“œï¼‰ã€‚\n-const itemsAmount = 10000 -const itemHeight = 30 -const listHeight = 300 -const items = getStoryItems({ amount: itemsAmount }) -const visibleItemsAmount = listHeight / itemHeight +// creating the data +const items = [ + // visible ones + { id: 1, name: \u0026#39;Item 1\u0026#39; }, + { id: 2, name: \u0026#39;Item 2\u0026#39; }, + { id: 3, name: \u0026#39;Item 3\u0026#39; }, + // invisible one + { id: 3, name: \u0026#39;Item 4\u0026#39; }, +]; +// only 3 items are visible +const itemHeight = 30; +const listHeight = 90; /* ... */ -const visibleItems = items.slice(0, visibleItemsAmount - 1) -itemsShouldBeVisible(visibleItems) -cy.findByText(getItemText(items[visibleItemsAmount])).should(\u0026#39;not.exist\u0026#39;) +cy.findByText(\u0026#39;Item 1\u0026#39;).should(\u0026#39;be.visible\u0026#39;); +cy.findByText(\u0026#39;Item 2\u0026#39;).should(\u0026#39;be.visible\u0026#39;); +cy.findByText(\u0026#39;Item 3\u0026#39;).should(\u0026#39;be.visible\u0026#39;); +cy.findByText(\u0026#39;Item 4\u0026#39;).should(\u0026#39;not.exist\u0026#39;); æµ‹è¯• 3ï¼Œä¸­ç­‰å¤æ‚åº¦ åœ¨ä¸‹ä¸€ä¸ªæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æµ‹è¯• VirtualList çš„ buffer å±æ€§ï¼Œè¯¥å±æ€§å…è®¸åœ¨é¡¹ç›®å°šä¸å¯è§æ—¶æ¸²æŸ“ä¸€äº›é¡¹ç›®ã€‚\nit(\u0026#39;When some items buffered, then they exist in the page\u0026#39;, () =\u0026gt; { const itemsAmount = 1000 const itemHeight = 30 const listHeight = 300 const items = getStoryItems({ amount: itemsAmount }) const visibleItemsAmount = listHeight / itemHeight const bufferedItemsAmount = 5 mount( \u0026lt;VirtualList items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={createRenderItem({ height: itemHeight })} listHeight={listHeight} buffer={bufferedItemsAmount} /\u0026gt;, ) fastScrollVirtualList().then(() =\u0026gt; { const firstRenderedItemIndex = getFirstRenderedItemIndex(items, getItemText) const firstVisibleItemIndex = firstRenderedItemIndex + bufferedItemsAmount const lastVisibleItemIndex = firstVisibleItemIndex + visibleItemsAmount + 1 const lastRenderedItemIndex = lastVisibleItemIndex + bufferedItemsAmount items.slice(firstRenderedItemIndex, firstVisibleItemIndex).forEach(item =\u0026gt; { cy.findByText(getItemText(item)).should(\u0026#39;not.be.visible\u0026#39;) }) items.slice(firstVisibleItemIndex, lastVisibleItemIndex).forEach(item =\u0026gt; { cy.findByText(getItemText(item)).should(\u0026#39;be.visible\u0026#39;) }) items.slice(lastVisibleItemIndex, lastRenderedItemIndex).forEach(item =\u0026gt; { cy.findByText(getItemText(item)).should(\u0026#39;not.be.visible\u0026#39;) }) }) }) å¤æ‚æ€§æ¥è‡ªäºï¼š\næ»šåŠ¨åˆ—è¡¨ä»¥æµ‹è¯•ç¼“å†²åŒºåœ¨ä¸¤ä¾§çš„ä½œç”¨ã€‚ å½“æ»šåŠ¨åœæ­¢æ—¶ï¼Œæˆ‘æ— æ³•æå‰çŸ¥é“å“ªäº›é¡¹ç›®æ˜¯å¯è§çš„ï¼Œå“ªäº›ä¸å¯è§ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ fastScrollVirtualList().then(() =\u0026gt; { /* ... */ }) çš„å†…å®¹æ˜¯åŠ¨æ€çš„ã€‚ æˆ‘ç¨åä¼šå›åˆ°ç¬¬ 2 ç‚¹ï¼Œä½†å¯¹äºè¿™ä¸ªæµ‹è¯•ï¼Œæˆ‘åˆ‡æ‰äº†ç¬¬ 1 ç‚¹çš„å¤´ï¼šä¸ºä»€ä¹ˆæˆ‘éœ€è¦é€šè¿‡ Cypress ç»„ä»¶æµ‹è¯•åœ¨è¿™é‡Œæµ‹è¯•æ•´ä¸ª buffer è¡Œä¸ºï¼Ÿæˆ‘æœ‰å¾ˆå¤šå•å…ƒæµ‹è¯•ï¼Œæ£€æŸ¥å†…éƒ¨ VirtualList å‡½æ•°æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚æˆ‘ä¸éœ€è¦å†æ¬¡æµ‹è¯•ç›¸åŒçš„è¡Œä¸ºã€‚ä¸€æ—¦ buffer ç”Ÿæ•ˆï¼Œå®ƒå°±åœ¨ä¸¤ä¾§éƒ½ç”Ÿæ•ˆäº†ã€‚è¿™ä¸ªé€‰æ‹©ä½¿æµ‹è¯•å—ç›ŠåŒªæµ…ï¼›ç°åœ¨å®ƒæ›´ç®€å•äº†ï¼ŒåŒ…å«äº†è®¸å¤šæœ‰åŠ©äºè¯»è€…çš„æ³¨é‡Šï¼\nit(\u0026#39;Should render only the visible items and the buffered ones when an item is partially visible\u0026#39;, () =\u0026gt; { // ------------------------------------------ // Arrange // creating the data const items = [ // visible ones { id: 1, name: \u0026#39;Item 1\u0026#39; }, { id: 2, name: \u0026#39;Item 2\u0026#39; }, { id: 3, name: \u0026#39;Item 3\u0026#39; }, // visible ones { id: 4, name: \u0026#39;Item 4\u0026#39; }, // buffered ones { id: 5, name: \u0026#39;Item 5\u0026#39; }, { id: 6, name: \u0026#39;Item 6\u0026#39; }, // non-rendered one { id: 7, name: \u0026#39;Item 7\u0026#39; }, ]; const itemHeight = 30; // 3 items are fully visible, 1 is partially visible const listHeight = 100; // 2 items are buffered const buffer = 2; // mounting the component mount( \u0026lt;VirtualList items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={RenderItem} listHeight={listHeight} buffer={buffer} /\u0026gt; ); // ------------------------------------------ // Act // ------------------------------------------ // Assert cy.findByText(\u0026#39;Item 1\u0026#39;).should(\u0026#39;be.visible\u0026#39;); cy.findByText(\u0026#39;Item 2\u0026#39;).should(\u0026#39;be.visible\u0026#39;); cy.findByText(\u0026#39;Item 3\u0026#39;).should(\u0026#39;be.visible\u0026#39;); cy.findByText(\u0026#39;Item 4\u0026#39;).should(\u0026#39;be.visible\u0026#39;); cy.findByText(\u0026#39;Item 5\u0026#39;).should(\u0026#39;not.be.visible\u0026#39;); cy.findByText(\u0026#39;Item 6\u0026#39;).should(\u0026#39;not.be.visible\u0026#39;); cy.findByText(\u0026#39;Item 7\u0026#39;).should(\u0026#39;not.exist\u0026#39;); }); æµ‹è¯• 4ï¼Œé«˜å¤æ‚åº¦ æµ‹è¯•é€‰æ‹©æ˜¯ VirtualList ä¸­æœ€å›°éš¾çš„éƒ¨åˆ†ï¼Œå› ä¸ºï¼š\nVirtualList ç®¡ç†é”®ç›˜ä¿®é¥°ç¬¦ï¼Œå…è®¸ç®€å•ã€ç´¯åŠ ã€å‡å»å’ŒèŒƒå›´é€‰æ‹©ã€‚ VirtualList æ˜¯æ— çŠ¶æ€çš„ï¼šæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„åŒ…è£…å™¨æ¥åŒ…è£…å®ƒï¼Œä»¥å­˜å‚¨å…ˆå‰çš„é€‰æ‹©ï¼Œä»¥ä¾¿æµ‹è¯•ç´¯åŠ ã€å‡å»å’ŒèŒƒå›´é€‰æ‹©ã€‚ æˆ‘çš„æ—§æµ‹è¯•éå¸¸éš¾ä»¥é˜…è¯»ï¼Œå› ä¸ºï¼š\næœ‰çŠ¶æ€çš„åŒ…è£…å™¨åœ¨æµ‹è¯•æœ¬èº«çš„ä¸»ä½“ä¸­å£°æ˜ï¼Œä½¿ç”¨æµ‹è¯•çš„èŒƒå›´ã€‚ æ‰€æœ‰çš„é€‰æ‹©éƒ½åœ¨ä¸€ä¸ªå¾ˆé•¿çš„æµä¸­è¢«æ£€æŸ¥ã€‚ é€æ­¥æ¥ï¼Œè®©æˆ‘ä»¬ç®€åŒ–å®ƒã€‚\nå°†æŠ½è±¡ç§»åˆ°è¿œå¤„ æ—§æµ‹è¯•çš„ç¬¬ä¸€éƒ¨åˆ†å¦‚ä¸‹ï¼š\nit(\u0026#39;When the items are clicked, then they are selected\u0026#39;, () =\u0026gt; { const itemHeight = 30 const listHeight = 300 let testItems const WithSelectionManagement: React.FC\u0026lt;{ testHandleSelect: (newSelectedIds: ItemId[]) =\u0026gt; {} }\u0026gt; = props =\u0026gt; { const { testHandleSelect } = props const items = getStoryItems({ amount: 10000 }) const [selectedItems, setSelectedItems] = React.useState\u0026lt;(string | number)[]\u0026gt;([]) const handleSelect = React.useCallback\u0026lt;(params: OnSelectCallbackParams\u0026lt;StoryItem\u0026gt;) =\u0026gt; void\u0026gt;( ({ newSelectedIds }) =\u0026gt; { setSelectedItems(newSelectedIds) testHandleSelect(newSelectedIds) }, [setSelectedItems, testHandleSelect], ) React.useEffect(() =\u0026gt; { testItems = items }, [items]) return ( \u0026lt;VirtualList items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={createSelectableRenderItem({ height: itemHeight })} listHeight={listHeight} updateScrollModeOnDataChange={{ addedAtTop: true, removedFromTop: true, addedAtBottom: true, removedFromBottom: true, }} selectedItemIds={selectedItems} onSelect={handleSelect} /\u0026gt; ) } WithSelectionManagement.displayName = \u0026#39;WithSelectionManagement\u0026#39; mount(\u0026lt;WithSelectionManagement testHandleSelect={cy.stub().as(\u0026#39;handleSelect\u0026#39;)} /\u0026gt;) /* ... rest of the test ... */ }) ä»¥è¿™æ ·çš„æ ·æ¿å¼€å§‹é˜…è¯»æµ‹è¯•æ˜¯ç›¸å½“å›°éš¾çš„ã€‚ä½ åœ¨é˜…è¯»ä¸­è¿·å¤±äº†ä¸€æ®µæ—¶é—´ï¼Œå¤±å»äº†æµ‹è¯•æœ¬èº«çš„å…³é”®éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬å°†å…¶ä»æµ‹è¯•ä¸­ç§»åˆ°è¿œå¤„ã€‚\n// wrap the VirtualList to internally manage the selection, passing outside only the new selection function SelectableList(props) { const { onSelect, ...virtualListProps } = props; // store the selection in an internal state const [selectedItems, setSelectedItems] = React.useState([]); const handleSelect = React.useCallback( ({ newSelectedIds }) =\u0026gt; { setSelectedItems(newSelectedIds); // call the passed spy to notify the test about the new selected ids onSelect({ newSelectedIds }); }, [setSelectedItems, onSelect] ); // Transparently renders the VirtualList, apart from: // - storing the selection // - passing the new selection back to the test return ( \u0026lt;VirtualList selectedItemIds={selectedItems} onSelect={handleSelect} // VirtualList props passed from the test {...virtualListProps} /\u0026gt; ); } it(\u0026#39;When two items are clicked pressing the meta button, then they are both selected\u0026#39;, () =\u0026gt; { // ------------------------------------------ // Arrange // creating the data const itemHeight = 30; const listHeight = 90; const items = [ { id: 1, name: \u0026#39;Item 1\u0026#39; }, { id: 2, name: \u0026#39;Item 2\u0026#39; }, { id: 3, name: \u0026#39;Item 3\u0026#39; }, ]; // mounting the component mount( \u0026lt;SelectableList // test-specific props onSelect={cy.spy().as(\u0026#39;onSelect\u0026#39;)} // VirtualList props items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={RenderItem} listHeight={listHeight} /\u0026gt; ); /* ... rest of the test ... */ }) èƒŒæ™¯å¹²æ‰°ä»ç„¶å¾ˆé«˜ï¼Œä½†åœ¨é˜…è¯»æµ‹è¯•æ—¶ä½ ä¸ä¼šé‡åˆ°å®ƒã€‚ç„¶åï¼Œä½ æ˜¯å¦æ³¨æ„åˆ°åŒ…è£…å™¨çš„è°ƒç”¨æ¶ˆè€—ä»\nmount(\u0026lt;WithSelectionManagement testHandleSelect={cy.stub().as(\u0026#39;handleSelect\u0026#39;)} /\u0026gt;) åˆ°\nmount( \u0026lt;SelectableList // test-specific props onSelect={cy.spy().as(\u0026#39;onSelect\u0026#39;)} // VirtualList props items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={RenderItem} listHeight={listHeight} /\u0026gt; ); ï¼Ÿç›®çš„æ˜¯å°½å¯èƒ½ä½¿ä»£ç ä¸ä¹‹å‰çš„æ›´ç®€å•çš„æµ‹è¯•ç›¸ä¼¼ã€‚SelectableList ç°åœ¨æ›´é€æ˜ï¼Œå› ä¸ºå®ƒåªåšäº†ä¸€ä»¶äº‹æƒ…ï¼šå­˜å‚¨å…ˆå‰çš„é€‰æ‹©ã€‚\næ‹†è§£é•¿çš„æµ‹è¯• ç³»å¥½å®‰å…¨å¸¦ï¼šé™¤äº†åŒ…è£…å™¨ï¼Œæ—§æµ‹è¯•å¦‚ä¸‹ï¼š\nit(\u0026#39;When the items are clicked, then they are selected\u0026#39;, () =\u0026gt; { /* ... the code of the wrapper ... */ cy.then(() =\u0026gt; expect(testItems).to.have.length.greaterThan(0)) cy.wrap(testItems).then(() =\u0026gt; { cy.findByText(getItemText(testItems[0])).click() cy.get(\u0026#39;@handleSelect\u0026#39;).should(stub =\u0026gt; { expect(stub).to.have.been.calledOnce expect(stub).to.have.been.calledWith([testItems[0].id]) }) cy.findByText(getItemText(testItems[1])).click().window() cy.get(\u0026#39;@handleSelect\u0026#39;).should(stub =\u0026gt; { expect(stub).to.have.been.calledTwice expect(stub).to.have.been.calledWith([testItems[1].id]) }) cy.get(\u0026#39;body\u0026#39;) .type(\u0026#39;{meta}\u0026#39;, { release: false }) .findByText(getItemText(testItems[2])) .click() .get(\u0026#39;@handleSelect\u0026#39;) .should(stub =\u0026gt; { expect(stub).to.have.been.calledThrice expect(stub).to.have.been.calledWith([testItems[1].id, testItems[2].id]) }) .get(\u0026#39;body\u0026#39;) .type(\u0026#39;{meta}\u0026#39;, { release: true }) cy.get(\u0026#39;body\u0026#39;) .type(\u0026#39;{shift}\u0026#39;, { release: false }) .findByText(getItemText(testItems[0])) .click() .get(\u0026#39;@handleSelect\u0026#39;) .should(stub =\u0026gt; { expect(stub).to.have.been.callCount(4) expect(stub).to.have.been.calledWith([testItems[2].id, testItems[1].id, testItems[0].id]) }) .get(\u0026#39;body\u0026#39;) .type(\u0026#39;{shift}\u0026#39;, { release: true }) cy.get(\u0026#39;body\u0026#39;) .type(\u0026#39;{alt}\u0026#39;, { release: false }) .findByText(getItemText(testItems[1])) .click() .get(\u0026#39;@handleSelect\u0026#39;) .should(stub =\u0026gt; { expect(stub).to.have.been.callCount(5) expect(stub).to.have.been.calledWith([testItems[2].id, testItems[0].id]) }) .get(\u0026#39;body\u0026#39;) .type(\u0026#39;{alt}\u0026#39;, { release: true }) fastScrollVirtualList().then(() =\u0026gt; { const firstRenderedItemIndex = getFirstRenderedItemIndex(testItems, getItemText) const firstRenderedItem = testItems[firstRenderedItemIndex] const expectedSelectedItemIds = testItems .slice(0, firstRenderedItemIndex + 1) .map(item =\u0026gt; item.id) cy.get(\u0026#39;body\u0026#39;) .type(\u0026#39;{shift}\u0026#39;, { release: false }) .findByText(getItemText(firstRenderedItem)) .click() .get(\u0026#39;@handleSelect\u0026#39;) .should(stub =\u0026gt; { expect(stub).to.have.been.callCount(6) expect(stub).to.have.been.calledWith(expectedSelectedItemIds) }) .get(\u0026#39;body\u0026#39;) .type(\u0026#39;{shift}\u0026#39;, { release: true }) }) }) }) ç°åœ¨çœ‹æ¥ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªçš„åœ°æ–¹ï¼š\ncy.then(() =\u0026gt; expect(testItems).to.have.length.greaterThan(0))ï¼Œå› ä¸ºé¡¹ç›®æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæˆ‘åœ¨å¤–éƒ¨å‡½æ•°å‡ºç°é—®é¢˜æ—¶ä¸­æ­¢äº†æµ‹è¯•ã€‚ cy.findByText(getItemText(testItems[0])).click() å¤ªè¿‡åŠ¨æ€ï¼ŒtestItems[0] åŒ…å«ä»€ä¹ˆï¼Ÿ fastScrollVirtualList().then(() =\u0026gt; { /* ... */ } çš„å†…å®¹ ğŸ˜© æµ‹è¯•æœ¬èº«çš„é•¿åº¦ã€‚ ä¸æ¸…æ¥šæµ‹è¯•ä¸€ç§é€‰æ‹©ç±»å‹åœ¨å“ªé‡Œç»“æŸï¼Œä¸‹ä¸€ä¸ªé€‰æ‹©ç±»å‹åœ¨å“ªé‡Œå¼€å§‹ã€‚ è®©æˆ‘ä»¬é¦–å…ˆé€šè¿‡å°†ä¸€ä¸ªåŒ…å«å››ç§é€‰æ‹©çš„æµ‹è¯•æ‹†åˆ†ä¸ºå››ä¸ªæµ‹è¯•æ¥æ¶ˆé™¤å¯¹è¿™æ ·ä¸€ä¸ªé•¿æµ‹è¯•çš„éœ€æ±‚ã€‚\nå•é€‰ çŒœçŒœçœ‹ï¼Ÿæµ‹è¯•ç®€å•çš„é€‰æ‹©æ ¹æœ¬ä¸éœ€è¦åŒ…è£…å™¨ ğŸ˜Š\nit(\u0026#39;When an item is clicked, then it is selected\u0026#39;, () =\u0026gt; { // ------------------------------------------ // Arrange // creating the spy // a spy is needed to intercept the call the VirtualList does const onSelectSpy = cy.spy().as(\u0026#39;onSelect\u0026#39;); // creating the data const items = [ { id: 1, name: \u0026#39;Item 1\u0026#39; }, { id: 2, name: \u0026#39;Item 2\u0026#39; }, { id: 3, name: \u0026#39;Item 3\u0026#39; }, ]; // mounting the component mount( \u0026lt;VirtualList items={items} getItemHeights={() =\u0026gt; 30} RenderItem={RenderItem} listHeight={90} onSelect={onSelectSpy} /\u0026gt; ); // ------------------------------------------ // Act cy.findByText(\u0026#39;Item 1\u0026#39;).click(); // ------------------------------------------ // Assert cy.get(\u0026#39;@onSelect\u0026#39;).should((spy) =\u0026gt; { expect(spy).to.have.been.calledOnce; // Sinon matchers allow to assert about partials of the params // see // https://sinonjs.org/releases/latest/assertions/ // https://sinonjs.org/releases/latest/matchers/ expect(spy).to.have.been.calledWith( Cypress.sinon.match({ newSelectedIds: [1] }) ); expect(spy).to.have.been.calledWith( Cypress.sinon.match({ item: { id: 1, name: \u0026#39;Item 1\u0026#39; } }) ); }); }); ä¸æ—§æµ‹è¯•çš„ç¬¬ä¸€éƒ¨åˆ†ç›¸æ¯”ï¼Œæœ€æ˜¾è‘—çš„å˜åŒ–ï¼š\nä¸å†éœ€è¦åŒ…è£…å™¨ã€‚ ä¸å†æœ‰åŠ¨æ€å€¼ã€‚ æ›´æœ‰è¡¨ç°åŠ›çš„æ–­è¨€ã€‚ è¿™æ˜¯ä¸€ä¸ªå•ä¸€ç›®çš„çš„æµ‹è¯•ã€‚ ç´¯åŠ å’Œå‡å»é€‰æ‹© åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨åŒ…è£…å™¨ã€‚\nit(\u0026#39;When two items are clicked pressing the meta button, then they are both selected\u0026#39;, () =\u0026gt; { // ------------------------------------------ // Arrange // creating the data const itemHeight = 30; const listHeight = 90; const items = [ { id: 1, name: \u0026#39;Item 1\u0026#39; }, { id: 2, name: \u0026#39;Item 2\u0026#39; }, { id: 3, name: \u0026#39;Item 3\u0026#39; }, ]; // mounting the component mount( // mount `SelectableList`instead of `VirtualList` \u0026lt;SelectableList // test-specific props onSelect={cy.spy().as(\u0026#39;onSelect\u0026#39;)} // VirtualList props items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={RenderItem} listHeight={listHeight} /\u0026gt; ); // ------------------------------------------ // click on the first item // Act cy.findByText(\u0026#39;Item 1\u0026#39;) .click() // Assert .get(\u0026#39;@onSelect\u0026#39;) .should((spy) =\u0026gt; { expect(spy).to.have.been.calledOnce; expect(spy).to.have.been.calledWith({ newSelectedIds: [1] }); }); // ------------------------------------------ // click on the second item // Act // keep the meta button pressed cy.get(\u0026#39;body\u0026#39;).type(\u0026#39;{meta}\u0026#39;, { release: false }); cy.findByText(\u0026#39;Item 2\u0026#39;) .click() // Assert .get(\u0026#39;@onSelect\u0026#39;) .should((spy) =\u0026gt; { expect(spy).to.have.been.calledTwice; expect(spy).to.have.been.calledWith({ newSelectedIds: [1, 2] }); }); }); è¿™é‡Œçš„å·¨å¤§å·®å¼‚åœ¨äºé¿å…æ»šåŠ¨ï¼Œå› ä¸ºå®ƒä¸å½±å“ç´¯åŠ é€‰æ‹©ã€‚å†æ¬¡å‡ºç°æ˜¾å¼å€¼ï¼Œæ¸…æ™°åº¦å’Œç®€æ´æ€§å…è®¸è¿›è¡Œæ›´ç›´è§‚å’Œæ›´æœ‰è¡¨ç°åŠ›çš„æµ‹è¯•ã€‚\næµ‹è¯•å‡å»é€‰æ‹©éµå¾ªç›¸åŒçš„æ¨¡å¼ã€‚æˆ‘åœ¨è¿™é‡Œä¸æŠ¥å‘Šå®ƒã€‚\nèŒƒå›´é€‰æ‹© ä¸ä¹‹å‰çš„é€‰æ‹©ç›¸æ¯”ï¼Œæˆ‘è®¤ä¸ºèŒƒå›´é€‰æ‹© å¯èƒ½ä¼š å—åˆ°æ»šåŠ¨åˆ—è¡¨çš„å½±å“ï¼Œå› ä¸ºä¸€äº›å°†è¢«é€‰æ‹©çš„é¡¹ç›®ä¸å†å‘ˆç°ã€‚å¦‚ä½•ä½¿æœ¬è´¨ä¸Šæ˜¯åŠ¨æ€çš„ä¸œè¥¿â€”â€”æ»šåŠ¨åˆ—è¡¨â€”â€”æ›´åŠ é™æ€ï¼Ÿé€šè¿‡æ‰‹åŠ¨æµ‹è¯•å’Œä¸€äº›æ³¨é‡Šã€‚\nit(\u0026#39;When the list is scrolled amd some items are clicked pressing the shift button, then the range selection works\u0026#39;, () =\u0026gt; { // ------------------------------------------ // Arrange // creating the data const items = [ { id: 1, name: \u0026#39;Item 1\u0026#39; }, { id: 2, name: \u0026#39;Item 2\u0026#39; }, { id: 3, name: \u0026#39;Item 3\u0026#39; }, { id: 4, name: \u0026#39;Item 4\u0026#39; }, { id: 5, name: \u0026#39;Item 5\u0026#39; }, { id: 6, name: \u0026#39;Item 6\u0026#39; }, { id: 7, name: \u0026#39;Item 7\u0026#39; }, { id: 8, name: \u0026#39;Item 8\u0026#39; }, { id: 9, name: \u0026#39;Item 9\u0026#39; }, { id: 10, name: \u0026#39;Item 10\u0026#39; }, { id: 11, name: \u0026#39;Item 11\u0026#39; }, { id: 12, name: \u0026#39;Item 12\u0026#39; }, { id: 13, name: \u0026#39;Item 13\u0026#39; }, { id: 14, name: \u0026#39;Item 14\u0026#39; }, { id: 15, name: \u0026#39;Item 15\u0026#39; }, { id: 16, name: \u0026#39;Item 16\u0026#39; }, { id: 17, name: \u0026#39;Item 17\u0026#39; }, { id: 18, name: \u0026#39;Item 18\u0026#39; }, { id: 19, name: \u0026#39;Item 19\u0026#39; }, { id: 20, name: \u0026#39;Item 20\u0026#39; }, ]; // only 3 items are visible const itemHeight = 30; const listHeight = 90; // mounting the component mount( \u0026lt;SelectableList // test-specific props onSelect={cy.spy().as(\u0026#39;onSelect\u0026#39;)} // VirtualList props items={items} getItemHeights={() =\u0026gt; itemHeight} RenderItem={RenderItem} listHeight={listHeight} /\u0026gt; ); // Act // click on the first item cy.findByText(\u0026#39;Item 1\u0026#39;).click(); // scroll the list cy.findAllByTestId(\u0026#39;VirtualList\u0026#39;).first().trigger(\u0026#39;wheel\u0026#39;, { deltaX: 0, deltaY: 200, }); cy.get(\u0026#39;body\u0026#39;).type(\u0026#39;{shift}\u0026#39;, { release: false }); // Item 7, 8, 9, and 10 are going to be visible after the scroll // click on the 10th item. It\u0026#39;s going to be clicked as soon as it\u0026#39;s in the DOM and clickable cy.findByText(\u0026#39;Item 10\u0026#39;) .click() // Assert .get(\u0026#39;@onSelect\u0026#39;) .should((spy) =\u0026gt; { expect(spy).to.have.been.calledTwice; expect(spy).to.have.been.calledWith({ newSelectedIds: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] }); }); }); è¿™é‡Œå¯èƒ½å‘ç”Ÿçš„æœ€ç³Ÿç³•çš„äº‹æƒ…æ˜¯ï¼Œåœ¨è§¦å‘ wheel äº‹ä»¶æ—¶ï¼ŒVirtualList çš„æ»šåŠ¨é€»è¾‘æ»šåŠ¨å¾—æ›´å°‘æˆ–æ›´å¤šã€‚\ncy.findAllByTestId(\u0026#39;VirtualList\u0026#39;).first().trigger(\u0026#39;wheel\u0026#39;, { deltaX: 0, deltaY: 200, }); ä½†å¦‚æœå‘ç”Ÿäº†ï¼Œç”±äºæœ‰æ³¨é‡Šï¼Œè¯»è€…ä¼šæ¸…æ¥šåœ°çŸ¥é“å‡ºäº†ä»€ä¹ˆé—®é¢˜ ğŸ˜Š\nç›¸å…³çš„æ–‡ç«  ğŸ”— ä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯• ç”±NoriSteåœ¨dev.toè¿›è¡Œè”åˆå‘è¡¨ã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-real-life-examples-from-unreadable-react-component-tests-to-simple-ones/","summary":"è¿™ç¯‡åšæ–‡æ˜¯ UI æµ‹è¯•æœ€ä½³å®è·µçš„çœŸå®æ¡ˆä¾‹ç¯‡ï¼Œç¬¬äºŒç¯‡ä»éš¾ä»¥ç†è§£çš„ React ç»„ä»¶æµ‹è¯•åˆ°ç®€å•æ„šè ¢çš„æµ‹è¯•ã€‚æ–‡ç« åˆ†äº«äº†åœ¨ React ç»„ä»¶æµ‹è¯•ä¸­é‡åˆ°çš„æŒ‘æˆ˜ï¼Œå¹¶æä¾›äº†ç®€åŒ–å’Œä¼˜åŒ–æµ‹è¯•çš„å®é™…æ¡ˆä¾‹ã€‚é€šè¿‡è¿™ä¸ªçœŸå®æ¡ˆä¾‹ï¼Œè¯»è€…å°†å­¦åˆ°å¦‚ä½•é€šè¿‡ç®€å•æ„šè ¢çš„æµ‹è¯•æ–¹æ³•ï¼Œæ›´è½»æ¾åœ°ç†è§£å’Œç»´æŠ¤ React ç»„ä»¶çš„æµ‹è¯•ä»£ç ï¼Œæé«˜æµ‹è¯•çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„çœŸå®æ¡ˆä¾‹ç¯‡ï¼ˆäºŒï¼‰ï¼šä»éš¾ä»¥ç†è§£çš„ React ç»„ä»¶æµ‹è¯•åˆ°ç®€å•æ„šè ¢çš„æµ‹è¯•"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nçœŸå®æ¡ˆä¾‹ï¼šç”¨é›†æˆæµ‹è¯•æµ‹è¯•å‰ç«¯ï¼Œç”¨ E2E æµ‹è¯•æµ‹è¯•åç«¯ åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/real-life-examples/test-front-end-with-integration-back-end-with-e2e.md\nä¸€æ®µç®€è¦è¯´æ˜ ä½¿ç”¨å¸¦æœ‰å­˜æ ¹æœåŠ¡å™¨çš„ UI æµ‹è¯•ç›¸å¯¹äºå®Œæ•´çš„ E2E æµ‹è¯•æ¥è¯´ï¼Œä¸ä»…æ›´åŠ å¯é ï¼Œè€Œä¸”é€Ÿåº¦æ›´å¿«ã€‚\nå°½ç®¡å®Œæ•´çš„ E2E æµ‹è¯•ä»ç„¶æä¾›äº†æœ€é«˜çš„ä¿¡å¿ƒæ°´å¹³ï¼Œä½†ä»£ä»·å¾ˆé«˜ï¼šæ˜“ç¢ã€æ½œåœ¨ä¸å¯é ä¸”é€Ÿåº¦è¾ƒæ…¢ã€‚\né€šè¿‡ä½¿ç”¨æˆæœ¬è¾ƒä½çš„ UI é›†æˆæµ‹è¯•ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨å‰ç«¯è·å¾—é«˜ä¿¡å¿ƒæ°´å¹³ï¼Œå¹¶å°†æˆæœ¬è¾ƒé«˜çš„ E2E æµ‹è¯•ç•™ç»™åç«¯ã€‚\nç¤ºä¾‹æµ‹è¯•æ¶æ„å›¾ è¿™æ˜¯æ¥è‡ªå®é™…çš„å»ºç­‘æ§åˆ¶äº‘åº”ç”¨ç¨‹åºçš„é«˜å±‚æ¬¡æ¶æ„è§†å›¾ã€‚\nAngular å‰ç«¯ Node-Express APIï¼ˆåç«¯ï¼‰ æœåŠ¡ï¼ˆGo lambdasï¼‰ï¼ˆåç«¯ï¼‰ ç¡¬ä»¶ï¼ˆåç«¯ï¼‰ æ ¹æ®éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡çº¯ API æµ‹è¯•æ¥è¡¥å…… UI-E2E æµ‹è¯•ã€‚ä¸€äº›å¸¸ç”¨çš„ API æµ‹è¯•å·¥å…·åŒ…æ‹¬ Postmanï¼ŒVS Code çš„ Rest Clientï¼Œä»¥åŠ Cypressã€‚\nè¯·æ³¨æ„ï¼šä»¥ä¸‹æ‰€æœ‰ç¤ºä¾‹å‡ä½¿ç”¨ Cypressï¼Œç›®å‰å®ƒåœ¨ XHR æµ‹è¯•æ”¯æŒæ–¹é¢æ˜¯æœ€ä¼˜ç§€çš„ã€‚åœ¨ç°æœ‰çš„æµ‹è¯•å·¥å…·ä¸­ï¼Œå®Œæ•´çš„ XHR è¯·æ±‚ç­‰å¾…å’Œæ£€æŸ¥å¹¶ä¸å¸¸è§ï¼ŒCypress ç›®å‰æä¾›äº†æœ€å…¨é¢çš„æ£€æŸ¥æ”¯æŒã€‚\nä»£ç ç¤ºä¾‹ï¼šç™»å½•æµ‹è¯• ä»¥ä¸‹ç¤ºä¾‹åŒ…å«ä¸¤ä¸ªæµ‹è¯•ï¼Œç”¨äºè¦†ç›–ç™»å½•åŠŸèƒ½ã€‚ç¬¬ä¸€ä¸ªæµ‹è¯•ä½¿ç”¨ UI é›†æˆæµ‹è¯•è¦†ç›–å‰ç«¯åº”ç”¨ç¨‹åºï¼Œç¬¬äºŒä¸ªæµ‹è¯•ä½¿ç”¨ E2E æµ‹è¯•è¦†ç›–åç«¯ã€‚\n/** function to fill username, password and Login*/ const fillFormAndClick = ({ username, password }) =\u0026gt; { .. }; // This is an UI integration test with server stubbing. // Remember to write a few E2E tests and a lot of integration ones // @see https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/testing-strategy/component-vs-integration-vs-e2e-testing.zh.md#ui-integration-tests it(\u0026#34;Login: front-end integration tests\u0026#34;, () =\u0026gt; { // A route that intercepts / sniffs every POST request that goes to the authentication URL. // Stubs the response with authentication-success.json fixture. This is called server stubbing cy.intercept({ method: \u0026#34;POST\u0026#34;, fixture: \u0026#34;authentication/authentication-success.json\u0026#34;, // Stubs the response url: `**${AUTHENTICATE_API_URL}` }).as(\u0026#34;auth-xhr\u0026#34;); fillFormAndClick(USERNAME_PLACEHOLDER, PASSWORD_PLACEHOLDER); // wait for the POST XHR cy.wait(\u0026#34;@auth-xhr\u0026#34;).then(interception =\u0026gt; { // assert the payload body that the front end is sending to the back-end expect(interception.request.body).to.have.property(\u0026#34;username\u0026#34;, username); expect(interception.request.body).to.have.property(\u0026#34;password\u0026#34;, password); // assert the request headers in the payload expect(interception.request.headers).to.have.property(\u0026#39;Content-Type\u0026#39;, \u0026#39;application/json;charset=utf-8\u0026#39;); }); // finally, the user must see the feedback cy.getByText(SUCCESS_FEEDBACK).should(\u0026#34;be.visible\u0026#34;); }); // this is a copy of the integration test but without server stubbing. it(\u0026#34;Login: back-end E2E tests\u0026#34;, () =\u0026gt; { // A route that intercepts / sniffs every POST request that goes to the authentication URL. // Distinction: this is NOT stubbed! cy.intercept({ method: \u0026#34;POST\u0026#34;, url: `**${AUTHENTICATE_API_URL}` }).as(\u0026#34;auth-xhr\u0026#34;); fillFormAndClick(USERNAME_PLACEHOLDER, PASSWORD_PLACEHOLDER); cy.wait(\u0026#34;@auth-xhr\u0026#34;).then(interception =\u0026gt; { // since the integration tests already tested the front-end app, we use E2E tests to check the // back-end app. It needs to ensure that the back-end app works and gets the correct response data // response body assertions and status should be in the E2E tests since they rely on the server expect(interception.status).to.equal(200); expect(interception.response.body).to.have.property(\u0026#34;token\u0026#34;); }); // finally, the user must see the feedback cy.getByText(SUCCESS_FEEDBACK).should(\u0026#34;be.visible\u0026#34;); }); ä»£ç ç¤ºä¾‹ 2ï¼šå°† UI é›†æˆæµ‹è¯•åˆ‡æ¢ä¸º UI-E2E æµ‹è¯• æœ‰æ—¶å€™ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°† UI é›†æˆæµ‹è¯•åˆ‡æ¢ä¸º E2E æµ‹è¯•ã€‚\nåœ¨è¾ƒä½çº§åˆ«çš„æµ‹è¯•å±‚é¢ï¼Œä¾‹å¦‚ä»…å°†æµ‹è¯•éš”ç¦»åˆ° UI ä»£ç æ—¶ï¼Œæ‚¨å¯èƒ½æ›´æ„¿æ„ä½¿ç”¨ç»æµé«˜æ•ˆçš„ UI é›†æˆæµ‹è¯•ã€‚\nè€Œåœ¨è¾ƒé«˜çº§åˆ«çš„æµ‹è¯•å±‚é¢ï¼Œä¾‹å¦‚ä¸ä¸­é—´å±‚æœåŠ¡é›†æˆæ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦æ›´é«˜çš„ä¿¡å¿ƒæ°´å¹³ï¼Œå°†æµ‹è¯•ç›®æ ‡å®šä½åˆ°åç«¯ã€‚\né€šè¿‡ä½¿ç”¨æ¡ä»¶å­˜æ ¹ï¼Œæ‚¨å¯ä»¥åœ¨ UI é›†æˆæµ‹è¯•å’Œ E2E æµ‹è¯•ä¹‹é—´åˆ‡æ¢å…³æ³¨ã€‚\n// stub-services.js : a file that only includes a function to stub the back-end services export default function() { // all routes to the specified endpoint will respond with pre-packaged Json data cy.intercept(\u0026#39;/api/../me\u0026#39;, {fixture:\u0026#39;services/me.json\u0026#39;}); cy.intercept(\u0026#39;/api/../permissions\u0026#39;, {fixture:\u0026#39;services/permissions.json\u0026#39;}); // Lots of other fixtures ... } // spec file: import stubServices from \u0026#39;../../support/stub-services\u0026#39;; /** isLocalhost is a function that checks the configuration environment*/ const isLocalHost = () =\u0026gt; Cypress.env(\u0026#39;ENVIRONMENT\u0026#39;) === \u0026#34;localhost\u0026#34;; // ... in your tests, or in before / beforeEach blocks, // stub the services if you are testing front-end (UI integration tests) // do not stub if you are testing the back-end (UI-E2E tests) if (isLocalHost()) { stubServices(); } å‚è€ƒèµ„æ–™ ç†Ÿç»ƒæŒæ¡ UI æµ‹è¯• - ä¼šè®®è§†é¢‘ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-real-life-examples-test-front-end-with-integration-back-end-with-e2e/","summary":"è¿™ç¯‡åšæ–‡æ˜¯ UI æµ‹è¯•æœ€ä½³å®è·µçš„çœŸå®æ¡ˆä¾‹ç¯‡ï¼Œé¦–ç¯‡è®¨è®ºäº†é€šè¿‡é›†æˆæµ‹è¯•æµ‹è¯•å‰ç«¯ï¼Œä»¥åŠåˆ©ç”¨ E2E æµ‹è¯•æµ‹è¯•åç«¯çš„å®é™…æ¡ˆä¾‹ã€‚æ–‡ç« æ·±å…¥ä»‹ç»äº†åœ¨é¡¹ç›®ä¸­å¦‚ä½•ç»“åˆä¸åŒç±»å‹çš„æµ‹è¯•æ¥ç¡®ä¿æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚é€šè¿‡è¿™ä¸ªçœŸå®æ¡ˆä¾‹ï¼Œè¯»è€…å°†äº†è§£åœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½•çµæ´»è¿ç”¨ UI æµ‹è¯•æœ€ä½³å®è·µï¼Œæé«˜æµ‹è¯•çš„å…¨é¢æ€§å’Œè´¨é‡ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„çœŸå®æ¡ˆä¾‹ç¯‡ï¼ˆä¸€ï¼‰ï¼šç”¨é›†æˆæµ‹è¯•æµ‹è¯•å‰ç«¯ï¼Œç”¨ E2E æµ‹è¯•æµ‹è¯•åç«¯"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\né‚®ä»¶æµ‹è¯• åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/advanced/email-testing.md\nä¸€æ®µç®€è¦è¯´æ˜ ç”µå­é‚®ä»¶æµ‹è¯•å¯¹äºä¸šåŠ¡æˆåŠŸè‡³å…³é‡è¦ï¼Œèƒ½å¤Ÿæå‡ç”µå­é‚®ä»¶çš„è¡¨ç°ã€‚åœ¨æµ‹è¯• Web åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»ä¸å¸Œæœ›å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œå› ä¸ºç°ä»£ç”µå­é‚®ä»¶æœåŠ¡ä½¿å¾—è‡ªåŠ¨åŒ–ç”µå­é‚®ä»¶æµ‹è¯•å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚é€šå¸¸ï¼Œç”µå­é‚®ä»¶æµ‹è¯•åŒ…æ‹¬éªŒè¯ç”µå­é‚®ä»¶å­—æ®µï¼ˆå‘ä»¶äººã€æ”¶ä»¶äººã€æŠ„é€ã€å¯†é€ã€ä¸»é¢˜ã€é™„ä»¶ï¼‰ã€HTML å†…å®¹ä»¥åŠç”µå­é‚®ä»¶ä¸­çš„é“¾æ¥ã€‚ç”µå­é‚®ä»¶æœåŠ¡è¿˜æ”¯æŒåƒåœ¾é‚®ä»¶æ£€æŸ¥å’Œè§†è§‰æ£€æŸ¥ã€‚\nå…¶æ ¸å¿ƒç›®æ ‡åœ¨äºå®ç°ç«¯åˆ°ç«¯æµ‹è¯•çš„æœ€åä¸€æ­¥ï¼Œç¡®ä¿å…¸å‹çš„ Web åº”ç”¨èƒ½å¤Ÿä»å¤´åˆ°å°¾å¾—åˆ°å…¨é¢æµ‹è¯•ã€‚\nä»¥ä¸€ä¸ªåœºæ™¯ä¸ºä¾‹ï¼Œç”¨æˆ·æ”¶åˆ°æ¥è‡ªç»„ç»‡çš„ç”µå­é‚®ä»¶é‚€è¯·ï¼Œå¯ä»¥æ˜¯é€šè¿‡å…¬å¸ä¸“æœ‰æœåŠ¡æˆ–ç¬¬ä¸‰æ–¹å¹³å°ï¼Œæ¯”å¦‚ LinkedIn é‚€è¯·ã€‚æ¥ç€ï¼Œç”¨æˆ·éªŒè¯ç”µå­é‚®ä»¶å†…å®¹ï¼Œæ¥å—é‚€è¯·ï¼Œå¹¶åŠ å…¥è¯¥ç»„ç»‡ã€‚éšåï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©ç¦»å¼€ç»„ç»‡ï¼Œæˆ–è€…è¢«ç®¡ç†å‘˜ç§»é™¤ï¼Œç„¶åå†æ¬¡æ”¶åˆ°å¦ä¸€å°ç”µå­é‚®ä»¶é€šçŸ¥ã€‚é€šè¿‡ç”µå­é‚®ä»¶æœåŠ¡ï¼Œè¿™ä¸€éœ€æ±‚çš„æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åœ¨çŸ­çŸ­å‡ ç§’é’Ÿå†…è‡ªåŠ¨å®Œæˆå’Œæ‰§è¡Œã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”µå­é‚®ä»¶æµ‹è¯•æ˜¯ SaaS æµ‹è¯•æ¶æ„çš„åŸºç¡€ï¼Œé€šè¿‡å…è®¸æ— çŠ¶æ€æµ‹è¯•æ¥å®ç°å¯ä¼¸ç¼©æ€§ï¼Œè¿™äº›æµ‹è¯•èƒ½å¤Ÿç‹¬ç«‹å¤„ç†å…¶çŠ¶æ€ï¼Œå¹¶èƒ½å¤ŸåŒæ—¶ç”±å¤šä¸ªå®ä½“æ‰§è¡Œã€‚è¯¦ç»†è®¨è®ºè¯·å‚é˜… æµ‹è¯•çŠ¶æ€ã€‚\nå‰è¨€ å¦‚æœä½ æ­£åœ¨ä½¿ç”¨Gmail æŠ€å·§æˆ–AWS Simple Email Serviceï¼Œå¹¶ä¸”è¿™äº›ç”¨ä¾‹åœ¨æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨çš„æƒ…å†µä¸‹èƒ½å¤Ÿæ»¡è¶³ä½ çš„æµ‹è¯•éœ€æ±‚ï¼Œé‚£ä¹ˆå¯èƒ½åªæœ‰topic 1å¯¹ä½ æ„Ÿå…´è¶£ã€‚\nå¸‚é¢ä¸Šæœ‰å¾ˆå¤šç”µå­é‚®ä»¶æµ‹è¯•è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠä¸å®ƒä»¬é›†æˆçš„æµ‹è¯•æ¡†æ¶çš„ç»„åˆã€‚åœ¨ä»£ç ç‰‡æ®µå’Œå®é™…ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Cypresså’ŒMailosaurï¼Œä½†è¿™äº›æ€æƒ³é€šå¸¸é€‚ç”¨äºä»»ä½•ç”µå­é‚®ä»¶æœåŠ¡å’Œæµ‹è¯•è‡ªåŠ¨åŒ–æ¡†æ¶çš„ç»„åˆã€‚\nåœ¨ä½¿ç”¨ Cypress ä¸ Mailosaur æ—¶ï¼Œæœ‰ä¸‰ç§æµ‹è¯•å¼€å‘æ–¹æ³•ï¼š\nåˆ©ç”¨ Cypress API æµ‹è¯•åŠŸèƒ½å®ç°Mailosaur APIï¼Œä½¿ç”¨cy.request()æˆ–cy.api()ã€‚åˆ©ç”¨æ’ä»¶å’Œè¾…åŠ©å·¥å…·æ„å»ºæµ‹è¯•å¥—ä»¶ã€‚\nåˆ©ç”¨Mailosaur çš„ Node åŒ…å¹¶ä½¿ç”¨cy.task()å®ç°ï¼Œè¯¥æ–¹æ³•å…è®¸åœ¨ Cypress å†…è¿è¡Œ Nodeã€‚\nä½¿ç”¨Cypress Mailosaur æ’ä»¶å¹¶å°†æ‰€æœ‰å¤æ‚æ€§æŠ½è±¡æ‰ï¼\nè¯·æŸ¥çœ‹cypress-mailosaur-recipeä»¥è·å–è¿™äº›æ–¹æ³•çš„å®é™…ç¤ºä¾‹ã€‚è¯·æ³¨æ„ï¼Œä½ å°†éœ€è¦å¯åŠ¨ä¸€ä¸ªæ–°çš„ Mailosaur è¯•ç”¨è´¦æˆ·å¹¶æ›¿æ¢è‡ªå·±çš„ç¯å¢ƒå˜é‡ã€‚\n(1) è§£é‡Š \u0026amp; ä»£ç ç¤ºä¾‹ - å¯ç”¨æ— çŠ¶æ€ã€å¯ä¼¸ç¼©çš„æµ‹è¯• åœ¨ä»»ä½•ç°ä»£ Web åº”ç”¨æµ‹è¯•ä¸­ï¼Œèƒ½å¤Ÿå®ç°å¯ä¼¸ç¼©çš„æ— çŠ¶æ€æµ‹è¯•æ˜¯è‡³å…³é‡è¦çš„ã€‚æˆ‘ä»¬è¿½æ±‚çš„æ˜¯é‚£äº›èƒ½å¤Ÿç‹¬ç«‹å¤„ç†å…¶çŠ¶æ€ï¼Œå¹¶èƒ½å¤ŸåŒæ—¶ç”± n ä¸ªå®ä½“æ‰§è¡Œçš„æµ‹è¯•ã€‚\nåœ¨æµ‹è¯• SaaS åº”ç”¨ç¨‹åºæ—¶ï¼Œé€šå¸¸ä¼šæ¶‰åŠè®¢é˜…ã€ç”¨æˆ·ã€ç»„ç»‡ç­‰é€šç”¨æ¦‚å¿µï¼ˆä¾‹å¦‚Slackï¼ŒCypress Dashboard Serviceç­‰ï¼‰ï¼Œå¾ˆå¤šç«¯åˆ°ç«¯å·¥ä½œæµå¯èƒ½ä¾èµ–äºæ‹¥æœ‰å”¯ä¸€ç”¨æˆ·ã€‚å¦åˆ™ï¼Œä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œå¹¶ä¸”å¯èƒ½ä¸å…¶ä»–åŒæ—¶è¿›è¡Œçš„æµ‹è¯•æ‰§è¡Œå‘ç”Ÿå†²çªã€‚è¿™ç§çº¦æŸå°†æµ‹è¯•è‡ªåŠ¨åŒ–é™åˆ¶åœ¨å®šæ—¶ä½œä¸šæˆ–æ‰‹åŠ¨è§¦å‘çš„ CI ä¸­ã€‚\nè§£å†³å”¯ä¸€ç”¨æˆ·é—®é¢˜çš„ä¸€äº›æ–¹æ³•åŒ…æ‹¬åˆ©ç”¨Gmail æŠ€å·§æˆ–AWS Simple Email Serviceã€‚å¦‚æœä½ åªæƒ³è¦å”¯ä¸€çš„ç”¨æˆ·è€Œä¸å¿…æ£€æŸ¥å®é™…çš„ç”µå­é‚®ä»¶å†…å®¹ï¼ˆå‘ä»¶äººã€æ”¶ä»¶äººã€æŠ„é€ã€å¯†é€ã€ä¸»é¢˜ã€é™„ä»¶ç­‰ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨æ— çŠ¶æ€æµ‹è¯•æ˜¯æ­£ç¡®çš„è·¯å¾„ã€‚\nç„¶è€Œï¼Œè¿™äº›æ–¹æ³•ä»ç„¶å¯èƒ½å­˜åœ¨é—®é¢˜ï¼›ä¾‹å¦‚ï¼Œä¸å­˜åœ¨çš„ç”µå­é‚®ä»¶å¯èƒ½å¯¼è‡´å›é€é‚®ä»¶åˆ°ä½ çš„äº‘æœåŠ¡ï¼Œè¿™å¯èƒ½ä¼šè®©äººå¤´ç–¼ä¸å·²ã€‚å¦‚æœä½ æƒ³è¦é¿å…è¿™äº›é—®é¢˜å¹¶åœ¨è‡ªåŠ¨åŒ–ä¸­æ£€æŸ¥å®é™…çš„ç”µå­é‚®ä»¶å†…å®¹ï¼Œç”µå­é‚®ä»¶æœåŠ¡æä¾›äº†æœ‰ä»·å€¼çš„åŠŸèƒ½ã€‚\nç”µå­é‚®ä»¶æœåŠ¡è¿˜å¯ä»¥é€šè¿‡æ›´å¿«åœ°æ¥æ”¶ç”µå­é‚®ä»¶ï¼Œåœ¨æµæ°´çº¿ä¸­æ›´å¿«åœ°è¿è¡Œæµ‹è¯•ï¼Œæ¶ˆè€—æ›´å°‘çš„ CI èµ„æºä»¥åŠå‡å°‘ç­‰å¾…æµ‹è¯•å®Œæˆçš„æ—¶é—´ï¼Œä¸ºæµ‹è¯•æ‰§è¡Œæ—¶é—´æä¾›æˆæœ¬èŠ‚çœã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ¯å¹´è¿è¡Œ 1000 ä¸ªæµæ°´çº¿ï¼Œå¹¶æ¯ä¸ªæµæ°´çº¿æ‰§è¡ŒèŠ‚çœ 3-4 ç§’ï¼Œç”µå­é‚®ä»¶æœåŠ¡å¯èƒ½å·²ç»é€šè¿‡æä¾›é¢å¤–çš„é€Ÿåº¦æ¥æ”¯ä»˜å…¶å¹´åº¦è®¢é˜…è´¹ç”¨ã€‚\nå®ç°å…·æœ‰å”¯ä¸€ç”µå­é‚®ä»¶çš„æ— çŠ¶æ€æµ‹è¯• å¦‚æœæ¯æ¬¡æµ‹è¯•æ‰§è¡Œéƒ½ä½¿ç”¨ä¸€ä¸ªæ–°çš„ã€å”¯ä¸€çš„ç”¨æˆ·ï¼Œå¹¶ä¸”å¯ä»¥å•ç‹¬éªŒè¯å‘é€ç»™è¿™ä¸ªå”¯ä¸€ç”¨æˆ·çš„ç”µå­é‚®ä»¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°æ— çŠ¶æ€æµ‹è¯•ã€‚å”¯ä¸€çš„å‰¯ä½œç”¨å°†ä»…å½±å“ç”µå­é‚®ä»¶æœåŠ¡çš„æ”¶ä»¶ç®±ï¼Œä½†å¦‚æœæµ‹è¯•åªé€šè¿‡å¼•ç”¨æ£€æŸ¥ç”µå­é‚®ä»¶å¹¶åœ¨æµ‹è¯•ç»“æŸåè¿›è¡Œæ¸…ç†ï¼Œç”µå­é‚®ä»¶æœåŠ¡çš„é‚®ç®±å°†ä¸å—å½±å“ã€‚\né€šè¿‡ Mailosaur å®ç°è¿™ä¸€ç‚¹éå¸¸å®¹æ˜“ï¼Œä»¥ä¸‹æ˜¯ä¸¤ç§æ–¹æ³•ï¼šMailosaur çš„ Node åŒ…æˆ–ä½¿ç”¨faker.jsåˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„å·¥å…·ã€‚\n// at cypress/plugins/mailosaur-tasks.js // generates a random email address // sample output: ojh788.\u0026lt;serverId\u0026gt;@mailosaur.io const createEmail = () =\u0026gt; mailosaurClient .servers .generateEmailAddress(envVars.MAILOSAUR_SERVERID); ); // our custom function at a helper file or commands file. The only difference is the defined prefixed name. // sample output: fakerJsName.\u0026lt;serverId\u0026gt;@mailosaur.io const createMailosaurEmail = randomName =\u0026gt; `${randomName}.${Cypress.env(\u0026#39;MAILOSAUR_SERVERID\u0026#39;)}@mailosaur.io`; (2) è§£é‡Š - åœ¨ç”µå­é‚®ä»¶ä¸­è¿›è¡Œä½•ç§æµ‹è¯•ä»¥åŠå¦‚ä½•è¿›è¡Œæµ‹è¯• é¦–å…ˆï¼Œè®©æˆ‘ä»¬è¯¦ç»†è¯´æ˜æˆ‘ä»¬éœ€è¦çš„è®¾ç½®ã€‚\næµ‹è¯•è®¾ç½®å’Œæ··åˆæ–¹æ³• Mailosaur Rest API ä½¿ç”¨ cy.request() å’Œ Mailosaur çš„ Node åŒ… ä½¿ç”¨ cy.task()\nMailosaur æä¾›äº†ä¸€ä¸ªnpm åŒ…ï¼Œå®é™…ä¸ŠAPI æ–‡æ¡£ä¸­çš„æ‰€æœ‰ Node ä»£ç ç¤ºä¾‹éƒ½å¯ä»¥è½¬æ¢ä¸ºcy.task()ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨cy.request()ä»é›¶å¼€å§‹å®ç° Mailosaur çš„ Rest APIã€‚\nMailosaur åœ¨ 2020 å¹´ä¸­å‘å¸ƒäº†Cypress Mailosaur æ’ä»¶ï¼Œå®ƒé€šè¿‡è¿™ä¸¤ç§æ–¹æ³•æŠ½è±¡å‡ºæ‰€æœ‰å¤æ‚æ€§ã€‚è¯·è·³åˆ°æœ€åæŸ¥çœ‹ä»£ç ç¤ºä¾‹å’Œæ¯”è¾ƒã€‚\nç¯å¢ƒå˜é‡ æˆ‘ä»¬å»ºè®®å°†ä»¥ä¸‹å€¼è®¾ç½®ä¸ºç¯å¢ƒå˜é‡ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ä»»ä½•ç”µå­é‚®ä»¶åœ°å€åˆ›å»ºä¸€ä¸ªå…è´¹è¯•ç”¨å¸æˆ·ï¼Œå¹¶ä» Mailosaur Web åº”ç”¨ç¨‹åºä¸­è·å–è¿™äº›å€¼ã€‚è¯•ç”¨å¸æˆ·çš„æœ‰æ•ˆæœŸä¸ºä¸¤å‘¨ã€‚\n\u0026#34;MAILOSAUR_SERVERID\u0026#34;: \u0026#34;******\u0026#34;, \u0026#34;MAILOSAUR_PASSWORD\u0026#34;: \u0026#34;******\u0026#34;, \u0026#34;MAILOSAUR_API_KEY\u0026#34;: \u0026#34;*******\u0026#34;, \u0026#34;MAILOSAUR_API\u0026#34;: \u0026#34;https://mailosaur.com/api\u0026#34;, \u0026#34;MAILOSAUR_SERVERNAME\u0026#34;: \u0026#34;user-configurable-server-name\u0026#34; æ¨¡å—åŒ– cy.task() ä½ å¯ä»¥å°†æ‰€æœ‰å®ç”¨å·¥å…·æ”¾åœ¨cypress/plugins/index.jsæ–‡ä»¶ä¸­ï¼Œå°±åƒåœ¨æ­¤ç¤ºä¾‹ä¸­ä¸€æ ·ã€‚æ›´æ•´æ´çš„æ–¹æ³•æ˜¯å°†æ‰€æœ‰ä¸ Mailosaur ç›¸å…³çš„ä»»åŠ¡æ”¾åœ¨å…¶è‡ªå·±çš„æ¨¡å—ä¸­ï¼Œå¹¶å°†å®ƒä»¬å¯¼å…¥åˆ°æ’ä»¶æ–‡ä»¶ä¸­ã€‚\n// cypress/plugins/index.js const task = require(\u0026#39;some-plugin/task\u0026#39;) const percyHealthCheck = require(\u0026#39;@percy/cypress/task\u0026#39;) // or any other plugin you may need const mailosaurTasks = require(\u0026#39;./mailosaur-tasks\u0026#39;) // our mailosaur module // This is a pattern to merge all Cypress tasks const all = Object.assign({}, percyHealthCheck, task, mailosaurTasks) module.exports = (on, config) =\u0026gt; { on(\u0026#39;task\u0026#39;, all) } //////// // cypress/plugins/mailosaur-tasks.js (this could be anywhere) // the npm package const MailosaurClient = require(\u0026#39;mailosaur\u0026#39;) // we used a static file for envVars. cypress.env.json file can cause issues in CI // There can be other solutions, do your best here. const envVars = require(\u0026#39;../../cypress.json\u0026#39;) const mailosaurClient = new MailosaurClient(envVars.MAILOSAUR_API_KEY) // replicate Mailosaur\u0026#39;s npm code from api docs // https://docs.mailosaur.com/docs/fetching-messages /** finds the most recent email message to the given email*/ const findEmailToUser = async (userEmail) =\u0026gt; { let message = await mailosaurClient.messages.get( envVars.MAILOSAUR_SERVERID, { sentTo: userEmail, }, { timeout: 25000 } ) // time to wait for an email to arrive return message } // other useful utilities can include the below. You can replicate them using the api docs. // checkServerName() // createEmail() // deleteAMessage(messageId) // listAllMessages() module.exports = { checkServerName, createEmail, findEmailToUser, listAllMessages, deleteAMessage } å…¶ä»–æœ‰ç”¨çš„è¾…åŠ©å‡½æ•°ï¼ŒMailosaur npm åŒ…ç›®å‰ä¼¼ä¹ä¸æä¾›ï¼ˆæ®æˆ‘ä»¬æ‰€çŸ¥ï¼‰ æˆ‘ä»¬å¯ä»¥å°† Rest API / cy.request()æ–¹æ³•ä¸ npm åŒ… / cy.task()æ–¹æ³•åè°ƒä¸€è‡´ï¼Œä»¥æ„å»ºæˆ‘ä»¬è‡ªå·±çš„å®ç”¨ç¨‹åºã€‚\n/** Given user email, returns the id of the email to that user. Good example of hybrid utility functions */ const getEmailId = (email) =\u0026gt; cy.task(\u0026#39;findEmailToUser\u0026#39;, email).its(\u0026#39;id\u0026#39;) /** Deletes 1 email message by message id. Can be useful if you want to delete the message after running the test. */ const deleteEmailById = (id) =\u0026gt; { return cy.request({ method: \u0026#39;DELETE\u0026#39;, url: `${Cypress.env(\u0026#39;MAILOSAUR_API\u0026#39;)}/messages/${id}`, headers: { // important detail authorization: Cypress.env(\u0026#39;MAILOSAUR_PASSWORD\u0026#39;), }, auth: { // important detail user: Cypress.env(\u0026#39;MAILOSAUR_API_KEY\u0026#39;), password: \u0026#39;\u0026#39;, // any pw or empty pw will do }, retryOnStatusCodeFailure: true, // because we can }) } /** Deletes the most recent email sent to the user. Useful for resetting state. */ export const deleteEmail = (email) =\u0026gt; getEmailId(email).then((id) =\u0026gt; deleteEmailById(id)) (3) ä»£ç ç¤ºä¾‹ - åœ¨ç”µå­é‚®ä»¶ä¸­è¿›è¡Œä½•ç§æµ‹è¯•ä»¥åŠå¦‚ä½•è¿›è¡Œæµ‹è¯• éªŒè¯ç”µå­é‚®ä»¶å­—æ®µï¼ˆå‘ä»¶äººã€æ”¶ä»¶äººã€æŠ„é€ã€å¯†é€ã€ä¸»é¢˜ã€é™„ä»¶ï¼‰ã€ç”µå­é‚®ä»¶ä¸­çš„ HTML å†…å®¹å’Œé“¾æ¥ã€‚\n// an invite goes out to the recipient from the sender... // in the cypress spec file \u0026gt; it block... cy.task(\u0026#39;findEmailToUser\u0026#39;, recipientEmail).then(emailContent =\u0026gt; { cy.wrap(emailContent).its(\u0026#39;from\u0026#39;)..\u0026lt;chain as needed\u0026gt;.should(\u0026#39;eq\u0026#39;, senderEmail); // from cy.wrap(emailContent).its(\u0026#39;to\u0026#39;)..\u0026lt;chain as needed\u0026gt;.should(..)// to cy.wrap(emailContent).its(\u0026#39;cc\u0026#39;)..\u0026lt;chain as needed\u0026gt;.should(..); // cc cy.wrap(emailContent).its(\u0026#39;subject\u0026#39;)..\u0026lt;chain as needed\u0026gt;.should(..); // subject // similar approach with attachments. // You can always end with ... .then(console.log) to take a look at the content // of you can check out the mailosaur email as JSON content, which makes everything easier! // cy.wrap(emailContent).then(console.log); // sample utilities to check assertions const html = () =\u0026gt; cy.wrap(emailContent).its(\u0026#39;html\u0026#39;); const htmlLinks = () =\u0026gt; html().its(\u0026#39;links\u0026#39;); const images = html().its(\u0026#39;images\u0026#39;); htmlLinks().should(..); // or chain further images().should(..); // note that you can use different styles of api assertions with Cypress // check out api testing examples at // https://github.com/cypress-io/cypress-example-recipes/tree/master/examples/blogs__e2e-api-testing // https://github.com/muratkeremozcan/cypressExamples/blob/master/cypress-api-testing/cypress/integration/firstTest.spec.js }); (4) è¿™ä¸ªå¼€é”€è¢«Cypress Mailosaur æ’ä»¶æŠ½è±¡æ‰äº† Mailosaur å›¢é˜Ÿåœ¨ 2020 å¹´ä¸­å‘å¸ƒäº†ä¸€ä¸ª Cypress æ’ä»¶ã€‚é€šè¿‡ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬æ— éœ€å¤åˆ¶ä»»ä½•å¤æ‚çš„ API å·¥å…·ï¼Œä¹Ÿæ— éœ€ä½¿ç”¨ Mailosaur npm åŒ…é€šè¿‡ cy.task è¿›è¡Œæ“ä½œï¼›åœ¨ç¬¬ï¼ˆ3ï¼‰èŠ‚ä¸­çœ‹åˆ°çš„å†…å®¹éƒ½æ˜¯ä¸å¿…è¦çš„ã€‚æ²¡æœ‰å¿…è¦åˆ›å»º cy.task å®ç”¨ç¨‹åºï¼Œç”šè‡³ä¸éœ€è¦æ··åˆå®ƒä»¬ã€‚ä½¿ç”¨ Cypress Mailosaur æ’ä»¶ï¼Œä½ åªéœ€ä½¿ç”¨ Mailosaur å›¢é˜Ÿä¸ºæˆ‘ä»¬åˆ›å»ºçš„è‡ªå®šä¹‰ Cypress å‘½ä»¤ã€‚\næˆ‘ä»¬åªéœ€å®‰è£…npm install cypress-mailosaur --save-devå¹¶åœ¨ cypress/support/index.js ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼š import 'cypress-mailosaur'ã€‚\nMailosaur æ’ä»¶æœ‰ä¸€äº›æ–¹ä¾¿çš„å‡½æ•°ï¼Œå¯ä»¥å¸®åŠ©ä½ æŠ½è±¡å‡ºå¤æ‚çš„éœ€æ±‚ã€‚ å®Œæ•´åˆ—è¡¨å¯ä»¥åœ¨ https://github.com/mailosaur/cypress-mailosaur ä¸Šæ‰¾åˆ°\nä»¥ä¸‹æ˜¯ä¸Šè¿°ä»£ç çš„æ’ä»¶ç‰ˆæœ¬ã€‚ä½¿ç”¨æ–¹å¼æœ‰äº›ç±»ä¼¼ï¼Œä½†æˆ‘ä»¬æ— éœ€å®ç°ä»»ä½• cy.task() å®ç”¨ç¨‹åºã€è‡ªå®šä¹‰å¸®åŠ©å‡½æ•°æˆ–æ··åˆå¸®åŠ©ç¨‹åºã€‚æˆ‘ä»¬è¿˜è·å¾—äº†æ–°çš„ã€æ˜“äºä½¿ç”¨çš„è¾…åŠ©å‡½æ•°ï¼Œå¯ä»¥æ— ç¼è¿è¡Œã€‚\nä½ å¯ä»¥åœ¨é“¾æ¥ä¸­æ‰¾åˆ°è¿™ä¸ªä»£ç å’Œä¸Šé¢çš„å·¥ä½œç‰ˆæœ¬ã€‚\nit(\u0026#39;uses the plugin to check the email content (no need for creating complex utilities with cy.task) \u0026#39;, function () { const userEmail = createEmail(internet.userName()); cy.task(\u0026#39;sendSimpleEmail\u0026#39;, userEmail); // an npm package to send emails, usually your app would do this // a convenient helper functions to list mesages cy.mailosaurListMessages(Cypress.env(\u0026#39;MAILOSAUR_SERVERID\u0026#39;)).its(\u0026#39;items\u0026#39;).its(\u0026#39;length\u0026#39;).should(\u0026#39;not.eq\u0026#39;, 0); // this helper command replaces the complex cy.task(\u0026#39;findEmailToUser\u0026#39;) utility we had to create cy.mailosaurGetMessage( Cypress.env(\u0026#39;MAILOSAUR_SERVERID\u0026#39;), { sentTo: userEmail }, // note from Jon at Mailosaur: // The get method looks for messages received within the last hour // if looking for emails existing before that, you have to add this. Optional otherwise // { receivedAfter: new Date(\u0026#39;2000-01-01\u0026#39;) } ).then(emailContent =\u0026gt; { // this part is the same cy.wrap(emailContent).its(\u0026#39;from\u0026#39;).its(0).its(\u0026#39;email\u0026#39;).should(\u0026#39;contain\u0026#39;, \u0026#39;test@nodesendmail.com\u0026#39;); cy.wrap(emailContent).its(\u0026#39;to\u0026#39;).its(0).its(\u0026#39;email\u0026#39;).should(\u0026#39;eq\u0026#39;, userEmail); cy.wrap(emailContent).its(\u0026#39;subject\u0026#39;).should(\u0026#39;contain\u0026#39;, \u0026#39;MailComposer sendmail\u0026#39;); }); // alternate approach to getting message by sent to\u0026#39; cy.mailosaurGetMessagesBySentTo(Cypress.env(\u0026#39;MAILOSAUR_SERVERID\u0026#39;), userEmail).then(emailItem =\u0026gt; { // the response is slightly different, but you can modify it to serve the same purpose const emailContent = emailItem.items[0]; cy.wrap(emailContent).its(\u0026#39;from\u0026#39;).its(0).its(\u0026#39;email\u0026#39;).should(\u0026#39;contain\u0026#39;, \u0026#39;test@nodesendmail.com\u0026#39;); cy.wrap(emailContent).its(\u0026#39;to\u0026#39;).its(0).its(\u0026#39;email\u0026#39;).should(\u0026#39;eq\u0026#39;, userEmail); cy.wrap(emailContent).its(\u0026#39;subject\u0026#39;).should(\u0026#39;contain\u0026#39;, \u0026#39;MailComposer sendmail\u0026#39;); }); // an easy to use bonus utility for checking spam score cy.mailosaurGetMessagesBySentTo(Cypress.env(\u0026#39;MAILOSAUR_SERVERID\u0026#39;), userEmail).its(\u0026#39;items\u0026#39;).its(0).its(\u0026#39;id\u0026#39;).then(messageId =\u0026gt; { // does convenient spam analysis cy.mailosaurGetSpamAnalysis(messageId).its(\u0026#39;score\u0026#39;).should(\u0026#39;eq\u0026#39;, 0); // you can observe the console output with a plain \u0026#34;cy.mailosaurGetSpamAnalysis(messageId); \u0026#34; and check for deeper assertions }) }); å‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-advanced-email-testing/","summary":"è¿™ç¯‡åšæ–‡æ˜¯ UI æµ‹è¯•æœ€ä½³å®è·µçš„è¿›é˜¶ç¯‡ï¼Œç¬¬ä¸‰ç¯‡ä»‹ç»é‚®ä»¶æµ‹è¯•ã€‚æ–‡ç« æ·±å…¥ç ”ç©¶äº† UI æµ‹è¯•ä¸­é‚®ä»¶æµ‹è¯•çš„é‡è¦æ€§ï¼Œä»¥åŠå¦‚ä½•æœ‰æ•ˆåœ°æµ‹è¯•ä¸é‚®ä»¶ç›¸å…³çš„åŠŸèƒ½ã€‚è¯»è€…å°†å­¦åˆ°å¦‚ä½•éªŒè¯é‚®ä»¶å‘é€ã€æ¥æ”¶å’Œå¤„ç†ç­‰åŠŸèƒ½ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é‚®ä»¶é€šä¿¡æ–¹é¢çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚é€šè¿‡å­¦ä¹ è¿™ä¸ªè¿›é˜¶å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å…¨é¢åœ°è¦†ç›– UI æµ‹è¯•ä¸­ä¸é‚®ä»¶ç›¸å…³çš„åœºæ™¯ï¼Œæé«˜æµ‹è¯•çš„å…¨é¢æ€§å’Œå‡†ç¡®æ€§ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„è¿›é˜¶ç¯‡ï¼ˆä¸‰ï¼‰ï¼šé‚®ä»¶æµ‹è¯•"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nç»„åˆæµ‹è¯• åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/advanced/combinatorial-testing.md\nç»„åˆæµ‹è¯•ä¸€æ®µç®€è¦è¯´æ˜ ç»„åˆæµ‹è¯• æ˜¯ä¸€ç§ç»è¿‡éªŒè¯çš„ã€æˆæœ¬è¾ƒä½çš„ã€æ›´ä¸ºæœ‰æ•ˆçš„è½¯ä»¶æµ‹è¯•æ–¹æ³•ã€‚ è¿™ç§æµ‹è¯•çš„å…³é”®æ€æƒ³æ˜¯ï¼Œå¹¶éæ¯ä¸ªå‚æ•°éƒ½å¯¹æ¯æ¬¡æ•…éšœéƒ½æœ‰å½±å“ï¼Œè€Œæ˜¯å¤§å¤šæ•°æ•…éšœæ˜¯ç”±ç›¸å¯¹è¾ƒå°‘çš„å‚æ•°ä¹‹é—´çš„ç›¸äº’ä½œç”¨å¼•èµ·çš„ã€‚ ä¸ä¼ ç»Ÿæ–¹æ³•ç›¸æ¯”ï¼Œæµ‹è¯•å‚æ•°ç»„åˆå¯ä»¥æ›´æœ‰æ•ˆåœ°æ£€æµ‹æ•…éšœã€‚ ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢NIST åœ¨ 1999 å¹´åˆ° 2004 å¹´è¿›è¡Œçš„ä¸€ç³»åˆ—ç ”ç©¶è¡¨æ˜ï¼Œå¤§å¤šæ•°è½¯ä»¶ç¼ºé™·å’Œæ•…éšœæ˜¯ç”±ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°å¼•èµ·çš„ï¼Œé€æ¸å‡å°‘åˆ°ç”±ä¸‰ä¸ªæˆ–æ›´å¤šå‚æ•°å¼•èµ·çš„ã€‚è¿™ä¸€å‘ç°è¢«ç§°ä¸ºâ€œäº¤äº’è§„åˆ™â€ï¼Œå¯¹è½¯ä»¶æµ‹è¯•å…·æœ‰é‡è¦æ„ä¹‰ï¼Œå› ä¸ºè¿™æ„å‘³ç€æµ‹è¯•å‚æ•°ç»„åˆå¯ä»¥æ¯”ä¼ ç»Ÿæ–¹æ³•æ›´æœ‰æ•ˆåœ°æ£€æµ‹æ•…éšœã€‚NIST å’Œå…¶ä»–æœºæ„æ”¶é›†çš„æ•°æ®è¡¨æ˜ï¼Œè½¯ä»¶æ•…éšœä»…ç”±å°‘æ•°å‡ ä¸ªå˜é‡çš„ç›¸äº’ä½œç”¨å¼•å‘ï¼ˆä¸è¶…è¿‡å…­ä¸ªï¼‰ã€‚æœ‰æ—¶ä½¿ç”¨æˆå¯¹ï¼ˆ2 è·¯ç»„åˆï¼‰æµ‹è¯•å¯ä»¥ä»¥è¾ƒä½çš„æˆæœ¬è·å¾—ç›¸å½“ä¸é”™çš„ç»“æœï¼Œé€šå¸¸ä¸ä½äº 60% çš„æ•…éšœè¦†ç›–ç‡ï¼Œä½†è¿™å¯èƒ½å¯¹äºå…³é”®ä»»åŠ¡çš„è½¯ä»¶æ¥è¯´å¯èƒ½ä¸è¶³å¤Ÿã€‚\n(1) ä»£ç ç¤ºä¾‹ â€“ äº§å“è´Ÿè´£äººé—®é¢˜ ä¸€ä½äº§å“è´Ÿè´£äººæ›¾æå‡ºä¸€ä¸ªé—®é¢˜ï¼š\n\u0026ldquo;ä»æœ€ä½³å®è·µæˆ–å®é™…è§’åº¦æ¥çœ‹ï¼Œä½ æ˜¯å¦åº”è¯¥åœ¨æ¯ç§å¯èƒ½çš„é…ç½®ä¸‹æµ‹è¯•ç³»ç»Ÿï¼Ÿ ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ Aã€Bã€Cã€Dã€E äº”ä¸ªåŠŸèƒ½ï¼Œå®¢æˆ· 1 æ‹¥æœ‰ A/Bï¼Œå®¢æˆ· 2 æ‹¥æœ‰ A/B/Cï¼Œå®¢æˆ· 3 æ‹¥æœ‰ A/Dï¼Œå®¢æˆ· 4 æ‹¥æœ‰ B/Dï¼Œå®¢æˆ· 5 æ‹¥æœ‰ A/B/C/D/E\u0026hellip;. ä½ æ˜¯å¦åº”è¯¥æµ‹è¯•æ¯ç§å¯èƒ½çš„åŠŸèƒ½ç»„åˆï¼Œè¿˜æ˜¯æµ‹è¯•æ¯ä¸ªåŠŸèƒ½å•ç‹¬ï¼Œå¦‚æœå®ƒä»¬åœ¨ç‹¬ç«‹æµ‹è¯•ä¸­èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå°±ç›¸ä¿¡å®ƒä»¬æ•´ä½“ä¸Šä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Ÿ\u0026rdquo;\n5 ä¸ªå®¢æˆ·å’Œ 5 ä¸ªåŠŸèƒ½ï¼Œè¯¦å°½æ— é—å°†éœ€è¦ 25 ä¸ªæµ‹è¯•ã€‚ åœ¨æè¿°çš„çº¦æŸæ¡ä»¶ä¸‹ï¼Œåªéœ€è¦ 14 ä¸ªæµ‹è¯•ã€‚ ä¸ºäº†æä¾›ä¸€ä¸ªä»£ç ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æè¿°è§„æ ¼çš„CTWedgeè„šæœ¬åŒ–ç»„åˆæ¨¡å‹ã€‚è¿˜æœ‰è®¸å¤šå…¶ä»–åˆ—åœ¨pairwise.orgä¸Šçš„ CT å·¥å…·ã€‚æˆ‘ä»¬ï¼ˆåœ¨è¥¿é—¨å­ï¼‰ä½¿ç”¨è¿‡çš„å…¶ä»–ä¸€äº›å·¥å…·åŒ…æ‹¬ACTså’ŒCAgenã€‚\nModel POquestion Parameters: features : {A, B, C, D, E} customer: {1, 2, 3, 4, 5} Constraints: # customer = 1 =\u0026gt; features = A || features = B # # customer = 2 =\u0026gt; features = A || features = B || features = C # # customer = 3 =\u0026gt; features = A || features = D # # customer = 4 =\u0026gt; features = B || features = D # # customer = 5 =\u0026gt; features = A || features = B || features = C || features = D || features = E # åœ¨è¿™é‡Œç²˜è´´è„šæœ¬ä»¥ç”Ÿæˆç»“æœ è¿™é‡Œã€‚\næµ‹è¯•çš„ç›®æ ‡æ˜¯æ£€éªŒå‚æ•°ä¹‹é—´çš„åŒå‘ï¼ˆæˆ–æ›´å¤šï¼‰ç›¸äº’ä½œç”¨ã€‚å½“åªæœ‰ä¸¤ä¸ªå‚æ•°æ—¶ï¼Œæ”¶ç›Šå¹¶ä¸å¤ªæ˜æ˜¾ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ç§ç©·ä¸¾çš„æ–¹æ³•ã€‚\nå¦‚æœå‚æ•°æ•°é‡è¶…è¿‡ä¸¤ä¸ªï¼Œå¯¹å®ƒä»¬ä¹‹é—´çš„åŒå‘äº¤äº’è¿›è¡Œè¦†ç›–å°†ç¡®ä¿æ‰¾åˆ°è¯¥é¢†åŸŸå¯èƒ½å­˜åœ¨çš„ 60-99% çš„æ‰€æœ‰æ½œåœ¨ç¼ºé™·ã€‚ä¸‰å‘äº¤äº’ä¸º 90%ï¼Œå››å‘ä¸º 95%ï¼Œäº”å‘ä¸º 97%ï¼Œå…­å‘ä¸º 100%ã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šè¿‡æ·»åŠ å¦ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º configurationï¼Œå¹¶å‡è®¾æœ‰ 5 ç§å¯èƒ½çš„é…ç½® / å‚æ•°å€¼ã€‚è¿™å°†ç”Ÿæˆä¸€ä¸ªåŒ…å« 125 ä¸ªæµ‹è¯•çš„è¯¦å°½å¥—ä»¶ã€‚\nModel POquestion Parameters: features : {A, B, C, D, E} customer: {1, 2, 3, 4, 5} configuration: {config1, config2, config3, config4, config5} Constraints: # customer = 1 =\u0026gt; features = A || features = B # # customer = 2 =\u0026gt; features = A || features = B || features = C # # customer = 3 =\u0026gt; features = A || features = D # # customer = 4 =\u0026gt; features = B || features = D # # customer = 5 =\u0026gt; features = A || features = B || features = C || features = D || features = E # å°†å…¶ç²˜è´´åˆ° CTWedge ä¸Šï¼Œè¿™å°†ç”Ÿæˆä¸€ä¸ªåŒ…å« 31 ä¸ªæµ‹è¯•çš„æµ‹è¯•å¥—ä»¶ã€‚å¦‚æœæ·»åŠ ä¸€äº›çº¦æŸï¼Œè¡¨æ˜æŸäº›ç‰¹æ€§ä¸åº”è¯¥ä¸æŸäº›é…ç½®ä¸€èµ·å·¥ä½œï¼Œç”šè‡³å¯ä»¥è¿›ä¸€æ­¥ç²¾ç®€ã€‚\nè¯·æ³¨æ„ï¼Œç»„åˆæµ‹è¯•çš„å»ºæ¨¡å¯ä»¥å¹¶ä¸”ç¡®å®åŒ…å«ç­‰ä»·åˆ†åŒºã€è¾¹ç•Œå€¼åˆ†æå’Œå…¶ä»–æŠ€æœ¯ã€‚æ¨¡å‹è¶Šå‡†ç¡®ï¼Œæµ‹è¯•å¥—ä»¶çš„æ•…éšœæ£€æµ‹èƒ½åŠ›å°±è¶Šå¼ºã€‚\n(2) ä»£ç ç¤ºä¾‹ â€“ NASA çš„å¼€å…³æ¿å…±æœ‰ 34 ä¸ªå¼€å…³ ä»¥ NASA çš„ä¸€ä¸ªä¾‹å­ä¸ºå‚è€ƒï¼Œæœ‰ 34 ä¸ªå¼€å…³ï¼Œæ¯ä¸ªå¼€å…³å¯ä»¥å¤„äºæ‰“å¼€æˆ–å…³é—­çš„çŠ¶æ€ã€‚è¦è¿›è¡Œè¯¦å°½çš„æµ‹è¯•ï¼Œæœ‰ 170 äº¿ç§å¯èƒ½çš„ç»„åˆæ–¹å¼ã€‚\nä¸å¿…æµ‹è¯•æ‰€æœ‰çš„ 2^34 ç§å¯èƒ½æ€§ã€‚é€šè¿‡ä½¿ç”¨ç»„åˆæµ‹è¯•è¿›è¡Œå»ºæ¨¡ï¼Œä½ å¯ä»¥æ ¹æ®é£é™©åšå‡ºç»è¿‡è®¡ç®—çš„å†³ç­–ã€‚\nModel NASAswitches Parameters: switch1: Boolean switch2: Boolean switch3: Boolean switch4: Boolean switch5: Boolean switch6: Boolean switch7: Boolean switch8: Boolean switch9: Boolean switch10: Boolean switch11: Boolean switch12: Boolean switch13: Boolean switch14: Boolean switch15: Boolean switch16: Boolean switch17: Boolean switch18: Boolean switch19: Boolean switch20: Boolean switch21: Boolean switch22: Boolean switch23: Boolean switch24: Boolean switch25: Boolean switch26: Boolean switch27: Boolean switch28: Boolean switch29: Boolean switch30: Boolean switch31: Boolean switch32: Boolean switch33: Boolean switch34: Boolean åœ¨ CTWedge ä¸­é€šè¿‡ä¸‹æ‹‰èœå•å¼€å…³æµ‹è¯•çš„ç›¸äº’ä½œç”¨æ¬¡æ•°ã€‚\n14 æ¬¡æµ‹è¯•ï¼šé€šè¿‡å¼€å…³ä¹‹é—´çš„ 2 æ¬¡ç›¸äº’ä½œç”¨å¼•èµ·çš„æ•…éšœ - å¯æ ¹æ®äº§å“æ‰¾åˆ° 60-99% çš„æ‰€æœ‰æ½œåœ¨æ•…éšœ 33 æ¬¡æµ‹è¯•ï¼šé€šè¿‡å¼€å…³ä¹‹é—´çš„ 3 æ¬¡ç›¸äº’ä½œç”¨å¼•èµ·çš„æ•…éšœ - å¯æ ¹æ®äº§å“æ‰¾åˆ° 90-99% çš„æ‰€æœ‰æ½œåœ¨æ•…éšœ 85 æ¬¡æµ‹è¯•ï¼šé€šè¿‡å¼€å…³ä¹‹é—´çš„ 4 æ¬¡ç›¸äº’ä½œç”¨å¼•èµ·çš„æ•…éšœ - å¯æ ¹æ®äº§å“æ‰¾åˆ° 95-99% çš„æ‰€æœ‰æ½œåœ¨æ•…éšœ 220 æ¬¡æµ‹è¯•ï¼šé€šè¿‡å¼€å…³ä¹‹é—´çš„ 5 æ¬¡ç›¸äº’ä½œç”¨å¼•èµ·çš„æ•…éšœ - å¯æ‰¾åˆ°è¶…è¿‡ 99% çš„æ‰€æœ‰æ½œåœ¨æ•…éšœ 538 æ¬¡æµ‹è¯•ï¼šé€šè¿‡å¼€å…³ä¹‹é—´çš„ 6 æ¬¡ç›¸äº’ä½œç”¨å¼•èµ·çš„æ•…éšœ - å¯æ‰¾åˆ°æ‰€æœ‰æ½œåœ¨æ•…éšœçš„ 100% (2) ä»£ç ç¤ºä¾‹ - è¥¿é—¨å­æ¥¼å®‡æ“ä½œå‘˜ CI é…ç½® å‚è€ƒä¸Šé¢çš„å¹»ç¯ç‰‡é“¾æ¥æˆ–ç›´æ’­è§†é¢‘ä»¥è·å–æœ‰å…³å¦‚ä½•ä½¿ç”¨CAMetricsæµ‹é‡ç»„åˆè¦†ç›–ç‡çš„è¯¦ç»†è¯´æ˜ã€‚åŸºæœ¬ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ç»„åˆæµ‹è¯•å·¥å…·ç”Ÿæˆä¸€ä¸ª CSV æ–‡ä»¶ï¼Œç„¶åå°†å…¶æ‹–æ”¾åˆ° CAMetrics ä¸­ã€‚ä¹‹åï¼ŒCAMetrics å¯ä»¥ä¸ºä½ æä¾›å„ç§ç»„åˆè¦†ç›–ç‡æŠ¥å‘Šã€‚\nè¯·æ³¨æ„ï¼Œå°† CSV è½¬æ¢ä¸º JSON éå¸¸ç®€å•ï¼Œç„¶åå¯ä»¥ä½¿ç”¨ JSON æ–‡ä»¶åœ¨æ‰€é€‰çš„ä»»ä½•æµ‹è¯•æ¡†æ¶ä¸­è¿›è¡Œæ•°æ®é©±åŠ¨æµ‹è¯•ã€‚\nModel CI Parameters: deployment_UI : { branch, development, staging } deployment_API: { development, staging } spec_suite: { ui_services_stubbed, ui_services, ui_services_hardware, spot_check} browser: { chrome, electron, firefox } Constraints: // one extra constraint for firefox spot checks # browser=firefox \u0026lt;=\u0026gt; spec_suite=spot_check # // on staging, run all tests # spec_suite=ui_services_hardware \u0026lt;=\u0026gt; deployment_API=staging # // match dev vs dev, staging vs staging, and when on staging use Chrome # deployment_UI=development =\u0026gt; deployment_API=development # # deployment_UI=staging =\u0026gt; deployment_API=staging # # deployment_UI=staging \u0026amp;\u0026amp; deployment_API=staging =\u0026gt; browser=chrome # // when on branch, stub the services # deployment_UI=branch =\u0026gt; spec_suite=ui_services_stubbed # // do not stub the services when on UI development # deployment_UI=development =\u0026gt; spec_suite!=ui_services_stubbed # ç»„åˆæµ‹è¯•å‚è€ƒèµ„æ–™å’Œå»¶ä¼¸é˜…è¯» è‡ªåŠ¨åŒ–ç»„åˆæµ‹è¯•è½¯ä»¶\nå¹»ç¯ç‰‡ 16-50ï¼šæ¢è®¨è‡ªåŠ¨åŒ–å’Œç»„åˆçºªå¾‹åœ¨è¾…åŠ©æ¢ç´¢æ€§æµ‹è¯•æ–¹é¢çš„åº”ç”¨\nè¥¿é—¨å­å·¥ä¸šå…¬å¸å»ºç­‘æŠ€æœ¯éƒ¨å®é™…ç»„åˆæµ‹è¯•æ–¹æ³•çš„åº”ç”¨\nç°ä»£ Web å¼€å‘ä¸­ç»„åˆæµ‹è¯•çš„å·¥ä¸šç ”ç©¶\nåœ¨å¤§å‹ç»„ç»‡ä¸­å¼•å…¥ç»„åˆæµ‹è¯•\nç»„åˆç­–ç•¥çš„è¾“å…¥å‚æ•°å»ºæ¨¡\nç»„åˆæ¨¡å‹ä¸­çš„å¸¸è§æ¨¡å¼\nç­‰æ•ˆç±»å’Œä¸¤å±‚è¦†ç›–é˜µçš„é«˜æ•ˆéªŒè¯å’ŒåŒæ—¶æµ‹è¯•\næ€§èƒ½æµ‹è¯• åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/advanced/performance-testing.md\næ€§èƒ½æµ‹è¯•ä¸€æ®µç®€è¦è¯´æ˜ è™½ç„¶æ€§èƒ½æµ‹è¯•æ˜¯ä¸€ä¸ªåºå¤§çš„è¯é¢˜ï¼Œä½†ä½œä¸º Web å¼€å‘è€…ï¼Œæˆ‘ä»¬å¯ä»¥è¿…é€Ÿä»å…¶æ ¸å¿ƒåŸåˆ™ä¸­è·ç›Šï¼Œä»¥æå‡ç”¨æˆ·ä½“éªŒã€æ»¡è¶³åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚ï¼ˆNFRsï¼‰ï¼Œå¹¶æ£€æµ‹å¯èƒ½æ³„æ¼åˆ°ç”Ÿäº§ç¯å¢ƒä¸­çš„ä¸æ˜ç¡®ç³»ç»Ÿé—®é¢˜ã€‚\n(1) é€šè¿‡ Lighthouse ç¡®ä¿ç”¨æˆ·ä½“éªŒ ä½œä¸º Web å¼€å‘è€…ï¼Œæˆ‘ä»¬æœ€å…³å¿ƒçš„æ˜¯ç”¨æˆ·å¯¹æ€§èƒ½çš„æ„ŸçŸ¥ã€‚è°¢å¤©è°¢åœ°ï¼ŒGoogle å·²ç»è®©è¿™å˜å¾—ç®€å•ï¼Œå¹¶ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹æƒå¨è¯„ä¼°æˆ‘ä»¬ Web åº”ç”¨ç¨‹åºçš„å·¥å…· - Lighthouseã€‚\n\u0026ldquo;Lighthouse æ˜¯ä¸€ä¸ªç”¨äºæé«˜ç½‘é¡µè´¨é‡çš„å¼€æºè‡ªåŠ¨åŒ–å·¥å…·ã€‚ä½ å¯ä»¥å¯¹ä»»ä½•ç½‘é¡µè¿è¡Œå®ƒï¼Œæ— è®ºæ˜¯å…¬å¼€çš„è¿˜æ˜¯éœ€è¦èº«ä»½éªŒè¯çš„ã€‚å®ƒå¯ä»¥è¿›è¡Œæ€§èƒ½ã€å¯è®¿é—®æ€§ã€æ¸è¿›å¼ Web åº”ç”¨ã€SEO ç­‰æ–¹é¢çš„å®¡è®¡ã€‚\u0026rdquo;\nåœ¨è¿™ä¸ªè¯é¢˜ä¸­ï¼Œæˆ‘ä»¬åªå…³æ³¨æ€§èƒ½ï¼Œä½†ä½ ä¹Ÿåº”è¯¥è€ƒè™‘ä» Lighthouse çš„å®¡è®¡ä¸­è·å¾—å…³äºæ¸è¿›å¼ Web åº”ç”¨ã€å¯è®¿é—®æ€§ã€æœç´¢å¼•æ“ä¼˜åŒ–å’Œæœ€ä½³å®è·µçš„è¯„ä¼°ã€‚\nå…¥é—¨å¾ˆç®€å•ï¼šChrome \u0026gt; å¼€å‘è€…å·¥å…· \u0026gt; å®¡è®¡ \u0026gt; Lighthouseã€‚ç„¶åï¼Œç”ŸæˆæŠ¥å‘Šã€‚å®ƒä¼šæ˜¾ç¤ºå¦‚ä¸‹ï¼Œå¹¶ä¸ºä½ æä¾›æœ‰å…³å¦‚ä½•æ”¹å–„ç”¨æˆ·ä½“éªŒçš„è¯¦ç»†æŒ‡å—ã€‚\nä¸€æ—¦è¿›è¡Œäº†æ”¹è¿›å¹¶è¾¾æˆäº†åŸºçº¿è¯„çº§ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°† Lighthouse çº³å…¥æ‚¨çš„ CI æ¥é˜²æ­¢å›å½’ã€‚\nå°† Lighthouse æ·»åŠ ä¸º node_moduleï¼›npm i -D lighthouse æˆ– yarn add --dev lighthouseã€‚ å‚è€ƒ Lighthouse Git å­˜å‚¨åº“ ä¸Šçš„å·¥ä½œæµç¤ºä¾‹ã€‚ é˜²æ­¢æ€§èƒ½è¯„çº§ï¼ˆå’Œ/æˆ–å…¶ä»–è¯„çº§ï¼‰åœ¨å¼€å‘äººå‘˜æäº¤ä»£ç æ—¶å‡ºç°å›å½’ï¼ ä½¿ç”¨ Cypress é›†æˆ Lighthouse å¦‚æœä½ æ˜¯ Cypress ç”¨æˆ·ï¼Œé€šè¿‡ cypress-audit æ’ä»¶ï¼Œä½ å¯ä»¥åœ¨ Cypress æµ‹è¯•ä¸­æ‰§è¡Œ Lighthouse å®¡è®¡ï¼Œä»¥åŠ Pa11y è¿›è¡Œè‡ªåŠ¨åŒ–çš„å¯è®¿é—®æ€§æµ‹è¯•ã€‚\né™¤äº†é€šå¸¸çš„æ’ä»¶è®¾ç½®ä¹‹å¤–ï¼Œä½ å¯èƒ½éœ€è¦è§£å†³ä½ çš„åº”ç”¨ç¨‹åºçš„è·¨åŸŸé—®é¢˜ï¼Œç›´åˆ° Cypress å®˜æ–¹æ”¯æŒå®ƒã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¦æœ‰å†…è”è¯´æ˜çš„ç¤ºä¾‹æµ‹è¯•ã€‚\n// Pass in optional configuration parameters for the Cypress test: // you may need to increase default timeout for the overall task, if you have a slow app. Mind that Lighthouse is only for Chromium based browsers describe(\u0026#39;Lighthouse audit \u0026#39;, { taskTimeout: 90000, browser: \u0026#39;chrome\u0026#39; }, () =\u0026gt; { before(() =\u0026gt; { // if you are using programmatic login, you might not need to use the cy.forceVisit(\u0026#39;/\u0026#39;) workaround for cross-origin (linked above) cy.login(Cypress.env(\u0026#39;USERNAME\u0026#39;), Cypress.env(\u0026#39;PASSWORD\u0026#39;)); }); // thresholds is the first argument to cy.lighthouse(), most of the performance configuration is done here. // a complete list of Lighthouse parameters to use as thresholds can be found at https://github.com/mfrachet/cypress-audit/blob/master/docs/lighthouse.md // for an explanation of the parameters, refer to https://web.dev/lighthouse-performance/ const thresholds = { \u0026#39;first-contentful-paint\u0026#39;: 20000, \u0026#39;largest-contentful-paint\u0026#39;: 35000, \u0026#39;first-meaningful-paint\u0026#39;: 20000, \u0026#39;speed-index\u0026#39;: 25000, interactive: 40000, performance: 5, accessibility: 50, \u0026#39;best-practices\u0026#39;: 50, seo: 50, pwa: 20 }; // the 2nd, and optional argument to cy.lighthouse() replicates Lighthouse CLI commands https://github.com/GoogleChrome/lighthouse#cli-options const desktopConfig = { formFactor: \u0026#39;desktop\u0026#39;, screenEmulation: { disabled: true } }; // your app may need this beforeEach and afterEach workaround for cross-origin (linked above) beforeEach(() =\u0026gt; { cy.restoreLocalStorage(); // Preserve Cookies between tests Cypress.Cookies.defaults({ preserve: /[\\s\\S]*/ }); }); afterEach(() =\u0026gt; { cy.saveLocalStorage(); }); it(\u0026#39;should pass audit for main page \u0026#39;, () =\u0026gt; { cy.lighthouse(thresholds, desktopConfig); }); it(\u0026#39;should pass audit for another page\u0026#39;, () =\u0026gt; { cy.forceVisit(\u0026#39;anotherUrl\u0026#39;); cy.lighthouse(thresholds, desktopConfig); }); }); // Commands for working around cross origin, if needed // -- Save localStorage between tests let LOCAL_STORAGE_MEMORY = {}; Cypress.Commands.add(\u0026#39;saveLocalStorage\u0026#39;, () =\u0026gt; { Object.keys(localStorage).forEach(key =\u0026gt; { LOCAL_STORAGE_MEMORY[key] = localStorage[key]; }); }); Cypress.Commands.add(\u0026#39;restoreLocalStorage\u0026#39;, () =\u0026gt; { Object.keys(LOCAL_STORAGE_MEMORY).forEach(key =\u0026gt; { localStorage.setItem(key, LOCAL_STORAGE_MEMORY[key]); }); }); // -- Visit multiple domains in one test Cypress.Commands.add(\u0026#39;forceVisit\u0026#39;, url =\u0026gt; { cy.window().then(win =\u0026gt; win.open(url, \u0026#39;_self\u0026#39;)); }); (2) æ€§èƒ½ä½œä¸ºä¸€ç§éåŠŸèƒ½æ€§éœ€æ±‚å’Œ Kano æ¨¡å‹ æˆ‘ä»¬å¯ä»¥é€šè¿‡Kano æ¨¡å‹å¼€å§‹å»ºç«‹å¯¹æ€§èƒ½éœ€æ±‚çš„ç†è§£ã€‚\n\u0026ldquo;Kano æ¨¡å‹æ˜¯åœ¨ 1980 å¹´ä»£ç”±æ—¥æœ¬å­¦è€…ç‹©é‡çºªæ˜æ•™æˆå¼€å‘çš„äº§å“å¼€å‘å’Œå®¢æˆ·æ»¡æ„åº¦ç†è®ºï¼Œå°†å®¢æˆ·åå¥½åˆ†ä¸ºäº”ç±»ã€‚\u0026rdquo;\nä»é«˜å±‚æ¬¡ä¸Šçœ‹ï¼Œå¡è¯ºæ¨¡å‹æ€»ç»“äº†æ€§èƒ½ç‰¹æ€§æ˜¯æ ‡å‡†è¦æ±‚ï¼Œæ˜¯ä»»ä½•ç«äº‰æ€§äº§å“æ‰€æœŸæœ›çš„ã€‚è¿™ä¸æˆ‘ä»¬ä½¿ç”¨ Lighthouse çš„æ–¹å¼é‡å ï¼›é€šè¿‡å®ƒï¼Œæˆ‘ä»¬ç¡®ä¿æ»¡è¶³å®¢æˆ·åå¥½ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬ä¸ä¼šå›é€€ã€‚\nåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å·²ç»æ»¡è¶³äº†æ˜ç¡®è¯´æ˜çš„æ€§èƒ½è¦æ±‚ã€‚ç„¶è€Œï¼Œåœ¨å¤æ‚çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„éåŠŸèƒ½æ€§éœ€æ±‚ï¼ˆNFRsï¼‰ã€‚ä½†æ˜¯ï¼Œä»€ä¹ˆæ˜¯ NFRs å‘¢ï¼Ÿä¸‹é¢æ˜¯å®ƒä»¬åœ¨ä¸€ç¥ä¹‹ä¸‹çš„é«˜å±‚æ¬¡è§†å›¾ - æ¥è‡ªåŒé‡æ ‡å‡†çš„ISO/IEC 25010 äº§å“è´¨é‡æ¨¡å‹ã€‚\nåœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äº NFRs å¦‚ä½•å¸®åŠ©æˆ‘ä»¬è¿›è¡ŒéåŠŸèƒ½æ€§èƒ½æµ‹è¯•çš„æ–¹æ³•ã€‚\n(3) æ€§èƒ½æµ‹è¯•çš„ç±»å‹ ä¸ºäº†å®é™…åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†éåŠŸèƒ½æ€§èƒ½æµ‹è¯•åˆ†ä¸º 3 ä¸ªç±»åˆ«\nLoad è´Ÿè½½æµ‹è¯• Spike å°–å³°æµ‹è¯• Endurance è€ä¹…æµ‹è¯• è¿™å¼ å›¾æ€»ç»“äº†å®ƒä»¬çš„ä¸Šä¸‹æ–‡ï¼š\nå…³äºåŸºå‡†æµ‹è¯•å’Œå‹åŠ›æµ‹è¯•çš„é¢å¤–è¯´æ˜: æœ¬è´¨ä¸Šï¼ŒåŸºå‡†æµ‹è¯•å½’ç»“ä¸ºé€æ­¥çš„æ­¥éª¤ï¼Œå› ä¸ºæˆ‘ä»¬é€æ¸äº†è§£æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œè¿™æˆä¸ºäº†åˆå§‹å·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ï¼›\u0026ldquo;æˆ‘çš„ç³»ç»Ÿå·²ç»å´©æºƒäº†å—ï¼Ÿæ²¡æœ‰ï¼Ÿé‚£æˆ‘å†å¢åŠ ä¸€ç‚¹\u0026rdquo;ã€‚è€Œå‹åŠ›æµ‹è¯•ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åšå¾—è¿‡ç«äº†ã€‚\né‚£ä¹ˆå¯æ‰©å±•æ€§æµ‹è¯•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ˜¯ç›¸å…³çš„ï¼›åŒºåˆ«åœ¨äºç³»ç»Ÿä½•æ—¶å¼€å§‹ä»¥ä¸ä»¤äººæ»¡æ„çš„æ–¹å¼ä¸å“åº”çš„è¯„ä¼°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·çš„æ–¹æ³•è¶³å¤Ÿæ¥è¿‘ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è´Ÿè½½æµ‹è¯•ä¸­åˆ†æå›¾è¡¨æ—¶å®ç°ã€‚\nè¿™æ˜¯å¯æ‰©å±•æ€§æµ‹è¯•æ„å›¾çš„é«˜å±‚æ¬¡å›¾ï¼š\n(4) ä½¿ç”¨ k6-loadImpact è¿›è¡Œæ€§èƒ½æµ‹è¯•çš„å®é™…åº”ç”¨ k6-loadImpactåœ¨ Web å¼€å‘é¢†åŸŸæœ‰ä¸¤ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ã€‚\nä½¿ç”¨ JSï¼ˆES6ï¼‰ ä¸“ä¸º CI æ„å»º é¢å¤–çš„å¥½å¤„ï¼šå¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨ Postmanï¼Œä½ å¯ä»¥è½»æ¾åœ°å°†è¿™äº›æµ‹è¯•è½¬æ¢ä¸º k6ã€‚ K6 å¯ä»¥ è¿›è¡Œ DOM æµ‹è¯•ï¼Œä½†æˆ‘ä»¬è®¤ä¸º Lighthouse å·²ç»å¤„ç†äº†è¿™æ–¹é¢çš„é—®é¢˜ã€‚K6 çœŸæ­£å¼ºå¤§çš„åœ°æ–¹åœ¨äºæµ‹è¯• API æ—¶ã€‚\nä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ä½¿ç”¨ k6 çš„å¿«é€Ÿå…¥é—¨ç¤ºä¾‹ã€‚ è¿™äº›ç¤ºä¾‹ä»éå¸¸ç®€å•çš„å¼€å§‹ï¼Œæ—¨åœ¨å¿«é€Ÿå»ºç«‹ç†è§£ã€‚å®ƒä»¬å·²ç»å‡†å¤‡å¥½ç›´æ¥è¿è¡Œå’Œè°ƒæ•´ã€‚æˆ‘ä»¬å°†ä¸ä¼šåœ¨è¿™é‡Œé‡å¤è¿™äº›çŸ¥è¯†ã€‚\nç›¸åï¼Œåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¦‚è¿° k6 æµ‹è¯•çš„æ¦‚è§ˆï¼Œå¹¶ç¨åå±•ç¤ºä¸€ä¸ªä»£ç ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•é…ç½® k6 ä»¥é€‚åº”ä¸åŒç±»å‹çš„æ€§èƒ½æµ‹è¯•ã€‚\n// k6 lifecycle overview: // 1. init code -\u0026gt; runs once // this is where we configure the type of performance testing (there are also // additional options we do not cover here) export let options = { // there will be 1 virtual user vus: 1, // default function() will execute 1 time. This simple config // is best when trying to get things to work iterations: 1, } // 2. (optional) setup code -\u0026gt; runs once export function setup() { // for example getting a token so you can run API tests in the default // function that comes in (3) virtual user code // what gets returned from this function is passed as an argument to the next // function. For example: `token` return getTokenForUser(); } // 3. virtual user code -\u0026gt; runs once or many times based on // `export let options = { ... } ` export default function(token) { // http.get is a k6 function that hits a URL with optional test parameters // note that we do not need a token for this url http.get(\u0026#34;http://test.loadimpact.com\u0026#34;); } // 4. (optional) teardown code -\u0026gt; runs once export function teardown(data) { // this is in case you need to clean up, for instance if failed test may // leave residue an impact state } è€ä¹…æµ‹è¯•é…ç½®ï¼š\nexport let options = { // endurance test for 30 seconds with 50 virtual users. Adds users immediately vus: 50, duration: \u0026#34;30s\u0026#34;, // alternative to duration, you can specify the exact number of iterations // the test will run // iterations: 500, } è´Ÿè½½æµ‹è¯•é…ç½®ï¼š\nexport let options = { // for 15 seconds ramps up 10 users, adds users gradually // adds a total of 40 users in the next 15 seconds, and up to 50 in the next // 30 seconds.. // lowers down the users to 10 and 5 in the next 15 second iterations stages: [ { duration: \u0026#34;15s\u0026#34;, target: 10 }, { duration: \u0026#34;15s\u0026#34;, target: 40 }, { duration: \u0026#34;30s\u0026#34;, target: 50 }, { duration: \u0026#34;15s\u0026#34;, target: 10 }, { duration: \u0026#34;15s\u0026#34;, target: 5 }, ] } å°–é”‹æµ‹è¯•é…ç½®ï¼š\nexport let options = { // starts slow and builds up the load rapidly, and then drops the load stages: [ { duration: \u0026#34;5s\u0026#34;, target: 1 }, { duration: \u0026#34;5s\u0026#34;, target: 5 }, { duration: \u0026#34;5s\u0026#34;, target: 25 }, { duration: \u0026#34;3s\u0026#34;, target: 200 }, { duration: \u0026#34;3s\u0026#34;, target: 20 }, { duration: \u0026#34;3s\u0026#34;, target: 10 }, { duration: \u0026#34;3s\u0026#34;, target: 5 }, { duration: \u0026#34;3s\u0026#34;, target: 1 }, ] } æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œstages æ˜¯é…ç½®æ€§èƒ½æµ‹è¯•ç±»å‹çš„å®ç”¨å·¥å…·ã€‚\næˆ‘ä»¬å¦‚ä½•åˆ†ææµ‹è¯•ç»“æœï¼Ÿ K6 æä¾›äº†ä¸€ä¸ªç®€å•çš„CLI è¾“å‡ºã€‚æˆ‘ä»¬è®¤ä¸ºè¿™é‡Œæœ€é‡è¦çš„ä¸¤ä¸ªé«˜çº§æ•°å€¼æ˜¯ http_req_durationï¼Œå®ƒè¯¦ç»†è¯´æ˜äº†å“åº”æŒç»­æ—¶é—´ï¼Œä»¥åŠ http_reqï¼Œå®ƒæ˜¾ç¤ºå‘é€çš„è¯·æ±‚æ•°é‡ã€‚å¦‚æœè¿™äº›æ•°å€¼åœ¨å¯æ¥å—çš„èŒƒå›´å†…ï¼ŒCLI å°±è¾¾åˆ°äº†å…¶ç›®çš„ã€‚\nå¦‚æœéœ€è¦è¿›è¡Œæ›´æ·±å…¥çš„è¯Šæ–­ï¼Œå›¾å½¢åŒ–çš„insightséå¸¸æœ‰ä»·å€¼ã€‚åœ¨è¿™æ ·çš„å›¾è¡¨ä¸­ï¼Œå…³é”®æ˜¯ å“åº”æ—¶é—´ å’Œ è¯·æ±‚é€Ÿç‡ è·Ÿéš è™šæ‹Ÿç”¨æˆ· çš„è¶‹åŠ¿ã€‚ä»»ä½•è¶‹åŠ¿ä¸Šçš„å˜åŒ–éƒ½å¯èƒ½æç¤ºæ½œåœ¨é—®é¢˜ã€‚\n(5) é€šè¿‡æ€§èƒ½æµ‹è¯•æ¥é˜²æ­¢ä¸ç¨³å®šçš„é—®é¢˜è¿›å…¥ç”Ÿäº§ç¯å¢ƒ å¯å‚è€ƒç« èŠ‚ ä¸ç¨³å®šçš„æµ‹è¯• \u0026gt; ç¬¬ä¸‰æ­¥ï¼šè¯†åˆ«é›¶æ˜Ÿçš„ç³»ç»Ÿé—®é¢˜ - ä¸ç¨³å®šçš„ç³»ç»Ÿ\næ€§èƒ½æµ‹è¯•å‚è€ƒèµ„æ–™å’Œå»¶ä¼¸é˜…è¯» Lighthouse æ–‡æ¡£\nLighthouse ä»£ç åº“\nKano æ¨¡å‹\nISO/IEC 25010 äº§å“è´¨é‡æ¨¡å‹\nk6-loadImpact æ–‡æ¡£\nä½¿ç”¨ K6 çš„å¿«é€Ÿå¯åŠ¨ç¤ºä¾‹\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-advanced-combinatorial-testing-and-performance-testing/","summary":"è¿™ç¯‡åšæ–‡æ˜¯ UI æµ‹è¯•æœ€ä½³å®è·µçš„è¿›é˜¶ç¯‡ï¼Œç¬¬äºŒç¯‡æ·±å…¥è®¨è®ºç»„åˆæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ã€‚æ–‡ç« è¯¦ç»†ä»‹ç»äº†å¦‚ä½•æœ‰æ•ˆåœ°è¿›è¡Œç»„åˆæµ‹è¯•ï¼Œè¦†ç›–å¤šä¸ªäº¤äº’å…ƒç´ çš„ä¸åŒç»„åˆï¼Œä»¥æé«˜æµ‹è¯•çš„å…¨é¢æ€§ã€‚æ­¤å¤–ï¼Œåšæ–‡æ¢è®¨äº† UI æ€§èƒ½æµ‹è¯•çš„é‡è¦æ€§ï¼Œå¹¶æä¾›äº†ä¸€äº›æ€§èƒ½æµ‹è¯•çš„æœ€ä½³å®è·µï¼Œç¡®ä¿åº”ç”¨ç¨‹åºåœ¨å„ç§è´Ÿè½½ä¸‹çš„é«˜æ€§èƒ½å’Œç¨³å®šæ€§ã€‚é€šè¿‡å­¦ä¹ è¿™äº›è¿›é˜¶å®è·µï¼Œè¯»è€…å°†èƒ½å¤Ÿæ›´å…¨é¢åœ°åº”å¯¹å¤æ‚çš„ UI æµ‹è¯•åœºæ™¯ï¼Œç¡®ä¿ç³»ç»Ÿçš„è´¨é‡å’Œæ€§èƒ½ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„è¿›é˜¶ç¯‡ï¼ˆäºŒï¼‰ï¼šç»„åˆæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\næµ‹è¯•çŠ¶æ€ åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/advanced/test-states.md\nä¸€æ®µç®€è¦è¯´æ˜ æµ‹è¯•åº”è¯¥æ˜¯å¯é‡å¤çš„ã€æ¨¡å—åŒ–çš„ï¼Œå¹¶ä¸”åº”è¯¥è‡ªå·±å¤„ç†çŠ¶æ€è®¾ç½®ã€‚ä¸ºäº†ä¸ºå…¶ä»–æµ‹è¯•å®ç°çŠ¶æ€ï¼Œä¸åº”è¯¥é‡å¤æ‰§è¡Œ UI æµ‹è¯•ã€‚\næˆ‘ä»¬å¸Œæœ›æµ‹è¯•æ˜¯æ— çŠ¶æ€çš„ï¼Œå…·æœ‰å¯æ‰©å±•æ€§ï¼š\næµ‹è¯•åº”è¯¥ç‹¬ç«‹å¤„ç†å…¶çŠ¶æ€ã€‚ æ²¡æœ‰å¯¹å¤–éƒ¨äº§ç”Ÿä¸å—æ§åˆ¶çš„å‰¯ä½œç”¨ï¼Œæˆ–è€…å…·æœ‰æµ‹è¯•è‡ªèº«èƒ½å¤Ÿå¤„ç†çš„å¯ç®¡ç†å‰¯ä½œç”¨ã€‚ æµ‹è¯•åº”è¯¥èƒ½å¤Ÿè¢« n ä¸ªå®ä½“åŒæ—¶æ‰§è¡Œã€‚ ä»£ç ç¤ºä¾‹ â€“ è§£é‡Šè¯´æ˜ å¯é‡å¤æ€§: æµ‹è¯•å¿…é¡»èƒ½å¤Ÿè®¾ç½®çŠ¶æ€ã€æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶åœ¨ä¸å½±å“ä¸‹ä¸€ä¸ªæµ‹è¯•æ‰§è¡Œçš„å‰æä¸‹ä½¿ç¯å¢ƒä¿æŒå¹²å‡€ã€‚å¦‚æœä¸€ä¸ªæµ‹è¯•åœ¨æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½ä½¿ç³»ç»Ÿæ··ä¹±ï¼Œå°†å…¶ç•™åœ¨æ— æ³•é‡ç½®çš„çŠ¶æ€ï¼Œé‚£ä¹ˆè¿™ä¸ªæµ‹è¯•å°±é€‚åˆä½œä¸ºæ‰‹åŠ¨æµ‹è¯•ã€‚æµ‹è¯•è¿˜ä¸èƒ½äº’ç›¸å†²çªï¼šå¤šä¸ªæµ‹è¯•è€…å’Œæµæ°´çº¿å¿…é¡»èƒ½å¤ŸåŒæ—¶æ‰§è¡Œç›¸åŒçš„æµ‹è¯•ã€‚å¦‚æœè¿™ä¸å¯è¡Œï¼Œè¿™äº›æµ‹è¯•ç»„åº”è¯¥æ¯å¤©åœ¨æµæ°´çº¿ä¸­æ‰§è¡Œä¸€æ¬¡ï¼Œæœ€å¥½åœ¨éå·¥ä½œæ—¶é—´æ‰§è¡Œ cron ä½œä¸šã€‚\næ¯ä¸ªéœ€è¦æ›´æ”¹ç¯å¢ƒçŠ¶æ€çš„æµ‹è¯•éƒ½å¿…é¡»è¢«ç”¨ä½œè®¾ç½® - çŠ¶æ€ - æµ‹è¯•ï¼Œå¹¶ç¡®ä¿åœ¨ä¸‹ä¸€ä¸ªæµ‹è¯•ä¹‹å‰èƒ½å¤Ÿæ¸…ç†æµ‹è¯•ç¯å¢ƒã€‚\næœ€å¥½æ˜¯ UI æµ‹è¯•ä¸è¦é‡å¤ä½œä¸ºè®¾ç½®æµ‹è¯•ï¼›åœ¨å¿…é¡»å°† UI æµ‹è¯•ç”¨ä½œå¦ä¸€ä¸ªæµ‹è¯•çš„è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨ API æµ‹è¯•ã€åº”ç”¨ç¨‹åºæ“ä½œæˆ–æ•°æ®åº“åˆå§‹åŒ–ã€‚\nè®¾ç½® vs æ¸…ç†: è®¾ç½®ï¼ˆä¹‹å‰å…¨éƒ¨ï¼‰ä¼˜äºæ¸…ç†ï¼ˆä¹‹åå…¨éƒ¨ï¼‰ã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œæµ‹è¯•æœ¬èº«åº”è¯¥è´Ÿè´£åœ¨ä¸€ä¸ªå¹²å‡€çš„ç¯å¢ƒä¸­å¼€å§‹ã€‚ç„¶è€Œï¼Œæ­£å¦‚ä¸Šé¢å¼ºè°ƒçš„ï¼Œæµ‹è¯•ä¸èƒ½ä½¿å¾—åœ¨å®ƒä»¬æ‰§è¡Œåä¸‹ä¸€ä¸ªæµ‹è¯•æ— æ³•æ¸…ç†ç¯å¢ƒã€‚\nç™»å½•: UI ç™»å½•çš„å„ç§å½¢å¼åº”ä»…åœ¨å…¶å„è‡ªçš„æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨ã€‚ä»»ä½•å…¶ä»–éœ€è¦ç™»å½•çš„æµ‹è¯•åº”è¯¥ä½¿ç”¨å†…éƒ¨çš„ API ç™»å½•å’Œ/æˆ–å…·æœ‰é¢„é…ç½®çš„æµ‹è¯•ç”¨æˆ·ã€‚\næµ‹è¯•çŠ¶æ€è®¾ç½®: é¼“åŠ±æµ‹è¯•æ˜¯éš”ç¦»çš„ï¼Œä»¥ä¾¿å®ƒä»¬åœ¨æ‰§è¡Œä¹‹å‰ä¸ä¾èµ–äºæ•´ä¸ªè®¾ç½®ã€‚ä¾‹å¦‚ï¼šå¦‚æœä¸€ç»„æµ‹è¯•å¯èƒ½éœ€è¦åˆ›å»ºç”¨æˆ·ï¼Œå¯ä»¥åˆ©ç”¨ä¸€ä¸ªæµ‹è¯•ç”¨æˆ·åœ¨éš”ç¦»ä¸­ä½¿ç”¨è¿™äº›æµ‹è¯•ã€‚å¦ä¸€æ–¹é¢ï¼Œè®¾ç½®ç”¨æˆ·çš„æµ‹è¯•åº”è¯¥æ˜¯ç‹¬ç«‹çš„å’Œéš”ç¦»çš„ã€‚\næ¨¡å—åŒ–: æ¯ä¸ªæµ‹è¯•åº”è¯¥èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–äºå…¶ä»–æµ‹è¯•æ¥ä¸ºå…¶è®¾ç½®çŠ¶æ€ã€‚å¦‚æœéœ€è¦è¿›è¡Œè¿™æ ·çš„è®¾ç½®ï¼Œåº”è¯¥åœ¨ beforeAll æˆ– beforeEach éƒ¨åˆ†è¿›è¡Œã€‚æµ‹è¯•è¿™ä¸€ç‚¹çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯åœ¨éš”ç¦»ä¸­è¿è¡Œæµ‹è¯•ï¼šit.only()ï¼Œfit()ï¼Œç­‰ç­‰ã€‚\ndescribe(\u0026#39;..\u0026#39;, function () { // setup (before/beforeEach) is preferred over cleanup (after/afterEach) before(function () { // login with UI once in an isolated test // for login here and all other tests, use a faster login method: use API, App Actions or DB seeding }); beforeEach(function () { // setup additional state... // have one UI test to ensure this state can be achieved // however for the state set up here, utilize API, Application Actions or DB seeding; do not repeat UI tests }); // test each test once with .only to ensure modularity it(\u0026#39;..\u0026#39;, function () {..}); it(\u0026#39;..\u0026#39;, function () {..}); it.only(\u0026#39;..\u0026#39;, function () {..}); it(\u0026#39;..\u0026#39;, function () {..}); }); æµ‹è¯•çŠ¶æ€å‚è€ƒèµ„æ–™ æ”¾å¼ƒä½¿ç”¨é¡µé¢å¯¹è±¡ï¼Œè½¬è€Œä½¿ç”¨åº”ç”¨åŠ¨ä½œ\nCypress æ–‡æ¡£ï¼šæµ‹è¯•ç»„ç»‡ã€ç™»å½•ã€çŠ¶æ€æ§åˆ¶\nä¸ç¨³å®šçš„æµ‹è¯• åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/advanced/test-flake.md\nä¸€æ®µç®€è¦è¯´æ˜ æ¯æ¬¡æµ‹è¯•éƒ½å¿…é¡»äº§ç”Ÿä¸€è‡´çš„ç»“æœï¼Œè€Œå¯é‡å¤çš„æµæ°´çº¿æ‰§è¡Œç»“æœåˆ™æ˜¯è‡³å…³é‡è¦çš„ã€‚å¦‚æœæµ‹è¯•æ— æ³•äº§ç”Ÿå¯é çš„ç»“æœï¼Œå°†é™ä½å¯¹æµ‹è¯•çš„ä¿¡å¿ƒï¼Œè¿˜éœ€è¦è¿›è¡Œç»´æŠ¤ï¼Œè¿™å°†é™ä½æ‰€æœ‰ä»·å€¼ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæœ€å¥½è¿›è¡Œæ‰‹åŠ¨åŠŸèƒ½æµ‹è¯•ã€‚\nå¹¶è¯·è‡ªé—®ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\nå¦‚ä½•è§£å†³æµ‹è¯•æ³¢åŠ¨ï¼Œé€šè¿‡æˆé•¿çš„è¿‡ç¨‹ç¡®ä¿æµ‹è¯•çš„å¯ä¿¡åº¦ï¼Ÿ å¦‚ä½•å¤„ç†æµæ°´çº¿ã€åŸºç¡€è®¾æ–½ã€å…±äº«èµ„æºç­‰æ–¹é¢çš„å‡é˜´æ€§ï¼Œå¹¶åœ¨æ²¡æœ‰æ§åˆ¶çš„æƒ…å†µä¸‹è§£å†³ï¼Ÿ å¦‚ä½•å‘ç°é›¶æ˜Ÿç¼ºé™·ï¼Ÿ ç¬¬ä¸€æ­¥ï¼šæœ¬åœ°è¯†åˆ«ä¸ç¨³å®šçš„æµ‹è¯• æ¨èåœ¨æ¨¡æ‹Ÿæµæ°´çº¿ CI æœºå™¨çš„æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œæ— å¤´æ¨¡å¼æ‰§è¡Œï¼›Linux å’Œ MacOS ä¸æµæ°´çº¿çš„è¡Œä¸ºæ›´ä¸ºç›¸ä¼¼ï¼Œè€Œ Windows åˆ™æ˜¯ä¸ªä¾‹å¤–ï¼Œé™¤éä½ æ­£åœ¨ä½¿ç”¨ Windows Docker å®¹å™¨ã€‚æ— å¤´æ‰§è¡Œå°†æ›´å®¹æ˜“æš´éœ²æµ‹è¯•æ³¢åŠ¨ã€‚æœ‰å¤šç§æ–¹æ³•å¯ä»¥é‡å¤æ‰§è¡Œæµ‹è¯•è§„èŒƒï¼ŒCypress æä¾›çš„ä¸€ä¸ªä¾‹å­æ˜¯ä½¿ç”¨ Lodash åº“ï¼ˆCypress å·²ç»å†…ç½®äº†ï¼‰Cypress._.times( \u0026lt;é‡å¤æ¬¡æ•°\u0026gt;, () =\u0026gt; { \u0026lt;ä½ çš„æµ‹è¯•è§„èŒƒä»£ç \u0026gt; })ã€‚åœ¨æäº¤ä»£ç åˆå¹¶è¯·æ±‚ä¹‹å‰ï¼ŒåŠ¡å¿…ä½¿ç”¨æ­¤æ–¹æ³•ã€‚\nç¬¬ä¸€æ­¥çš„ä»£ç ç¤ºä¾‹ // will repeat the full suite 10 times Cypress._.times( 10, function { describe(\u0026#39;..\u0026#39;, function () { before(function () { }); beforeEach(function () { }); // you can place it anywhere to repeat 1 test, or another describe / context block Cypress._.times( 3, function { it(\u0026#39;..\u0026#39;, function () {..}); } it(\u0026#39;..\u0026#39;, function () {..}); it(\u0026#39;..\u0026#39;, function () {..}); it(\u0026#39;..\u0026#39;, function () {..}); }); }); // this will result in 6 tests per run x 10 runs = 60 executions ç¬¬äºŒæ­¥ï¼šåœ¨æµæ°´çº¿ä¸­è¯†åˆ«ä¸ç¨³å®šçš„æµ‹è¯•å¹¶è¿›è¡Œé‡è¯• åœ¨åˆå§‹çš„æµæ°´çº¿é¡ºåˆ©é€šè¿‡å¹¶åˆå¹¶ä»£ç åï¼Œæœ‰æ—¶æµ‹è¯•ä¼šå‡ºç°å¤±è´¥çš„æƒ…å†µã€‚\nä¸ºä»€ä¹ˆæµ‹è¯•åœ¨æ²¡æœ‰å¯é‡ç°çš„ç¼ºé™·ä¸”æµ‹è¯•ä»£ç å·²ç»å®Œå…¨ä¼˜åŒ–çš„æƒ…å†µä¸‹ä»ç„¶å¤±è´¥å‘¢ï¼Ÿ\nä¸ºäº†è§£å†³è¿™ç§é›¶æ˜Ÿçš„å¤±è´¥é—®é¢˜ï¼Œä»¥åŠé¿å…æµ‹è¯•è¢«å¿½ç•¥æˆ–é™ä½å›¢é˜Ÿå¯¹å…¶çš„ä¿¡å¿ƒï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨é‡è¯•æœºåˆ¶ï¼š\nç”¨ä»¥è§£å†³å›¢é˜Ÿæ— æ³•æŒæ§çš„ä¸å¯é æµæ°´çº¿åŸºç¡€è®¾æ–½é—®é¢˜ åœ¨å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæˆ–è€…ä¾èµ–äºæ­£åœ¨å¼€å‘ä¸­çš„å¤–éƒ¨æœåŠ¡ æœ€ä¸ºé‡è¦çš„æ˜¯ï¼Œç”¨äºé”å®šé›¶æ˜Ÿçš„ç³»ç»Ÿé—®é¢˜ ç¬¬äºŒæ­¥çš„ä»£ç ç¤ºä¾‹ è®¸å¤šæ¡†æ¶éƒ½æä¾›äº†é‡è¯•å®ç”¨å·¥å…·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­æ¥è‡ªäº Cypress æ–‡æ¡£:\nåœ¨ä¸€ä¸ªæµ‹è¯•ä¸­ï¼š\nit(\u0026#39;allows user to login\u0026#39;, { // can also be in a context or describe block retries: { runMode: 2, // for CI usage openMode: 1 // for local usage } }, () =\u0026gt; { // ... }) åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ cypress.json:\n{ \u0026#34;retries\u0026#34;: { \u0026#34;runMode\u0026#34;: 1, \u0026#34;openMode\u0026#34;: 3 } } ç¬¬ä¸‰æ­¥ï¼šè¯†åˆ«é›¶æ˜Ÿçš„ç³»ç»Ÿé—®é¢˜ - ä¸ç¨³å®šçš„ç³»ç»Ÿ é‰´äºä»¥ä¸‹æƒ…å†µï¼š\nä¸å­˜åœ¨å¯é‡ç°çš„ç¼ºé™· æµ‹è¯•ä»£ç å·²ç»å……åˆ†ä¼˜åŒ– å·²çŸ¥å¹¶é€šè¿‡æµ‹è¯•é‡è¯•æœ‰æ•ˆè§£å†³äº†æµæ°´çº¿é—®é¢˜ å·²çŸ¥ã€è®¤å¯å¹¶é€šè¿‡æµ‹è¯•é‡è¯•è§£å†³äº†å¤–éƒ¨ä¾èµ–å’Œæˆé•¿ç—›è‹¦ \u0026hellip; æˆ‘ä»¬å¦‚ä½•æ£€æµ‹ç³»ç»Ÿå­˜åœ¨çš„æ›´æ·±å±‚æ¬¡é—®é¢˜ï¼Œè¿™å¯èƒ½è¡¨æ˜å­˜åœ¨ä¸ç¨³å®šçš„ç³»ç»Ÿï¼Ÿä»¥ä¸‹æ˜¯å›¢é˜ŸCypress ä»ªè¡¨æ¿ä¸Šçš„ä¸€ä¸ªç¤ºä¾‹å¿«ç…§ï¼š\nâ€œåœ¨å‘¨æœ«çš„ 40 æ¬¡æ‰§è¡Œä¸­ï¼Œå®ƒä»¥ 10% çš„é”™è¯¯ç‡å¤±è´¥\u0026hellip; æˆ‘ä»¬è¿è¡Œäº†æµ‹è¯•å¥—ä»¶ 40 æ¬¡ï¼Œåœ¨å…¶ä¸­çš„ä¸€æ¬¡æ‰§è¡Œä¸­çœ‹åˆ°è¯¥è§„èŒƒé‡è¯•äº† 2 æ¬¡ï¼Œç›´åˆ°é€šè¿‡\u0026hellip;â€ è¯·æ³¨æ„ï¼šç›¸æœºå›¾æ ‡è¡¨ç¤ºä¸€äº›æµ‹è¯•å¤±è´¥ï¼Œå› ä¸º Cypress åœ¨å¤±è´¥æ—¶ä¼šæ‹æ‘„è§†é¢‘å’Œæˆªå›¾ã€‚\nåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡æ¯æ™šæˆ–å‘¨æœ«çš„ cron ä»»åŠ¡ è¿›è¡Œä¸€è‡´æ€§æµ‹è¯•ï¼Œä½œä¸ºæ›´æ·±å±‚æ¬¡ç³»ç»Ÿé—®é¢˜çš„åˆå§‹æŒ‡æ ‡ã€‚è¿™äº›é€šå¸¸æ˜¯é‚£äº›å®¹æ˜“æ³„æ¼åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€åœ¨å®é™…ä½¿ç”¨ä¸­è¢«å‘ç°å¹¶å…·æœ‰æ˜‚è´µåæœçš„æ¨¡ç³Šç¼ºé™·ã€‚\nä»£ç ç¤ºä¾‹ - cron ä»»åŠ¡ at minute 0 at midnight and 2 am, every day-of-week from Monday through Friday: 0 0,2 * * 1-5 At minute 0 past hour 2, 6, 8, 10, 12, 14, 16, 18, and 20 on every day-of-week from Saturday through Sunday: 0 2,6,8,10,12,14,16,18,20 * * 6-7 ä¸€æ—¦æ’é™¤äº†æ‰€æœ‰å…¶ä»–å› ç´ ï¼Œå¹¶ä¸”åœ¨ç®¡é“ä¸­ä½¿ç”¨ cron ä»»åŠ¡è‡ªåŠ¨åŒ–æµ‹è¯•åˆæ­¥æŒ‡ç¤ºäº†â€œç³»ç»Ÿæ³¢åŠ¨â€ï¼Œè¿™äº›é—®é¢˜å°±æ˜¯æ€§èƒ½æµ‹è¯•çš„ç†æƒ³å€™é€‰é¡¹ï¼Œå› ä¸ºè¿™ç§æµ‹è¯•æ–¹æ³•å¯ä»¥ç›´æ¥æŒ‡å‡ºå¯èƒ½å¯¼è‡´â€œä¸ç¨³å®šçš„ç³»ç»Ÿâ€çš„ç³»ç»Ÿç¼ºé™·ã€‚\næ€§èƒ½æµ‹è¯•çš„è¦ç‚¹å¦‚ä¸‹ï¼š æœ‰è®¸å¤šæ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œå…¶ä¸­ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºæ¯”è¾ƒæ˜“äºä½¿ç”¨çš„æ˜¯ k6-loadImpactï¼Œå› ä¸ºå®ƒé‡‡ç”¨äº† ES6 è¯­æ³•ï¼Œå¹¶ä¸”ä¸æµæ°´çº¿å…¼å®¹ã€‚ ä½ å¯ä»¥åœ¨ è¿™é‡Œ æ‰¾åˆ°ä¸€ä¸ªåŒ…å«ä»£ç ç¤ºä¾‹çš„ç®€å•æ•™ç¨‹ã€‚\nä¸ç¨³å®šçš„æµ‹è¯•å‚è€ƒèµ„æ–™ Google æµ‹è¯•åšå®¢ï¼šæˆ‘ä»¬çš„æµ‹è¯•ä¸­å“ªäº›æ˜¯ä¸ç¨³å®šçš„ï¼Œæ˜¯ä»å“ªäº›æ–¹é¢äº§ç”Ÿçš„\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-advanced-test-states-and-test-flake/","summary":"è¿™ç¯‡åšæ–‡æ˜¯ UI æµ‹è¯•æœ€ä½³å®è·µçš„è¿›é˜¶ç¯‡ï¼Œé¦–ç¯‡ä»‹ç»æµ‹è¯•çŠ¶æ€å’Œå¤„ç†ä¸ç¨³å®šæµ‹è¯•çš„æ–¹æ³•ã€‚æ–‡ç« æ·±å…¥æ¢è®¨äº†åœ¨ UI æµ‹è¯•ä¸­å¦‚ä½•æœ‰æ•ˆå¤„ç†æµ‹è¯•çŠ¶æ€ï¼Œä»¥åŠåº”å¯¹æµ‹è¯•ä¸ç¨³å®šæ€§çš„æœ€ä½³å®è·µã€‚è¯»è€…å°†å­¦åˆ°ç¡®ä¿æµ‹è¯•è„šæœ¬å¯é æ€§çš„ç­–ç•¥ï¼ŒåŒ…æ‹¬ç­‰å¾…æœºåˆ¶ã€æµ‹è¯•æ•°æ®ç®¡ç†ç­‰æ–¹é¢çš„æŠ€å·§ã€‚é€šè¿‡è¿™ä¸ªè¿›é˜¶ç¯‡çš„æŒ‡å—ï¼Œè¯»è€…èƒ½å¤Ÿæ›´çµæ´»åœ°åº”å¯¹å¤æ‚çš„ UI æµ‹è¯•åœºæ™¯ï¼Œç¡®ä¿æµ‹è¯•ç»“æœçš„ä¸€è‡´æ€§å’Œå¯ä¿¡åº¦ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„è¿›é˜¶ç¯‡ï¼ˆä¸€ï¼‰ï¼šæµ‹è¯•çŠ¶æ€å’Œä¸ç¨³å®šçš„æµ‹è¯•"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nè§†è§‰å›å½’æµ‹è¯• åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/tools/visual-regression-testing.md\nä¸€æ®µç®€è¦è¯´æ˜ è§†è§‰å›å½’æµ‹è¯•æ˜¯é€šè¿‡æ¯”è¾ƒä»£ç æ›´æ”¹åç”¨æˆ·å°†çœ‹åˆ°çš„å±å¹•æˆªå›¾æ¥éªŒè¯ CSS ä¸­çš„å›å½’é—®é¢˜çš„ä¸€ç§æ–¹æ³•ã€‚è¿™ä¸»è¦ç”¨äºè¦†ç›– CSS çš„å›å½’é—®é¢˜ï¼Œä½†ä¹Ÿé€‚ç”¨äºæ¶µç›–çª—å£ã€è·¨æµè§ˆå™¨/è®¾å¤‡ç»„åˆä»¥åŠæœ¬åœ°åŒ–é—®é¢˜ã€‚å¯ä»¥å°†å…¶ç±»æ¯”ä¸º Jest å¿«ç…§ï¼Œä½†ä¸å°† DOM ä½œä¸ºæ–‡æœ¬è¿›è¡Œæ¯”è¾ƒä¸åŒï¼Œå®ƒå®é™…ä¸Šæ˜¯é€šè¿‡å®é™…å±å¹•æˆªå›¾çš„æ¯”è¾ƒæ¥å®ç°çš„ã€‚\nè§†è§‰å›å½’æµ‹è¯•çš„è¿‡ç¨‹åŒ…æ‹¬ï¼š\nè®°å½•åŸºå‡†å¿«ç…§ï¼ˆåˆå§‹æ‰§è¡Œï¼‰ã€‚\nå†æ¬¡æ‰§è¡Œè§†è§‰æµ‹è¯•ï¼Œå¹¶å°†å…¶ä¸åŸºå‡†å¿«ç…§è¿›è¡Œæ¯”è¾ƒï¼ˆåç»­æ‰§è¡Œï¼‰ã€‚\nå¦‚æœæ–°çš„å¿«ç…§ä¸åŸºå‡†å¿«ç…§åŒ¹é…ï¼Œåˆ™æ¥å—ã€‚\nå¦åˆ™ï¼Œè®¾ç½®æ–°çš„åŸºå‡†å¿«ç…§ï¼Œæˆ–è€…è¿™æ˜¯ä¸€ä¸ªè§†è§‰å›å½’ç¼ºé™·ã€‚\nè§†è§‰å›å½’å·¥å…·ä¼šæ‰¾åˆ°ä»»ä½•åƒç´ å·®å¼‚ã€‚éšç€å¿«ç…§çš„å¢åŠ å’Œæ•°é‡çš„å¢å¤šï¼Œè¿™å¯èƒ½å˜å¾—å¤æ‚ã€‚è§†è§‰å¿«ç…§æœåŠ¡çš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿æ˜¯å…¶å…·æœ‰ AI åŠŸèƒ½ï¼›AI å¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»è¿›è¡Œè®­ç»ƒï¼Œæˆ‘ä»¬å¯ä»¥è®­ç»ƒå®ƒå¿½ç•¥æˆ‘ä»¬å¯èƒ½ä¸å…³å¿ƒçš„å¾®å°å¿«ç…§å·®å¼‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ç»™å®šå¿«ç…§åç§°ï¼Œæˆ‘ä»¬å¯ä»¥è®­ç»ƒ AI å˜å¾—éå¸¸å®½æ¾ï¼Œæ¥å—ä»»ä½•å·®å¼‚\nã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è°¨æ…å¤„ç†ï¼Œä»¥å…è¯¯å°†æœ‰æ•ˆçš„å¤±è´¥ç»“æœæ ‡è®°ä¸ºé€šè¿‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ”¹å¿«ç…§åç§°ã€çª—å£æˆ–ä»£ç çš„ä»»ä½•éƒ¨åˆ†æ¥é‡ç½®è®­ç»ƒã€‚\nå¦‚æœæ²¡æœ‰ AIï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸æ‰‹åŠ¨å¤„ç†æ¯ä¸€ä¸ªå¾®å°çš„è¯¯å·®ï¼Œæ¥å—æˆ–æ‹’ç»æ¯ä¸€ä¸ªä¸å¿…è¦çš„è´Ÿé¢ç»“æœã€‚å¦‚æœæ²¡æœ‰å†…ç½®çš„è·¨æµè§ˆå™¨å’Œè·¨çª—å£æµ‹è¯•ï¼Œæˆ‘ä»¬çš„æµ‹è¯•å¥—ä»¶å°†åœ¨æœ¬åœ°æˆ– CI ä¸­å‘ˆæŒ‡æ•°å¢é•¿ã€‚å¯ä»¥è§‚çœ‹ Gil Tayar çš„æ¼”è®²ä¸º CSS ç¼–å†™æµ‹è¯•ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚\næœåŠ¡çš„ç¬¬äºŒå¤§ä¼˜åŠ¿åœ¨äºå®ƒä»¬å¯ä»¥é€šè¿‡å•ä¸ªæµ‹è¯•è§£å†³è·¨çª—å£å’Œæµè§ˆå™¨çš„é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬æ— éœ€åœ¨ CI ä¸­é‡å¤æ‰§è¡Œç›¸åŒçš„æµ‹è¯•ä»¥æ¶µç›–ä¸åŒçš„å˜ä½“ã€‚\nä½¿ç”¨ Percy å’Œ Applitools çš„ Cypress ç¤ºä¾‹ æ‰€æœ‰çš„ä»£ç ç¤ºä¾‹éƒ½å¯ä»¥åœ¨è¿™ä¸ªä»“åº“ä¸­æ‰¾åˆ°ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªå¸¦æœ‰ Percy ä»¥åŠ Applitools é•œåƒçš„ ReactJS åº”ç”¨ç¨‹åºï¼Œç”¨äºè§†è§‰æµ‹è¯•ã€‚\næˆ‘ä»¬å°†æ·±å…¥äº†è§£ä¸¤ä¸ªæµè¡Œçš„æœåŠ¡ï¼ŒPercy å’Œ Applitoolsï¼Œå¹¶æ¼”ç¤ºè¿™äº›æœåŠ¡å¦‚ä½•é€šè¿‡ç»´æŠ¤è§†è§‰å¿«ç…§æ¥èŠ‚çœå¸¦å®½ã€‚æˆ‘ä»¬è¿˜å°†è®¨è®ºå®ƒä»¬åœ¨æ¶‰åŠè·¨æµè§ˆå™¨å’Œçª—å£ç»„åˆæ—¶å¦‚ä½•æˆä¸ºä¸€ç§å¢å¼ºåŠ›ã€‚\nä½¿ç”¨æœåŠ¡è¿›è¡Œè§†è§‰å›å½’æµ‹è¯•æœ‰ä¸€ä¸ªå…±åŒçš„æµç¨‹ï¼š\nè®°å½•é»˜è®¤å¿«ç…§å¹¶å°†å…¶ä¸åç»­æµ‹è¯•æ‰§è¡Œä¸­çš„æ–°å¿«ç…§è¿›è¡Œæ¯”è¾ƒã€‚æˆ‘ä»¬å¿…é¡»é¦–æ¬¡æ¥å—åˆå§‹å¿«ç…§ã€‚\nä»é‚£æ—¶èµ·ï¼Œä¸é»˜è®¤åŒ¹é…çš„æ–°å¿«ç…§å°†è‡ªåŠ¨è¢«æ¥å—ã€‚\nä¸åŒ¹é…çš„æ–°å¿«ç…§ä¼šåœ¨ Web ç•Œé¢ä¸Šè§¦å‘é€šçŸ¥ï¼›æˆ‘ä»¬è¦ä¹ˆæ‹’ç»ï¼Œè¦ä¹ˆæ¥å—è¿™ä¸ªæ–°çš„åŸºçº¿ã€‚å¦‚æœæˆ‘ä»¬æ‹’ç»ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªç¼ºé™·ã€‚å¦‚æœæˆ‘ä»¬æ¥å—ï¼Œå°±æœ‰äº†ä¸€ä¸ªæ–°çš„åŸºçº¿ï¼Œå¾ªç¯ç»§ç»­ã€‚\nå‡è®¾æˆ‘ä»¬æƒ³è¦éªŒè¯ç”¨æˆ·çš„å¤´åƒã€‚\nPercy æµç¨‹ ä¸€ä¸ªç®€å•çš„æµ‹è¯•ï¼Œç”¨äºéªŒè¯ç”¨æˆ·çš„å¤´åƒã€‚ // cypress/e2e/ui-integration/user-context-retainment.spec.js describe(\u0026#34;User selection retainment between routes\u0026#34;, () =\u0026gt; { before(() =\u0026gt; { cy.stubNetwork(); cy.visit(\u0026#34;/\u0026#34;); }); it(\u0026#34;Should keep the user context between routes - full snapshot\u0026#34;, () =\u0026gt; { cy.fixture(\u0026#34;users\u0026#34;).then((users) =\u0026gt; { cy.get(\u0026#34;.user-picker\u0026#34;).select(users[3].name); cy.contains(\u0026#34;Users\u0026#34;).click(); cy.wait(\u0026#34;@userStub\u0026#34;); cy.url().should(\u0026#34;contain\u0026#34;, \u0026#34;/users\u0026#34;); cy.get(\u0026#34;.item-header\u0026#34;).contains(users[3].name); // the visual test - full snapshot cy.percySnapshot(\u0026#34;User selection retainment between routes\u0026#34;); // \u0026lt;-- }); }); it(\u0026#34;Should keep the user context between routes - css-focused snapshot\u0026#34;, () =\u0026gt; { cy.fixture(\u0026#34;users\u0026#34;).then((users) =\u0026gt; { cy.get(\u0026#34;.user-picker\u0026#34;).select(users[3].name); cy.contains(\u0026#34;Users\u0026#34;).click(); cy.wait(\u0026#34;@userStub\u0026#34;); cy.url().should(\u0026#34;contain\u0026#34;, \u0026#34;/users\u0026#34;); cy.get(\u0026#34;.item-header\u0026#34;).contains(users[3].name); // the visual test - using custom command for css selector focus // \u0026lt;-- cy.get(\u0026#39;[data-cy=\u0026#34;user-details\u0026#34;]\u0026#39;).percySnapshotElement( \u0026#34;user details with custom selector\u0026#34; ); }); }); }); åœ¨ç¬¬ä¸€ä¸ªæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ç¬¬ä¸€è¡Œä»£ç ï¼Œå®ƒæˆªå–äº†æ•´ä¸ªå±å¹•çš„æˆªå›¾ã€‚åœ¨åç»­çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† user-details é€‰æ‹©å™¨çš„å¿«ç…§ã€‚ç”±äº Percy ä¸æ”¯æŒç›´æ¥çš„é€‰æ‹©å™¨å¿«ç…§ï¼Œå› æ­¤ä½¿ç”¨äº†è‡ªå®šä¹‰å‘½ä»¤ percySnapshotElementã€‚\nä¸ºäº†æ‰§è¡Œè§†è§‰å·®å¼‚æµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Percy è´¦æˆ·å’Œä»¤ç‰Œã€‚åªæœ‰è¿æ¥åˆ°è¯¥è´¦æˆ·å¹¶é€šè¿‡ cy run æ‰§è¡Œæ—¶ï¼Œè§†è§‰æµ‹è¯•æ‰ä¼šè¿è¡Œã€‚è¿™ä¸»è¦ç”¨äº CIã€‚è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹æ³¨å†Œéƒ¨åˆ†ã€‚\nä¸€æ—¦æˆ‘ä»¬æ‰§è¡Œæµ‹è¯•ï¼ŒPercy ç•Œé¢ä¸­çš„åˆå§‹å¿«ç…§å¦‚ä¸‹ã€‚æˆ‘ä»¬å¼•å…¥äº†ä¸€è¡Œæµ‹è¯•ä»£ç ï¼Œå®ƒåœ¨ 4 ä¸ªæµè§ˆå™¨å’Œ 2 ä¸ªçª—å£ä¸Šè¿è¡Œï¼›è¿™æ˜¯ 8 ä¸ªç»„åˆï¼Œåœ¨ CI ä¸­æˆ‘ä»¬æ— éœ€æ‹…å¿ƒã€‚è¯·æ³¨æ„ï¼Œæ¯ä¸ªåˆ†è¾¨ç‡ x æµè§ˆå™¨éƒ½ä¼šæ¶ˆè€—é…é¢ï¼›å¦‚æœæˆ‘ä»¬æµ‹è¯•äº† 2 ä¸ªçª—å£å’Œ 4 ä¸ªæµè§ˆå™¨ï¼Œè¿™ä¸ªä¸€è¡Œæµ‹è¯•ä»£ç å°†æ¶ˆè€— 8 ä¸ªé…é¢ã€‚\nåœ¨åç»­çš„æµ‹è¯•ä¸­ï¼Œå¦‚æœå­˜åœ¨è§†è§‰å·®å¼‚ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å…³é—­åç«¯å¹¶ä¸”æ— æ³•æ¸²æŸ“å›¾åƒï¼‰ï¼Œæˆ‘ä»¬å°†åœ¨ Percy ç•Œé¢ä¸­çœ‹åˆ°è§†è§‰å·®å¼‚çš„æŒ‡ç¤ºå™¨ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥éªŒè¯ä¸åŒæµè§ˆå™¨å’Œçª—å£ä¹‹é—´çš„å·®å¼‚ã€‚\nåˆ°äº†è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥è®­ç»ƒ AI ä¸å¤ªèªæ˜ï¼Œè‡ªåŠ¨æ¥å—å°†æ¥å¯èƒ½å‡ºç°çš„æŸåçš„å¤´åƒå›¾åƒã€‚ç„¶è€Œï¼Œä½ å¯ä»¥æƒ³è±¡åˆ°ä¸€äº›å¾®ä¸è¶³é“çš„åƒç´ å·®å¼‚ï¼Œè€Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¿™äº›ã€‚è¿™å°±æ˜¯è§†è§‰å›å½’æœåŠ¡èŠ‚çœå¸¦å®½çš„åœ°æ–¹ï¼›ç»´æŠ¤è§†è§‰å¿«ç…§ã€‚\nPercy çš„ä¼˜åŠ¿åœ¨äºä¿æŒäº‹æƒ…ç®€å•ã€‚ç„¶è€Œï¼ŒCI è®¾ç½®æ˜¯æˆ‘ä»¬å¿…é¡»å¤„ç†çš„é¢å¤–å·¥ä½œã€‚è¯·å‚è€ƒåšæ–‡æŒ‡å—è·å–æœ‰å…³è®¾ç½® Percy çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ã€‚\nApplitools æµç¨‹ è¿™æ˜¯ ä½¿ç”¨ Applitools ç¼–å†™çš„ç›¸åŒæµ‹è¯•.\n// Applitools version of the visual test // cypress/e2e/ui-integration/user-context-retainment-applitools.spec.js describe(\u0026#34;User selection retainment between routes\u0026#34;, () =\u0026gt; { before(() =\u0026gt; { // Each test should open its own Eyes for its own snapshots cy.eyesOpen({ appName: \u0026#34;hooks-in-action\u0026#34;, testName: Cypress.currentTest.title, }); cy.stubNetwork(); cy.visit(\u0026#34;/\u0026#34;); }); it(\u0026#34;Should keep the user context between routes - full snapshot\u0026#34;, () =\u0026gt; { cy.fixture(\u0026#34;users\u0026#34;).then((users) =\u0026gt; { cy.get(\u0026#34;.user-picker\u0026#34;).select(users[3].name); cy.contains(\u0026#34;Users\u0026#34;).click(); cy.wait(\u0026#34;@userStub\u0026#34;); cy.url().should(\u0026#34;contain\u0026#34;, \u0026#34;/users\u0026#34;); cy.get(\u0026#34;.item-header\u0026#34;).contains(users[3].name); // full page test // \u0026lt;-- cy.eyesCheckWindow({ tag: \u0026#34;User selection retainment between routes\u0026#34;, target: \u0026#34;window\u0026#34;, matchLevel: \u0026#34;Layout\u0026#34;, }); }); }); it(\u0026#34;Should keep the user context between routes - css focused snapshot\u0026#34;, () =\u0026gt; { cy.fixture(\u0026#34;users\u0026#34;).then((users) =\u0026gt; { cy.get(\u0026#34;.user-picker\u0026#34;).select(users[3].name); cy.contains(\u0026#34;Users\u0026#34;).click(); cy.wait(\u0026#34;@userStub\u0026#34;); cy.url().should(\u0026#34;contain\u0026#34;, \u0026#34;/users\u0026#34;); cy.get(\u0026#34;.item-header\u0026#34;).contains(users[3].name); // partial page test // \u0026lt;-- cy.eyesCheckWindow({ tag: \u0026#34;user details with custom selector\u0026#34;, target: \u0026#34;region\u0026#34;, selector: \u0026#39;[data-cy=\u0026#34;user-details\u0026#34;]\u0026#39;, // if fully is true (default) then the snapshot is of the entire page, // if fully is false then snapshot is of the viewport. fully: false, }); }); }); afterEach(() =\u0026gt; { cy.eyesClose(); }); }); æˆ‘ä»¬æ³¨æ„åˆ°åœ¨æµ‹è¯•å¼€å§‹å’Œç»“æŸæ—¶éœ€è¦æ‰§è¡Œçš„é¢å¤–å‘½ä»¤ cy.eyesOpen å’Œ cy.eyesCloseã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ° cy.eyesCheckWindow æ˜¯éå¸¸å¯å®šåˆ¶çš„ï¼Œä¸åƒ Percy ä¸­é‚£æ ·éœ€è¦è‡ªå®šä¹‰å‘½ä»¤ã€‚\næœ‰å…³è®¾ç½® Applitools çš„è¯¦ç»†ä¿¡æ¯ä»¥åŠä¸ Percy çš„æ¯”è¾ƒï¼Œè¯·æŸ¥çœ‹è¿™ç¯‡åšå®¢æ–‡ç« ã€‚\nä¸ Percy ç±»ä¼¼ï¼Œä½¿ç”¨ Applitoolsï¼Œæˆ‘ä»¬çš„æµ‹è¯•åœ¨ä¸åŒçš„æµè§ˆå™¨å’Œçª—å£ä¸­æ‰§è¡Œï¼Œå¹¶è®°å½•åŸºå‡†å¿«ç…§ã€‚\nå¦‚æœå­˜åœ¨è§†è§‰å·®å¼‚ï¼ŒWeb ç•Œé¢ä¸Šä¼šæœ‰æ¸…æ™°çš„æŒ‡ç¤ºå™¨ã€‚\nä¸‹é¢æ˜¯ Percy ä¸ Applitools ä»£ç çš„å¯¹æ¯”ã€‚\næ€»çš„æ¥è¯´ï¼ŒApplitools åœ¨å¯é…ç½®æ€§æ–¹é¢æ›´å¼ºå¤§ï¼Œè€Œ Percy æ›´æ³¨é‡ç®€å•æ€§ã€‚Percy çš„ç”¨æˆ·ç•Œé¢æ›´ä¸ºç²¾ç®€ï¼Œæ›´æ˜“äºä½¿ç”¨ï¼Œè€Œ Applitools çš„ç”¨æˆ·ç•Œé¢ç›¸å¯¹è¾ƒä¸ºç¹å¿™ï¼Œä½†ç»è¿‡å¤šå¹´çš„æ”¹è¿›å·²ç»æœ‰äº†å¾ˆå¤§çš„æå‡ã€‚ä»ä»£ç æ•°é‡çš„è§’åº¦æ¥çœ‹ï¼ŒPercy æ˜¾ç„¶æ›´ä¸ºç®€æ´ï¼Œå› ä¸ºå®ƒä¸éœ€è¦æ‰§è¡Œ \u0026ldquo;æ‰“å¼€\u0026rdquo; å’Œ \u0026ldquo;å…³é—­\u0026rdquo; æ“ä½œï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥æ‰§è¡Œä¸»è¦å‘½ä»¤ã€‚å¯¹äºæœ¬åœ°å¼€å‘ä½“éªŒè€Œè¨€ï¼ŒApplitools æ›´èƒœä¸€ç­¹ï¼›èƒ½å¤Ÿåœ¨ Cypress çš„å¼€æ”¾æ¨¡å¼ä¸‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œä¸æ˜¯é€šè¿‡ç¹ççš„å‘½ä»¤è¡Œå‘½ä»¤ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿ã€‚åœ¨æµ‹è¯•è¿è¡Œå™¨ä¸­ç›´æ¥æ˜¾ç¤ºå®é™…çš„è§†è§‰å·®å¼‚ï¼Œç›¸å¯¹äº Percy çš„æƒ…å†µï¼ŒPercy ä¸­çš„è§†è§‰å¤±è´¥åªåœ¨ Web ç”¨æˆ·ç•Œé¢ä¸Šæ˜¾ç¤ºï¼Œè¿™ä¹Ÿæ˜¯ Applitools çš„ä¸€ä¸ªä¼˜åŠ¿ã€‚åœ¨ CI ç¯å¢ƒä¸­ï¼Œä¸éœ€è¦é…ç½®ä»»ä½• yml æ–‡ä»¶ï¼Œè¿™ä¹Ÿä½¿ Applitools æ›´å…·ç«äº‰åŠ›ã€‚å¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯èƒ½å¤Ÿé€šè¿‡é€‰æ‹©å™¨æ‹æ‘„ UI çš„å­éƒ¨åˆ†çš„å¿«ç…§ï¼›è¿™ä¸ªåŠŸèƒ½åœ¨ Applitools ä¸­æ˜¯å†…ç½®çš„ï¼Œè€Œåœ¨ Percy ä¸­åˆ™éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰å‘½ä»¤ï¼Œè€Œä¸”ä¸èƒ½ç¡®ä¿åœ¨å®é™…ç¯å¢ƒä¸­çš„æ™®é€‚æ€§ã€‚\n| | Percy | Applitools |\n| \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- | \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;- | \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash; |\n| ä»£ç  | ä»£ç é‡è¾ƒå°‘ | æ›´å…·é…ç½®æ€§ |\n| ç”¨æˆ·ä½“éªŒ | ç²¾ç®€æ˜“ç”¨ | è¾ƒä¸ºç¹çï¼Œä½†æœ‰è¾ƒå¤§æ”¹å–„ |\n| æœ¬åœ°å¼€å‘ | ä»…æ”¯æŒæ— å¤´æ¨¡å¼ | åŒæ—¶æ”¯æŒ Cypress å¼€æ”¾æ¨¡å¼ |\n| CI | éœ€è¦ yml æ–‡ä»¶ | æ— éœ€ yml æ–‡ä»¶ |\n| é…ç½® | ä¸»è¦åœ¨ Web åº”ç”¨ä¸Šï¼Œè§†å£é…ç½®ä¸ºæœ¬åœ°æ–‡ä»¶ | æœ¬åœ°æ–‡ä»¶ |\n| å­éƒ¨åˆ†å¿«ç…§ | éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰å‘½ä»¤ï¼Œå¯èƒ½ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯ | å†…ç½®æ”¯æŒ |\n| è§†è§‰å·®å¼‚ AI | éœ€è¦æ›´å¤šæ—¶é—´å½¢æˆè§‚ç‚¹ | éœ€è¦æ›´å¤šæ—¶é—´å½¢æˆè§‚ç‚¹ |\nè§†è§‰æµ‹è¯•å¹¶éæ— æˆæœ¬ï¼›åœ¨æ²¡æœ‰æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè§†è§‰æµ‹è¯•éœ€è¦æŒç»­çš„å·¥ç¨‹å¸ˆèµ„æºã€‚åœ¨ CI ä¸­ï¼ŒæœåŠ¡ä¸ºæˆ‘ä»¬åœ¨ä¸åŒè§†å£å’Œæµè§ˆå™¨ç»„åˆä¸ŠèŠ‚çœäº†æˆæœ¬ï¼Œæˆ‘ä»¬æµ‹è¯•çš„æ‰€æœ‰æœåŠ¡åœ¨è¿™æ–¹é¢éƒ½è¡¨ç°å¾—å¾ˆä¸€è‡´ã€‚è§†è§‰æœåŠ¡ä¹‹é—´çš„æœ€å¤§åŒºåˆ«åœ¨äº AI åœ¨å¤šå¤§ç¨‹åº¦ä¸Šå¸®åŠ©æˆ‘ä»¬çœå»è§†è§‰æµ‹è¯•çš„ç»´æŠ¤æˆæœ¬ã€‚æˆ‘ä»¬è®¤ä¸ºæœ€å…³é”®çš„å†³ç­–å› ç´ æ˜¯åœ¨å†…éƒ¨åº”ç”¨ä¸­é•¿æœŸä½¿ç”¨è¿™ä¸¤ä¸ªå·¥å…·ï¼ˆ4-8 å‘¨ï¼‰ï¼Œå¹¶è¿›è¡Œå¹¶è¡Œæ¯”è¾ƒã€‚è¿™å°†æœ‰åŠ©äºè¯„ä¼°å“ªä¸ªå·¥å…·çš„ AI æ›´å¥½ï¼Œèƒ½å¤Ÿé™ä½è§†è§‰æµ‹è¯•çš„ç»´æŠ¤å·¥ä½œï¼Œè€Œè¿™æ­£æ˜¯å¯¹æŠ€æœ¯å¨´ç†Ÿçš„å›¢é˜Ÿå°†è¯¥æµ‹è¯•ç­–ç•¥çº³å…¥å…¶ç»„åˆä¸­çš„æœ€å¤§æŒ‘æˆ˜ã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-tools-visual-regression-testing/","summary":"è¿™ç¯‡åšæ–‡èšç„¦äº UI æµ‹è¯•æœ€ä½³å®è·µçš„å·¥å…·ï¼Œç¬¬äºŒç¯‡ä»‹ç»äº†è§†è§‰å›å½’æµ‹è¯•ã€‚æ–‡ç« è¯¦ç»†è§£é‡Šäº†è§†è§‰å›å½’æµ‹è¯•åœ¨ UI å¼€å‘ä¸­çš„é‡è¦æ€§ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ç›¸å…³å·¥å…·è¿›è¡Œè‡ªåŠ¨åŒ–è§†è§‰æµ‹è¯•ã€‚è¯»è€…å°†äº†è§£å¦‚ä½•æ•æ‰å’Œæ¯”è¾ƒé¡µé¢æˆªå›¾ï¼Œä»¥ç¡®ä¿ç•Œé¢åœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„å˜åŒ–ä¸å½±å“ç°æœ‰çš„è®¾è®¡ã€‚é€šè¿‡è§†è§‰å›å½’æµ‹è¯•ï¼Œè¯»è€…èƒ½å¤Ÿæ›´å…¨é¢åœ°éªŒè¯ UI çš„å¤–è§‚å’Œå¸ƒå±€ï¼Œæé«˜æµ‹è¯•çš„å…¨é¢æ€§å’Œå‡†ç¡®æ€§ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„å·¥å…·ç¯‡ï¼ˆäºŒï¼‰ï¼šè§†è§‰å›å½’æµ‹è¯•"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nä¸€äº› UI æµ‹è¯•é—®é¢˜åŠ Cypress çš„è§£å†³æ–¹æ¡ˆ åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/tools/ui-testing-problems-cypress.md\næ‹›å‹Ÿè´¡çŒ®è€…ï¼šä½ æ˜¯å¦æ˜¯ TestCafÃ© ä¸“å®¶ï¼Ÿæˆ‘å¸Œæœ›å°†â€œé—®é¢˜â€éƒ¨åˆ†ä¸â€œCypress å¦‚ä½•è§£å†³å®ƒä»¬â€éƒ¨åˆ†åˆ†å¼€ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªä¸“é—¨ä»‹ç» TestCafÃ© å¦‚ä½•è§£å†³é—®é¢˜çš„ç« èŠ‚ï¼\nåœ¨æµ‹è¯•å‰ç«¯åº”ç”¨ç¨‹åºæ—¶ä¼šé¢ä¸´ä¸€äº›â€œä¼ ç»Ÿâ€æµ‹è¯•ä¸å…·å¤‡çš„æŒ‘æˆ˜ï¼šä½ éœ€è¦åè°ƒä¸€ä¸ªçœŸå®çš„æµè§ˆå™¨ã€‚æµè§ˆå™¨æœ¬è´¨ä¸Šæ˜¯åºå¤§çš„åº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦å¯åŠ¨å®ƒä»¬ï¼Œé€šè¿‡ä¸“é—¨çš„åº“è¿›è¡Œç®¡ç†ï¼Œåˆ©ç”¨ä¸€äº› API æ¥æ¨¡æ‹Ÿç”¨æˆ·å¯èƒ½æ‰§è¡Œçš„ç›¸åŒç±»å‹çš„äº¤äº’ï¼Œç„¶åæ£€æŸ¥å‰ç«¯åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼ˆåŸºæœ¬ä¸Šæ˜¯æ˜¾ç¤ºçš„å†…å®¹ï¼‰æ˜¯å¦ç¬¦åˆä½ çš„æœŸæœ›ã€‚\nè¿™ä¸ªè¿‡ç¨‹åŠå…¶æ¶‰åŠçš„æ­¥éª¤æ˜¯ä½¿ UI æµ‹è¯•å˜å¾—å›°éš¾çš„åŸå› ã€‚ä¸»è¦é—®é¢˜åŒ…æ‹¬ï¼š\nä¸€åˆ‡éƒ½æ˜¯å¼‚æ­¥çš„ï¼šç”¨æˆ·æ¨¡æ‹Ÿçš„äº¤äº’æ˜¯å¼‚æ­¥çš„ï¼ŒUI å¼‚æ­¥å“åº”ï¼Œæµè§ˆå™¨å¼‚æ­¥å“åº”ï¼Œä½ ç”¨äºåè°ƒå’Œä¸æµè§ˆå™¨é€šä¿¡çš„å·¥å…·ä¹Ÿæ˜¯å¼‚æ­¥çš„ã€‚ await page.goto(url); await page.click(\u0026#39;[data-test=\u0026#34;contact-us-button\u0026#34;]\u0026#39;); await expect(page).toMatch(\u0026#34;Contact Us\u0026#34;); è€Œä¸€æ—¦ä½ éœ€è¦å¤„ç†æ›´åŠ å¤æ‚çš„æƒ…å†µï¼Œç­‰å¾…æ‰€æœ‰äº‹æƒ…å°±ä¼šå¯¼è‡´ä½ æ·±é™·äºç®¡ç†æ‰¿è¯ºå’Œé€’å½’æ‰¿è¯ºä¹‹ä¸­ã€‚\nä½ è¦è‡ªåŠ¨åŒ–ç”¨æˆ·æµç¨‹ï¼šå› æ­¤ï¼Œä½ éœ€è¦å¤åˆ¶ç”¨æˆ·æµç¨‹ï¼Œæ£€æŸ¥è‡ªåŠ¨ç”¨æˆ·æµç¨‹ï¼Œè°ƒè¯•å¤±è´¥çš„ï¼ˆè¿˜æœ‰è‡ªåŠ¨çš„ã€è¶…çº§å¿«çš„ï¼‰ç”¨æˆ·æµç¨‹ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ä¸åŒäº‹å¹¶æ’å·¥ä½œï¼Œä»–é‡åˆ°äº†é—®é¢˜ï¼Œä½ è¦æ±‚ä»–æ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œä»¥ä¾¿ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ä»–çš„æµè§ˆå™¨ DevTools æ£€æŸ¥é—®é¢˜ï¼Œä½†æ˜¯å½“ä½ éœ€è¦æ£€æŸ¥é—®é¢˜æ—¶ï¼Œä»–å´ä¸åœåœ°ç‚¹å‡»/è¾“å…¥ã€‚è¿™å°±æ˜¯åœ¨ UI æµ‹è¯•ä¸­é‡åˆ°é—®é¢˜æ—¶éœ€è¦é¢å¯¹çš„æƒ…å†µã€‚æš‚åœ/åœæ­¢æ­£åœ¨è¿è¡Œçš„æµç¨‹å¾ˆå›°éš¾ï¼Œä½ éœ€è¦å¤šæ¬¡é‡æ–°è¿è¡Œç›¸åŒçš„æµ‹è¯•ã€‚\nåœ¨ Web åº”ç”¨ç¨‹åºä¸­ï¼Œæœ‰å¾ˆå¤šæƒ…å†µå¯èƒ½ä¼šå¹²æ‰°å…ƒç´ çš„äº¤äº’æ€§ï¼šå®ƒçš„å†…éƒ¨çŠ¶æ€ã€æ ‡è®°å±æ€§ã€è§†è§‰å¤–è§‚ã€å…¶ä»–å…ƒç´ çš„å¤–è§‚ç­‰ã€‚å…¶ä¸­ä¸€äº›å¾ˆå®¹æ˜“å‘ç°ï¼ˆä¾‹å¦‚ï¼Œâ€œç¦ç”¨â€å±æ€§ï¼‰ï¼Œä½†æœ‰äº›åˆ™ä¸æ˜¯ï¼ˆå…·æœ‰æ›´é«˜ z-index å€¼çš„å¦ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚æ€»çš„æ¥è¯´ï¼Œå¾ˆéš¾è°ƒè¯•é—®é¢˜çš„åŸå› ï¼Œå› ä¸ºä½ éœ€è¦ä»”ç»†æ£€æŸ¥å…ƒç´ æœ¬èº«ã€æ•´ä¸ªé¡µé¢ã€è‡ªåŠ¨åŒ–äº¤äº’çš„å·¥å…·ç­‰ã€‚\nè‡ªåŠ¨åŒ–å’Œæµ‹è¯•å‰ç«¯åº”ç”¨ç¨‹åºç¡®å®å¾ˆæœ‰æŒ‘æˆ˜ï¼Œä½†æœ‰ä¸€äº›å·¥å…·ä¸èƒ½å‡è½»ç—›è‹¦ï¼Œè¿˜æœ‰ä¸€äº›å·¥å…·èƒ½ä¸ºä½ èµ‹äºˆè¶…èƒ½åŠ›ï¼Œç»§ç»­å‰è¿›å§ï¼\nå¸¸ç”¨å·¥å…· è¦è‡ªåŠ¨åŒ–å’Œæµ‹è¯•å‰ç«¯åº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦ä¸¤ç§ä¸åŒçš„å·¥å…·ï¼š\nä¸€ä¸ªæµ‹è¯•è¿è¡Œå™¨ï¼šè´Ÿè´£æ‰§è¡Œæµ‹è¯•æœ¬èº«çš„å·¥å…·\nä¸€ä¸ªæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼šæä¾›ä¸€äº› API ä¸ä¸“é—¨å¯åŠ¨çš„æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„å·¥å…·\nè¿™ä¸¤ä¸ªå·¥å…·æ˜¯ç‹¬ç«‹çš„ï¼Œä½ é€‰æ‹©çš„æµ‹è¯•è¿è¡Œå™¨ï¼ˆä¾‹å¦‚ Jestï¼‰åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼ˆå¹¶æä¾›æ‰€æœ‰æµ‹è¯•åé¦ˆï¼‰ï¼Œè€Œç¬¬äºŒä¸ªå·¥å…·ï¼ˆå¦‚ Selenium æˆ– Puppeteerï¼‰åˆ™æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œæ‰§è¡Œæµ‹è¯•ä¸­ç¼–å†™çš„å‘½ä»¤ï¼Œå¹¶è¿”å›ç»“æœã€‚\nåŸºäºç»ˆç«¯çš„æµ‹è¯•è¿è¡Œç¨‹åºå’Œæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ä¹‹é—´å¯ä»¥è¿›è¡ŒåŒå‘é€šä¿¡ã€‚\nè¿™ä¸¤ä¸ªå·¥å…·æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œè¿™ä½¿å¾—å¾ˆå¤šäº‹æƒ…å˜å¾—å¤æ‚ï¼åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„æ“ä½œéå¸¸å¿«é€Ÿï¼ä½ å¯ä»¥å‡ç¼“å®ƒä»¬çš„é€Ÿåº¦ï¼Œä½†æ— æ³•æš‚åœæˆ–åœæ­¢å®ƒä»¬ï¼æˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œè‡³å°‘ä¸èƒ½é€šè¿‡äº¤äº’æ–¹å¼å®ç°\u0026hellip; å› ä¸ºä½ æ˜¾ç„¶å¯ä»¥åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­æ¥å›è·³è½¬ï¼Œåœ¨ä½ æƒ³è¦æ£€æŸ¥çš„æ­¥éª¤ä¹‹åæ³¨é‡Šæ‰æ‰€æœ‰å†…å®¹ï¼Œé‡æ–°è¿è¡Œæµ‹è¯•å¹¶æ£€æŸ¥å‘ç”Ÿäº†ä»€ä¹ˆã€‚ä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„æµç¨‹ã€‚è€Œä¸”ç”±äºæµ‹è¯•æ˜¯ä¸€ä¸ªå°ç¨‹åºï¼Œä½ çŸ¥é“ä½ éœ€è¦é‡å¤è¿™ä¸ªæ­¥éª¤å¾ˆå¤šæ¬¡â€¦â€¦\nåœ¨ä»¥ä¸Šæè¿°çš„æ–¹å¼ä¸­è¿è¡Œæµ‹è¯•æ—¶ï¼Œå¦ä¸€ä¸ªé—®é¢˜å‡ºç°äº†ï¼šé€šå¸¸ä½ åœ¨ç»ˆç«¯ç™»å½•ï¼ˆæµ‹è¯•è¿è¡Œå™¨å·¥ä½œçš„åœ°æ–¹ï¼‰ï¼Œè€Œæ“ä½œåˆ™å‘ç”Ÿåœ¨æµè§ˆå™¨ä¸­ã€‚**ä½ å¦‚ä½•å°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼Ÿ**ä½ æ˜¯å¦åœ¨ç»ˆç«¯å’Œæµè§ˆå™¨æ§åˆ¶å°ä¸­éƒ½æ·»åŠ æ—¶é—´æˆ³è®°å½•ï¼Ÿæ˜¯å¦åœ¨ä½ çš„å‰ç«¯åº”ç”¨ç¨‹åºä¸Šæ–¹æ·»åŠ ä¸€ä¸ªå›ºå®šçš„ DIVï¼Œæ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„æµ‹è¯•åç§°ï¼Ÿåœ¨ç»ˆç«¯ä¸­å‘ç”Ÿçš„äº‹æƒ…ä¸é€šè¿‡ç»ˆç«¯æ‰§è¡Œï¼ˆæˆ–è®°å½•ï¼‰çš„äº‹æƒ…ä¹‹é—´çš„è¿æ¥ä¹Ÿå¾ˆå›°éš¾ã€‚\næœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼šåœ¨ç»ˆç«¯ä¸­è°ƒè¯•æµ‹è¯•æ—¶ï¼Œä½ å¹¶ä¸æ˜¯åœ¨è°ƒè¯•çœŸå®çš„ DOM å…ƒç´ ï¼Œè€Œæ˜¯åœ¨è°ƒè¯•åºåˆ—åŒ–/å¼•ç”¨çš„å…ƒç´ ã€‚ç»ˆç«¯å’Œæµè§ˆå™¨ä¹‹é—´æ²¡æœ‰ä»»ä½•åŒå‘äº¤äº’æ€§ï¼Œå› æ­¤ä½ ä¸èƒ½åƒä½ ä¹ æƒ¯çš„é‚£æ ·å……åˆ†åˆ©ç”¨æµè§ˆå™¨çš„ DevToolsã€‚\nç›¸ä¿¡æˆ‘ï¼Œä»¥è¿™ç§æ–¹å¼ç†è§£ä¸ºä»€ä¹ˆæµ‹è¯•å¤±è´¥æˆ–ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¸å¦‚ä½ æœŸæœ›çš„é‚£æ ·å·¥ä½œçœŸçš„å¾ˆå›°éš¾ã€‚ä½†ä½ å¿…é¡»åœ¨æµ‹è¯•æ¶ˆè€—è¿‡ç¨‹çš„æ‰€æœ‰ä¸‰ä¸ªä¸åŒé˜¶æ®µé¢å¯¹è¿™ä¸ªé—®é¢˜ï¼š\n1ï¼šå½“ä½ æœ€åˆç¼–å†™æµ‹è¯•æ—¶\n2ï¼šå½“æµ‹è¯•å¤±è´¥æ—¶ï¼Œä½ ä¸èƒ½å°†ä»»ä½•ä¸œè¥¿å‘é€åˆ°ç”Ÿäº§ç¯å¢ƒ\n3ï¼šå½“ä½ éœ€è¦æ›´æ–°å®ƒä»¬å› ä¸ºè§„æ ¼å‘ç”Ÿäº†å˜åŒ–\næ­¥éª¤ #1 å’Œ #3 ç›¸å½“ç›¸ä¼¼ï¼Œ#3 å¯èƒ½æ›´å¿«ï¼Œä½† #1 å¯èƒ½ä¼šä»¤äººç­‹ç–²åŠ›å°½ã€‚å¦‚æœä½ ä½¿ç”¨çš„å·¥å…·ä¸å¸®åŠ©ä½ ï¼Œ#2 å°†ä½¿ä½ å¯¹ UI æµ‹è¯•äº§ç”ŸåŒæ¶â€¦\næµ‹è¯•è¿è¡Œå™¨çš„ç”¨é€” åœä¸‹æ¥ï¼Œæ€è€ƒä¸€ä¸‹æ‰€æåˆ°çš„å·¥å…·è¯•å›¾è¾¾åˆ°çš„ç›®æ ‡ï¼Œä»æµ‹è¯•è¿è¡Œå™¨å¼€å§‹ã€‚\næµ‹è¯•è¿è¡Œå™¨ç”¨äºç®¡ç†å•å…ƒæµ‹è¯•ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ–¹å¼ä½¿ç”¨/æ’å…¥å®ƒä»¬ï¼Œä½†å®ƒä»¬åŸºæœ¬ä¸Šæ˜¯ä¸ºäº†è¶…å¿«é€Ÿï¼ˆå¹¶è¡ŒåŒ–ï¼‰çš„å°å‹åŠŸèƒ½è°ƒç”¨è€Œè®¾è®¡çš„ã€‚å®ƒä»¬æ²¡æœ‰ç±»ä¼¼æµè§ˆå™¨ DevTools çš„åŠŸèƒ½ï¼Œä½†ä¸»è¦é—®é¢˜æ˜¯æµ‹è¯•è¶…æ—¶ã€‚æ¯ä¸ªæµ‹è¯•éƒ½æœ‰ä¸€ä¸ªè¶…æ—¶ï¼Œè¿™æ˜¯å®Œå…¨åˆç†çš„ã€‚ç”±äºè¶…æ—¶ï¼Œå¦‚æœä¸€ä¸ªæµ‹è¯•è¿è¡Œæ—¶é—´å¤ªé•¿ï¼Œæµ‹è¯•è¿è¡Œå™¨ä¼šå°†å…¶ç»ˆæ­¢ã€‚\nä½†æ˜¯å½“ä½ å°†æµ‹è¯•è¶…æ—¶ä¸ UI æµ‹è¯•çš„éœ€æ±‚ç»“åˆåœ¨ä¸€èµ·æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿæ­£å¦‚ä½ æ‰€çŸ¥ï¼Œç”¨æˆ·æµç¨‹å¯èƒ½ä¼šéå¸¸æ¼«é•¿ã€‚æœ‰å¾ˆå¤šåŸå› ï¼š\näº¤äº’æœ¬èº«å¯èƒ½ä¼šéå¸¸æ¼«é•¿ï¼Œå¹¶æ¶‰åŠå¤§é‡çš„ç‚¹å‡»ã€è¾“å…¥ã€è®¡ç®—ã€ç­‰å¾…ç­‰ã€‚\næœ‰å¾ˆå¤šä¸œè¥¿æ ¹æœ¬æ— æ³•ï¼ˆä»æ—¶é—´è§’åº¦ï¼‰å—æ§åˆ¶ï¼Œå°¤å…¶æ˜¯ XHR è¯·æ±‚ï¼ä½ æ— æ³•çŸ¥é“ Docker å®¹å™¨ï¼ˆæˆ–è€…æš‚å­˜æœåŠ¡å™¨ï¼‰å“åº”éœ€è¦å¤šé•¿æ—¶é—´ã€‚å¦‚æœåç«¯æ²¡æœ‰ä½¿ç”¨ Dockerï¼Œä½ è¿˜å¿…é¡»é¢å¯¹ç½‘ç»œç¼“æ…¢çš„é—®é¢˜ã€‚\nè¿™äº›ä¾‹å­å±•ç¤ºäº† UI æµ‹è¯•å¯èƒ½ä¼šæœ‰å¤šä¹ˆä¸å¯é¢„æµ‹ã€‚è§£å†³æ–¹æ¡ˆä¼¼ä¹å¾ˆæ–¹ä¾¿ï¼šå¢åŠ æµ‹è¯•è¶…æ—¶æ—¶é—´ï¼ä½†è¿™æ˜¯æœ€ç³Ÿç³•çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºï¼š\næµ‹è¯•è¶…æ—¶æ˜¯åœ¨å‡ºç°é—®é¢˜æ—¶å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´çš„â€œç»åˆ‘â€ã€‚å¦‚æœå°†è¶…æ—¶è®¾ç½®ä¸ºä¸€åˆ†é’Ÿï¼Œå¦‚æœå•ä¸ªæµ‹è¯•æœªæŒ‰é¢„æœŸå·¥ä½œï¼Œä½ å°†ç­‰å¾…ä¸€åˆ†é’Ÿï¼ˆ60 ç§’ï¼ï¼ï¼ï¼‰ã€‚æµ‹è¯•æŒç»­æ—¶é—´è¿‡é•¿æ˜¯å¼€å‘äººå‘˜è®¨åŒæµ‹è¯•çš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œå› ä¸ºæµæ°´çº¿æ°¸è¿œæ— æ³•ç»“æŸã€‚å°½ç®¡å¦‚æ­¤ï¼šåœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸­ï¼Œä½ æ— æ³•ç¡®å®š 60 ç§’æ˜¯å¦è¶³å¤Ÿâ€¦â€¦ æƒ³æƒ³ AWS Lambda åœ¨æ…¢æœåŠ¡å™¨å”¤é†’æ—¶æ‰€éœ€çš„æ—¶é—´ï¼Œå†åŠ ä¸Šç½‘ç»œé—®é¢˜â€¦â€¦\nè°ƒè¯•è¿‡ç¨‹æ€ä¹ˆåŠï¼Ÿè¯·è®°ä½ï¼Œå½“ç”±äºè¶…æ—¶è€Œç»ˆæ­¢æµ‹è¯•æ—¶ï¼Œè‡ªåŠ¨åŒ–æµè§ˆå™¨ä¼šè¢«è‡ªåŠ¨å…³é—­â€¦â€¦\næœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œè®°ä½ä½ éœ€è¦è¿›è¡Œä¸ DOM ç›¸å…³çš„æ–­è¨€ã€‚åœ¨ UI æµ‹è¯•ä¸­ï¼Œä½ ä¸å¤„ç†å¯¹è±¡ã€æ•°ç»„å’ŒåŸºå…ƒï¼Œè€Œæ˜¯åŸºæœ¬ä¸Šå¤„ç† DOM å…ƒç´ ã€‚åƒâ€œæˆ‘æœŸæœ›å…ƒç´ ç­‰äºâ€¦â€è¿™æ ·çš„æ–­è¨€æ˜¯æ— æ•ˆçš„ï¼Œå°½ç®¡å¯¹äºå•å…ƒæµ‹è¯•è€Œè¨€æ˜¯æœ‰æ•ˆçš„ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªé—®é¢˜é€šå¸¸é€šè¿‡å¤–éƒ¨æ’ä»¶æ¥è§£å†³ã€‚\næµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·çš„ç”¨é€” Selenium å’Œ Puppeteer æ—¨åœ¨æä¾›ä¸€ç§ç®€å•ã€ä¸ä¾èµ–äºé­”æ³•çš„ UI è‡ªåŠ¨åŒ–ä½“éªŒã€‚å®ƒä»¬å¹¶ä¸æ˜¯ç”¨äºæµ‹è¯• UIï¼Œè€Œåªæ˜¯ä¸ºäº†è‡ªåŠ¨æ‰§è¡Œç”¨æˆ·äº¤äº’ã€‚è‡ªåŠ¨åŒ–å’Œæµ‹è¯•åœ¨æŸäº›æ–¹é¢æœ‰é‡å ï¼Œä½†å®ƒä»¬å¹¶ä¸ç›¸åŒã€‚ä¸¤è€…éƒ½è¯•å›¾ç†è§£æŒ‰é’®æ˜¯å¦å¯ç‚¹å‡»ï¼Œå¹¶å°è¯•ç‚¹å‡»å®ƒï¼Œä½†å‰è€…åœ¨å¤±è´¥æ—¶ä¼šå¤±è´¥ï¼Œè€Œåè€…ä¼šå°è¯•å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆå¤±è´¥ã€‚å‰è€…å‘Šè¯‰ä½ ä¸€ä¸ªå…ƒç´ ä¸åœ¨é¡µé¢ä¸Šï¼Œè€Œåè€…å‘Šè¯‰ä½ å®ƒä¸åœ¨é¡µé¢ä¸Šæ˜¯å› ä¸ºå…ˆå‰çš„ XHR è¯·æ±‚å¤±è´¥äº†ã€‚\næˆ‘ä»¬ä¹ æƒ¯äºå°†æµ‹è¯•è¿è¡Œå™¨ä¸æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶å°è¯•å……åˆ†åˆ©ç”¨å®ƒä»¬ï¼Œä½†ç”±äºä¸¤ä¸ªéé›†æˆä¸”ä¸åŒçš„å·¥å…·æ— æ³•æä¾›çš„é—®é¢˜è€Œæ„Ÿåˆ°å›°æ‰°ã€‚\nå†è°ˆè®ºæµ‹è¯•ï¼ˆå’Œå¾…æµ‹è¯•çš„åº”ç”¨ç¨‹åºï¼‰çš„å¯è°ƒè¯•æ€§ï¼šä¸ºäº†å‡é€Ÿ/è°ƒè¯•/æš‚åœ/åœæ­¢/ä½¿å®ƒä»¬å·¥ä½œç­‰ç­‰ï¼Œä½ éœ€è¦ç»å¸¸â€œä¼‘çœ â€æµ‹è¯•ã€‚è¿™æ˜¯ä¸€ç§å¸¸è§çš„å®è·µï¼Œæ—¢å› ä¸ºå®ƒåœ¨çŸ­æœŸå†…è§£å†³äº†é—®é¢˜ï¼Œæœ‰æ—¶å› ä¸ºä½ æ²¡æœ‰å…¶ä»–é€‰æ‹©ï¼ˆè¯·é˜…è¯» ç­‰å¾…ï¼Œä¸è¦ä¼‘çœ  éƒ¨åˆ†ï¼‰ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ·»åŠ ä¸€äº›**â€œä¼‘çœ â€æ­¥éª¤ä¼šä½¿æµ‹è¯•å˜å¾—è¶Šæ¥è¶Šç³Ÿç³•**ï¼Œè¶Šæ¥è¶Šæ…¢ã€‚æ­£å¦‚æˆ‘ä¹‹å‰æ‰€å†™çš„ï¼šæµ‹è¯•çš„ç¼“æ…¢æ˜¯å¯¼è‡´å¼€å‘äººå‘˜è®¨åŒ UI æµ‹è¯•çš„æœ€å¸¸è§ç¼ºé™·ä¹‹ä¸€ã€‚\næ­¤å¤–ï¼š**æµ‹è¯•å¤±è´¥æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ**åœ¨ç†è§£å¦‚ä½•ä¿®å¤é”™è¯¯ä¹‹å‰ï¼Œä½ å¯ä»¥é‡‡å–ä»€ä¹ˆæªæ–½äº†è§£é—®é¢˜ï¼Ÿå¦‚æœä½ è¶³å¤Ÿå¹¸è¿åœ°åœ¨æœ¬åœ°å‘ç°äº†æœ‰é—®é¢˜çš„æµ‹è¯•ï¼Œé‚£ä¹ˆä½ çš„ç—›è‹¦æ˜¯æœ‰é™çš„ã€‚ä½†å¦‚æœæµ‹è¯•åœ¨æµæ°´çº¿ä¸­å¤±è´¥ï¼Œå¦‚æœä½ æ²¡æœ‰ç•Œé¢ï¼Œä½ æ€ä¹ˆçŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä½ æ˜¯å¦æ·»åŠ äº†ä¸€äº›è‡ªåŠ¨æˆªå›¾çš„ä¿é™©ä¼ï¼Ÿæœ‰ä»€ä¹ˆæ¯”æˆªå›¾æ›´ç›´è§‚çš„å—ï¼Ÿä¸å¹¸çš„æ˜¯â€¦â€¦\nä½ ç”šè‡³éœ€è¦åˆ©ç”¨ç¬¬ä¸‰æ–¹è°ƒè¯•å·¥å…·ï¼ˆReact DevToolsã€Vue DevTools ç­‰ï¼‰ï¼Œä½†å°†å®ƒä»¬å®‰è£…åˆ°å—æ§æµè§ˆå™¨ä¸Šçš„è¿‡ç¨‹å¹¶ä¸æ˜¯ä¸–ç•Œä¸Šæœ€æ–¹ä¾¿çš„ã€‚\næœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼šå¯¹æœåŠ¡å™¨è¿›è¡Œå­˜æ ¹åŒ–å¹¶æ–­è¨€å…³äº XHR è¯·æ±‚çš„å†…å®¹å¯èƒ½è¢«è§†ä¸ºæµ‹è¯•å®ç°ç»†èŠ‚â€¦ ä½†æˆ‘ä¸è¿™ä¹ˆè®¤ä¸ºï¼Œæœ‰ä¸¤ä¸ªåŸå› ï¼š\nåœ¨è°ˆåˆ°é»‘ç›’æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬æåˆ°äº†ï¼ˆå¥½çš„ï¼‰å®è·µï¼Œå³é¿å…æµ‹è¯•æŸäº›ä¸œè¥¿çš„å·¥ä½œæ–¹å¼ï¼Œåªé›†ä¸­åœ¨å®ƒåšäº†ä»€ä¹ˆä¸Šã€‚åº”ç”¨äºå‰ç«¯åº”ç”¨ç¨‹åºæ—¶ï¼Œæ„å‘³ç€åªæµ‹è¯•åº”ç”¨ç¨‹åºå‘ç”¨æˆ·å…¬å¼€çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯å®ƒæ˜¯å¦‚ä½•å…¬å¼€çš„ï¼ˆå®ƒæ˜¯å¦ä½¿ç”¨ React æˆ– Vue.jsã€æ˜¯å¦å°†æ•°æ®ä¿å­˜åˆ° localStorage æˆ– sessionStorage å¹¶ä¸é‡è¦ï¼‰ã€‚ç›¸åŒçš„åŸåˆ™ä¹Ÿå¯ä»¥åº”ç”¨äºå®¢æˆ·ç«¯/æœåŠ¡å™¨é€šä¿¡ï¼Œä½†äº†è§£æŸäº‹ä¹‹æ‰€ä»¥æ²¡æœ‰å‘ç”Ÿæ˜¯å› ä¸ºé”™è¯¯çš„ XHR è¯·æ±‚å¯èƒ½å¾ˆå›°éš¾ï¼ˆç‰¹åˆ«æ˜¯å½“ä½ ä»¥æ— å¤´æ¨¡å¼è¿è¡Œè‡ªåŠ¨åŒ–æµè§ˆå™¨æ—¶ï¼‰ã€‚è€Œé€šè¿‡æ–­è¨€è¯·æ±‚è´Ÿè½½ã€å“åº”è´Ÿè½½ã€å“åº”çŠ¶æ€ç­‰ï¼Œä½ å¾—åˆ°çš„å¸®åŠ©æ˜¯æ— ä»·çš„ï¼ˆå§‹ç»ˆå…³æ³¨æµ‹è¯•åœ¨å¤±è´¥æƒ…å†µä¸‹å¦‚ä½•å¼•å¯¼ä½ è¯†åˆ«é—®é¢˜ï¼‰ã€‚\nå¦‚æœä½ ä½¿ç”¨ Pact æˆ–ç±»ä¼¼çš„å·¥å…·æµ‹è¯•å®¢æˆ·ç«¯/æœåŠ¡å™¨åˆåŒï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦è¿™æ ·åšï¼Œä½†åœ¨ä½ çš„å·¥ä½œæµä¸­æ˜¯å¦æœ‰è¿™ç±»æµ‹è¯•ï¼Ÿ\nå¦‚æœä½ æ˜¯å‰ç«¯å¼€å‘äººå‘˜ï¼Œä½ çŸ¥é“ä½ ä¸èƒ½æ€»æ˜¯åœ¨åç«¯å·¥ä½œå®Œæˆåæ‰å¼€å§‹å·¥ä½œã€‚ä½†å¦‚æœä»–ä»¬ä¸ºä½ æä¾›äº†å®Œæ•´çš„ JSON å“åº”ï¼Œå­˜æ ¹åŒ–åç«¯å¯ä»¥è®©ä½ å®Œæˆæ‰€æœ‰å‰ç«¯ç¼–ç å·¥ä½œï¼Œåªéœ€åœ¨é›†æˆå‰ç«¯ä¸åç«¯æ—¶æ£€æŸ¥ä¸€åˆ‡æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚è¿™æ¶‰åŠåˆ°ç”Ÿäº§åŠ›é—®é¢˜ã€‚\néšæ€§æµ‹è¯•æŒ‘æˆ˜ ä¸Šè¿°è€ƒè™‘å¸¦æ¥äº†å¦ä¸€ä¸ªé—®é¢˜ï¼šæµ‹è¯•ä»£ç åº”è¯¥å°½å¯èƒ½ç®€å•ã€‚æµ‹è¯•å…è®¸ä½ æ£€æŸ¥ä¸€åˆ‡æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼Œä½†å®ƒä»¬æ¯•ç«Ÿæ˜¯å°å‹ç¨‹åºã€‚å› æ­¤ï¼Œä½ éœ€è¦éšç€æ—¶é—´æ¥ç»´æŠ¤å®ƒä»¬ã€‚ç”±äºä½ éœ€è¦åœ¨ä¸€æ®µæ—¶é—´åç†è§£å®ƒä»¬ï¼ˆå¦‚æœä½ éœ€è¦èŠ±è´¹æ•°å°æ—¶æ¥ç†è§£ä¸ºä»€ä¹ˆå’Œå¦‚ä½•æµ‹è¯•å·¥ä½œï¼Œé‚£æ˜¯ä¸å¯è¡Œçš„ï¼Œæµ‹è¯•åº”è¯¥å¸®åŠ©ä½ ï¼Œè€Œä¸æ˜¯åƒç³Ÿç³•çš„ä»£ç é‚£æ ·ä½¿ä½ çš„ç”Ÿæ´»å˜å¾—å¤æ‚ï¼‰ï¼Œå› æ­¤å®ƒä»¬çš„ä»£ç ä¸åº”è¯¥å¾ˆå¤æ‚ï¼ˆè¯·é˜…è¯» å°†è½¯ä»¶æµ‹è¯•è§†ä¸ºæ–‡æ¡£å·¥å…· éƒ¨åˆ†ï¼‰ã€‚\nç„¶è€Œï¼Œå¹¶éä¸ºåƒ UI æµ‹è¯•è¿™æ ·å›°éš¾çš„ä»»åŠ¡è€Œåˆ›å»ºçš„å·¥å…·å¹¶ä¸å¸®åŠ©ä½ ç¼–å†™ç®€å•çš„æµ‹è¯•ä»£ç ã€‚å› æ­¤ï¼Œä½ çš„æµ‹è¯•ç”Ÿæ´»å†æ¬¡å˜å¾—æ›´åŠ å›°éš¾â€¦â€¦ å› æ­¤ï¼Œä½ æ³¨å®šè¦èŠ±è´¹å¤§é‡æ—¶é—´è°ƒè¯•å¤±è´¥çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç†è§£å‰ç«¯åº”ç”¨ç¨‹åºä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆé—®é¢˜ï¼ˆå‡è®¾ç¡®å®å‡ºç°äº†é—®é¢˜â€¦â€¦ï¼‰ã€‚ç»“æœæ˜¯æµ‹è¯•çš„å¯ä¿¡åº¦é™ä½â€¦â€¦\nCypress åŠ©åŠ›è§£å†³ åˆ«æ‹…å¿ƒï¼Œæˆ‘å¹¶ä¸æ˜¯ä¸ºäº†è®©ä½ æ„Ÿåˆ°æ‚²ä¼¤è€Œæè¿°è¿™ç§æˆå‰§æ€§çš„æƒ…å†µğŸ˜‰ï¼Œè€Œåªæ˜¯ä¸ºäº†è®©ä½ æ„è¯†åˆ°ä½ ä¸éœ€è¦æ··åˆä½¿ç”¨é€šç”¨å·¥å…·ï¼Œä½ éœ€è¦ä¸€äº›ä¸“é—¨è®¾è®¡çš„å·¥å…·ï¼æˆ‘æƒ³åˆ°äº†ä¸¤ä¸ªå·¥å…·ï¼šCypress å’Œ TestCafÃ©ã€‚ä¸¤è€…éƒ½éå¸¸å‡ºè‰²ï¼Œå› ä¸ºå®ƒä»¬åªæœ‰ä¸€ä¸ªç›®æ ‡ï¼šé‡æ–°å‘æ˜ï¼ˆæˆ–ä¿®å¤ï¼Ÿï¼‰UI æµ‹è¯•é¢†åŸŸã€‚\næˆ‘å°†ä¸“æ³¨äº Cypressï¼Œå¹¶ç¨åå°†å®ƒä»¬è¿›è¡Œæ¯”è¾ƒã€‚ Cypress æ˜¯å¦‚ä½•è§£å†³ä¸Šè¿°æ‰€æœ‰é—®é¢˜çš„ï¼Ÿé¦–å…ˆâ€¦\nCCypress æ‹¥æœ‰ç”¨æˆ·ç•Œé¢ æ˜¯çš„ï¼Œä½ é€šè¿‡ç»ˆç«¯å¯åŠ¨ Cypressï¼Œä½†æ˜¯ä½ æ˜¯é€šè¿‡å®ƒçš„ç”¨æˆ·ç•Œé¢ æ¥ä½¿ç”¨å®ƒçš„ï¼è€Œä¸”è¯¥ç”¨æˆ·ç•Œé¢æ˜¯ä¸ä½ çš„åº”ç”¨ç¨‹åºå¹¶æ’çš„ï¼è¯·çœ‹è¿™ä¸ªé¢„è§ˆ\nå‘½ä»¤æ—¥å¿—ç”¨æˆ·ç•Œé¢ï¼ˆå·¦ä¾§ï¼‰ä¸ä½ çš„å‰ç«¯åº”ç”¨ç¨‹åºï¼ˆå³ä¾§ï¼‰å¹¶æ’è¿è¡Œã€‚\nè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå‘½ä»¤æ—¥å¿—ç”¨æˆ·ç•Œé¢ çš„ä¸»è¦ç‰¹ç‚¹æœ‰å“ªäº›ï¼Ÿ\nä½ ç›´æ¥è·å¾— Cypress æ­£åœ¨æ‰§è¡Œçš„åé¦ˆã€‚æ¯æ¬¡é€šè¿‡å…¶å‘½ä»¤ï¼ˆcy.clickã€cy.type ç­‰ï¼‰è¦æ±‚ Cypress ä¸é¡µé¢äº¤äº’æ—¶ï¼ŒCypress éƒ½ä¼šå‘æµ‹è¯•è¿è¡Œå™¨æ·»åŠ ä¸€ä¸ªæ—¥å¿—ã€‚è¿™ç§å†—é•¿çš„è‡ªåŠ¨æ—¥å¿—è®°å½•åœ¨ç¼–å†™æµ‹è¯•å’Œè°ƒè¯•æµ‹è¯•æ—¶éå¸¸æœ‰å¸®åŠ©ã€‚å®ƒæå¤§åœ°æé«˜äº†ä½ çš„ç”Ÿäº§åŠ›ï¼Œæ—¢å› ä¸ºå®ƒæ˜¯è‡ªåŠ¨çš„ï¼Œåˆå› ä¸ºå®ƒä¸ä½ çš„åº”ç”¨ç¨‹åºå¹¶æ’ã€‚ ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘å‘Šè¯‰è¿‡ä½ çš„ï¼Œå½“ç¼–å†™ UI æµ‹è¯•æ—¶ï¼Œç¼ºå°‘è¿½æº¯æ€§çš„è°ƒè¯•æ€§æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºé™·â€¦è®©æˆ‘å‘ä½ ä»‹ç»â€¦\näº¤äº’å¼æ—¶é—´æ—…è¡Œï¼šä¸ç¡®å®šåº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•è¾¾åˆ°ç‰¹å®šå‘½ä»¤æˆ–æµ‹è¯•å¤±è´¥çš„ï¼Ÿä½ æƒ³æŸ¥çœ‹ä¸€ä¸‹å‰ä¸€ä¸ªæ­¥éª¤çš„ UI å—ï¼Ÿè¿™å°±æ˜¯å‘½ä»¤æ—¥å¿—æ˜¯äº¤äº’å¼çš„åŸå› ï¼ä½ å¯ä»¥æ‚¬åœåœ¨å„ä¸ªè®°å½•çš„æ­¥éª¤ä¸Šï¼Œçœ‹çœ‹åº”ç”¨ç¨‹åºåœ¨ç‰¹å®šæ­¥éª¤çš„å¤–è§‚ï¼æˆ–è€…ï¼Œæ˜¾ç„¶ï¼Œä½ å¯ä»¥å›ºå®šä¸€ä¸ªæ­¥éª¤å¹¶æ£€æŸ¥ DOMï¼Œæ£€æŸ¥åº”ç”¨ç¨‹åºåœ¨è¯¥æ­¥éª¤ä¹‹å‰/ä¹‹åçš„å¤–è§‚ç­‰ã€‚è¿™æ˜¯å¦ä¸€ä¸ªæ‹¯æ•‘ç”Ÿå‘½çš„åŠŸèƒ½ï¼Œæ— è®ºæ˜¯åœ¨åˆæ¬¡æ¥è§¦æ—¶ï¼ˆåœ¨ä½ ä¸äº†è§£æµ‹è¯•å·¥å…·çš„æƒ…å†µä¸‹è°ƒè¯•æµ‹è¯•å¯èƒ½æ˜¯ä¸€åœºå™©æ¢¦ï¼‰è¿˜æ˜¯åœ¨æ—¥å¸¸æµ‹è¯•å·¥ä½œä¸­ã€‚å®ƒä½¿æµ‹è¯•æ£€æŸ¥å˜å¾—å¦‚æ­¤æ–¹ä¾¿ï¼Œä»¥è‡³äºä½ å®Œå…¨å¿˜è®°äº†æ²¡æœ‰å®ƒæ˜¯å¦‚ä½•è¿›è¡Œæµ‹è¯•çš„ã€‚åœ¨ æ­¤è§†é¢‘ ä¸­æŸ¥çœ‹å…¶å®é™…æ•ˆæœã€‚ å…¶ä»–å‘½ä»¤æ—¥å¿—å®ç”¨å·¥å…·åŒ…æ‹¬ï¼š\nå‘½ä»¤è¯¦ç»†æ—¥å¿—ï¼šå•å‡»å‘½ä»¤ä¼šåœ¨æµè§ˆå™¨ DevTools ä¸­æ˜¾ç¤ºæ›´è¯¦ç»†çš„æ—¥å¿—\næ–­è¨€æ£€æŸ¥ï¼šå•å‡»æ–­è¨€ä¼šåœ¨æµè§ˆå™¨ DevTools ä¸­æ˜¾ç¤ºé¢„æœŸå€¼å’Œç»“æœã€‚ä½ æ— éœ€ä»¥æ›´è¯¦ç»†çš„æ—¥å¿—è®°å½•é‡æ–°å¯åŠ¨æµ‹è¯•\nå¦‚æœä½ ç›‘è§† XHR è°ƒç”¨ï¼Œåˆ™å‘½ä»¤æ—¥å¿—ä¼šæ˜¾ç¤ºå—ç›‘è§†/å­˜æ ¹è°ƒç”¨çš„æ‘˜è¦ä»¥åŠå®ƒä»¬è¢«è°ƒç”¨çš„æ¬¡æ•°\nâ€¦ è¿˜æœ‰æ›´å¤šï¼Œè¯¦è§ Cypress å®˜æ–¹æ–‡æ¡£ä¸­çš„å…¶åŠŸèƒ½ã€‚\nCypress å‘½ä»¤è¡Œ é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘½ä»¤æ˜¯å¼‚æ­¥çš„ï¼Œè¯·çœ‹ä¸‹é¢çš„ç‰‡æ®µ\ncy.visit(url); cy.click(\u0026#39;[data-test=\u0026#34;contact-us-button\u0026#34;]\u0026#39;); cy.contains(\u0026#34;Contact Us\u0026#34;).should(\u0026#34;be.visible\u0026#34;); ä½ æ³¨æ„åˆ°æœ‰ await å—ï¼Ÿæ²¡æœ‰ï¼ŒåŸå› å¾ˆç®€å•ï¼šåœ¨ UI ä¸­çš„æ‰€æœ‰äº‹ç‰©éƒ½éœ€è¦ç­‰å¾…ï¼Œä¸ºä»€ä¹ˆä½ è¦ç®¡ç† await å‘¢ï¼ŸCypress ä¼šä¸ºä½ â€œç­‰å¾…â€ï¼Œè¿™æ„å‘³ç€å¦‚æœä¸€ä¸ª DOM å…ƒç´ åœ¨ä½ å°è¯•ä¸ä¹‹äº¤äº’æ—¶è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæ²¡é—®é¢˜ï¼Cypress ä¼šé‡è¯•ï¼ˆé»˜è®¤ä¸º 4 ç§’ï¼‰ï¼Œç›´åˆ°å¯ä»¥ä¸å…ƒç´ äº¤äº’ï¼ˆç”¨æˆ·çš„æ–¹å¼ï¼Œå› æ­¤ä»…å½“å…ƒç´ å¯è§æ—¶ï¼Œä¸è¢«ç¦ç”¨ï¼Œæ²¡æœ‰è¢«è¦†ç›–ç­‰ï¼‰ã€‚å› æ­¤ï¼Œä½ å¯ä»¥å®Œå…¨é¿å…é¢å¯¹å‰ç«¯å›ºæœ‰çš„å¼‚æ­¥æ€§ï¼\nä¸Šè¿°åŠŸèƒ½è¿˜æœ‰ä¸€ä¸ªæ•ˆæœï¼šä½ è¿˜è®°å¾—é‚£ä¸ªä¸å¤ªå¥½çš„æµ‹è¯•è¶…æ—¶å—ï¼Ÿå¥½å§ï¼ŒæŠŠå®ƒå¿˜æ‰å§ï¼åœ¨ Cypress ä¸­ï¼Œæµ‹è¯•æ²¡æœ‰è¶…æ—¶ï¼ä½ æ— éœ€çŒœæµ‹ï¼ˆå¹¶æ ¹æ®éœ€è¦ä¸æ–­è°ƒæ•´ï¼‰æµ‹è¯•çš„æŒç»­æ—¶é—´ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æœ‰è‡ªå·±çš„è¶…æ—¶æ—¶é—´ï¼å¦‚æœå‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œæµ‹è¯•å¾ˆå¿«å°±ä¼šå¤±è´¥ï¼è€Œä¸”å¦‚æœæµ‹è¯•é¡ºåˆ©è¿›è¡Œï¼Œå°±ä¸ä¼šé¢ä¸´æµ‹è¯•è¶…æ—¶çš„é—®é¢˜ï¼\næœ€åä½†å¹¶éæœ€ä¸é‡è¦çš„ï¼šä¸ DOM ç›¸å…³çš„å‘½ä»¤æŠ¥å‘Šä¸ DOM ç›¸å…³çš„é”™è¯¯ï¼Œä½ éœ€è¦çš„æ–¹å¼ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\nCypress æ¸…æ™°åœ°ä»ç”¨æˆ·/DOM è§†è§’æŠ¥å‘Šé—®é¢˜ã€‚\nå¾ˆæ˜æ˜¾ç”¨æˆ·ä¸ºä»€ä¹ˆæ— æ³•åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡å­—ã€‚Cypress ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªå…·æœ‰åƒç”¨æˆ·ä¸€æ ·æ‰§è¡Œå‘½ä»¤çš„å·¥å…·ï¼Œä½†å…¶æ¸…æ™°çš„é”™è¯¯æŠ¥å‘Šç›¸å½“ä¸åŒå¯»å¸¸ã€‚\næµ‹è¯•è´¨é‡ åœ¨æµ‹è¯•ä¸­ï¼Œå¼€å‘äººå‘˜å¯èƒ½ä¼šçŠ¯å¾ˆå¤šå¸¸è§çš„é”™è¯¯ã€‚æœ‰äº›é”™è¯¯å¯èƒ½å¾®ä¸è¶³é“ï¼Œä½†æœ‰äº›åˆ™ç›¸å½“ä¸¥é‡ã€‚Cypress å¼ºåˆ¶ä½ é¿å…ä¸€äº›é”™è¯¯ï¼Œå…·ä½“å¦‚ä½•å‘¢ï¼Ÿ\né€šè¿‡ AAA-è´¨é‡çš„æ–‡æ¡£ï¼šå¿«æ¥çœ‹ä¸€ä¸‹ï¼Œå®ƒåŒ…å«äº†å¾ˆå¤šæœ€ä½³å®è·µå’Œåæ¨¡å¼ã€‚æ‰€æœ‰äººéƒ½å¯¹æ–‡æ¡£çš„è´¨é‡ç»™äºˆäº†é«˜åº¦è¯„ä»·ã€‚\né‡ç½®çŠ¶æ€ï¼šæµ‹è¯•ä¸ä¼šå…±äº«çŠ¶æ€ï¼Œå› ä¸ºæ¯ä¸ªæµ‹è¯•è¿è¡Œä¹‹å‰éƒ½ä¼šé‡ç½® cookiesã€localStorage ç­‰ã€‚ä½ å½“ç„¶å¯ä»¥åˆ›å»ºæ™ºèƒ½å‘½ä»¤ï¼Œä»¥ä¿æŒæµ‹è¯•çš„ç‹¬ç«‹æ€§ï¼ˆå…±äº«çŠ¶æ€çš„çœŸæ­£é—®é¢˜åœ¨äºæµ‹è¯•çš„ç‹¬ç«‹æ€§ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘è¯¾ç¨‹ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼‰ï¼Œä½†ä½ æ— æ³•è·³è¿‡é‡ç½®ã€‚è¿™æ˜¯ä¸ªä¼˜åŠ¿ï¼Œç›¸ä¿¡æˆ‘ ğŸ˜‰\nç§»é™¤äº†åœ¨æ–­è¨€å¤±è´¥æ—¶æ¢å¤æµ‹è¯•çš„å¯èƒ½æ€§ï¼Œå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œä½ å°±æ— æ³•ç»§ç»­è¿›è¡Œã€‚ç¡®å®éœ€è¦ä½¿æµ‹è¯•æ›´åŠ ç¨³å®šï¼Œå³ä½¿æœ‰æ—¶å¯èƒ½çœ‹èµ·æ¥æœ‰äº›å›°éš¾ã€‚è¿™æ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ï¼Œå¦åˆ™ä½ å¯èƒ½ä¼šè¢«å…è®¸ç¼–å†™ç³Ÿç³•çš„æµ‹è¯•ã€‚\né€šè¿‡è®¸å¤šç­‰å¾…åŠ©æ‰‹ï¼šé‡è¯•èƒ½åŠ› å’Œ è‡ªåŠ¨ç­‰å¾… æ˜¯æ•‘å‘½ç¨»è‰ï¼Œå®ƒä»¬è®©ä½ å…³å¿ƒä½ çš„åº”ç”¨ç¨‹åºå’Œæµ‹è¯•ï¼Œè€Œä¸æ˜¯ç­‰å¾…å…ƒç´ ç­‰ã€‚Cypress å…è®¸ä½ ç­‰å¾… DOM å…ƒç´ ã€XHR è¯·æ±‚ã€é¡µé¢åŠ è½½ï¼Œå¹¶ä¸”å®ƒæ ¹æ®éœ€è¦è°ƒæ•´è¶…æ—¶ï¼ˆXHR è¯·æ±‚æˆ–é¡µé¢åŠ è½½å¯èƒ½éœ€è¦çš„æ—¶é—´æ¯”è¾“å…¥å…ƒç´ å‡ºç°è¦é•¿ï¼‰ï¼Œè€Œæ— éœ€ä½¿ç”¨å›ºå®šæ—¶é—´çš„ç­‰å¾…ï¼ˆå†æ¬¡å¼ºè°ƒï¼Œè¯·é˜…è¯»ç­‰å¾…ï¼Œä¸è¦ä¼‘çœ éƒ¨åˆ†\nç”Ÿäº§åŠ› Cypress åœ¨å¦ä¸€ä¸ªéå¸¸é‡è¦çš„æ–¹é¢è·èƒœï¼šæé«˜ç”Ÿäº§åŠ›ã€‚è¯·åœ¨ä¸“é—¨çš„ç« èŠ‚ä¸­è¯¦ç»†äº†è§£ï¼šå°†ä½ çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·.\nè°ƒè¯• å¦‚ä¸Šæ‰€è¿°ï¼Œæ²¡æœ‰ä¸€äº›ä¸“é—¨åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œè°ƒè¯•æµ‹è¯•å¯èƒ½ä¼šæˆä¸ºä¸€åœºå™©æ¢¦ã€‚è°ƒè¯•å¤±è´¥çš„æµ‹è¯•æœ‰ä¸¤ç§æƒ…å†µï¼š\nåœ¨ç¼–å†™æµ‹è¯•æ—¶\nåœ¨ CI/CD æµæ°´çº¿ä¸­æµ‹è¯•å¤±è´¥æ—¶\nCypress æä¾›äº†ä¸¤ä¸ªä»¤äººæƒŠå¹çš„è§£å†³æ–¹æ¡ˆï¼š\næ’­æ”¾/æš‚åœ åŠŸèƒ½**ï¼šé€šè¿‡ç¼–ç¨‹æˆ–é€šè¿‡ UIï¼Œä½ éƒ½å¯ä»¥æš‚åœæµ‹è¯•ç„¶åæ¢å¤ã€‚æ˜¯çš„ï¼Œå®ƒç”šè‡³æä¾›é€æ­¥å¯¼èˆªï¼Œå°±åƒä½ ä¹ æƒ¯äºåœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹å¹¶é€æ­¥è¿›è¡Œä¸€æ ·ã€‚ä½¿ç”¨æ’­æ”¾/æš‚åœä¸¤æ¬¡åï¼Œä½ å°±å†ä¹Ÿç¦»ä¸å¼€å®ƒäº† ğŸ˜Š æ’­æ”¾/æš‚åœå’Œæ—¶å…‰æ—…è¡Œæä¾›äº†ä»¤äººæƒŠå¹çš„ä½“éªŒï¼Œè®©ä½ å®Œå…¨å¿˜è®°å¸¸è§çš„è´¹æ—¶è°ƒè¯•å›°æ‰°ã€‚\nè‡ªåŠ¨æˆªå›¾å’Œè§†é¢‘ï¼šå¦‚æœæµ‹è¯•å¤±è´¥ï¼ŒCypress ä¼šä¿å­˜æµ‹è¯•çš„æœ€åä¸€æ­¥çš„æˆªå›¾ã€‚æœ‰æ—¶ï¼Œæœ€åä¸€æ­¥å¯ä»¥å¸®åŠ©ä½ ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼ˆç‰¹åˆ«æ˜¯å¦‚æœä½ æ·»åŠ äº†å¾ˆå¤šè¡¨è¾¾æ˜ç¡®æ„å›¾çš„æ–­è¨€ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥é˜…è¯»æ²¡æœ‰è‰¯å¥½çš„é€æ­¥æ–­è¨€ï¼Œä½ ä¼šé¢ä¸´ä»€ä¹ˆé£é™©ï¼‰ï¼Œä½†å¦‚æœæˆªå›¾ä¸èƒ½å¸®åŠ©ä½ å¤ªå¤š\u0026hellip; Cypress è¿˜ä¼šå½•åˆ¶æ•´ä¸ªæµ‹è¯•çš„è§†é¢‘ï¼ŒåŒ…æ‹¬æµ‹è¯•è¿è¡Œå™¨ UIã€‚æœ‰æ—¶ï¼Œè‡ªåŠ¨è®°å½•å¸®åŠ©æˆ‘ä»¥æœ€ç®€å•çš„æ–¹å¼å‘ç°ä¸ CI ç›¸å…³çš„é—®é¢˜ã€‚\nå¸¸è§é—®é¢˜ æˆ‘åˆšåˆšå°† Cypress ä»‹ç»ä¸ºä¸€ä¸ªå®Œç¾çš„å·¥å…·ï¼Œç°åœ¨æˆ‘é¢„å…ˆå›ç­”ä¸€äº›ç»å¸¸é—®æˆ‘çš„å¸¸è§é—®é¢˜ï¼š\nCypress æ˜¯å¦å…è´¹ï¼Ÿæ˜¯çš„ï¼Œå®ƒæ˜¯å…è´¹ã€å¼€æºã€é‡‡ç”¨ MIT è®¸å¯ã€‚åªæœ‰å½“ä½ æƒ³è¦åˆ©ç”¨å…¶ Dashboard æœåŠ¡ æ—¶ï¼Œæ‰éœ€è¦ä»˜è´¹ã€‚ç®€å•æ¥è¯´ï¼šä½ å¸Œæœ› Cypress æ‰˜ç®¡ä½ æµ‹è¯•çš„è§†é¢‘å—ï¼Ÿé‚£å°±éœ€è¦ä»˜è´¹ï¼Œå¦åˆ™ä¸€åˆ‡éƒ½æ˜¯å…è´¹çš„ã€‚\nCypress æ˜¯å¦æ”¯æŒé™¤ Chrome ä¹‹å¤–çš„å…¶ä»–æµè§ˆå™¨ï¼Ÿåœ¨æˆ‘å†™ä½œçš„æ—¶å€™ï¼ˆ2020 å¹´ 1 æœˆ 21 æ—¥ï¼‰ï¼ŒFirefox å’Œ Edge çš„æ”¯æŒæ­£å¤„äº beta æµ‹è¯•é˜¶æ®µã€‚\næˆ‘æåˆ°äº† TestCafÃ©ï¼Œå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\nTestCafÃ© æ²¡æœ‰ç±»ä¼¼äº Test Runner UI çš„åŠŸèƒ½ï¼Œåœ¨æˆ‘çœ‹æ¥æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºå¤±ã€‚ TestCafÃ© åœ¨ DOM å…ƒç´ è¶…æ—¶åˆ°æœŸæ—¶ç­‰å¾…ï¼Œè€Œ Cypress æœ€å¤šç­‰å¾…ç›¸åŒçš„è¶…æ—¶æ—¶é—´ã€‚å› æ­¤ï¼Œä½¿ç”¨ TestCafÃ© æ—¶ï¼Œä½ å¿…é¡»æ‰‹åŠ¨æ ¡å‡†ç­‰å¾…æ—¶é—´ï¼Œä»¥é¿å…æµ‹è¯•è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œè€Œä½¿ç”¨ Cypress åˆ™æ— éœ€å…³å¿ƒè¿™ä¸ªé—®é¢˜ã€‚ TestCafÃ© æ²¡æœ‰å®Œæ•´çš„ XHR è¯·æ±‚æ£€æŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰äº‰è®®çš„é—®é¢˜ï¼Œä½†æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿æµ‹è¯•æ›´åŠ å¯é ï¼Œå¹¶æä¾›æœ‰ç”¨çš„é”™è¯¯æŠ¥å‘Šã€‚ TestCafÃ© æ”¯æŒæ‰€æœ‰ç°æœ‰çš„æµè§ˆå™¨ï¼è¿™æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„ç‰¹ç‚¹ï¼Œè€Œ Cypress ä¸æ”¯æŒæ‰€æœ‰æµè§ˆå™¨ï¼Œä¹Ÿä¸æ”¯æŒç§»åŠ¨æµè§ˆå™¨ã€‚è¯·æ³¨æ„ï¼Œè·¨æµè§ˆå™¨çš„éœ€æ±‚å¯èƒ½è¢«é«˜ä¼°ï¼Œä½†å¦‚æœä½ ç¡®å®éœ€è¦ï¼ŒTestCafÃ© æ˜¯å®Œç¾çš„å·¥å…·ã€‚ Cypress æœ‰ç¼ºç‚¹å—ï¼Ÿå½“ç„¶æœ‰ï¼å®ƒå­˜åœ¨ä¸€ä¸ª ä¸ window.fetch ç›¸å…³çš„å†å²é—®é¢˜ï¼Œè¿™è¿«ä½¿ä½ ä½¿ç”¨ Axios æˆ–è€… æ·»åŠ ä¸€ä¸ªå˜é€šæ–¹æ³•ï¼Œè€Œä¸”ä½ å¯èƒ½éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤æ¥å¤„ç† OAuthï¼Œå› ä¸ºä½ çš„åº”ç”¨è¿è¡Œåœ¨ iframe ä¸­ã€‚ä½†å°½ç®¡å¦‚æ­¤ï¼Œå®ƒä»ç„¶æ˜¯æœ€å—æ¬¢è¿çš„ UI æµ‹è¯•å·¥å…·ä¹‹ä¸€ã€‚\næ›´ä¸€èˆ¬åœ°è¯´ï¼šè¯·è®°ä½ï¼Œæˆ‘ä»¬æ­£åœ¨è®¨è®º UI æµ‹è¯•ï¼ŒCypress åœ¨è¿™æ–¹é¢è¡¨ç°å¾—ç‰¹åˆ«å‡ºè‰²ã€‚å¦‚æœä½ åªæ˜¯éœ€è¦è‡ªåŠ¨åŒ–æµè§ˆå™¨ï¼ˆç”¨äºæ•°æ®æŠ“å–æˆ–å…¶ä»–ç”¨é€”ï¼‰ï¼Œè¯·ä¸è¦ä½¿ç”¨å®ƒï¼\nç»“è®º æ€»çš„æ¥è¯´ï¼Œä¸Šè¿°é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå¯ä»¥å½’çº³å¦‚ä¸‹ï¼š\nå‰ç«¯æµ‹è¯•ä¸­å­˜åœ¨å¼‚æ­¥é—®é¢˜ï¼ŒCypress å‡ ä¹å¯ä»¥å®Œå…¨é€æ˜åœ°å¤„ç†è¿™äº›é—®é¢˜ã€‚\né€æ­¥è°ƒè¯•ï¼šCypress çš„æ—¶å…‰æ—…è¡Œå’Œæ’­æ”¾/æš‚åœåŠŸèƒ½æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚\nCypress åœ¨æµ‹è¯•å¤±è´¥æ—¶æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ã€‚\nè°ƒè¯•å˜å¾—éå¸¸æ–¹ä¾¿ï¼Œå¤šäºäº†å¹¶æ’è¿è¡Œæµ‹è¯•å’Œåº”ç”¨ç¨‹åºã€‚\nåœ¨æµ‹è¯•å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨æˆªå›¾å’Œå½•åƒåŠŸèƒ½ä¸ºè¯Šæ–­é—®é¢˜æä¾›äº†å¸®åŠ©ã€‚\nCypress æµ‹è¯•æœ¬èº«æ²¡æœ‰è¶…æ—¶é™åˆ¶ï¼Œä½† Cypress å‘½ä»¤æœ‰è¶…æ—¶è®¾ç½®ã€‚\nCypress å…è®¸ä½ åœ¨æ²¡æœ‰åç«¯çš„æƒ…å†µä¸‹è½»æ¾è¿›è¡Œå·¥ä½œã€‚\nCypress å…·å¤‡è®¸å¤šæé«˜ç”Ÿäº§åŠ›çš„åŠŸèƒ½ã€‚\nCypress è®¾è®¡çš„å”¯ä¸€ç›®æ ‡æ˜¯ä½¿ UI æµ‹è¯•å˜å¾—ç®€å•æ˜“è¡Œã€‚\nå‚è€ƒèµ„æ–™ æŒæ¡ UI æµ‹è¯• - ä¼šè®®è§†é¢‘ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-tools-ui-testing-problems-cypress/","summary":"è¿™ç¯‡åšæ–‡èšç„¦äº UI æµ‹è¯•æœ€ä½³å®è·µçš„å·¥å…·ï¼Œé¦–ç¯‡ä»‹ç»ä¸€äº› UI æµ‹è¯•é—®é¢˜åŠ Cypress çš„è§£å†³æ–¹æ¡ˆã€‚æ–‡ç« æ¢è®¨äº†å¸¸è§ UI æµ‹è¯•éš¾é¢˜ï¼Œè¯¦ç»†ä»‹ç»äº† Cypress æ¡†æ¶å¦‚ä½•æä¾›å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å®æ—¶æŸ¥çœ‹ã€å¯é æ€§ã€é€Ÿåº¦ç­‰æ–¹é¢çš„ä¼˜åŠ¿ã€‚é€šè¿‡è¿™äº›è§£å†³æ–¹æ¡ˆï¼Œè¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ UI æµ‹è¯•ä¸­çš„æŒ‘æˆ˜ï¼Œæé«˜æµ‹è¯•æ•ˆç‡å’Œå¯é æ€§ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„å·¥å…·ç¯‡ï¼ˆä¸€ï¼‰ï¼šä¸€äº› UI æµ‹è¯•é—®é¢˜åŠ Cypress çš„è§£å†³æ–¹æ¡ˆ"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nå°†æµ‹è¯•è§†ä¸ºæ–‡æ¡£å·¥å…· åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/testing-perks/tests-as-documentation.md\næ–‡æ¡£ç¼–å†™é€šå¸¸å¾ˆå›°éš¾ï¼Œéœ€è¦ç²¾ç¡®è€Œç»†è‡´çš„å·¥ä½œï¼Œå¹¶è¦æ±‚æ•´ä¸ªå›¢é˜Ÿç†è§£å¹¶é‡è§†æ’°å†™è‰¯å¥½çš„æ–‡æ¡£ã€‚æ–‡æ¡£ç¼–å†™æ˜¯ä¸€ç§æ— ç§çš„è¡Œä¸ºï¼Œå¯¹å…¶ä»–å¼€å‘äººå‘˜å’Œæœªæ¥çš„ä½ éƒ½æœ‰å¸®åŠ©ã€‚\næµ‹è¯•æ–¹æ³•ä¸ä»…æ˜¯ç¡®ä¿æˆ‘ä»¬ç¼–å†™çš„ä»£ç ç¬¦åˆé¡¹ç›®éœ€æ±‚ã€é˜²æ­¢å¼•å…¥å›å½’çš„ç»ä½³æ–¹å¼ï¼Œè¿˜æ˜¯å¯¹ä»£ç å’Œç”¨æˆ·æµç¨‹è¿›è¡Œæ–‡æ¡£ç¼–å†™çš„åˆ©å™¨ã€‚\né€šè¿‡å°†æµ‹è¯•ç”¨ä¾‹ä½œä¸ºæ–‡æ¡£å·¥å…·çš„å¥½å¤„åŒ…æ‹¬ï¼š\næ–‡æ¡£ä¸ä»£ç ç´§å¯†å…³è”ï¼šæ‰€æœ‰ UI æµ‹è¯•éƒ½åº”è¯¥ä»ç”¨æˆ·çš„è§’åº¦å‡ºå‘ç¼–å†™ï¼Œå®ƒä»¬çš„æè¿°ä¹Ÿåº”å¦‚æ­¤ã€‚è§‚å¯Ÿç”¨æˆ·åœ¨é¡¹ç›®ä¸­èƒ½å¤Ÿå®Œæˆçš„æ“ä½œæ˜¯äº†è§£é¡¹ç›®åŠŸèƒ½çš„æœ‰æ•ˆé€”å¾„ã€‚\næ¯ä¸ªä»£ç åº“éƒ½ç”±æˆåƒä¸Šä¸‡ä¸ªå°ä»£ç ç‰‡æ®µç»„æˆï¼Œæœ‰æ—¶å¯èƒ½å¾ˆéš¾å°†æ‰€æœ‰è¦ç‚¹è”ç³»åœ¨ä¸€èµ·ã€‚æµ‹è¯•æœ‰åŠ©äºå¯¹é¡¹ç›®æœ‰ä¸€ä¸ªæ€»ä½“äº†è§£ï¼Œç”šè‡³åŒ…æ‹¬å¾ˆå¤šæŠ€æœ¯ç»†èŠ‚ã€‚\nä½ ä¸ä¾èµ–äºæŸäº›å‘˜å·¥çš„å†å²è®°å¿†ï¼šå¾ˆå¤šæ—¶å€™ï¼Œä½ æœ€ç»ˆä¼šå‘ä¸€äº›äº†è§£é¡¹ç›®å¹¶è®°å¾—æŸäº›ç‰¹å®šè¾¹ç¼˜æ¡ˆä¾‹çš„å‘˜å·¥è¯·æ•™ã€‚ä¸€ä¸ªè‰¯å¥½çš„æµ‹è¯•å¥—ä»¶å¯ä»¥å¤§å¤§å‡å°‘å¯¹è¿™ç§çŸ¥è¯†çš„éœ€æ±‚ï¼Œå¹¶é¿å…æ¯ä¸ªæ–°å¼€å‘äººå‘˜é€šè¿‡å‡ è¡Œä»£ç å¼•å…¥å›å½’é—®é¢˜ã€‚\nåŒæ—¶ï¼Œäº¤æ¥å’Œå…¥èŒé˜¶æ®µå˜å¾—ç›¸å½“å®¹æ˜“ã€‚\né¢å¤–çš„ä¸€ç‚¹æ˜¯ï¼šå¦‚æœä½ åˆ©ç”¨ Gherkin è¯­æ³•ï¼Œç”šè‡³å¯¹ä¸€äº›ä¸å¤ªæ‡‚æŠ€æœ¯çš„äººï¼Œæ¯”å¦‚ QA å›¢é˜Ÿæ¥è¯´ï¼Œæ–‡æ¡£çš„æ•ˆæœéƒ½ä¼šæé«˜ã€‚\nè¯·è®°ä½ï¼š\næµ‹è¯•æè¿°å¿…é¡»å¯¹äºä¸äº†è§£é¡¹ç›®èƒŒæ™¯çš„å¼€å‘äººå‘˜æ¥è¯´ä¹Ÿå¿…é¡»æ¸…æ™°ã€‚\né‡å¤ä½¿ç”¨çš„æµ‹è¯•å‡½æ•°ã€å›ºå®šè£…ç½®ç­‰å¿…é¡»æœ‰æœ‰æ„ä¹‰çš„åç§°ã€‚ä¸€ä¸ªç”¨äºæ³¨å†Œå’Œç™»å½•æµ‹è¯•çš„ registration-success.json å›ºå®šè£…ç½®å¯èƒ½ä¼šè¯¯å¯¼æœªæ¥çš„è¯»è€…ï¼Œå¹¶ä½¿å†å²çŸ¥è¯†å˜å¾—å¿…è¦ã€‚è¯·è®°ä½ï¼Œä¾èµ–å†å²çŸ¥è¯†æ€»æ˜¯å¯¹å¿…é¡»ç»å—å¼€å‘äººå‘˜æ›´æ›¿çš„ä»£ç åº“ä¸åˆ©ã€‚\næ€»çš„æ¥è¯´ï¼ŒUI æµ‹è¯•åœ¨å‰ç«¯åº”ç”¨ä¸­èµ·ç€åŸºç¡€ä½œç”¨ï¼Œå®ƒä»¬æ˜¯å”¯ä¸€è®°å½•ç”¨æˆ·é¢„æœŸèƒ½å¤Ÿå®Œæˆçš„çœŸå®ç›®æ ‡çš„æ‰‹æ®µã€‚\næµ‹è¯•çš„ä»£ç å¿…é¡»å°½å¯èƒ½ç®€å•ã€‚æ˜“äºé˜…è¯»ï¼Œæ— æ¡ä»¶ï¼ŒæŠ½è±¡çº§åˆ«ä½ï¼Œå…·æœ‰è‰¯å¥½çš„æ—¥å¿—çº§åˆ«ç­‰ã€‚æ°¸è¿œè®°ä½æµ‹è¯•å¿…é¡»å‡è½»é˜…è¯»å’Œç†è§£ä»£ç çš„è®¤çŸ¥è´Ÿæ‹…ï¼Œå› æ­¤å®ƒä»¬çš„å¤æ‚æ€§åº”è¯¥æ¯”å¾…ç†è§£çš„ä»£ç ä½ä¸€ä¸ªæ•°é‡çº§ã€‚è¿™æé«˜äº†å¼€å‘äººå‘˜åœ¨è‡ªåŠ¨åŒ–æµè§ˆå™¨ä¸­æŸ¥çœ‹æµ‹è¯•ä¹‹åå¿…\né¡»ç»å†çš„æ·±å…¥è¿‡ç¨‹ã€‚\n\u0026ldquo;è¿æ¥\u0026quot;ä»£ç å’Œæµ‹è¯•ï¼šå¦‚æœç”¨æˆ·æµç¨‹ç›¸å½“é•¿ï¼Œå°†ä¸€äº›â€œæ­¥éª¤â€ï¼ˆå¸¦æœ‰ä¸€äº›æ³¨é‡Šï¼‰åœ¨æºä»£ç å’Œæµ‹è¯•ä»£ç ä¹‹é—´å…±äº«å¯èƒ½æ˜¯æœ‰ç”¨çš„ã€‚ç±»ä¼¼äº /** #1 \\*/ã€/** #2 \\*/ ç­‰ã€‚\nUI æµ‹è¯•å¹¶ä¸æ˜¯å”¯ä¸€çš„æµ‹è¯•ç±»å‹ï¼šä¸ºä»£ç çš„æŸäº›å¯èƒ½éš¾ä»¥ç†è§£çš„éƒ¨åˆ†ç¼–å†™æ›´å¤šçš„ä½çº§æµ‹è¯•æ˜¯æè¿°ä»£ç æœŸæœ›è¡Œä¸ºçš„å¥½æ–¹æ³•ã€‚\nåœ¨æµ‹è¯•ä¸­æ·»åŠ æ³¨é‡Šå¯ä»¥æå¤§åœ°å¸®åŠ©è¯»è€…ï¼Œå‚è§\u0026ldquo;åŒ¹é…æµ‹è¯•ä»£ç å’Œæµ‹è¯•è¿è¡Œå‘½ä»¤\u0026quot;ç« èŠ‚ä¸­çš„â€œä¿æŒæŠ½è±¡æ°´å¹³ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯•â€ä¸€ç« ã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-generic-testing-perks-tests-as-documentation/","summary":"è¿™ç¯‡åšæ–‡å¼ºè°ƒäº† UI æµ‹è¯•æœ€ä½³å®è·µä¸­é€šç”¨æµ‹è¯•çš„å¥½å¤„ï¼Œç‰¹åˆ«æ˜¯å°†æµ‹è¯•è§†ä¸ºæ–‡æ¡£å·¥å…·çš„ä¼˜åŠ¿ã€‚æ–‡ç« è§£é‡Šäº†é€šè¿‡ç¼–å†™æ¸…æ™°ã€å¯è¯»çš„æµ‹è¯•ä»£ç ï¼Œæµ‹è¯•ä¸ä»…ä»…æ˜¯éªŒè¯åŠŸèƒ½çš„æ‰‹æ®µï¼Œè¿˜æ˜¯é¡¹ç›®æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ã€‚è¿™ç§åšæ³•æœ‰åŠ©äºé¡¹ç›®å›¢é˜Ÿæ›´å¥½åœ°ç†è§£ç³»ç»Ÿï¼Œæé«˜åä½œæ•ˆç‡ï¼Œå¹¶ä¸ºåç»­å¼€å‘å’Œç»´æŠ¤å·¥ä½œæä¾›æœ‰ä»·å€¼çš„å‚è€ƒã€‚é€šè¿‡å°†æµ‹è¯•è§†ä¸ºæ–‡æ¡£å·¥å…·ï¼Œé¡¹ç›®å›¢é˜Ÿèƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨æµ‹è¯•æ¥ä¼ é€’ä¿¡æ¯ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æµ‹è¯•çš„å¥½å¤„ç¯‡ï¼šå°†æµ‹è¯•è§†ä¸ºæ–‡æ¡£å·¥å…·"},{"content":"å†™åœ¨å‰é¢ ä¸ºä»€ä¹ˆä¸ç”¨ postman å’Œ insomnia å…³äº Postmanï¼šPostman äº 2023 å¹´ 5 æœˆå®£å¸ƒå°†é€æ­¥æ·˜æ±°å…·æœ‰ç¦»çº¿åŠŸèƒ½çš„ Scratch Pad æ¨¡å‹ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½å°†è½¬ç§»åˆ°äº‘ç«¯ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¿…é¡»ç™»å½•æ‰èƒ½ä½¿ç”¨ Postmanã€‚ï¼ˆä¸ç™»å½•çš„æƒ…å†µä¸‹å¯ä½¿ç”¨çš„åŠŸèƒ½æœ‰é™ï¼Œç™»å½•çš„è¯ä¸ç¡®è®¤æ˜¯å¦ä¼šå‘äº‘ç«¯ä¸Šä¼ æˆ‘ä»¬æµ‹è¯•ä½¿ç”¨çš„æ¥å£ä¿¡æ¯ï¼Œå®‰å…¨æ€§ä¸å¯é¢„ä¼°ï¼‰ å…³äº Insomniaï¼šInsomnia åœ¨ 2023 å¹´ 9 æœˆ 28 æ—¥å‘å¸ƒçš„ 8.0 ç‰ˆæœ¬ä¸­å¼€å§‹åŠ é‡äº†å¯¹äº‘ç«¯çš„ä¾èµ–ï¼Œç”¨æˆ·å¿…é¡»ç™»å½•æ‰èƒ½ä½¿ç”¨å…¨åŠŸèƒ½çš„ Insomniaã€‚ç°æœ‰çš„ Scratch Pad åŠŸèƒ½æœ‰é™ï¼ˆä¸ç™»å½•çš„æƒ…å†µä¸‹å¯ä½¿ç”¨çš„åŠŸèƒ½æœ‰é™ï¼Œç™»å½•çš„è¯ä¸ç¡®è®¤æ˜¯å¦ä¼šå‘äº‘ç«¯ä¸Šä¼ æˆ‘ä»¬æµ‹è¯•ä½¿ç”¨çš„æ¥å£ä¿¡æ¯ï¼Œå®‰å…¨æ€§ä¸å¯é¢„ä¼°ï¼‰ æ‰€ä»¥éœ€è¦ä¸€ä¸ªå°† API å·¥ä½œåŒºæ•°æ®ä¸ç¬¬ä¸‰æ–¹æœåŠ¡å™¨éš”ç¦»çš„æ›¿ä»£æ–¹æ¡ˆï¼ŒBruno å°±æ˜¯å¯è¡Œçš„æ›¿ä»£æ–¹æ¡ˆä¹‹ä¸€ã€‚\nä¸ºä»€ä¹ˆé€‰æ‹© Bruno å®˜æ–¹è¯´æ˜ï¼šhttps://github.com/usebruno/bruno/discussions/269\nä¸ postman çš„å¯¹æ¯”ï¼šhttps://www.usebruno.com/compare/bruno-vs-postman\nå¼€æºï¼ŒMIT License\nå®¢æˆ·ç«¯å…¨å¹³å°æ”¯æŒ (Mac/linux/Windows)\nç¦»çº¿å®¢æˆ·ç«¯ï¼Œæ— äº‘åŒæ­¥åŠŸèƒ½è®¡åˆ’\næ”¯æŒ Postman/insomina è„šæœ¬å¯¼å…¥ï¼ˆåªèƒ½å¯¼å…¥ API è¯·æ±‚è„šæœ¬ï¼Œæ— æ³•å¯¼å…¥æµ‹è¯•è„šæœ¬ï¼‰\nç¤¾åŒºç›¸å¯¹æ´»è·ƒï¼Œäº§å“å¼€å‘è·¯çº¿å›¾æ¸…æ™°\nä» 0 åˆ° 1 æ­å»º Bruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® è¿™ç¯‡æ–‡ç« ä¼šæ›´èšç„¦å¦‚ä½•ä½¿ç”¨ Bruno æä¾›çš„åŠŸèƒ½ï¼Œä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ã€‚\nBruno ç¨‹åºçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨è¯·å‚è€ƒï¼špostman æ›¿æ¢å·¥å…· bruno ä½¿ç”¨ä»‹ç»\né¡¹ç›®ç»“æ„ Bruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®çš„åŸºç¡€ç»“æ„å¦‚ä¸‹ï¼š\nBruno-demo â”œâ”€â”€ README.md // é¡¹ç›®è¯´æ˜æ–‡ä»¶ â”œâ”€â”€ package.json â”œâ”€â”€ package-lock.json â”œâ”€â”€ Testcase // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹ â”‚ â””â”€â”€ APITestDemo1.bru // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ 1 â”‚ â””â”€â”€ APITestDemo2.bru // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ 2 â”‚ â””â”€â”€ bruno.json // bruno COLLECTION é…ç½®æ–‡ä»¶ â”‚ â””â”€â”€ environments // ä¸åŒæµ‹è¯•ç¯å¢ƒæ–‡ä»¶å¤¹ â”‚ â””â”€â”€ dev.bru // æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ â”‚ â””â”€â”€ Report // æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶ â”‚ â””â”€â”€ report.json //json æ ¼å¼æŠ¥å‘Šæ–‡ä»¶ â”œâ”€â”€ .gitignore â””â”€â”€ node_modules // é¡¹ç›®ä¾èµ– é¡¹ç›®æ­å»ºå‡†å¤‡ æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ mkdir Bruno-demo é¡¹ç›®åˆå§‹åŒ– // è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ cd Bruno-demo // nodejs é¡¹ç›®åˆå§‹åŒ– npm init -y å®‰è£… Bruno CLI ä¾èµ– // å®‰è£… Bruno CLI npm install @usebruno/cli --save-dev Bruno CLI æ˜¯ Bruno å®˜æ–¹æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„å‘½ä»¤è¡Œå‘½ä»¤è½»æ¾è¿è¡Œ API é›†åˆã€‚æˆ‘ä»¬å¯ä»¥æ›´è½»æ¾åœ°åœ¨ä¸åŒç¯å¢ƒä¸­æµ‹è¯• APIã€è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹ï¼Œå¹¶å°† API æµ‹è¯•ä¸æŒç»­é›†æˆå’Œéƒ¨ç½²å·¥ä½œæµç¨‹é›†æˆã€‚\nä½¿ç”¨ Bruno ç¼–å†™æ¥å£æµ‹è¯•ç”¨ä¾‹ æ–°å»ºæµ‹è¯•ç”¨ä¾‹ç›®å½• è¿è¡Œ Bruno app åˆ°é¦–é¡µ æ–°å»ºåç§°ä¸º Testcase çš„ COLLECTIONï¼Œä¸”é€‰æ‹© COLLECTION çš„ç›®å½•ä¸ºä¸Šé¢åˆ›å»ºçš„é¡¹ç›®æ–‡ä»¶å¤¹ æ–°å»º Get è¯·æ±‚æµ‹è¯•ç”¨ä¾‹ ç‚¹å‡» Testcase çš„ COLLECTION ä¸‹çš„ ADD REQUEST æŒ‰é’®ï¼Œæ–°å»ºä¸€ä¸ª GET è¯·æ±‚ è¾“å…¥è¯·æ±‚åç§°ä¸º GetDemoï¼Œè¾“å…¥è¯·æ±‚åœ°å€ä¸º https://jsonplaceholder.typicode.com/posts/1 ç»™ Get è¯·æ±‚æ·»åŠ æµ‹è¯•æ–­è¨€ ä½¿ç”¨ Bruno è‡ªå¸¦çš„ Assert ç¼–å†™æµ‹è¯•æ–­è¨€ ç‚¹å‡» GetDemo è¯·æ±‚ä¸‹çš„ Assert æŒ‰é’®ï¼Œè¿›å…¥æµ‹è¯•æ–­è¨€ç¼–è¾‘é¡µé¢\nè¾“å…¥æ–­è¨€ 1ï¼šå“åº”çŠ¶æ€ç ç­‰äº 200.æ–­è¨€ 2ï¼šå“åº”ä½“ä¸­çš„ title åŒ…å« provident è°ƒè¯•æ–­è¨€ï¼šç‚¹å‡»å³ä¸Šè§’çš„ Run æŒ‰é’®ï¼Œè¿è¡Œæ–­è¨€ï¼ŒæŸ¥çœ‹æ–­è¨€ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ ä½¿ç”¨ JavaScript ç¼–å†™æµ‹è¯•æ–­è¨€ ç‚¹å‡» GetDemo è¯·æ±‚ä¸‹çš„ Tests æŒ‰é’®ï¼Œè¿›å…¥æµ‹è¯•æ–­è¨€è„šæœ¬ç¼–è¾‘é¡µé¢ è¾“å…¥è„šæœ¬ä»£ç ï¼Œæ–­è¨€ 1ï¼šå“åº”çŠ¶æ€ç ç­‰äº 200.æ–­è¨€ 2ï¼šå“åº”ä½“ä¸­çš„ title åŒ…å« provident test(\u0026#34;res.status should be 200\u0026#34;, function() { const data = res.getBody(); expect(res.getStatus()).to.equal(200); }); test(\u0026#34;res.body should be correct\u0026#34;, function() { const data = res.getBody(); expect(data.title).to.contains(\u0026#39;provident\u0026#39;); }); è°ƒè¯•æ–­è¨€ï¼šç‚¹å‡»å³ä¸Šè§’çš„ Run æŒ‰é’®ï¼Œè¿è¡Œæ–­è¨€ï¼ŒæŸ¥çœ‹æ–­è¨€ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ æ–°å»º Post è¯·æ±‚æµ‹è¯•ç”¨ä¾‹ ç‚¹å‡» Testcase çš„ COLLECTION ä¸‹çš„ ADD REQUEST æŒ‰é’®ï¼Œæ–°å»ºä¸€ä¸ª POST è¯·æ±‚\nè¾“å…¥è¯·æ±‚åç§°ä¸º PostDemoï¼Œè¾“å…¥è¯·æ±‚åœ°å€ä¸º https://jsonplaceholder.typicode.com/posts ç‚¹å‡»æ–°å»ºçš„ PostDemo è¯·æ±‚ä¸‹çš„ Body æŒ‰é’®ï¼Œè¿›å…¥è¯·æ±‚ä½“ç¼–è¾‘é¡µé¢\né€‰æ‹© Body ç±»å‹ä¸º JSONï¼Œè¾“å…¥è¯·æ±‚ä½“å†…å®¹ä¸º\n{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } ç»™ Post è¯·æ±‚æ·»åŠ æµ‹è¯•æ–­è¨€ ä½¿ç”¨ Bruno è‡ªå¸¦çš„ Assert ç¼–å†™ Post è¯·æ±‚æµ‹è¯•æ–­è¨€ ç‚¹å‡» PostDemo è¯·æ±‚ä¸‹çš„ Assert æŒ‰é’®ï¼Œè¿›å…¥æµ‹è¯•æ–­è¨€ç¼–è¾‘é¡µé¢\nè¾“å…¥æ–­è¨€ 1ï¼šå“åº”çŠ¶æ€ç ç­‰äº 201.æ–­è¨€ 2ï¼šå“åº”ä½“ä¸­çš„ title ç­‰äº foo è°ƒè¯•æ–­è¨€ï¼šç‚¹å‡»å³ä¸Šè§’çš„ Run æŒ‰é’®ï¼Œè¿è¡Œæ–­è¨€ï¼ŒæŸ¥çœ‹æ–­è¨€ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ ä½¿ç”¨ JavaScript ç¼–å†™ Post è¯·æ±‚æµ‹è¯•æ–­è¨€ ç‚¹å‡» PostDemo è¯·æ±‚ä¸‹çš„ Tests æŒ‰é’®ï¼Œè¿›å…¥æµ‹è¯•æ–­è¨€è„šæœ¬ç¼–è¾‘é¡µé¢ è¾“å…¥è„šæœ¬ä»£ç ï¼Œæ–­è¨€ 1ï¼šå“åº”çŠ¶æ€ç ç­‰äº 201.æ–­è¨€ 2ï¼šå“åº”ä½“ä¸­çš„ title ç­‰äº foo test(\u0026#34;res.status should be 200\u0026#34;, function() { const data = res.getBody(); expect(res.getStatus()).to.equal(201); }); test(\u0026#34;res.body should be correct\u0026#34;, function() { const data = res.getBody(); expect(data.title).to.equal(\u0026#39;foo\u0026#39;); }); è°ƒè¯•æ–­è¨€ï¼šç‚¹å‡»å³ä¸Šè§’çš„ Run æŒ‰é’®ï¼Œè¿è¡Œæ–­è¨€ï¼ŒæŸ¥çœ‹æ–­è¨€ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ æœ¬åœ°è¿è¡Œä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹ ç‚¹å‡» Testcase çš„ COLLECTION ä¸‹çš„ Run æŒ‰é’®ï¼Œè¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ ç¡®è®¤è¿è¡Œç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ è‡³æ­¤ï¼Œä¸¤ä¸ªæ¥å£çš„æµ‹è¯•ç”¨ä¾‹å’Œæ–­è¨€å·²ç»ç¼–å†™å®Œæˆ\nç¯å¢ƒå˜é‡é…ç½® é€šè¿‡æŸ¥çœ‹ä¸Šé¢ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è¿è¡Œç»“æœï¼Œæˆ‘ä»¬å‘ç°ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è¯·æ±‚åœ°å€éƒ½æ˜¯ https://jsonplaceholder.typicode.comï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„æµ‹è¯•ç¯å¢ƒä¸­è¿è¡Œè¿™ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸¤ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è¯·æ±‚åœ°å€ï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœæµ‹è¯•ç”¨ä¾‹å¾ˆå¤šï¼Œé‚£ä¹ˆä¿®æ”¹èµ·æ¥å°±å¾ˆéº»çƒ¦ã€‚Bruno æä¾›äº†ç¯å¢ƒå˜é‡çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å°†æµ‹è¯•ç”¨ä¾‹ä¸­çš„è¯·æ±‚åœ°å€é…ç½®ä¸ºç¯å¢ƒå˜é‡ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸åŒçš„æµ‹è¯•ç¯å¢ƒä¸­é…ç½®ä¸åŒçš„ç¯å¢ƒå˜é‡ï¼Œå°±å¯ä»¥å®ç°åœ¨ä¸åŒçš„æµ‹è¯•ç¯å¢ƒä¸­è¿è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚\næ–°å»ºç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ ç‚¹å‡» Testcase çš„ COLLECTION ä¸‹çš„ Environments æŒ‰é’®ï¼Œè¿›å…¥ç¯å¢ƒå˜é‡é…ç½®é¡µé¢ ç‚¹å‡»å³ä¸Šè§’çš„ ADD ENVIRONMENT æŒ‰é’®ï¼Œæ–°å»ºä¸€ä¸ªç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œè¾“å…¥åç§°ä¸º devï¼Œç‚¹å‡»å³ä¸Šè§’çš„ SAVE æŒ‰é’®ä¿å­˜é…ç½®æ–‡ä»¶ ç‚¹å‡»æ–°å»ºçš„ dev ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œè¿›å…¥ç¯å¢ƒå˜é‡é…ç½®é¡µé¢ ç‚¹å‡»å³ä¸Šè§’çš„ ADD VARIABLE æŒ‰é’®ï¼Œæ–°å»ºä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œè¾“å…¥åç§°ä¸º hostï¼Œè¾“å…¥å€¼ä¸º https://jsonplaceholder.typicode.comï¼Œç‚¹å‡»å³ä¸Šè§’çš„ SAVE æŒ‰é’®ä¿å­˜ç¯å¢ƒå˜é‡ åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ ç‚¹å‡» Testcase çš„ COLLECTION ä¸‹çš„ GetDemo è¯·æ±‚ï¼Œè¿›å…¥ GetDemo è¯·æ±‚ç¼–è¾‘é¡µé¢ å°† GetDemo è¯·æ±‚çš„è¯·æ±‚åœ°å€ä¿®æ”¹ä¸º {{host}}/posts/1ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ SAVE æŒ‰é’®ä¿å­˜ GetDemo è¯·æ±‚ ç‚¹å‡» Testcase çš„ COLLECTION ä¸‹çš„ PostDemo è¯·æ±‚ï¼Œè¿›å…¥ PostDemo è¯·æ±‚ç¼–è¾‘é¡µé¢ å°† PostDemo è¯·æ±‚çš„è¯·æ±‚åœ°å€ä¿®æ”¹ä¸º {{host}}/postsï¼Œç‚¹å‡»å³ä¸Šè§’çš„ SAVE æŒ‰é’®ä¿å­˜ PostDemo è¯·æ±‚ è°ƒè¯•ç¯å¢ƒå˜é‡ ç‚¹å‡» Testcase çš„ COLLECTION ä¸‹çš„ Environments æŒ‰é’®ï¼Œé€‰æ‹© dev ç¯å¢ƒå˜é‡ ç‚¹å‡»å³ä¸Šè§’çš„ RUN æŒ‰é’®ï¼Œè¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®è®¤è¿è¡Œç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ è‡³æ­¤ï¼Œç¯å¢ƒå˜é‡é…ç½®å’Œè°ƒè¯•å·²ç»å®Œæˆ\nå‘½ä»¤è¡Œè¿è¡Œæµ‹è¯•ç”¨ä¾‹ å‰ç½®æ£€æŸ¥ åˆšæ‰æˆ‘ä»¬å·²ç»æµ‹è¯•ç”¨ä¾‹çš„å­˜å‚¨ç›®å½•è®¾ç½®ä¸ºäº†ä¹‹å‰åˆ›å»ºçš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ£€æŸ¥ç”¨ä¾‹æ–‡ä»¶å’Œç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶æ˜¯å¦å·²ç»åˆ›å»ºæˆåŠŸã€‚\nç›®å‰æˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶å¤¹ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\nBruno-demo â”œâ”€â”€ package.json â”œâ”€â”€ package-lock.json â”œâ”€â”€ Testcase // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹ â”‚ â””â”€â”€ APITestDemo1.bru // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ 1 â”‚ â””â”€â”€ APITestDemo2.bru // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ 2 â”‚ â””â”€â”€ bruno.json // bruno COLLECTION é…ç½®æ–‡ä»¶ â”‚ â””â”€â”€ environments // ä¸åŒæµ‹è¯•ç¯å¢ƒæ–‡ä»¶å¤¹ â”‚ â””â”€â”€ dev.bru // æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ â””â”€â”€ node_modules // é¡¹ç›®ä¾èµ– å‘½ä»¤è¡Œè°ƒè¯•è¿è¡Œæµ‹è¯•ç”¨ä¾‹ åœ¨é¡¹ç›®æ–‡ä»¶ä¸‹çš„ Testcase æ–‡ä»¶å¤¹ï¼Œè¿è¡Œå‘½ä»¤è¡Œå‘½ä»¤ bru run --env devï¼Œè¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹\nç¡®è®¤è¿è¡Œç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ\nè¾“å‡º json æ ¼å¼æŠ¥å‘Š åœ¨é¡¹ç›®æ–‡ä»¶ä¸‹çš„ Testcase æ–‡ä»¶å¤¹ä¸‹æ–°å»º Report æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶\nåœ¨é¡¹ç›®æ–‡ä»¶ä¸‹çš„ Testcase æ–‡ä»¶å¤¹ï¼Œè¿è¡Œå‘½ä»¤è¡Œå‘½ä»¤ bru run --env dev --output Report/results.jsonï¼Œè¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹\nç¡®è®¤æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶æ­£å¸¸è¾“å‡º è‡³æ­¤ï¼ŒBruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®çš„æ­å»ºå·²ç»å®Œæˆã€‚\né›†æˆåˆ° CI/CD æµç¨‹ Bruno ç¨‹åºçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨è¯·å‚è€ƒï¼špostman æ›¿æ¢å·¥å…· bruno ä½¿ç”¨ä»‹ç»#æ¥å…¥ CI\nå‚è€ƒèµ„æ–™ Bruno å®˜æ–¹æ–‡æ¡£ https://docs.usebruno.com/ postman æ›¿æ¢å·¥å…· bruno ä½¿ç”¨ä»‹ç» https://naodeng.com.cn/zh/posts/api-automation-testing/introduction_of_bruno/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/bruno-tutorial-building-your-own-project-from-0-to-1/","summary":"è¿™ç¯‡åšæ–‡æ˜¯ Bruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼Œä»é›¶å¼€å§‹æ­å»º Bruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ã€‚æ–‡ç« è¯¦ç»†æŒ‡å¯¼è¯»è€…å¦‚ä½•å»ºç«‹æµ‹è¯•é¡¹ç›®çš„åŸºç¡€ç»“æ„ï¼Œé…ç½®ç¯å¢ƒï¼Œä»¥åŠç¼–å†™ç¬¬ä¸€ä¸ªæ¥å£æµ‹è¯•ç”¨ä¾‹ã€‚é€šè¿‡è¿™ä¸ªæ•™ç¨‹ï¼Œè¯»è€…èƒ½å¤Ÿé€æ­¥äº†è§£ Bruno æ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œä»é›¶åˆ°ä¸€åœ°æ„å»ºèµ·å®Œæ•´çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼Œæé«˜æµ‹è¯•æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚","title":"Bruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»º Bruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nä»é‡‘å­—å¡”é¡¶å±‚å…¥æ‰‹æµ‹è¯• åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/beginners/top-to-bottom-approach.md\nä¸€æ®µç®€è¦è¯´æ˜ å½“ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„æµ‹è¯•å‘˜æ—¶ï¼Œå¤„ç†æµ‹è¯•å¥—ä»¶æ˜¯ä¸€ä»¶è½»æ¾çš„äº‹æƒ…ã€‚ä½†å­¦ä¹ å¦‚ä½•æ­£ç¡®åœ°æµ‹è¯•ï¼Œè¦æµ‹è¯•ä»€ä¹ˆã€é¿å…ä»€ä¹ˆï¼Œé€‰æ‹©å“ªç§ç±»å‹çš„æµ‹è¯•ç­‰ç­‰ï¼Œå¹¶ä¸é‚£ä¹ˆå®¹æ˜“ã€‚\næµ‹è¯•åœ¨ä¸€å¼€å§‹æ˜¯æ˜‚è´µçš„ã€‚ä¸€åˆ‡éƒ½æ˜¯æ–°çš„ï¼Œä½ å°è¯•å®ç°çš„ä¾‹å­ä¸èµ·ä½œç”¨ï¼Œä½ ä¸æ¸…æ¥šä¸ºä»€ä¹ˆæµ‹è¯•å¤±è´¥ï¼Œå®ƒä¸ä½ çš„ä»£ç æœ‰ä»€ä¹ˆå…³ç³»ï¼Œç­‰ç­‰ã€‚\næˆ‘ä»¬éƒ½ç†ŸçŸ¥æµ‹è¯•é‡‘å­—å¡”ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä»åº•éƒ¨å¼€å§‹æ„å»ºã€‚\næ ‡å‡†æµ‹è¯•é‡‘å­—å¡”æ–¹æ³•ï¼šä»ä¸‹åˆ°ä¸Šã€‚\nä»åº•éƒ¨å¼€å§‹æ„å»ºé‡‘å­—å¡”æ˜¯æœ‰é“ç†çš„ã€‚ä»å•å…ƒæµ‹è¯•å…¥æ‰‹æ›´å®¹æ˜“ï¼Œå› ä¸ºå®ƒä»¬è¿è¡Œå¿«é€Ÿï¼Œä¸éœ€è¦å¤æ‚çš„ä¸Šä¸‹æ–‡æˆ–å·¥å…·ã€‚ä¸€ä¸ªâ€œå•å…ƒâ€ï¼ˆæ— è®ºä½ ç”¨â€œå•å…ƒâ€è¡¨ç¤ºä»€ä¹ˆï¼šä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªç»„ä»¶ç­‰ï¼‰ä»…åŒ…å«å‡ è¡Œä»£ç ï¼Œé€šå¸¸å‡ ä¹æ²¡æœ‰ä¾èµ–é¡¹ï¼ˆæˆ–æ ¹æœ¬æ²¡æœ‰ä¾èµ–é¡¹ï¼‰ç­‰ç­‰ã€‚\nè¿™ç§æ–¹æ³•çš„æœ€å¤§ç¼ºé™·æ˜¯ä»€ä¹ˆï¼ŸåŸºæœ¬ä¸Šæ˜¯ä¿¡å¿ƒã€‚\næµ‹è¯•å…³ä¹ä¿¡å¿ƒï¼Œä»¥åŠåœ¨é«˜ä¿¡å¿ƒä½†è¾ƒæ…¢çš„æµ‹è¯•ä¸ä½ä¿¡å¿ƒä½†è¾ƒå¿«çš„æµ‹è¯•ä¹‹é—´çš„æƒè¡¡ã€‚\nå¦‚æœä½ æ˜¯æµ‹è¯•é¢†åŸŸçš„æ–°æ‰‹ï¼Œæœ¯è¯­â€œä¿¡å¿ƒâ€å¯èƒ½ä¸å¤ªæ¸…æ™°ï¼Œé‚£ä¹ˆä½ å¦‚ä½•ç¡®ä¿ä½ æ­£åœ¨å¼€å‘çš„åº”ç”¨ç¨‹åºåœ¨æµ‹è¯•é€šè¿‡æ—¶æ˜¯æœ‰æ•ˆçš„ï¼Ÿè¿™å°±æ˜¯æµ‹è¯•ä¿¡å¿ƒã€‚\nä¸ºä»€ä¹ˆå•å…ƒæµ‹è¯•æä¾›çš„ä¿¡å¿ƒå¦‚æ­¤ä¹‹å°‘ï¼Ÿä¸€äº›ä¾‹å­ï¼š\nå¦‚æœisValidEmailå‡½æ•°é€šè¿‡äº†æµ‹è¯•ï¼Œä½ èƒ½ç¡®å®šä½ çš„å‰ç«¯åº”ç”¨ç¨‹åºçš„æ³¨å†Œè¡¨å•æœ‰æ•ˆå—ï¼Ÿ å¦‚æœInput React ç»„ä»¶é€šè¿‡äº†æµ‹è¯•ï¼Œä½ èƒ½ç¡®å®šæ³¨å†Œè¡¨å•ä¹Ÿæœ‰æ•ˆå—ï¼Ÿ å¦‚æœæ•´ä¸ªRegisterFormç»„ä»¶é€šè¿‡äº†æµ‹è¯•ï¼Œä½ èƒ½ç¡®å®šç”¨æˆ·å¯ä»¥æ³¨å†Œå—ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚æ•´ä¸ªåº”ç”¨ç¨‹åºç”±è®¸å¤šå•å…ƒç›¸äº’é›†æˆè€Œæˆï¼Œè¿˜ä¸åŒ…æ‹¬ä¸€äº›å‘ˆç°ï¼ˆCSSï¼‰é—®é¢˜ï¼Œè¿™å¯èƒ½ä¼šå› ä¸ºä¸€ä¸ª z-index è¾ƒé«˜çš„å›¾åƒé®æŒ¡äº†æäº¤æŒ‰é’®è€Œé˜»æ­¢ç”¨æˆ·æ³¨å†Œã€‚\nå†æ¬¡è°ˆè®ºæµ‹è¯•æ–°æ‰‹çš„ç»éªŒç¼ºå¤±ï¼ˆå°±åƒæˆ‘ä¸¤å¹´å‰ä¸€æ ·ï¼‰ï¼šæ¯ä¸€é¡¹æ–°äº‹ç‰©éƒ½éœ€è¦å¤§é‡è®¤çŸ¥è´Ÿæ‹…ï¼Œè€Œä½ ä¸èƒ½åŒæ—¶é¢å¯¹å¤ªå¤šçš„æ–°äº‹ç‰©ã€‚åŒæ—¶å¤„ç†åº”ç”¨ç¨‹åºçš„å¸¸è§„å¼€å‘ã€æ–°çš„æµ‹è¯•ä¸»é¢˜ã€å•å…ƒæµ‹è¯•ä¸–ç•Œå’Œ UI æµ‹è¯•ï¼ˆåä¸¤è€…éœ€è¦ä¸åŒçš„å·¥å…·å’ŒåŠªåŠ›ï¼‰æ˜¯å¾ˆå›°éš¾çš„ã€‚\nçœ‹çœ‹è¿™å¼ è¯¦å°½çš„å›¾ç‰‡ï¼Œå®ƒæ¥è‡ª JavaScript å’Œ Node.js æµ‹è¯•æœ€ä½³å®è·µ é¡¹ç›®ï¼š\nç”± Yoni Goldberg æä¾›ï¼Œè¯·è®¿é—® testjavascript.comï¼Œå¹¶åœ¨ JavaScript å’Œ Node.js æµ‹è¯•æœ€ä½³å®è·µ èµ„æºåº“ã€‚\nå¯¹äºç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜æ¥è¯´æ˜¯å¦‚æ­¤ï¼Œè€Œå½“ä½ ç¬¬ä¸€æ¬¡æ¥è§¦æµ‹è¯•é¢†åŸŸæ—¶ï¼Œæƒ…å†µæ›´ç³Ÿã€‚\nè‡ªåº•å‘ä¸Šçš„æ–¹æ³•çš„ç»“æœ ä½ ä¸å¯é¿å…åœ°å°†å¤§éƒ¨åˆ†æ³¨æ„åŠ›æ”¾åœ¨é‡‘å­—å¡”çš„åŸºç¡€â€”â€”å•å…ƒæµ‹è¯•ä¸Šã€‚ä½ å³å°†ç¼–å†™çš„ä¸€å †æµ‹è¯•è®©ä½ ç†Ÿæ‚‰äº†æµ‹è¯•çš„ä¸–ç•Œï¼Œä½†ç¼ºä¹ä¿¡å¿ƒã€‚ä½ å¯èƒ½ä¼šå‘ç°è‡ªå·±åœ¨é—®ï¼š\n\u0026ldquo;æˆ‘å†™çš„æµ‹è¯•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ\u0026rdquo; \u0026ldquo;æˆ‘èŠ±äº†ä¸€äº›æ—¶é—´ä¸å•å…ƒæµ‹è¯•æˆ˜æ–—ï¼Œä½†åº”ç”¨ç¨‹åºä»ç„¶åƒä»¥å‰ä¸€æ ·å´©æºƒï¼Œæµ‹è¯•æ˜¯å¦åªæ˜¯è‡ªå¨±è‡ªä¹ï¼Ÿ\u0026rdquo; \u0026ldquo;è€å®è¯´ï¼Œæˆ‘ç°åœ¨æ¯”å¼€å§‹æµ‹è¯•ä¹‹å‰æ›´åŠ ç–‘æƒ‘äº†â€¦\u0026rdquo; ä»ä¸‹åˆ°ä¸Šçš„æ–¹æ³•ä¸å¯é¿å…åœ°ä¼šè®©ä½ æŠŠç²¾åŠ›é›†ä¸­åœ¨å•å…ƒæµ‹è¯•ä¸Šã€‚\né—®é¢˜å¹¶ä¸å‡ºåœ¨ä½ èº«ä¸Šï¼Œè€Œæ˜¯åœ¨äºå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œé‡‡ç”¨äº†é”™è¯¯çš„æµ‹è¯•æ–¹æ³•ï¼\né‚£ä¹ˆï¼Œæˆ‘çš„å»ºè®®æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»é‡‘å­—å¡”çš„é¡¶éƒ¨å¼€å§‹ï¼Œé¦–å…ˆå…³æ³¨ UI æµ‹è¯•ï¼\né¦–å…ˆï¼Œä»€ä¹ˆæ˜¯ UI æµ‹è¯•ï¼ˆä¹Ÿç§°ä¸ºåŠŸèƒ½æµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•ç­‰ï¼‰ï¼Ÿæœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯ä¸€ç§æ‰“å¼€çœŸå®æµè§ˆå™¨å¹¶ä¸ DOM å…ƒç´ äº¤äº’çš„è„šæœ¬ï¼Œä¸çœŸå®æœ€ç»ˆç”¨æˆ·çš„æ“ä½œæ–¹å¼ç›¸åŒã€‚æœ‰æ—¶å€™è§†é¢‘èƒ½å¤Ÿæ›´ç”ŸåŠ¨åœ°è¯´æ˜é—®é¢˜ï¼šçœ‹ä¸€çœ‹å¯¹ Conduit - RealWorld é¡¹ç›®è¿è¡Œçš„ç«¯åˆ°ç«¯æµ‹è¯•å’ŒConio åå°çš„ä¸€äº› UI æµ‹è¯•ã€‚\nåœ¨ä¸Šè¿°è§†é¢‘ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªçœŸå®çš„æµè§ˆå™¨åŠ è½½æ•´ä¸ªå‰ç«¯åº”ç”¨å¹¶ä¸å…¶è¿›è¡Œäº¤äº’ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š\nä½ çš„åº”ç”¨åœ¨ä¸æœ€ç»ˆç”¨æˆ·ç›¸åŒçš„ç¯å¢ƒï¼ˆå³æµè§ˆå™¨ï¼‰ä¸­è¿›è¡Œæµ‹è¯•ï¼Œè¿™æ„å‘³ç€æ›´é«˜çš„ä¿¡å¿ƒã€‚å³ä½¿åªç¼–å†™ä¸€ä¸ª UI æµ‹è¯•ï¼Œå®ƒä¹Ÿæ¯”ä¸€ç™¾ä¸ªå•å…ƒæµ‹è¯•ç»™ä½ æ›´å¤šçš„ä¿¡å¿ƒã€‚ å—æµ‹è·¯å¾„ï¼ˆç”¨æˆ·æ‰§è¡Œçš„æ­¥éª¤ï¼Œå¦‚â€œæ³¨å†Œâ€ã€â€œåˆ›å»ºæ–° å¸–â€ç­‰ï¼‰ä¸æœ€ç»ˆç”¨æˆ·æ‰§è¡Œçš„è·¯å¾„ç›¸åŒï¼Œè¿™æ„å‘³ç€ï¼ˆå¯¹ä½ è€Œè¨€ï¼‰æ›´ä½çš„è®¤çŸ¥è´Ÿæ‹…ï¼Œä»¥äº†è§£ä½ çœŸæ­£åœ¨æµ‹è¯•ä»€ä¹ˆã€‚\nè€å®è¯´ï¼Œä¸è‡ªåŠ¨åŒ–ç»ˆç«¯ç›¸æ¯”ï¼Œè‡ªåŠ¨åŒ–æµè§ˆå™¨æ›´æœ‰è¶£ ğŸ˜ UI æµ‹è¯•æœ€é€‚ç”¨äºä½ æ—¥å¸¸å·¥ä½œä¸­å¤§å¤šæ•°é¡¹ç›®çš„å°åˆ°ä¸­ç­‰è§„æ¨¡ã€‚ä»è½åœ°é¡µåˆ°å°å‹ CMSï¼šæ‰€æœ‰è¿™äº›éƒ½è‡³å°‘éœ€è¦ä¸€äº› UI æµ‹è¯•ï¼Œç„¶è€ŒåŸºäºæµ‹è¯•ä¿¡å¿ƒå’Œä½ å¿…é¡»éµå®ˆçš„äº¤ä»˜è¦æ±‚ï¼Œä½ å¯èƒ½ä¼šå¯¹åŸºäºå•å…ƒæµ‹è¯•çš„æµ‹è¯•ä¿¡å¿ƒå’Œäº¤ä»˜è¦æ±‚æœ‰æ‰€è¶…è¶Šã€‚åªæœ‰å°‘æ•°äººåœ¨ Facebookã€Spotifyã€Netflix ç­‰å…¬å¸å·¥ä½œï¼Œè¿™äº›å…¬å¸éœ€è¦ä¸¥æ ¼çš„æµ‹è¯•ç­–ç•¥ã€ä»£ç è¦†ç›–è¦æ±‚ç­‰ã€‚æ€»çš„æ¥è¯´ï¼šå¦‚æœä½ ä¸ºä¸­å‹åˆ°å¤§å‹äº§å“å…¬å¸å·¥ä½œï¼Œä½ å¯èƒ½ä¸éœ€è¦è¿™ç¯‡æ–‡ç« ï¼Œå› ä¸ºæµ‹è¯•å·²ç»æˆä¸ºå…¬å¸æ–‡åŒ–çš„æ ¸å¿ƒğŸ‰ã€‚ å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œä½†æˆ‘ç¨åä¼šåˆ—ä¸¾å‡ºæ¥ã€‚ä¸‹é¢æ˜¯æˆ‘å»ºè®®çš„æ–¹æ³•ï¼š\nè‡ªä¸Šè€Œä¸‹çš„æ–¹æ³•\nä»ä¸Šåˆ°ä¸‹çš„æ–¹æ³•æ˜¯å¦å¼ºåˆ¶æ‰§è¡Œæµ‹è¯•çš„ä¸è‰¯å®è·µï¼Ÿ æœ¬æ–‡ä¸è®¨è®ºæœ€ä½³å®è·µæˆ–ä¸è‰¯å®è·µï¼ˆè¯·æŸ¥çœ‹æ–‡ç« æœ«å°¾çš„ä¸€é•¿ä¸²èµ„æºï¼‰ï¼Œè€Œæ˜¯å…³æ³¨å¦‚ä½•è®©æ–°çš„å‰ç«¯å¼€å‘äººå‘˜åœ¨æµ‹è¯•é¢†åŸŸæœ‰ç›Šåœ°å‚ä¸ã€‚æˆ‘çš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§æ›´å®é™…çš„æ–¹æ³•ï¼Œä¸€ç§ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿäº«å—æµ‹è¯•çš„ä¼˜åŠ¿è€Œä¸è‡³äºç•™ä¸‹æ¯”ä»¥å‰æ›´å¤šçš„ç–‘é—®çš„æ–¹æ³•ã€‚\nå¦‚æœ UI æµ‹è¯•å¦‚æ­¤ç¥å¥‡ï¼Œä¸ºä»€ä¹ˆè¿˜æœ‰å…¶ä»–ç±»å‹çš„æµ‹è¯•å­˜åœ¨ï¼Ÿ è¿™æ­£æ˜¯å…³é”®ï¼è¯·æ³¨æ„ï¼Œæˆ‘å¹¶ä¸åå¯¹å•å…ƒæµ‹è¯•ï¼æ¯ç§æµ‹è¯•éƒ½å¾ˆé‡è¦ï¼Œä¸åŒçš„æµ‹è¯•æä¾›ä¸åŒçš„åé¦ˆï¼ä»ä¸Šåˆ°ä¸‹çš„æ–¹æ³•è¶³å¤Ÿè®©å¼€å‘äººå‘˜å–œæ¬¢æ•´ä¸ªæµ‹è¯•ä¸–ç•Œã€‚\nç„¶åï¼Œä½ å°†å‘ç°é«˜çº§åˆ« UI æµ‹è¯• çš„å±€é™æ€§ï¼š\nå®ƒä»¬å¾ˆæ…¢ï¼šæˆ‘çŸ¥é“ä¸Šé¢çš„è§†é¢‘è®©ä½ è§‰å¾—å®ƒä»¬è¿è¡Œå¾—å¾ˆå¿«ï¼Œä½†å®é™…ä¸Šå¹¶éå¦‚æ­¤ã€‚å½“ä½ æœ‰äº”ã€åã€äºŒåä¸ªæ—¶ï¼Œå®ƒä»¬å¾ˆå¿«ï¼Œä½†æ˜¯å½“ä½ æœ‰æ•°ç™¾ä¸ª UI æµ‹è¯•å¹¶ä¸”å®ƒä»¬éœ€è¦å‡ åˆ†é’Ÿæ—¶ï¼Œä½ ä¼šå¼€å§‹æ€è€ƒå¦‚ä½•æ”¹å–„æƒ…å†µ å®ƒä»¬ä¸»è¦æä¾›é«˜å±‚æ¬¡çš„åé¦ˆï¼šå¦‚æœè¡¨å•çš„æäº¤æŒ‰é’®ä¸èµ·ä½œç”¨ï¼Œé‚£ä¹ˆé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å¤§é‡å¯èƒ½çš„åŸå› ï¼Œä½†æ˜¯ UI æµ‹è¯•ä¸èƒ½æ’é™¤å…¶ä¸­ä¸€äº›åŸå›  å®ƒä»¬å‘ˆç°æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå¦‚æœä½ åªæƒ³æµ‹è¯•ä¸€äº›è¾ƒå°çš„ä¸œè¥¿ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ã€‚é€šè¿‡æ•´ä¸ªåº”ç”¨ç¨‹åºæ— æ³•å¤åˆ¶ä¸€äº›ä½ éœ€è¦æµ‹è¯•çš„è¾¹ç¼˜æƒ…å†µ è§£å†³ä¸Šè¿°æ‰€æœ‰é—®é¢˜çš„æ–¹æ³•æ˜¯ï¼šé™ä½æµ‹è¯•é‡‘å­—å¡”ï¼å¦‚æœä½ éœ€è¦æ›´ä½çº§åˆ«çš„æµ‹è¯•ï¼Œé‚£ä¹ˆåšå¾—å¥½ï¼è¿™æ˜¯æœ¬æ–‡çš„ç›®æ ‡ã€‚\nè€ƒè™‘ä¸¤ç§æ–¹æ³•çš„ç»“æœï¼š\nä»ä¸‹åˆ°ä¸Šï¼šå¯¹äºä½ ç¼–å†™çš„å•å…ƒæµ‹è¯•çš„æ•ˆç”¨å­˜åœ¨ç–‘è™‘ï¼Œå¹¶ä¸”ä½ ä¸ç†è§£è¿™äº›æµ‹è¯•å¦‚ä½•å¸®åŠ©ä½ æé«˜æµ‹è¯•ä¿¡å¿ƒ ä»ä¸Šåˆ°ä¸‹ï¼šä½ æ‹¥æœ‰ä¸€äº›æœ‰ä¿¡å¿ƒçš„æµ‹è¯•ï¼Œå¹¶æœ€ç»ˆéœ€è¦æ·±å…¥æµ‹è¯•é‡‘å­—å¡”ã€‚å¦‚æœä½ ä¸éœ€è¦æ·±å…¥ï¼Œè¿™æ„å‘³ç€ä½ çš„é¡¹ç›®å¾ˆå°ï¼Œä¸éœ€è¦æ›´å¤šçš„æµ‹è¯• ç„¶åï¼Œè¯·ä»è¯¥é¡¹ç›®çš„æ ¹ç›®å½•å¼€å§‹ï¼Œæ¢ç´¢å„ç§æœ€ä½³å®è·µï¼Œä»¥ä¾¿ä»ä¸€å¼€å§‹å°±æˆåŠŸåœ°è¿›è¡Œ UI æµ‹è¯•ã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-beginners-top-to-botton-approach/","summary":"è¿™ç¯‡åšæ–‡æ˜¯ UI æµ‹è¯•æœ€ä½³å®è·µåˆå­¦è€…ç¯‡ï¼Œå»ºè®®ä»é‡‘å­—å¡”çš„é¡¶å±‚å…¥æ‰‹æµ‹è¯•ã€‚æ–‡ç« è§£é‡Šäº†åœ¨ UI æµ‹è¯•é‡‘å­—å¡”çš„é¡¶éƒ¨ï¼Œå³ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œå¼€å§‹å­¦ä¹ çš„ä¼˜åŠ¿ã€‚é€šè¿‡æ­¤æ–¹æ³•ï¼Œåˆå­¦è€…èƒ½å¤Ÿæ›´å®¹æ˜“ç†è§£åº”ç”¨ç¨‹åºçš„æ•´ä½“è¡Œä¸ºï¼Œå¿«é€ŸéªŒè¯å…³é”®è·¯å¾„ï¼Œå¹¶é€æ­¥æ·±å…¥å­¦ä¹ æ›´åº•å±‚çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚è¿™ç§æ¸è¿›çš„å­¦ä¹ æ–¹å¼æœ‰åŠ©äºå»ºç«‹åšå®çš„ UI æµ‹è¯•åŸºç¡€ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡å’Œè´¨é‡ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„åˆå­¦è€…ç¯‡ï¼šä»é‡‘å­—å¡”é¡¶å±‚å…¥æ‰‹æµ‹è¯•"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\næ£€éªŒè¯·æ±‚å’Œå“åº”è´Ÿè½½ åŸæ–‡é“¾æ¥:https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/test-request-and-response-payload.md\nä¸€æ®µç®€è¦è¯´æ˜ å‰ç«¯åº”ç”¨å› ä¸åç«¯é€šä¿¡ä¸åè°ƒè€Œå¯¼è‡´åœæ­¢å·¥ä½œçš„é¢‘ç‡æœ‰å¤šé«˜ï¼Ÿ\nå‰ç«¯åº”ç”¨å’Œåç«¯åº”ç”¨ä¹‹é—´å­˜åœ¨ä¸€ä»½åˆåŒï¼Œä½ å§‹ç»ˆéœ€è¦æµ‹è¯•åˆåŒæ˜¯å¦å¾—åˆ°éµå®ˆã€‚æ¯ä¸€æ¬¡å‰åç«¯åº”ç”¨ä¹‹é—´çš„é€šä¿¡éƒ½ç”±ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å®šä¹‰ï¼š\nè¯·æ±‚çš„ URL æ‰€ä½¿ç”¨çš„ HTTP åŠ¨è¯ï¼ˆGETã€POST ç­‰ï¼‰ è¯·æ±‚çš„æœ‰æ•ˆè´Ÿè½½å’Œæ ‡å¤´ï¼šå‰ç«¯åº”ç”¨å‘é€ç»™åç«¯åº”ç”¨çš„æ•°æ® å“åº”çš„æœ‰æ•ˆè´Ÿè½½ã€æ ‡å¤´å’ŒçŠ¶æ€ï¼šåç«¯åº”ç”¨å‘é€å›å‰ç«¯åº”ç”¨çš„æ•°æ® ä½ éœ€è¦å¯¹æ‰€æœ‰è¿™äº›æ–¹é¢è¿›è¡Œæµ‹è¯•ï¼Œæ›´å¹¿ä¹‰åœ°è¯´ï¼Œä½ éœ€è¦ç­‰å¾…æ¯ä¸ªç›¸å…³çš„ AJAX è¯·æ±‚ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nç›¸å…³çš„ XHR è¯·æ±‚æ˜¯ä½ æ­£åœ¨æµ‹è¯•çš„åº”ç”¨ç¨‹åºæµç¨‹çš„ä¸€éƒ¨åˆ† å³ä½¿ XHR è¯·æ±‚ä¸æ˜¯ä½ æ­£åœ¨æµ‹è¯•çš„æµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯¹è¾¾åˆ°æœŸæœ›çš„ UI çŠ¶æ€ä¹Ÿå¯èƒ½æ˜¯ç›¸å…³çš„ ç­‰å¾… XHR è¯·æ±‚å¯ä»¥ä½¿ä½ çš„æµ‹è¯•æ›´ä¸ºå¥å£®ï¼Œå‚è§ç­‰å¾…ï¼Œä¸è¦ä¼‘çœ ç« èŠ‚åŠå…¶XHR è¯·æ±‚ç­‰å¾…éƒ¨åˆ† åœ¨ç°æœ‰çš„æµ‹è¯•å·¥å…·ä¸­ï¼Œå®Œå…¨ç­‰å¾…å’Œæ£€æŸ¥ XHR è¯·æ±‚å¹¶ä¸é‚£ä¹ˆå¸¸è§ï¼Œç›®å‰ Cypress æä¾›äº†æœ€å…¨é¢çš„æ£€æŸ¥æ”¯æŒã€‚\nè¯·æ³¨æ„ï¼šä»¥ä¸‹æ‰€æœ‰ç¤ºä¾‹å‡åŸºäº Cypressï¼Œå®ƒç›®å‰æä¾›äº†æœ€ä½³çš„ XHR æµ‹è¯•æ”¯æŒã€‚\nå¯¹ XHR è¯·æ±‚è¿›è¡Œæ–­è¨€çš„å®Œæ•´ç¤ºä¾‹ // ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\u0026#34;POST\u0026#34;, \u0026#34;**/authentication\u0026#34;).as(\u0026#34;authentication-xhr\u0026#34;); // ... your test actions... cy.wait(\u0026#34;@authentication-xhr\u0026#34;).then(interception =\u0026gt; { // request headers assertion expect(interception.request.headers).to.have.property(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;); // request payload assertions expect(interception.request.body).to.have.property(\u0026#34;username\u0026#34;, \u0026#34;admin\u0026#34;); expect(interception.request.body).to.have.property(\u0026#34;password\u0026#34;, \u0026#34;asupersecretpassword\u0026#34;); // status assertion expect(interception.response.statusCode).to.equal(200); // response headers assertions expect(interception.response.body).to.have.property(\u0026#34;access-control-allow-origin\u0026#34;, \u0026#34;*\u0026#34;); // response payload assertions expect(interception.response.body).to.have.property(\u0026#34;token\u0026#34;); }); åœ¨ä¸‹é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†è®¨è®º XHR è¯·æ±‚çš„ä¸åŒç‰¹å¾ã€‚\néªŒè¯ XHR è¯·æ±‚çš„ URL åœ¨ Cypress ä¸­ï¼Œç”¨äºè¯·æ±‚çš„ URL æ˜¯é€šè¿‡cy.interceptè°ƒç”¨å®šä¹‰çš„ã€‚ä½ å¯èƒ½éœ€è¦æ£€æŸ¥ URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚\n// ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\u0026#34;**/authentication**\u0026#34;).as(\u0026#34;authentication-xhr\u0026#34;); // ... your test actions... cy.wait(\u0026#34;@authentication-xhr\u0026#34;).then(interception =\u0026gt; { // query string assertion expect(interception.request.url).to.contain(\u0026#34;username=admin\u0026#34;); expect(interception.request.url).to.contain(\u0026#34;password=asupersecretpassword\u0026#34;); }); è¯·æ³¨æ„ï¼Œå½“ä½ éœ€è¦å¯¹å¤šä¸ªä¸»é¢˜è¿›è¡Œæ–­è¨€æ—¶ï¼ŒCypress çš„then =\u0026gt; expectè¯­æ³•éå¸¸æœ‰å¸®åŠ©ï¼ˆä¾‹å¦‚ï¼ŒURL å’ŒçŠ¶æ€ï¼‰ã€‚å¦‚æœä½ åªéœ€è¦å¯¹å•ä¸ªä¸»é¢˜è¿›è¡Œæ–­è¨€ï¼Œå¯ä»¥ä½¿ç”¨æ›´å…·è¡¨ç°åŠ›çš„shouldè¯­æ³•ã€‚\ncy.wait(\u0026#34;@authentication-xhr\u0026#34;) .its(\u0026#34;url\u0026#34;) .should(\u0026#34;contain\u0026#34;, \u0026#34;username=admin\u0026#34;) .and(\u0026#34;contain\u0026#34;, \u0026#34;password=asupersecretpassword\u0026#34;); XHR è¯·æ±‚çš„æ–¹æ³• åœ¨ Cypress ä¸­ï¼Œè¯·æ±‚ä½¿ç”¨cy.interceptå‡½æ•°å®šä¹‰ã€‚ä½ å¯ä»¥é€šè¿‡æŒ‡å®šå®ƒæ¥å®šä¹‰è¦æ‹¦æˆªçš„è¯·æ±‚ç±»å‹ã€‚\n// the most compact `cy.intercept` call, the GET method is implied cy.intercept(\u0026#34;**/authentication\u0026#34;).as(\u0026#34;authentication-xhr\u0026#34;); // method can be explicitly defined cy.intercept(\u0026#34;POST\u0026#34;, \u0026#34;**/authentication\u0026#34;).as(\u0026#34;authentication-xhr\u0026#34;); // the extended `cy.intercept` call is available too cy.intercept({ method: \u0026#34;POST\u0026#34;, url: \u0026#34;**/authentication\u0026#34; }).as(\u0026#34;authentication-xhr\u0026#34;); éªŒè¯ XHR è¯·æ±‚çš„ payload å’Œ headers å¯¹ XHR è¯·æ±‚çš„ payload å’Œ headers è¿›è¡Œæ–­è¨€å…è®¸ä½ ç«‹å³è·å¾—æœ‰å…³ç³Ÿç³•çš„ XHR è¯·æ±‚åŸå› çš„è¯¦ç»†åé¦ˆã€‚å¿…é¡»åœ¨æ¯ä¸ª XHR è¯·æ±‚ä¸Šè¿›è¡Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡éƒ½æ­£ç¡®åœ°è¡¨ç¤ºäº†æµ‹è¯•æ‰§è¡Œçš„ UI æ“ä½œã€‚\n// ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\u0026#34;POST\u0026#34;, \u0026#34;**/authentication\u0026#34;).as(\u0026#34;authentication-xhr\u0026#34;); // ... your test actions... cy.wait(\u0026#34;@authentication-xhr\u0026#34;).then(interception =\u0026gt; { // request headers assertion expect(interception.request.headers).to.have.property(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;); // request payload assertions expect(interception.request.body).to.have.property(\u0026#34;username\u0026#34;, \u0026#34;admin\u0026#34;); expect(interception.request.body).to.have.property(\u0026#34;password\u0026#34;, \u0026#34;asupersecretpassword\u0026#34;); }); éªŒè¯ XHR è¯·æ±‚å“åº”çš„ payload, headers å’Œ status å“åº”å¿…é¡»ç™¾åˆ†ä¹‹ç™¾ç¬¦åˆå‰ç«¯åº”ç”¨çš„é¢„æœŸï¼Œå¦åˆ™å¯èƒ½å‘ç”¨æˆ·å±•ç¤ºæ„æ–™ä¹‹å¤–çš„çŠ¶æ€ã€‚å“åº”æ–­è¨€åœ¨å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ä¸­å¾ˆæœ‰ç”¨ï¼Œä½†åœ¨ UI é›†æˆæµ‹è¯•ä¸­åˆ™æ— å…³ç´§è¦ï¼ˆTODOï¼šé“¾æ¥åˆ°é›†æˆæµ‹è¯•é¡µé¢ï¼‰ã€‚\n// ask Cypress to intercept every XHR request made to a URL ending with `/authentication` cy.intercept(\u0026#34;POST\u0026#34;, \u0026#34;**/authentication\u0026#34;).as(\u0026#34;authentication-xhr\u0026#34;); // ... your test actions... cy.wait(\u0026#34;@authentication-xhr\u0026#34;).then(intercept =\u0026gt; { // status assertions expect(intercept.response.statusCode).to.equal(200); // response headers assertions expect(intercept.response.body).to.have.property(\u0026#34;access-control-allow-origin\u0026#34;, \u0026#34;*\u0026#34;); // response payload assertions expect(intercept.response.body).to.have.property(\u0026#34;token\u0026#34;); }); æµ‹è¯•ç›‘æ§ åŸæ–‡é“¾æ¥ï¼š:https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/monitoring-tests.md\nä¸€æ®µç®€è¦è¯´æ˜ éšç€å‰ç«¯æœŸæœ›çš„æé«˜ï¼ŒæœåŠ¡å™¨å’ŒæœåŠ¡çš„å¤æ‚æ€§ä¹Ÿåœ¨å¢åŠ ã€‚å‰ç«¯åº”ç”¨éœ€è¦å˜å¾—è¶Šæ¥è¶Šå¿«ï¼šä»£ç æ‹†åˆ†ã€æ‡’åŠ è½½ã€Brotli å‹ç¼©ç­‰æ€§èƒ½ä¼˜åŒ–è§£å†³æ–¹æ¡ˆå·²æˆä¸ºæ ‡å‡†ã€‚è¿˜æœ‰ä¸€äº›ä»¤äººæƒŠå¹çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚åŸºäºæœºå™¨å­¦ä¹ å’Œåˆ†ææ•°æ®çš„ä»£ç æ‹†åˆ†å’Œèµ„æºé¢„åŠ è½½ã€‚æ­¤å¤–ï¼ŒJAMstack ç«™ç‚¹ç”Ÿæˆå™¨å¯ç”¨äºé¿å…æ‰‹åŠ¨ç®¡ç†è®¸å¤šæ€§èƒ½ä¼˜åŒ–ï¼Œä½†å®ƒä»¬çš„é…ç½®å’Œæ„å»ºè¿‡ç¨‹å¯èƒ½ä¼šç ´åå·²ç»æµ‹è¯•è¿‡çš„åŠŸèƒ½ã€‚\næœ‰å¾ˆå¤šæˆ‘ä»¬ä¸€æ—¦æµ‹è¯•è¿‡å°±è®¤ä¸ºç†æ‰€å½“ç„¶çš„åŠŸèƒ½ï¼Œä½†å®ƒä»¬å¹¶éæ— æ³•å›å½’ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¾éš¾ã€‚ä¾‹å¦‚ï¼š\nsitemap.xml å’Œ robots.txt çš„çˆ¬è¡Œé…ç½®ï¼ˆé€šå¸¸æ¯ä¸ªç¯å¢ƒéƒ½ä¸åŒï¼‰ ä½¿ç”¨ Brotli/gzip æä¾›çš„èµ„äº§ï¼šé”™è¯¯çš„å†…å®¹ç¼–ç å¯èƒ½ä¼šç ´åç«™ç‚¹çš„æ‰€æœ‰åŠŸèƒ½ é’ˆå¯¹é™æ€æˆ–åŠ¨æ€èµ„äº§çš„ä¸åŒé…ç½®çš„ç¼“å­˜ç®¡ç† è¿™äº›é—®é¢˜å¯èƒ½çœ‹èµ·æ¥å¾ˆæ˜æ˜¾ï¼Œä½†æ¯”ä½ æƒ³è±¡çš„æ›´å¾®å¦™ã€‚å¦‚æœä½ å…³å¿ƒç”¨æˆ·ä½“éªŒï¼Œå°±åº”è¯¥ä¿æŒç›‘æ§ï¼Œå› ä¸ºé€šå¸¸åœ¨å‘ç°é—®é¢˜æ—¶å·²ç»ä¸ºæ—¶è¿‡æ™šã€‚æˆ‘çŸ¥é“ä¸èƒ½ç›‘æ§æ‰€æœ‰äº‹ç‰©ï¼Œä½†æ˜¯æµ‹è¯•åº”ç”¨çš„æ¬¡æ•°è¶Šå¤šï¼Œæµ‹è¯•å°±è¶Šèƒ½æˆä¸ºé¦–è¦çš„è´¨é‡æ£€æŸ¥å·¥å…·ã€‚\nç›‘æ§æµ‹è¯•ä¹Ÿå¯ä»¥ä¸ E2E æµ‹è¯•é›†æˆï¼ˆæ¯•ç«Ÿï¼Œå®ƒä»¬åªæ˜¯ç®€å•çš„ E2E æµ‹è¯•ï¼‰ï¼Œä½†å°†å®ƒä»¬ä¿æŒåˆ†å¼€å¯ä»¥å¸®åŠ©ä½ åœ¨éœ€è¦æ—¶è¿è¡Œå®ƒä»¬ã€‚ä¸Šè¿°å¤§å¤šæ•°äº‹é¡¹ä¸ DevOps ç›¸å…³ï¼Œæœ‰äº†è¶…å¿«çš„ç›‘æ§æµ‹è¯•ï¼Œæ‚¨å¯ä»¥è·å¾—å³æ—¶è€Œä¸“æ³¨çš„åé¦ˆã€‚\nCypress ç¤ºä¾‹ ç¼“å­˜ç›‘æ§æµ‹è¯•ç¤ºä¾‹ const urls = { staging: \u0026#34;https://staging.example.com\u0026#34;, production: \u0026#34;https://example.com\u0026#34;, } const shouldNotBeCached = (xhr) =\u0026gt; cy.wrap(xhr).its(\u0026#34;headers.cache-control\u0026#34;).should(\u0026#34;equal\u0026#34;, \u0026#34;public,max-age=0,must-revalidate\u0026#34;) const shouldBeCached = (xhr) =\u0026gt; cy.wrap(xhr).its(\u0026#34;headers.cache-control\u0026#34;).should(\u0026#34;equal\u0026#34;, \u0026#34;public,max-age=31536000,immutable\u0026#34;) // extract the main JS file from the source code of the page const getMainJsUrl = pageSource =\u0026gt; \u0026#34;/app-56a3f6cb9e6156c82be6.js\u0026#34; context(\u0026#39;Site monitoring\u0026#39;, () =\u0026gt; { context(\u0026#39;The HTML should not be cached\u0026#39;, () =\u0026gt; { const test = url =\u0026gt; cy.request(url) .then(shouldNotBeCached) it(\u0026#34;staging\u0026#34;, () =\u0026gt; test(urls.staging)) it(\u0026#34;production\u0026#34;, () =\u0026gt; test(urls.production)) }) context(\u0026#39;The static assets should be cached\u0026#39;, () =\u0026gt; { const test = url =\u0026gt; cy.request(url) .its(\u0026#34;body\u0026#34;) .then(getMainJsUrl) .then(appUrl =\u0026gt; url+appUrl) .then(cy.request) .then(shouldBeCached) it(\u0026#39;staging\u0026#39;, () =\u0026gt; test(urls.staging)) it(\u0026#39;production\u0026#39;, () =\u0026gt; test(urls.production)) }) }) å†…å®¹ç¼–ç ç›‘æ§æµ‹è¯•ç¤ºä¾‹ context(\u0026#39;The Brotli-compressed assets should be served with the correct content encoding\u0026#39;, () =\u0026gt; { const test = url =\u0026gt; { cy.request(url) .its(\u0026#34;body\u0026#34;) .then(getMainJsUrl) .then(appUrl =\u0026gt; cy.request({url: url + appUrl, headers: {\u0026#34;Accept-Encoding\u0026#34;: \u0026#34;br\u0026#34;}}) .its(\u0026#34;headers.content-encoding\u0026#34;) .should(\u0026#34;equal\u0026#34;, \u0026#34;br\u0026#34;)) } it(\u0026#39;staging\u0026#39;, () =\u0026gt; test(urls.staging)) it(\u0026#39;production\u0026#39;, () =\u0026gt; test(urls.production)) }) æŠ“å–ç›‘æµ‹æµ‹è¯•ç¤ºä¾‹ context(\u0026#39;The robots.txt file should disallow the crawling of the staging site and allow the production one\u0026#39;, () =\u0026gt; { const test = (url, content) =\u0026gt; cy.request(`${url}/robots.txt`) .its(\u0026#34;body\u0026#34;) .should(\u0026#34;contain\u0026#34;, content) it(\u0026#39;staging\u0026#39;, () =\u0026gt; test(urls.staging, \u0026#34;Disallow: /\u0026#34;)) it(\u0026#39;production\u0026#39;, () =\u0026gt; test(urls.production, \u0026#34;Allow: /\u0026#34;)) }) ç”±NoriSte åœ¨ dev.to å’Œ Mediumè¿›è¡Œè”åˆå‘è¡¨ã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-server-communication-testing-test-the-request-and-response-payloads-and-monitoring-tests/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥æ¢è®¨äº† UI æµ‹è¯•æœ€ä½³å®è·µä¸­çš„æœåŠ¡é€šä¿¡æµ‹è¯•ï¼Œé‡ç‚¹å…³æ³¨è¯·æ±‚å’Œå“åº”è´Ÿè½½çš„éªŒè¯ä»¥åŠæµ‹è¯•ç›‘æ§ã€‚è¯»è€…å°†å­¦åˆ°å¦‚ä½•æœ‰æ•ˆæ£€éªŒ UI ä¸æœåŠ¡ä¹‹é—´çš„è¯·æ±‚å’Œå“åº”è´Ÿè½½ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿäº¤äº’çš„æ­£ç¡®æ€§å’Œå¯é æ€§ã€‚åšæ–‡è¿˜ä»‹ç»äº†åœ¨ UI æµ‹è¯•ä¸­å¦‚ä½•è¿›è¡Œç›‘æ§ï¼Œä»¥åŠç›‘æµ‹æœåŠ¡é€šä¿¡è¿‡ç¨‹ä¸­çš„æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å…¨é¢åœ°è¦†ç›– UI æµ‹è¯•ä¸­çš„æœåŠ¡é€šä¿¡æ–¹é¢ï¼Œæé«˜æµ‹è¯•çš„å…¨é¢æ€§å’Œå‡†ç¡®æ€§ï¼Œç¡®ä¿ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„æœåŠ¡é€šä¿¡æµ‹è¯•ï¼šæ£€éªŒè¯·æ±‚å’Œå“åº”è´Ÿè½½ï¼Œæµ‹è¯•ç›‘æ§"},{"content":"è¾“å‡º html æŠ¥å‘Š é€šè¿‡ä¹‹å‰çš„ K6 çš„é»˜è®¤æµ‹è¯•æŠ¥å‘Šæ¥çœ‹ï¼ŒK6 æœ¬èº«åªèƒ½è¾“å‡ºå‘½ä»¤è¡Œçš„æŠ¥å‘Šï¼Œæ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢çš„æµ‹è¯•æŠ¥å‘Šã€‚\nå¦‚æœæˆ‘ä»¬æƒ³è¦ç”Ÿæˆå›¾å½¢åŒ–ç•Œé¢çš„æµ‹è¯•æŠ¥å‘Šï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„ K6 HTML Report Exporter v2 æ’ä»¶æ¥ç”Ÿæˆ html æŠ¥å‘Šã€‚\nä¸‹é¢æ˜¯ä½¿ç”¨ K6 HTML Report Exporter v2 æ’ä»¶æ¥ç”Ÿæˆ html æŠ¥å‘Šçš„æ­¥éª¤ï¼š\nåœ¨æµ‹è¯•è„šæœ¬ä¸­å¼•å…¥ K6 HTML Report Exporter v2 æ’ä»¶ import { htmlReport } from \u0026#34;https://raw.githubusercontent.com/benc-uk/k6-reporter/main/dist/bundle.js\u0026#34;; åœ¨æµ‹è¯•è„šæœ¬ä¸­é…ç½® K6 HTML Report Exporter v2 æ’ä»¶ export function handleSummary(data) { return { \u0026#34;summary.html\u0026#34;: htmlReport(data), }; } å®Œæ•´çš„æµ‹è¯•è„šæœ¬ç¤ºä¾‹ import { check } from \u0026#39;k6\u0026#39;; import http from \u0026#39;k6/http\u0026#39;; import { htmlReport } from \u0026#34;https://raw.githubusercontent.com/benc-uk/k6-reporter/main/dist/bundle.js\u0026#34;; export default function () { const res = http.get(\u0026#39;https://httpbin.test.k6.io\u0026#39;); check(res, { \u0026#39;HTTP response code is status 200\u0026#39;: (r) =\u0026gt; r.status === 200, }); } export function handleSummary(data) { return { \u0026#34;summary.html\u0026#34;: htmlReport(data), }; } ä½¿ç”¨ k6 è¿è¡Œæµ‹è¯•è„šæœ¬å³å¯åœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆåç§°ä¸º summary.html çš„ html æŠ¥å‘Š æ‰“å¼€ summary.html æŠ¥å‘Šå³å¯æŸ¥çœ‹ html æŠ¥å‘Šã€‚ æ›´å¤šå…³äº K6 HTML Report Exporter v2 æ’ä»¶çš„ç”¨æ³•ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ https://github.com/benc-uk/k6-reporter[https://github.com/benc-uk/k6-reporter]\næŒç»­é›†æˆ æ¥å…¥ github action ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ k6.ymlã€‚\nç¼–è¾‘ k6.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­\nname: K6 Performance Test on: [push] jobs: build: name: Run k6 test runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v4 - name: Run k6 local test uses: grafana/k6-action@v0.3.1 with: filename: demo.js flags: --vus 50 --duration 10s æäº¤ä»£ç ï¼šå°† k6.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚\næŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ K6 Performance Test å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ æˆ‘ä»¬ä¹Ÿé€šè¿‡ github action è¾“å‡º html æŠ¥å‘Šï¼Œå…ˆè°ƒæ•´ä¸€ä¸‹ k6.yml æ–‡ä»¶\nname: K6 Performance Test on: [push] jobs: build: name: Run k6 performance test runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v4 - name: Run k6 local test uses: grafana/k6-action@v0.3.1 with: filename: demo.js flags: --vus 50 --duration 10s - name: Archive K6 performance test report uses: actions/upload-artifact@v3 with: name: K6-performance-test-report path: summary.html - name: Upload K6 performance test report to GitHub uses: actions/upload-artifact@v3 with: name: K6-performance-test-report path: summary.html æäº¤ä»£ç ï¼šå°† k6.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ K6 Performance Test å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœå’Œæµ‹è¯•æŠ¥å‘Šé™„ä»¶ã€‚ å‚è€ƒæ–‡æ¡£ K6 æ–‡æ¡£ï¼šhttps://k6.io/docs/ k6 å®˜æ–¹ç½‘ç«™ï¼šhttps://k6.io/ K6 æ€§èƒ½æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/K6-Performance-Test-starter/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-advanced-usage-output-html-report-and-ci-cd-integration/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥æ¢è®¨äº† K6 æ€§èƒ½æµ‹è¯•çš„è¿›é˜¶ç”¨æ³•ï¼Œé›†ä¸­ä»‹ç»äº†è¾“å‡º HTML æŠ¥å‘Šå’Œåœ¨ CI/CD ä¸­é›†æˆ K6 çš„å®è·µï¼Œç‰¹åˆ«ä»¥ GitHub Actions ä¸ºä¾‹ã€‚è¯»è€…å°†å­¦åˆ°å¦‚ä½•ç”Ÿæˆè¯¦ç»†çš„ HTML æµ‹è¯•æŠ¥å‘Šï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ GitHub Actions é›†æˆ K6 åˆ° CI/CD æµç¨‹ä¸­ï¼Œå®ç°è‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯•ã€‚è¿™ç§é«˜çº§ç”¨æ³•ä¸ä»…æä¾›äº†æ›´ç›´è§‚çš„æ€§èƒ½æµ‹è¯•ç»“æœå±•ç¤ºï¼Œè¿˜ç¡®ä¿äº†æ€§èƒ½æµ‹è¯•çš„åŠæ—¶æ‰§è¡Œï¼Œæœ‰åŠ©äºåœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°å’Œè§£å†³æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ã€‚","title":"K6 æ€§èƒ½æµ‹è¯•æ•™ç¨‹ - è¿›é˜¶ç”¨æ³•ï¼šè¾“å‡º html æŠ¥å‘Šå’Œ CI/CD é›†æˆ"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nå°†æ‚¨çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…· åŸæ–‡é“¾æ¥:https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/use-your-testing-tool-as-your-primary-development-tool.md\nä¸€æ®µç®€è¦è¯´æ˜ ä¸€ä¸ªå®ä¾‹å±•ç¤ºå‡ºé—®é¢˜çš„æœ¬è´¨ã€‚æ¯”å¦‚è¯´ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªèº«ä»½éªŒè¯è¡¨å•ï¼Œå¯èƒ½çš„æ­¥éª¤æ˜¯ï¼š\nç¼–å†™ç”¨æˆ·åè¾“å…¥å­—æ®µçš„ä»£ç  åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨æµ‹è¯•å®ƒ ç¼–å†™å¯†ç è¾“å…¥å­—æ®µçš„ä»£ç  åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨æµ‹è¯•å®ƒ ç¼–å†™æäº¤æŒ‰é’®çš„ä»£ç  ç¼–å†™ XHR è¯·æ±‚çš„å¤„ç†ä»£ç  ç„¶åï¼Œä½ é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºåœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä¸€ä¸ªè™šæ‹Ÿçš„æˆ–æ¨¡æ‹Ÿçš„æœåŠ¡å™¨æ¥å“åº”åº”ç”¨ç¨‹åºçš„ XHR è¯·æ±‚ã€‚äºæ˜¯ï¼Œä½ å¼€å§‹ç¼–å†™ä¸€ä¸ªé›†æˆæµ‹è¯•ï¼š\nå¡«å†™ç”¨æˆ·åè¾“å…¥å­—æ®µ å¡«å†™å¯†ç è¾“å…¥å­—æ®µ ç‚¹å‡»æäº¤æŒ‰é’® æ£€æŸ¥ XHR è¯·æ±‚ æ¨¡æ‹Ÿ XHR çš„å“åº” æ£€æŸ¥åé¦ˆ å¯¹æ¯ä¸ªé”™è¯¯æµç¨‹è¿›è¡Œç›¸åŒçš„æµ‹è¯•æ­¥éª¤ ç¼–å†™å¤„ç†é”™è¯¯æµç¨‹çš„ä»£ç  é‡æ–°æ£€æŸ¥æµ‹è¯•ç»“æœ çœ‹ä¸€ä¸‹ç¬¬ä¸€ä¸ªæµ‹è¯•æ­¥éª¤ï¼Œå®ƒä»¬ä¸æˆ‘ä»¬åœ¨ç¼–å†™èº«ä»½éªŒè¯è¡¨å•æ—¶æ‰‹åŠ¨æ‰§è¡Œçš„æ­¥éª¤ç›¸åŒã€‚ç„¶åï¼Œæˆ‘ä»¬ä¸ºæœåŠ¡å™¨çš„å“åº”åˆ›å»ºäº†å­˜æ ¹ï¼Œå¹¶æ£€æŸ¥è¡¨å•çš„æœ€ç»ˆè¡Œä¸ºï¼ˆåŒ…æ‹¬æˆåŠŸæˆ–å¤±è´¥çš„å“åº”ï¼‰ã€‚\nè¿™ä¸ªå·¥ä½œæµç¨‹å¯ä»¥å¾ˆå®¹æ˜“åœ°å¾—åˆ°æ”¹è¿›ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç¼–å†™è¡¨å•çš„åŒæ—¶ç¼–å†™æµ‹è¯•ï¼ˆTDD å¼€å‘è€…å·²ç»è®­ç»ƒæˆè¿™æ ·ï¼‰ï¼š\nç¼–å†™ç”¨æˆ·åè¾“å…¥å­—æ®µçš„ä»£ç  * ç¼–å†™å¡«å……ç”¨æˆ·åè¾“å…¥å­—æ®µçš„æµ‹è¯•* ç¼–å†™å¯†ç è¾“å…¥å­—æ®µçš„ä»£ç  æ›´æ–°æµ‹è¯•ä»¥å¡«å……å¯†ç è¾“å…¥å­—æ®µ ç¼–å†™æäº¤æŒ‰é’®çš„ä»£ç  æ›´æ–°æµ‹è¯•ä»¥ç‚¹å‡»æäº¤æŒ‰é’® åœ¨æµ‹è¯•ä¸­åˆ›å»º XHR çš„å“åº”å­˜æ ¹ ç¼–å†™ XHR è¯·æ±‚çš„ç®¡ç†ä»£ç  æ£€æŸ¥åé¦ˆ ç¼–å†™é”™è¯¯æµç¨‹çš„ç®¡ç†ä»£ç  æ›´æ–°æµ‹è¯•ä»¥æ£€æŸ¥é”™è¯¯æµç¨‹ å¯¹äºæ¯ä¸ªé”™è¯¯æµç¨‹ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ * è¯·æ³¨æ„ï¼Œå¦‚æœè¦é‡‡ç”¨ä¸¥æ ¼çš„ TDD æ–¹æ³•ï¼Œå¯ä»¥é¢ å€’ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥çš„é¡ºåºã€‚\nè¿™æ ·åšçš„æœ€é‡è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ\nä½ å‡ ä¹å®Œå…¨é¿å…æ‰‹åŠ¨æµ‹è¯•åº”ç”¨ç¨‹åº å……åˆ†åˆ©ç”¨æµ‹è¯•å·¥å…·çš„é€Ÿåº¦ï¼Œå®ƒä»¥æƒŠäººçš„é€Ÿåº¦å¡«å……è¡¨å•ï¼Œè®©ä½ èŠ‚çœå¤§é‡æ—¶é—´ æ— éœ€åœ¨ç¼–å†™è¡¨å•åå†ç¼–å†™æµ‹è¯•ï¼ˆTDD å¼€å‘è€…å·²ç»é¿å…è¿™æ ·åšï¼‰ï¼Œå°½ç®¡æœ€åˆå¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹çƒ¦äºº å®Œå…¨é¿å…åœ¨æºä»£ç ä¸­å¼•å…¥ä¸€äº›ä¸´æ—¶çŠ¶æ€ï¼ˆä¾‹å¦‚è¾“å…¥å­—æ®µçš„é»˜è®¤å€¼ã€è™šå‡çš„ XHR å“åº”ï¼‰ ç›´æ¥ç”¨çœŸå®çš„ç½‘ç»œå“åº”æµ‹è¯•ä½ çš„åº”ç”¨ç¨‹åºï¼ˆè¯·è®°ä½ï¼Œåº”ç”¨ç¨‹åºä¸çŸ¥é“ç½‘ç»œè¯·æ±‚æ˜¯ç”±æµ‹è¯•å·¥å…·å­˜æ ¹çš„ï¼‰ æ¯æ¬¡ä¿å­˜æµ‹è¯•æ–‡ä»¶æ—¶éƒ½é‡æ–°å¯åŠ¨æµ‹è¯• å¯ä»¥å……åˆ†åˆ©ç”¨ Chrome DevTools å’Œæ¡†æ¶ç‰¹å®šçš„å¼€å‘å·¥å…· å¦‚ä½•å……åˆ†åˆ©ç”¨ç°æœ‰çš„å¼€å‘å·¥å…·ï¼Ÿ\nå—¯ï¼Œå‡ ä¹æ¯ä¸ªæµ‹è¯•å·¥å…·éƒ½å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½† Cypress åœ¨è¿™æ–¹é¢è„±é¢–è€Œå‡ºã€‚Cypress æ‹¥æœ‰ä¸€ä¸ªä¸“é—¨çš„ Chrome ç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·åœ¨æ‰€æœ‰ä½ çš„æµ‹è¯•å’Œæ‰€æœ‰ä½ çš„é¡¹ç›®ä¸­éƒ½æ˜¯æŒä¹…å­˜åœ¨çš„ã€‚é€šè¿‡è¿™æ ·åšï¼ŒCypress å…è®¸ä½ æ‹¥æœ‰ä¸€ä¸ªçœŸæ­£ä¸“ä¸ºæµ‹è¯•è€Œè®¾çš„æµè§ˆå™¨ï¼Œå…¶ä¸­åŒ…å«ä½ å–œæ¬¢çš„æ‰©å±•ï¼Œå³ä½¿ä½ ä½¿ç”¨çš„æ˜¯ä¸æµè§ˆç›¸åŒçš„ Chrome ç‰ˆæœ¬ã€‚\nå°†å…¶ä¸å‡ºè‰²çš„ç”¨æˆ·ç•Œé¢ç»“åˆèµ·æ¥ï¼Œä½ å°±å¯ä»¥å‡†å¤‡å¥½ç›´æ¥ä½¿ç”¨ Cypress å¼€å‘åº”ç”¨ç¨‹åºã€‚ä¸‹é¢ä½ å¯ä»¥çœ‹åˆ° Cypress ç”¨æˆ·ç•Œé¢çš„ä¸€äº›æˆªå›¾ï¼Œå±•ç¤ºäº†å°†å…¶ä½œä¸ºä¸»è¦å¼€å‘å·¥å…·ä½¿ç”¨çš„ç®€ä¾¿æ€§ã€‚\næµè§ˆå™¨é€‰æ‹© Cypress æ§åˆ¶çš„æµè§ˆå™¨å¼€å‘è€…å·¥å…· Cypress Skip å’Œ Only UI æ’ä»¶ è¿™ä¸ªå·¥å…·è®©ä½ å¯ä»¥ç›´æ¥åœ¨ Cypress UI ä¸­ä¸ºæµ‹è¯•æ·»åŠ .onlyæˆ–.skipã€‚ Cypress è§‚å¯Ÿå’Œé‡æ–°åŠ è½½æ’ä»¶ æ­¤åŠŸèƒ½ä½¿æ‚¨èƒ½å¤Ÿåœ¨æ¯æ¬¡æºä»£ç ç¼–è¯‘æ—¶é‡æ–°è¿è¡Œ Cypress æµ‹è¯•ã€‚\nå¦‚æœæ‚¨æƒ³åœ¨ Cypress æ§åˆ¶çš„æµè§ˆå™¨ä¸­æŸ¥çœ‹ React/Redux å¼€å‘å·¥å…·çš„å®é™…æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ cypress-react-devtools å­˜å‚¨åº“ã€‚\næ­¤æ–‡ç”± NoriSte åœ¨ dev.to å’Œ Mediumä¸Šè¿›è¡Œè”åˆå‘è¡¨ã€‚\nä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯• åŸæ–‡é“¾æ¥:https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/ui-tests-debugging-best-practices.md\nä¸€æ®µç®€è¦è¯´æ˜ UI æµ‹è¯•æ¶‰åŠè®¸å¤šæ­¥éª¤ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªå…³é”®ç›®æ ‡ï¼Œä½†å…¶ä¸­ä¸¤ä¸ªå¾€å¾€è¢«ä½ä¼°ï¼š\næµ‹è¯•ä¸€ä¸ªåŠŸèƒ½ï¼ˆæ˜¾è€Œæ˜“è§ï¼‰ å¸®åŠ©è¯»è€…ç†è§£ä»£ç çš„ä½œç”¨ï¼ˆé€šå¸¸è¢«ä½ä¼°ï¼‰ ç®€åŒ–è°ƒè¯•ï¼ˆè¢«ä½ä¼°ï¼ŒåŒæ—¶éœ€è¦ç»éªŒï¼‰ ä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·äº†è§£ç¼–å†™ UI æµ‹è¯•æ—¶è¦è®°ä½çš„ä¸€äº›ç®€å•ä½†æœ‰æ•ˆçš„æŠ€å·§ã€‚\nå¯è¯»æ€§ å…³äºæµ‹è¯•ä¸­æŠ½è±¡çš„é—®é¢˜æ˜¯ä¸€ä¸ªæœ‰äº‰è®®çš„è¯é¢˜ï¼ˆPage-Object Model çš„ç²‰ä¸å¯èƒ½ä¼šå¯¹æ­¤æœ‰å¼‚è®®ï¼‰ã€‚\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæˆ‘ä¸å¾—ä¸ä¿®å¤çš„çœŸå®æµ‹è¯•çš„ä¾‹å­ã€‚\n// spec.ts file it(\u0026#39;Create Query Action\u0026#39;, createQueryAction); // test.ts file (simplified version) export const createMutationAction = () =\u0026gt; { // ... clearActionDef(); typeIntoActionDef(statements.createMutationActionText); clearActionTypes(); // ... }; // test.ts file contains the clearActionDef, typeIntoActionDef, etc. const clearActionDef = () =\u0026gt; { cy.get(\u0026#39;textarea\u0026#39;).first().type(\u0026#39;{selectall}\u0026#39;, { force: true }); cy.get(\u0026#39;textarea\u0026#39;).first().trigger(\u0026#39;keydown\u0026#39;, { keyCode: 46, which: 46, force: true, }); }; // test.ts file contains also the statements const statements = { createMutationActionText: `type Mutation { login (username: String!, password: String!): LoginResponse }`, createMutationCustomType: `type LoginResponse { accessToken: String! } `, createMutationHandler: \u0026#39;https://hasura-actions-demo.glitch.me/login\u0026#39;, // ... } çŸ­å‡½æ•°çš„èƒŒåæ€è·¯æ˜¯åˆ›å»ºå°è€Œå¯é‡å¤ä½¿ç”¨çš„ä»£ç ç‰‡æ®µï¼Œä»¥å¸®åŠ©å…¶ä»–éœ€è¦åœ¨é¡µé¢ä¸Šæ‰§è¡Œç±»ä¼¼æ“ä½œçš„æµ‹è¯•ã€‚\næˆ‘è®¤ä¸ºè¿™ä¸å¤ªå¥½ï¼Œå› ä¸ºå¾ˆéš¾å»ºç«‹å¯¹æµ‹è¯•çš„æ‰§è¡Œè¿‡ç¨‹çš„å¿ƒæ™ºæ¨¡å‹ï¼æ‰€æœ‰æµ‹è¯•éƒ¨åˆ†éƒ½è¢«åˆ†å‰²æˆå°å‡½æ•°å’Œå®ç”¨ç¨‹åºï¼Œè€Œæµ‹è¯•çš„ä»£ç å¿…é¡»å°½å¯èƒ½åœ°ç›´æˆªäº†å½“ã€‚\nä½ è¿˜è®°å¾—ç« èŠ‚å¼€å¤´æåˆ°çš„ä¸¤ä¸ªè¢«ä½ä¼°çš„ç‚¹å—ï¼Ÿè¿™ä¸ªæƒ³æ³•æ˜¯æµ‹è¯•åº”è¯¥å®ç°ä¸‰ä¸ªä¸»è¦ç›®æ ‡ï¼š\nå¸®åŠ©è¯»è€…ç†è§£ä»£ç çš„ä½œç”¨ ä»¥ä¾¿è½»æ¾è¿›è¡Œè°ƒè¯• å‰è€…è¦æ±‚æµ‹è¯•çš„ä»£ç å°½å¯èƒ½ç®€å•ï¼Œè€Œåœ¨æµ‹è¯•çš„ä»£ç ä¸­ä½¿ç”¨æŠ½è±¡å¹¶æ²¡æœ‰å¥½å¤„ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´èŠ±è´¹æ›´å¤šæ—¶é—´è°ƒè¯•å’Œç»´æŠ¤æµ‹è¯•ï¼Œè€Œä¸æ˜¯åº”ç”¨ç¨‹åºã€‚\nåè€…ä¸æµ‹è¯•çš„é”™è¯¯éƒ¨åˆ†æœ‰å…³ï¼šè°ƒè¯•/ä¿®å¤å®ƒä»¬ã€‚è°ƒè¯• UI æµ‹è¯•å¾ˆå›°éš¾ï¼Œå› ä¸ºä½ éœ€è¦å¤„ç†ä»¥ä¸‹å…ƒç´ ï¼š\nä½ çš„å‰ç«¯åº”ç”¨ç¨‹åº æµè§ˆå™¨ æ§åˆ¶æµè§ˆå™¨çš„å·¥å…· ä½ æä¾›ç»™æ§åˆ¶æµè§ˆå™¨çš„å·¥å…·çš„æŒ‡ä»¤ ä¸Šè¿°æ¯ä¸ªå…ƒç´ éƒ½å¯èƒ½å‡ºç°é—®é¢˜ï¼Œå³ä½¿æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜ä¹Ÿå¯èƒ½åœ¨ç†è§£æµ‹è¯•å¤±è´¥çš„åŸå› æ—¶æ„Ÿåˆ°å›°æ‰°ã€‚\nå› æ­¤ï¼Œç«¯åˆ°ç«¯æµ‹è¯•æ˜¯å¤æ‚çš„ã€‚Cypress æé«˜äº†å¼€å‘äººå‘˜çš„ç”Ÿæ´»è´¨é‡ï¼ˆåœ¨ ä¸€äº› UI æµ‹è¯•é—®é¢˜å’Œ Cypress æ–¹æ³• ç« èŠ‚ä¸­äº†è§£æ›´å¤šï¼‰ï¼Œä½†ç›´æˆªäº†å½“çš„ä»£ç ä¼šæå¤§åœ°å¸®åŠ©ã€‚\nä¸ä½¿ç”¨ä»»ä½•æŠ½è±¡ æˆ‘å»ºè®®æ ¹æœ¬ä¸ä½¿ç”¨æŠ½è±¡ï¼ˆç¨åï¼Œæˆ‘å°†è®¨è®ºä¸€äº›ä¾‹å¤–æƒ…å†µä»¥åŠå“ªç§æŠ½è±¡æ˜¯å¥½çš„ï¼‰ï¼æˆ‘å°†ä¸Šè¿°ä¾‹å­æ”¹å†™ä¸ºå¦‚ä¸‹å½¢å¼ï¼š\nit(\u0026#39;Test the feature\u0026#39;, () =\u0026gt; { cy.get(\u0026#39;textarea\u0026#39;).eq(0).as(\u0026#39;actionDefinitionTextarea\u0026#39;); cy.get(\u0026#39;textarea\u0026#39;).eq(1).as(\u0026#39;typeConfigurationTextarea\u0026#39;); cy.get(\u0026#39;@actionDefinitionTextarea\u0026#39;).clearConsoleTextarea().type( `type Mutation { login (username: String!, password: String!): LoginResponse }`, { force: true, delay: 0 } ); cy.get(\u0026#39;@typeConfigurationTextarea\u0026#39;).clearConsoleTextarea().type( `type LoginResponse { accessToken: String! } `, { force: true, delay: 0 } ); // ... }) é‡å†™åçš„æµ‹è¯•ä¸åŸå§‹æµ‹è¯•æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä½†å½“ä½ æŸ¥çœ‹æµ‹è¯•ä»£ç æ—¶ï¼Œæ— éœ€æ¥å›è·³è½¬æ¥åœ¨è„‘ä¸­å»ºç«‹è¿æ¥ã€‚\næƒ³çŸ¥é“åœ¨æ–‡æœ¬åŒºåŸŸä¸­è¾“å…¥äº†ä»€ä¹ˆå—ï¼Ÿæ¯«ä¸è´¹åŠ›ï¼Œå°±åœ¨é‚£é‡Œï¼ æƒ³çŸ¥é“æ–‡æœ¬ä½¿ç”¨çš„æ˜¯å“ªä¸ªæ–‡æœ¬åŒºåŸŸå—ï¼Ÿæ¯«ä¸è´¹åŠ›ï¼Œå°±åœ¨é‚£é‡Œï¼ åœ¨æµ‹è¯•ä¸­ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŠ½è±¡åŒ–æ˜¯å¥½çš„å‘¢ï¼Ÿ åœ¨æˆ‘çœ‹æ¥ï¼š\nå½“æˆ‘æƒ³éšè—ä¸€äº›å¯èƒ½æ²¡æœ‰ä»·å€¼ä½†å¯èƒ½åˆ†æ•£è¯»è€…æ³¨æ„åŠ›çš„æµ‹è¯•æ€ªç™–æ—¶ å½“å®ƒä»¬æ˜¯è½¯çš„ï¼Œå‡ ä¹ä¸å¸¦å‚æ•°ï¼Œåªæœ‰ä¸€å±‚æ·±åº¦ å½“å­˜åœ¨ç›¸å½“æ•°é‡çš„é‡å¤ï¼ˆç¡®åˆ‡çš„æ•°é‡æ˜¯ä¸»è§‚çš„ï¼‰ ä¸€ä¸ªæµ‹è¯•æ€ªç™–çš„ä¾‹å­æ˜¯ä¸‹é¢è¿™ä¸ª\n/** * Clear a Console\u0026#39;s textarea. * Work around cy.clear sometimes not working in the Console\u0026#39;s textareas. */ Cypress.Commands.add(\u0026#39;clearConsoleTextarea\u0026#39;, { prevSubject: \u0026#39;element\u0026#39; }, el =\u0026gt; { cy.wrap(el).type(\u0026#39;{selectall}\u0026#39;, { force: true }).trigger(\u0026#39;keydown\u0026#39;, { keyCode: 46, which: 46, force: true, }); }); æˆ‘åˆ›å»ºäº†ä¸­å¿ƒçš„ cy.clearConsoleTextareaï¼ŒåŸå› å¦‚ä¸‹ï¼š\nè¿™æ˜¯ä¸€ç§æƒå®œä¹‹è®¡ ğŸ˜Š å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œé˜…è¯» trigger('keydown') è€Œä¸æ˜¯ä½¿ç”¨æ›´ç¬¦åˆä¹ æƒ¯çš„ cy.clear æ˜¯æœ‰ç‚¹å¥‡æ€ªçš„ï¼Œæˆ‘ä¸æƒ³åœ¨æ¯ä¸ªåœ°æ–¹éƒ½ç•™ä¸‹è§£é‡Šçš„æ³¨é‡Šã€‚ è¯¥å‘½ä»¤ç”± 5 è¡Œä»£ç ç»„æˆï¼Œå°†ä½¿æµ‹è¯•ä»£ç å˜å¾—è¿‡é•¿è€Œæ¯«æ— å¿…è¦ã€‚ ä»¥ä¸‹å†…å®¹æ˜¯è½¯æŠ½è±¡çš„ä¸€ä¸ªä¾‹å­ï¼š\nfunction expectSuccessNotification = (title: string) { cy.get(\u0026#39;.notification-success\u0026#39;) .should(\u0026#39;be.visible\u0026#39;) .should(\u0026#39;contain\u0026#39;, title) } æˆ‘å–œæ¬¢å®ƒçš„åŸå› æ˜¯\nå®ƒä¸ä¾èµ–å…¶ä»–æŠ½è±¡ä»£ç ï¼šå¦‚æœæˆ‘çš„æµ‹è¯•åœ¨ expectSuccessNotification('Table created!') å¤±è´¥ï¼Œæˆ‘ä¸å¿…é™·å…¥æ·±å¥¥çš„ä»£ç ä¸­ï¼Œç†è§£ expectSuccessNotification èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆã€‚ å®ƒåªæ¥å—ä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯å¾ˆå¤šé€‰é¡¹ï¼›ä¹Ÿæ²¡æœ‰åŒ…å«é‚£äº›åœ¨ç†è§£ä»£ç æœ€ç»ˆæ‰§è¡Œå†…å®¹æ—¶å˜å¾—å¤æ‚çš„æ¡ä»¶ã€‚ å®ƒä¸“æ³¨äºç‰¹å®šç”¨ä¾‹ã€‚å®ƒä¸è¯•å›¾ä¸€æ¬¡æ€§æ¶µç›–æ‰€æœ‰é€šçŸ¥ç±»å‹ã€å†…å®¹ç­‰ã€‚å…¶ä»–ä¸“æ³¨äºç‰¹å®šç”¨ä¾‹çš„å‡½æ•°ä¼šå¤„ç†ã€‚ å¦‚æœä½ é‡æ„é€šçŸ¥ç³»ç»Ÿï¼Œä½ æœ‰ä¸€ä¸ªä¸­å¿ƒç‚¹è¿›è¡Œé‡æ„ï¼Œä»¥é€‚åº”æ–°çš„é€šçŸ¥ç³»ç»Ÿã€‚ ç›¸åï¼Œè¿™æ˜¯æˆ‘ä¸å¸Œæœ›æ‹¥æœ‰çš„ï¼ˆåœ¨è°ˆè®ºé€šçŸ¥å·¥å…·æ—¶ï¼‰ã€‚\nexport const expectNotification = ( { type, title, message, }: { type: \u0026#39;success\u0026#39; | \u0026#39;error\u0026#39;; title: string; message?: string; }, timeout = 10000 ) =\u0026gt; { const el = cy.get( type === \u0026#39;success\u0026#39; ? \u0026#39;.notification-success\u0026#39; : \u0026#39;.notification-error\u0026#39;, { timeout } ); el.should(\u0026#39;be.visible\u0026#39;); el.should(\u0026#39;contain\u0026#39;, title); if (message) el.should(\u0026#39;contain\u0026#39;, message); }; æˆ‘å¯¹ä¸Šé¢çš„ä¾‹å­ä¸å¤ªå–œæ¬¢ï¼ŒåŸå› æœ‰ä¸¤ç‚¹ï¼š\nå®ƒè¯•å›¾ä¸€æ¬¡æ€§æ¶µç›–å¤ªå¤šç”¨ä¾‹ã€‚ å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œä½ å¿…é¡»å¤„ç†è®©æ•´ä¸ªä½“éªŒå˜æˆå™©æ¢¦çš„å„ç§æ¡ä»¶ã€‚ åœ¨Hasura æ§åˆ¶å° UI ç¼–ç æ¨¡å¼ï¼šæµ‹è¯•æ–‡ç« ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬åœ¨å†…éƒ¨éµå¾ªçš„æ›´å¤šæœ€ä½³å®è·µã€‚\nåŒ¹é…æµ‹è¯•ä»£ç å’Œæµ‹è¯•è¿è¡Œå™¨å‘½ä»¤ Cypress æµ‹è¯•è¿è¡Œå™¨æœ‰åŠ©äºç†è§£åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠæ‰§è¡Œäº†å“ªäº›å‘½ä»¤ï¼Œä½†åœ¨è°ƒè¯•æµ‹è¯•æ—¶ï¼Œå¾ˆéš¾ç«‹å³åœ¨æµ‹è¯•è¿è¡Œå™¨å’Œä»£ç ä¹‹é—´å»ºç«‹å…³è”ã€‚è€Œä¸”ï¼Œæ—¥å¿—æ— æ³•å¸®åŠ©ç†è§£æµ‹è¯•ä»åŠŸèƒ½è§’åº¦æ­£åœ¨åšä»€ä¹ˆï¼ˆä¾‹å¦‚ï¼Œæ—¥å¿—è¯´â€œåœ¨æ–‡æœ¬åŒºåŸŸä¸­é”®å…¥â€ï¼Œä½†æ²¡æœ‰è¯´æ˜â€œåœ¨ç±»å‹é…ç½®æ–‡æœ¬åŒºåŸŸä¸­é”®å…¥â€ï¼‰ã€‚å› æ­¤ï¼ŒæŸ¥æ‰¾å¤±è´¥çš„æ ¹æœ¬åŸå› æ˜¯å›°éš¾çš„ã€‚Cypress ä¼šä¸ºå¤±è´¥çš„æµ‹è¯•è®°å½•è§†é¢‘ï¼Œä½†å¦‚æœé˜…è¯»è€…/è°ƒè¯•è€…ä¸èƒ½åœ¨æ—¥å¿—å’Œæµ‹è¯•åœ¨æ™®é€šè‹±è¯­ä¸­æ‰€åšçš„äº‹æƒ…ä¹‹é—´å»ºç«‹ç›´æ¥å…³è”ï¼Œåˆ™è§†é¢‘å°±æ¯«æ— ç”¨å¤„ã€‚\nè¯·çœ‹ä¸‹é¢çš„å†…å®¹ æˆ‘æ·»åŠ äº†ä¸€ä¸ªæ—¥å¿—ï¼ŒæŠ¥å‘Šæµ‹è¯•æ­£åœ¨è¿›è¡Œçš„æ“ä½œï¼Œä½¿æµ‹è¯•ä»£ç ä¸æµ‹è¯•è¿è¡Œç¨‹åºä¹‹é—´èƒ½å¤Ÿç›´æ¥å¯¹åº”ã€‚ (cy.log('**--- Type in the Webhook Handler field**');).\nè¯·æ³¨æ„ï¼Œä½ å¯ä»¥å‘ \u0026lsquo;cy.log\u0026rsquo; ä¼ é€’æ›´å¤šå‚æ•°ï¼Œè¿™äº›å‚æ•°å°†åœ¨å•å‡»è®°å½•çš„å‘½ä»¤æ—¶ç›´æ¥æ˜¾ç¤ºåœ¨å¼€å‘å·¥å…·çš„æ§åˆ¶å°ä¸­ã€‚\nStorybook å’Œ Playwright å·²ç»å¼•å…¥äº†stepå®ç”¨å·¥å…·çš„æ¦‚å¿µï¼Œå¯ä»¥ç”¨è‹±è¯­è§£é‡Šæµ‹è¯•ä¸­çš„æ­¥éª¤ã€‚Cypress æ²¡æœ‰ç›¸åŒçš„é€‰é¡¹ï¼Œå› æ­¤æˆ‘è®¤ä¸ºæˆ‘æå‡ºçš„cy.logæ˜¯å¾ˆæœ‰ä»·å€¼çš„ã€‚\nè¿™é‡Œéœ€è¦æ³¨æ„ï¼šä¸è¦å°†cy.logé“¾åœ¨ä¸€èµ·ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªæŸ¥è¯¢å‘½ä»¤ï¼Œä¸ä¼šå¯¹é“¾è¿›è¡Œé‡è¯•ã€‚\næˆªè‡³ Cypress V12 ç‰ˆæœ¬ï¼Œcy.logåœ¨å‡½æ•°çº§åˆ«ä¸è¿›è¡Œé‡è¯•ã€‚\nä¾‹å¦‚ï¼š\ncy.log(\u0026#39;foo\u0026#39;).get(\u0026#39;bar\u0026#39;).should(\u0026#39;baz\u0026#39;) // does not retry cy.get(\u0026#39;bar\u0026#39;).should(\u0026#39;baz\u0026#39;) // retries the whole chain until the assertion passes (you have 10 sec timeout set) å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿ Cypress æ²¡æœ‰ stepï¼ŒFilip Hric çš„ cypress-plugin-steps ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ›¿ä»£é€‰æ‹©ã€‚\nä½¿ç”¨æ¸…æ™°çš„é€‰æ‹©å™¨ çœ‹ä¸€ä¸‹è¿™æ®µä»£ç \ncy.get(\u0026#39;textarea\u0026#39;) .eq(0) .type(`{enter}{uparrow}${statements.createMutationGQLQuery}`, { force: true, }); cy.get('textarea').eq(0) æ˜¯ä»€ä¹ˆï¼Ÿåœ¨æ²¡æœ‰æ›´å¥½çš„é€‰æ‹©å™¨çš„æƒ…å†µä¸‹ï¼Œæˆ‘å»ºè®®å°†å®ƒä»¬æ”¾åœ¨ Cypress çš„åˆ«åä¸‹ï¼Œæ¯”å¦‚\n// Assign an alias to the most unclear selectors for future references cy.get(\u0026#39;textarea\u0026#39;).eq(0).as(\u0026#39;actionDefinitionTextarea\u0026#39;); cy.get(\u0026#39;textarea\u0026#39;).eq(1).as(\u0026#39;typeConfigurationTextarea\u0026#39;); ç„¶åé€šè¿‡è¿™ç§æ–¹å¼æ¥å¼•ç”¨å®ƒä»¬\ncy.get(\u0026#39;@actionDefinitionTextarea\u0026#39;).clearConsoleTextarea().type(/* ... */); ä»¥æé«˜è¯»è€…çš„ä½“éªŒã€‚\nå‡å°‘ data-testid å±æ€§ æˆ‘ä¸æƒ³è®¨è®ºæµ‹è¯•æœ¬èº«åŠå…¶å¯¹æµ‹è¯•ç»“æœå¯ä¿¡åº¦çš„ä»·å€¼ï¼Œåªæƒ³è°ˆè°ˆ data-testid å±æ€§åœ¨è°ƒè¯•é˜¶æ®µçš„å½±å“ã€‚\nå¦‚æœæ— æ³•ä»é¡µé¢ä¸­æ£€ç´¢å¸¦æœ‰ data-testid å±æ€§çš„å…ƒç´ ï¼Œå¯èƒ½çš„é—®é¢˜æœ‰ï¼š\nå…ƒç´ ä¸å­˜åœ¨ã€‚ å…ƒç´ å­˜åœ¨ï¼Œä½†å®ƒæ²¡æœ‰è¯¥å±æ€§ã€‚ å…ƒç´ å­˜åœ¨ï¼Œå…·æœ‰è¯¥å±æ€§ï¼Œä½†å€¼ä¸ç¬¦åˆé¢„æœŸã€‚ ä¸Šè¿°æ‰€æœ‰é—®é¢˜éƒ½ä¼šå¯¼è‡´å¼€å‘äººå‘˜é‡æ–°å¯åŠ¨æµ‹è¯•ã€æ£€æŸ¥å…ƒç´ ã€æŸ¥æ‰¾ä¸æµ‹è¯•ç›¸å…³çš„å±æ€§ç­‰ã€‚ç›¸åï¼Œå¦‚æœæµ‹è¯•åŸºäºæ–‡æœ¬å†…å®¹ï¼Œä»…é€šè¿‡æˆªå›¾å°±è¶³ä»¥äº†è§£æµ‹è¯•æœç´¢çš„æ–‡æœ¬æ˜¯å¦ä¸å­˜åœ¨æˆ–é”™è¯¯ã€‚\næ­¤å¤–ï¼Œå¯¹äºé‚£äº›å¿…é¡»å¤„ç† data-testid çš„å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œè¿˜æœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼š\nåœ¨é‡æ„æœŸé—´å¿…é¡»ç»´æŠ¤ä¸æµ‹è¯•ç›¸å…³çš„å±æ€§ï¼Œä½†åœ¨æœ‰æ•°ç™¾ä¸ªå±æ€§æ—¶å¹¶ä¸å®¹æ˜“ã€‚ å¦‚æœæµ‹è¯•ç›¸å…³çš„å±æ€§åœ¨é¡µé¢ä¸Šæ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ç„¶è€Œï¼Œå½“ä½ æœ‰æ•°ç™¾ä¸ªè¿™æ ·çš„å±æ€§æ—¶ï¼Œå¾ˆéš¾ä¿è¯å®ƒä»¬æ˜¯å”¯ä¸€çš„ã€‚ æˆ‘çš„å»ºè®®æ˜¯ä»…åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ data-testid å±æ€§ï¼š\nç”¨äºèŠ‚ï¼Œè€Œä¸æ˜¯å…ƒç´ ï¼ˆä¾‹å¦‚ Headerã€Footer ç­‰ï¼‰ï¼Œä»¥å‡å°åŸºäºæ–‡æœ¬æœç´¢çš„èŒƒå›´ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š cy.get(\u0026#39;[data-test=\u0026#34;Actions list\u0026#34;]\u0026#39;).within(() =\u0026gt; { // \u0026lt;-- reduce the scope cy.contains(\u0026#39;login\u0026#39;) // \u0026lt;-- the \u0026#34;login\u0026#34; text could exist more times in the page }) éæ–‡æœ¬å…ƒç´ ï¼Œå¦‚å›¾æ ‡ã€å›¾ç‰‡ç­‰ã€‚ æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼šæˆ‘å»ºè®®ä¸ºå®ƒä»¬èµ‹äºˆç”¨æˆ·å‹å¥½çš„å€¼ï¼Œè€Œä¸æ˜¯é‡‡ç”¨ç¨‹åºå‘˜çš„å‘½åé£æ ¼ï¼ˆä¾‹å¦‚ï¼Œâ€œæ“ä½œåˆ—è¡¨â€è€Œä¸æ˜¯â€œactionsListâ€ï¼‰ï¼Œå°¤å…¶æ˜¯å½“è¯¥éƒ¨åˆ†æ˜¾ç¤ºç›¸åŒæ–‡æœ¬æ—¶ã€‚è¿™æ ·å¯ä»¥ç›´æ¥å…³è”æµ‹è¯•ä»£ç ã€Cypress çš„æµ‹è¯•è¿è¡Œå™¨å’Œé¡µé¢çš„æ–‡æœ¬å†…å®¹ã€‚\nå°†ç›¸å…³æ“ä½œåˆ†ç»„ é€šå¸¸æ¥è¯´ï¼Œé˜…è¯»ä¸€ç³»åˆ—å¹³é¢çš„äº¤äº’å¹¶ä¸èƒ½å¸®åŠ©ç†è§£æµ‹è¯•è¿è¡Œçš„é¡µé¢ç»“æ„ã€‚\nä¾‹å¦‚ï¼š\nè·å– 1 å¹¶ç‚¹å‡» è·å– 2 å¹¶ç‚¹å‡» è·å– 3 å¹¶ç‚¹å‡» è·å– 4 å¹¶ç‚¹å‡» è·å– 5 å¹¶ç‚¹å‡» è·å– 6 å¹¶ç‚¹å‡» è·å– 7 å¹¶ç‚¹å‡» è·å– 8 å¹¶ç‚¹å‡» ç„¶è€Œï¼Œå°†åˆ—è¡¨å±•å¼€å¯ä»¥å¸®åŠ©è¯»è€…æ„å»ºä¸€ä¸ªæœ‰å…³æ‰€æ¶‰åŠéƒ¨åˆ†ä½ç½®çš„å¿ƒç†æ¨¡å‹\nåœ¨å— 1 å†… è·å– 1 å¹¶ç‚¹å‡» è·å– 2 å¹¶ç‚¹å‡» è·å– 3 å¹¶ç‚¹å‡» åœ¨å— 2 å†… è·å– 4 å¹¶ç‚¹å‡» è·å– 5 å¹¶ç‚¹å‡» è·å– 6 å¹¶ç‚¹å‡» è·å– 7 å¹¶ç‚¹å‡» è·å– 8 å¹¶ç‚¹å‡» å†å¼ºè°ƒä¸€ä¸‹ï¼šStorybook å’Œ Playwright å·²ç»å¼•å…¥äº†â€œæ­¥éª¤ï¼ˆstepï¼‰â€å®ç”¨ç¨‹åºçš„æ¦‚å¿µï¼Œè¯¥å®ç”¨ç¨‹åºå¯ä»¥å°†æ“ä½œè¿›è¡Œåˆ†ç»„ï¼Œè€Œä¸Šè¿°å»ºè®®åœ¨ Cypress ä¸­éå¸¸å®ç”¨ã€‚\nç›¸å…³ç« èŠ‚ ğŸ”— ä»æ™¦æ¶©éš¾æ‡‚çš„ React ç»„ä»¶æµ‹è¯•åˆ°ç®€å•ã€æ˜“è¯»çš„ç‰ˆæœ¬ ç”± NoriSte åœ¨ dev.toè¿›è¡Œå‘è¡¨ã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease-debugging-the-tests/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥ç ”ç©¶ UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹ä¸‰ï¼šå°†æµ‹è¯•å·¥å…·ä½œä¸ºä¸»è¦å¼€å‘å·¥å…·ï¼Œå¹¶ä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•ã€‚æ–‡ç« å¼ºè°ƒå°†æµ‹è¯•å·¥å…·çº³å…¥ä¸»è¦å¼€å‘è¿‡ç¨‹ï¼ŒåŠ å¼ºæµ‹è¯•ä¸å¼€å‘çš„ååŒï¼Œæé«˜ä»£ç è´¨é‡ã€‚å¦å¤–ï¼Œåšæ–‡å»ºè®®ä¿æŒæµ‹è¯•è„šæœ¬çš„ä½æŠ½è±¡åº¦ï¼Œä»¥ä¾¿æ›´å®¹æ˜“è°ƒè¯•å’Œç†è§£ã€‚è¿™ç§åšæ³•æœ‰åŠ©äºåŠ é€Ÿé—®é¢˜æ’æŸ¥å’Œæµ‹è¯•è„šæœ¬çš„ç»´æŠ¤ï¼Œä»è€Œæé«˜ UI æµ‹è¯•çš„æ•ˆç‡å’Œå¯é æ€§ã€‚é€šè¿‡é‡‡ç”¨è¿™äº›é€šç”¨æœ€ä½³å®è·µï¼Œè¯»è€…å°†èƒ½å¤Ÿæ›´å¥½åœ°æ•´åˆ UI æµ‹è¯•åˆ°å¼€å‘æµç¨‹ä¸­ï¼Œå®ç°æ›´é«˜æ•ˆçš„è½¯ä»¶å¼€å‘ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆä¸‰ï¼‰ï¼šå°†ä½ çš„æµ‹è¯•å·¥å…·ç”¨ä½œä¸»è¦çš„å¼€å‘å·¥å…·å’Œä¿æŒä½æŠ½è±¡åº¦ä»¥ä¾¿äºè°ƒè¯•æµ‹è¯•"},{"content":"å¦‚ä½•å¿«é€Ÿç¼–å†™ K6 æ€§èƒ½æµ‹è¯•è„šæœ¬ æˆ‘ä»¬é™¤äº†å¯ä»¥ä½¿ç”¨ JavaScript ç¼–å†™ K6 æ€§èƒ½æµ‹è¯•è„šæœ¬å¤–ï¼ŒK6 è¿˜æä¾›äº†å¤šç§å¿«æ·çš„æ–¹å¼æ¥ç¼–å†™æ€§èƒ½æµ‹è¯•è„šæœ¬ã€‚\n1.ä½¿ç”¨ K6 æä¾›çš„ Test builder æµ‹è¯•ç”Ÿæˆå™¨å·¥å…·æ¥ç¼–å†™è„šæœ¬ 2.ä½¿ç”¨ K6 Recorder å½•åˆ¶å™¨å½•åˆ¶è„šæœ¬ 3.ä½¿ç”¨ æµè§ˆå™¨å¼€å‘è€…å·¥å…·è·å– HAR æ–‡ä»¶åä½¿ç”¨ har-to-k6 å·¥å…·å°† HAR æ–‡ä»¶è½¬æ¢ä¸º K6 è„šæœ¬ ä¸‹é¢å°†åˆ†åˆ«ä»‹ç»è¿™ä¸‰ç§æ–¹å¼ã€‚\nä½¿ç”¨ K6 æä¾›çš„ Test builder æµ‹è¯•ç”Ÿæˆå™¨å·¥å…·æ¥ç¼–å†™è„šæœ¬ k6 çš„ Test builder æµ‹è¯•ç”Ÿæˆå™¨æä¾›äº†ä¸€ä¸ªå›¾å½¢ç•Œé¢ï¼Œå¯æ ¹æ®æ‚¨çš„è¾“å…¥ç”Ÿæˆ k6 æµ‹è¯•è„šæœ¬ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥å¤åˆ¶æµ‹è¯•è„šæœ¬å¹¶ä» CLI è¿è¡Œæµ‹è¯•ã€‚\nTest builder æµ‹è¯•ç”Ÿæˆå™¨ç›®å‰è¿˜æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„åŠŸèƒ½ï¼Œå¯èƒ½ä¼šåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å‘ç”Ÿå˜åŒ–ã€‚å¤§å®¶å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://k6.io/docs/using-k6/test-builder/è·å–æ›´å¤šä¿¡æ¯\nå®‰è£… Test builder æµ‹è¯•ç”Ÿæˆå™¨ Test builder ä¸éœ€è¦å®‰è£…ï¼Œå®ƒæ˜¯ Grafana Cloud k6 æä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚\néœ€è¦æ³¨å†Œä¸€ä¸ª Grafana Cloud k6 è´¦å·ï¼Œç„¶åç™»å½• Grafana Cloudã€‚\nå¦‚ä½•è¿›å…¥ Test builder æµ‹è¯•ç”Ÿæˆå™¨ç•Œé¢ï¼š\nç™»å½•è¿›å…¥ Grafana Cloud é¦–é¡µ ä¾æ¬¡ç‚¹å‡»å·¦ä¾§èœå•æ ä¸Šçš„ Testing \u0026amp; synthetics\u0026mdash;\u0026gt;Performance\u0026mdash;\u0026gt;Projects ç„¶åé€‰æ‹© default project æˆ–è€…æ–°å»ºä¸€ä¸ª projectï¼Œè¿›å…¥åˆ°é¡¹ç›®çš„è¯¦æƒ…é¡µé¢ ç‚¹å‡»é¡µé¢ä¸Šçš„ Start testing æŒ‰é’®ï¼Œç„¶åå†é€‰æ‹©é¡µé¢ä¸‹çš„ Test builderï¼Œè¿›å…¥åˆ° Test builder æµ‹è¯•ç”Ÿæˆå™¨ç•Œé¢ æé†’ï¼šç”±äº Test builder æµ‹è¯•ç”Ÿæˆå™¨æ˜¯ Grafana Cloud ä¸Šç™»å½•è¿›è¡Œä½¿ç”¨ï¼Œå¯èƒ½ Grafana Cloud å­˜å‚¨ä¸€äº›æ•æ„Ÿæ•°æ®ï¼Œæ‰€ä»¥å»ºè®®å¤§å®¶ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Test builder æµ‹è¯•ç”Ÿæˆå™¨ã€‚\nå¦‚ä½•ä½¿ç”¨ Test builder æµ‹è¯•ç”Ÿæˆå™¨ 1.åœ¨ Test builder æµ‹è¯•ç”Ÿæˆå™¨ç•Œé¢ï¼Œç‚¹å‡» Scenario_1 ä¸‹çš„ Options æŒ‰é’®è¿›å…¥åˆ°é…ç½®é¡µé¢ï¼Œé…ç½®æµ‹è¯•åœºæ™¯çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°åœºæ™¯é…ç½®é¡µé¢æä¾›äº†å¤šç§é…ç½®é€‰é¡¹ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œé…ç½®åœºæ™¯åç§°ï¼Œæ‰§è¡Œå™¨ç±»å‹å’Œä¸åŒçš„ UV é…ç½®ã€‚\n2.åœ¨ Test builder æµ‹è¯•ç”Ÿæˆå™¨ç•Œé¢ï¼Œç‚¹å‡» Scenario_1 ä¸‹çš„ Requests æŒ‰é’®è¿›å…¥åˆ° Requests ç®¡ç†é¡µé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3.ç‚¹å‡»é¡µé¢ä¸‹çš„ Request æŒ‰é’®è¿›å…¥æ·»åŠ è¯·æ±‚é¡µé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 4.åœ¨æ·»åŠ è¯·æ±‚é¡µé¢ï¼Œè¾“å…¥è¯·æ±‚çš„ URL åœ°å€ï¼Œå†æ ¹æ®å®é™…æƒ…å†µæ·»åŠ è¯·æ±‚çš„ headers æˆ–è¯·æ±‚çš„ body æˆ–æ£€æŸ¥ç‚¹ç­‰å‚æ•°ï¼Œç„¶åç‚¹å‡»é¡µé¢ä¸Šçš„ Create æŒ‰é’®ï¼Œå®Œæˆæ€§èƒ½åœºæ™¯çš„é…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è·å– Test builder æµ‹è¯•ç”Ÿæˆå™¨ç”Ÿæˆçš„è„šæœ¬ åœ¨ Test builder æµ‹è¯•ç”Ÿæˆå™¨ç•Œé¢ï¼Œç‚¹å‡»é¡µé¢ä¸Šçš„ Script æŒ‰é’®ï¼Œé¡µé¢å°±ä¼šå±•ç¤ºå‡º Test builder æµ‹è¯•ç”Ÿæˆå™¨ç”Ÿæˆçš„è„šæœ¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¯ä»¥çœ‹åˆ° Test builder æµ‹è¯•ç”Ÿæˆå™¨ç”Ÿæˆçš„è„šæœ¬ï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ K6 æµ‹è¯•è„šæœ¬ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶åˆ°æœ¬åœ°ï¼Œç„¶åä½¿ç”¨ k6 è¿è¡Œè¯¥è„šæœ¬ã€‚\nè¿è¡Œ Test builder æµ‹è¯•ç”Ÿæˆå™¨ç”Ÿæˆçš„è„šæœ¬ åœ¨ Test builder æµ‹è¯•ç”Ÿæˆå™¨ç•Œé¢ï¼Œç‚¹å‡»é¡µé¢ä¸Šçš„ Run Test æŒ‰é’®ï¼Œé¡µé¢å°±ä¼šå±•ç¤ºå‡º Test builder æµ‹è¯•ç”Ÿæˆå™¨ç”Ÿæˆçš„è„šæœ¬çš„è¿è¡Œç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¯ä»¥çœ‹åˆ° Test builder æµ‹è¯•ç”Ÿæˆå™¨ç”Ÿæˆçš„è„šæœ¬è¿è¡Œçš„å¾ˆè¯¦ç»†çš„æµ‹è¯•ç»“æœä¿¡æ¯ã€‚\nå…¶ä»– Test builder æµ‹è¯•ç”Ÿæˆå™¨çš„åŠŸèƒ½ ä¹Ÿæ”¯æŒå¯¼å…¥ HAR æ–‡ä»¶ç”Ÿæˆæµ‹è¯•è„šæœ¬ ä¹Ÿæ”¯æŒå¤šä¸ª scenario åœºæ™¯çš„é…ç½®å’Œä¸€ä¸ª scenario åœºæ™¯çš„å¤šä¸ªè¯·æ±‚çš„é…ç½® æ›´å¤šå…³äº Test builder æµ‹è¯•ç”Ÿæˆå™¨çš„å†…å®¹ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://grafana.com/docs/grafana-cloud/k6/author-run/test-builder/\nä½¿ç”¨ K6 Recorder å½•åˆ¶å™¨å½•åˆ¶è„šæœ¬ K6 Recorder å½•åˆ¶å™¨æ˜¯ K6 æä¾›çš„ä¸€ä¸ªæµè§ˆå™¨æ‰©å±•ç¨‹åºï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­å½•åˆ¶ç”¨æˆ·ä¸ Web åº”ç”¨ç¨‹åºçš„äº¤äº’ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º k6 æµ‹è¯•è„šæœ¬ã€‚\nå®‰è£… K6 Recorder å½•åˆ¶å™¨ K6 Recorder å½•åˆ¶å™¨æ˜¯ä¸€ä¸ªæµè§ˆå™¨æ‰©å±•ç¨‹åºï¼Œå¯ä»¥åœ¨ Chrome æˆ– Firefox ä¸­ä½¿ç”¨ã€‚æ‚¨å¯ä»¥ä» Chrome Web Store æˆ– Firefox Add-ons é¡µé¢å®‰è£…å®ƒã€‚\nChrome Web Store å®‰è£…åœ°å€ï¼šhttps://chrome.google.com/webstore/detail/grafana-k6-browser-record/fbanjfonbcedhifbgikmjelkkckhhidl\nFirefox Add-ons å®‰è£…åœ°å€ï¼šhttps://addons.mozilla.org/en-US/firefox/addon/grafana-k6-browser-recorder/\nå®‰è£…å®Œæˆåï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ K6 Recorder å½•åˆ¶å™¨äº†ã€‚\nå¦‚ä½•ä½¿ç”¨ K6 Recorder å½•åˆ¶å™¨ åœ¨æµè§ˆå™¨ä¸Šç‚¹å‡»æ‰“å¼€ k6 Recorder å½•åˆ¶å™¨æ‰©å±•ã€‚ é€‰æ‹©ä¿å­˜è‡ªåŠ¨ç”Ÿæˆçš„è„šæœ¬çš„ä½ç½®ã€‚ è¦å°†å…¶ä¿å­˜åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šï¼Œè¯·é€‰æ‹©\u0026quot;æˆ‘ä¸æƒ³åœ¨äº‘ä¸­ä¿å­˜æµ‹è¯•\u0026quot;(åé¢çš„ä¾‹å­æˆ‘é€‰æ‹©çš„è¿™ä¸ªé€‰é¡¹)ã€‚ è¦å°†å…¶ä¿å­˜åˆ°ä»»ä½• Grafana Cloud k6 é¡¹ç›®ä¸­ï¼Œè¯·é€‰æ‹©â€œç™»å½•â€ã€‚ é€‰æ‹©ä¿å­˜è„šæœ¬ä½ç½®åï¼Œåœ¨å½“å‰æµè§ˆå™¨é€‰é¡¹å¡è¾“å…¥æµ‹è¯•ç½‘ç«™åœ°å€ï¼Œç‚¹å‡»é€‰æ‹©å¼€å§‹å½•åˆ¶æŒ‰é’®ä»¥å¼€å§‹å½•åˆ¶å½“å‰æµè§ˆå™¨é€‰é¡¹å¡ã€‚ å›¾ä¸­æˆ‘æ‰“å¼€äº†è°·æ­Œçš„é¦–é¡µå¹¶ç‚¹å‡»äº†æœç´¢æ¡†ï¼Œè¾“å…¥äº† 123ï¼Œç„¶åç‚¹å‡»äº†æœç´¢æŒ‰é’®ï¼Œ\nç‚¹å‡»äº† k6 Recorder å½•åˆ¶å™¨çš„åœæ­¢å½•åˆ¶æŒ‰é’®åœæ­¢å½•åˆ¶ã€‚ å°†å½•åˆ¶çš„æ–‡ä»¶å–åä¿å­˜åœ¨æœ¬åœ°ï¼ˆæˆ‘è¿™é‡Œå–åä¸º record-demo.harï¼‰ã€‚ ä½¿ç”¨ har-to-k6 å·¥å…·å°† HAR æ–‡ä»¶è½¬æ¢ä¸º K6 è„šæœ¬ã€‚ har-to-k6 å·¥å…·æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å°† HAR æ–‡ä»¶è½¬æ¢ä¸º k6 è„šæœ¬ã€‚éœ€è¦å…ˆé€šè¿‡ npm install -g har-to-k6å®‰è£… har-to-k6 å·¥å…·ï¼Œç„¶åé€šè¿‡ har-to-k6 record-demo.har -O record-demo.jså‘½ä»¤å°† HAR æ–‡ä»¶è½¬æ¢ä¸º K6 è„šæœ¬ã€‚\nè½¬æ¢åçš„ K6 è„šæœ¬éƒ¨åˆ†æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å¯¹è½¬æ¢åçš„ K6 è„šæœ¬è¿›è¡Œä¿®æ”¹ï¼Œç„¶åä½¿ç”¨ k6 è¿è¡Œè¯¥è„šæœ¬ã€‚ ä½¿ç”¨ k6 è¿è¡Œè½¬æ¢åçš„ K6 è„šæœ¬ï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœã€‚ æ›´å¤šå…³äº K6 Recorder å½•åˆ¶å™¨çš„å†…å®¹ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-browser-recorder/\nä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·å’Œ har-to-k6 å·¥å…·ç”Ÿæˆ K6 è„šæœ¬ é™¤äº†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ K6 Recorder å½•åˆ¶å™¨æ¥å½•åˆ¶è„šæœ¬å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è·å–æµ‹è¯•è¯·æ±‚çš„ HAR æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ har-to-k6 å·¥å…·è½¬æ¢ HAR æ–‡ä»¶æ¥ç”Ÿæˆ K6 è„šæœ¬ã€‚\nå¯ä»¥è·å– HAR æ–‡ä»¶çš„æµè§ˆå™¨å’Œå·¥å…· æˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä¸€ä¸ªå·¥å…·æ¥è®°å½• HAR æ–‡ä»¶ã€‚å¸‚é¢ä¸Šçš„å¾ˆå¤šæµè§ˆå™¨å’Œå·¥å…·å¯ä»¥ä»¥ HAR æ ¼å¼å¯¼å‡º HTTP æµé‡ã€‚å¤§å®¶å¸¸ç”¨çš„æ˜¯ï¼š\nChrome æµè§ˆå™¨ Firefox æµè§ˆå™¨ Microsoft Edge æµè§ˆå™¨ Charles ä»£ç†æŠ“åŒ…å·¥å…· (HTTP proxy/recorder) Fiddler ä»£ç†æŠ“åŒ…å·¥å…· (HTTP proxy/recorder) å¦‚ä½•ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è·å– HAR æ–‡ä»¶ ä¸‹é¢æ˜¯ä½¿ç”¨ Chrome æµè§ˆå™¨å¼€å‘è€…å·¥å…·è·å–æµ‹è¯•è¯·æ±‚ HAR æ–‡ä»¶ä¾‹å­ï¼š\nåœ¨ Chrome ä¸­æ‰“å¼€æ–°çš„éšèº«çª—å£ã€‚ ï¼ˆå¯ä»¥æ’é™¤ç™»å½• cookies ç­‰å¹²æ‰°ä¿¡æ¯ï¼‰ã€‚\næ‰“å¼€ Chrome å¼€å‘è€…å·¥å…·ï¼ˆæŒ‰ F12ï¼‰ã€‚\né€‰æ‹©ç½‘ç»œé€‰é¡¹å¡ Networkã€‚\næ£€æŸ¥å’Œç¡®è®¤å½•éŸ³æŒ‰é’®ï¼ˆåœ†å½¢æŒ‰é’®ï¼‰æ˜¯å¦å·²æ¿€æ´»ï¼ˆçº¢è‰²ï¼‰ã€‚\nå¦‚æœæƒ³è¦è®°å½•å¤šä¸ªè¿ç»­çš„é¡µé¢åŠ è½½ï¼Œè¯·é€‰ä¸­â€œä¿ç•™æ—¥å¿—â€å¤é€‰æ¡†ã€‚ è¾“å…¥æµ‹è¯•ç½‘ç«™çš„ URLï¼ˆå¦‚ https://www.google.com/ï¼‰ï¼Œç„¶åå¼€å§‹æ‰§è¡Œå’Œåç»­æ¨¡æ‹Ÿç”¨æˆ·æ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚è¾“å…¥ 123 è¿›è¡Œæœç´¢ï¼‰ã€‚\nå®Œæˆåï¼Œåœ¨ Chrome å¼€å‘äººå‘˜å·¥å…·ä¸­ï¼Œå³é”®å•å‡» URL å¹¶é€‰æ‹©â€œå°†å†…å®¹å¦å­˜ä¸º HARâ€ã€‚ é€‰æ‹©ä¿å­˜ HAR æ–‡ä»¶çš„ä½ç½®å¹¶é‡å‘½åï¼ˆå¦‚ har-demoï¼‰ï¼Œç„¶åç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå®Œæˆ HAR æ–‡ä»¶çš„ä¿å­˜ã€‚\nä½¿ç”¨ har-to-k6 è¿›è¡Œè½¬æ¢ HAR æ–‡ä»¶ å®‰è£… har-to-k6 å·¥å…· é€šè¿‡ npm install -g har-to-k6å‘½ä»¤å®‰è£… har-to-k6 å·¥å…·ã€‚ ä½¿ç”¨ har-to-k6 å·¥å…·å°† HAR æ–‡ä»¶è½¬æ¢ä¸º K6 è„šæœ¬ é€šè¿‡ har-to-k6 har-demo.har -O har-demo.jså‘½ä»¤å°† HAR æ–‡ä»¶è½¬æ¢ä¸º K6 è„šæœ¬ã€‚ è½¬æ¢åçš„ K6 è„šæœ¬éƒ¨åˆ†æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å¯¹è½¬æ¢åçš„ K6 è„šæœ¬è¿›è¡Œä¿®æ”¹ï¼Œç„¶åä½¿ç”¨ k6 è¿è¡Œè¯¥è„šæœ¬ã€‚ ä½¿ç”¨ k6 è¿è¡Œè½¬æ¢åçš„ K6 è„šæœ¬ï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœã€‚ æ›´å¤šå…³äº HAR æ–‡ä»¶çš„å†…å®¹ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-har-converter/\nå‚è€ƒæ–‡æ¡£ K6 æ–‡æ¡£ï¼šhttps://k6.io/docs/ k6 å®˜æ–¹ç½‘ç«™ï¼šhttps://k6.io/ K6 æ€§èƒ½æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/K6-Performance-Test-starter/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥ä»‹ç»äº†åœ¨è¿›è¡Œ K6 æ€§èƒ½æµ‹è¯•æ—¶ï¼Œé™¤äº†ä¼ ç»Ÿçš„ JavaScript ç¼–å†™è„šæœ¬æ–¹å¼å¤–ï¼Œè¿˜ä»‹ç»äº† K6 æä¾›çš„å¤šç§å¿«æ·æ–¹å¼ã€‚é¦–å…ˆï¼Œé€šè¿‡ K6 æä¾›çš„ Test Builder æµ‹è¯•ç”Ÿæˆå™¨å·¥å…·ï¼Œè¯»è€…èƒ½å¤Ÿè½»æ¾å¿«æ·åœ°ç”Ÿæˆæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼Œç®€åŒ–äº†è„šæœ¬ç¼–å†™è¿‡ç¨‹ã€‚å…¶æ¬¡ï¼Œåšæ–‡ä»‹ç»äº†ä½¿ç”¨ K6 Recorder å½•åˆ¶å™¨çš„æ–¹æ³•ï¼Œé€šè¿‡å½•åˆ¶æ“ä½œç”Ÿæˆè„šæœ¬ï¼Œçœå»æ‰‹åŠ¨ç¼–å†™çš„æ­¥éª¤ã€‚æœ€åï¼Œè¯»è€…è¿˜èƒ½äº†è§£åˆ°ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è·å– HAR æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ har-to-k6 å·¥å…·å°†å…¶è½¬æ¢ä¸º K6 è„šæœ¬çš„æŠ€å·§ã€‚é€šè¿‡æœ¬æ–‡ï¼Œè¯»è€…å°†æ›´å…¨é¢åœ°äº†è§£ K6 æ€§èƒ½æµ‹è¯•å·¥å…·çš„çµæ´»æ€§å’Œå¤šæ ·åŒ–çš„è„šæœ¬ç¼–å†™æ–¹å¼ã€‚","title":"K6 æ€§èƒ½æµ‹è¯•æ•™ç¨‹ - è¿›é˜¶ç”¨æ³•ï¼šå¦‚ä½•å¿«é€Ÿç¼–å†™ K6 æ€§èƒ½æµ‹è¯•è„šæœ¬"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µ åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/ui-tests-debugging-best-practices.md\nåœ¨è½¬å‘ Cypress ä¹‹å‰ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨ Puppeteer ç¼–å†™ UI æµ‹è¯•ã€‚ç†è§£æµè§ˆå™¨ä¸­å‘ç”Ÿçš„äº‹æƒ…ã€äº†è§£æ­£åœ¨è¿è¡Œçš„æµ‹è¯•ä»¥åŠè°ƒè¯•æµ‹è¯•éƒ½ä¸æ˜¯ç®€å•çš„ä»»åŠ¡ï¼Œå› æ­¤æˆ‘å¼€å§‹é‡‡å–ä¸€ç³»åˆ—è§£å†³æ–¹æ¡ˆæ¥å¸®åŠ©æˆ‘åº”å¯¹æ•´ä¸ªæµç¨‹ã€‚\nè¯¸å¦‚ Cypress å’Œ TestCafÃ© çš„å·¥å…·å‡ ä¹ä½¿ä¸‹é¢åˆ—å‡ºçš„æœ€ä½³å®è·µå˜å¾—æ— å…³ç´§è¦ï¼Œä½†é™¤éä½ ä¹‹å‰ä½¿ç”¨è¿‡ Selenium æˆ– Puppeteer ç­‰å·¥å…·è¿›è¡Œæµ‹è¯•ï¼Œå¦åˆ™ä½ ä¸ä¼šæ„è¯†åˆ°ä¸“ä¸ºæµ‹è¯•è€Œè®¾è®¡çš„å·¥å…·å¯¹ç®€åŒ–ç”Ÿæ´»æœ‰å¤šä¹ˆé‡è¦ã€‚\nç¬¬é›¶æ­¥æ˜¯ä»¥éæ— å¤´æ¨¡å¼å¯åŠ¨æµè§ˆå™¨ï¼Œç„¶å\u0026hellip;\nåœ¨ console.log ä¸­è®°å½•/æ˜¾ç¤ºæµ‹è¯•çš„æè¿° ç”±äºåœ¨æµè§ˆå™¨å†…éƒ¨æ— æ³•è·å¾—æœ‰å…³æ­£åœ¨è¿è¡Œçš„æµ‹è¯•çš„è§†è§‰åé¦ˆï¼Œè¯·åŠ¡å¿…åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è®°å½•æµ‹è¯•çš„åç§°ã€‚åœ¨æµ‹è¯•é€Ÿåº¦å¾ˆå¿«çš„æƒ…å†µä¸‹ï¼ˆå°‘äº 1 ç§’ï¼‰ï¼Œè¿™å¯èƒ½æ²¡æœ‰å¤ªå¤šç”¨å¤„ï¼Œä½†åœ¨æµ‹è¯•æ—¶é—´è¾ƒé•¿æˆ–åœ¨ä½¿ç”¨ test.skip å’Œ test.only è¿›è¡Œæµ‹è¯•æ—¶ï¼Œè¿™æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå¯ä»¥å¯¹æ­£åœ¨è¿è¡Œçš„æµ‹è¯•è¿›è¡ŒåŒé‡æ£€æŸ¥ã€‚\nåœ¨ Puppeteer ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š\ntest(\u0026#39;Test description\u0026#39;, async () =\u0026gt; { await page.evaluate(() =\u0026gt; console.log(\u0026#39;Test description\u0026#39;)); // ... the test code... }) å¦‚æœä½ éœ€è¦æ›´ä¸ºæ˜¾çœ¼çš„åé¦ˆï¼Œç”šè‡³å¯ä»¥è€ƒè™‘åœ¨é¡µé¢çš„å·¦ä¸Šè§’æ·»åŠ ä¸€ä¸ªå›ºå®šçš„ divï¼Œæ¯ä¸ªæµ‹è¯•éƒ½ä¼šç”¨è‡ªå·±çš„æè¿°å¡«å……\u0026hellip;\nå°†æµè§ˆå™¨çš„ console.log è½¬å‘åˆ° Node.js ä½¿ç”¨ Puppeteer çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼š\npage.on(\u0026#39;console\u0026#39;, msg =\u0026gt; console.log(\u0026#39;BROWSER LOG:\u0026#39;, msg.text())); å…è®¸ä½ åœ¨åŒä¸€ç»ˆç«¯çª—å£ä¸­æŸ¥çœ‹æµ‹è¯•æ—¥å¿—å’Œæµè§ˆå™¨æ—¥å¿—ã€‚ç®€å•è€Œæœ‰æ•ˆã€‚\nå¯åŠ¨æµè§ˆå™¨æ—¶å·²ç»æ‰“å¼€å¼€å‘è€…å·¥å…· å°±åƒåœ¨ç»å…¸çš„å‰ç«¯å¼€å‘ä¸­ä¸€æ ·ï¼Œåœ¨é¡µé¢åŠ è½½å·²ç»å¼€å§‹åå†æ‰“å¼€å¼€å‘è€…å·¥å…·å¯èƒ½ä¼šå¯¼è‡´ä½ é”™è¿‡é‡è¦çš„ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œé€‰é¡¹å¡ä¸­ã€‚åœ¨è°ƒè¯•æµ‹è¯•æ—¶ï¼Œå¯åŠ¨æµè§ˆå™¨æ—¶å·²ç»æ‰“å¼€å¼€å‘è€…å·¥å…·å¯ä»¥èŠ‚çœå®è´µçš„æ—¶é—´å’Œä¿¡æ¯ã€‚\nconst browser = await puppeteer.launch({ headless: false, devtools: true }); å‡ç¼“æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œé€Ÿåº¦ æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·é€Ÿåº¦éå¸¸å¿«ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬èƒ½åœ¨å‡ ç§’é’Ÿå†…è¿è¡Œå¤§é‡æµ‹è¯•ã€‚ç„¶è€Œï¼Œåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªåŠ£åŠ¿ï¼Œå› ä¸ºä½ éœ€è¦ç”¨çœ¼ç›è·Ÿè¸ªé¡µé¢ä¸Šå‘ç”Ÿçš„æƒ…å†µã€‚å‡ç¼“æ¯ä¸ªåŠ¨ä½œå¯èƒ½ä¼šé€‚å¾—å…¶åâ€”â€”å› ä¸ºæ•´ä¸ªæµ‹è¯•å˜å¾—å¾ˆæ…¢â€”â€”ä½†é€šå¸¸è¿™æ˜¯æ‰§è¡Œä¸€äº›å¿«é€Ÿæ£€æŸ¥çš„æœ€ç®€å•æ–¹æ³•ã€‚åœ¨ Puppeteer ä¸­ï¼Œæœ‰ä¸€ä¸ªå…¨å±€è®¾ç½®å¯ä»¥å®ç°è¿™ä¸€ç‚¹ã€‚\nconst browser = await puppeteer.launch({ headless: false, slowMo: 250, // slow down every action by 250ms }); ä¸€äº›åŠ¨ä½œï¼Œæ¯”å¦‚è¾“å…¥ï¼Œå…è®¸ä½ æ·»åŠ æ›´å…·ä½“çš„å»¶è¿Ÿï¼ˆè¿™ä¼šå åŠ åœ¨å…¨å±€ slowMo è®¾ç½®ä¹‹ä¸Šï¼‰\nawait page.type(\u0026#39;.username\u0026#39;, \u0026#39;admin\u0026#39;, {delay: 10}); ä½¿ç”¨è°ƒè¯•å™¨è¯­å¥æš‚åœæµ‹è¯• å¦ä¸€æ–¹é¢ï¼Œå°±åƒåœ¨æ ‡å‡†çš„ Web å¼€å‘ä¸­ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œåœ¨é¡µé¢ä¸Šçš„ä»£ç ä¸­æ·»åŠ ä¸€ä¸ªè°ƒè¯•å™¨è¯­å¥æ¥â€œæš‚åœâ€JavaScript æ‰§è¡Œã€‚è¯·æ³¨æ„ï¼šè¯¥è¯­å¥ä»…åœ¨å·²æ‰“å¼€æ§åˆ¶æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ—¶æœ‰æ•ˆã€‚\nawait page.evaluate(() =\u0026gt; {debugger;}); é€šè¿‡ç‚¹å‡»â€œç»§ç»­æ‰§è¡Œè„šæœ¬â€æˆ–æŒ‰ä¸‹ F8 é”®ï¼ˆè°ƒè¯•å™¨æ˜¯ä¸€ä¸ªâ€œé£è¡Œâ€æ–­ç‚¹ï¼‰ï¼Œå°†æ¢å¤æµ‹è¯•çš„æ‰§è¡Œã€‚\nå»¶é•¿æµ‹è¯•è¶…æ—¶æ—¶é—´ ç±»ä¼¼ Jestã€Jasmine ç­‰çš„æµ‹è¯•è¿è¡Œå™¨éƒ½è®¾æœ‰æµ‹è¯•è¶…æ—¶æ—¶é—´ã€‚è¿™ä¸ªè¶…æ—¶æ—¶é—´çš„ä½œç”¨åœ¨äºï¼Œåœ¨æµ‹è¯•ä¸­å‘ç”Ÿé—®é¢˜å¯¼è‡´æµ‹è¯•æ— æ³•æ­£å¸¸ç»“æŸæ—¶ï¼ŒåŠæ—¶ç»ˆæ­¢æµ‹è¯•ã€‚åœ¨ UI æµ‹è¯•ä¸­ï¼Œè¿™ç§è¡Œä¸ºç›¸å¯¹ç¹çï¼Œå› ä¸ºä½ éœ€è¦åœ¨æµ‹è¯•å¼€å§‹æ—¶æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨æµ‹è¯•ç»“æŸæ—¶å…³é—­æµè§ˆå™¨ã€‚åœ¨æ­£å¸¸çš„æµ‹è¯•ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè®¾å®šè¿‡é«˜çš„è¶…æ—¶æ—¶é—´å¹¶ä¸å®é™…ï¼Œå› ä¸ºä¸€æ—¦æµ‹è¯•å¤±è´¥å°±ä¼šå¯¼è‡´å¤§é‡æ—¶é—´çš„æµªè´¹ï¼Œè€Œè¿‡ä½çš„è¶…æ—¶æ—¶é—´å¯èƒ½åœ¨æµ‹è¯•å®Œæˆä¹‹å‰å°±æå‰â€œæˆªæ–­â€äº†æµ‹è¯•ã€‚\nç›¸åï¼Œä½ éœ€è¦è®¾å®šè¾ƒé•¿çš„è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºä½ ä¸å¸Œæœ›æµ‹è¯•ç»“æŸçš„æ—¶å€™åœ¨ä½ æ£€æŸ¥æµè§ˆå™¨æ—¶å…³é—­å®ƒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è°ƒè¯•å—æ§æµè§ˆå™¨æ—¶ï¼Œè®¾å®šä¸º 10 åˆ†é’Ÿçš„è¶…æ—¶æ—¶é—´å¯èƒ½ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚\nå½“ç„¶ï¼Œä¹Ÿå¯ä»¥\u0026hellip;\né¿å…åœ¨æµ‹è¯•ç»“æŸæ—¶å…³é—­æµè§ˆå™¨ æµ‹è¯•å¼€å§‹æ—¶ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè€Œåœ¨æµ‹è¯•ç»“æŸæ—¶ä¸å…³é—­å®ƒã€‚é¿å…å…³é—­æµè§ˆå™¨å¯è®©ä½ è‡ªç”±åœ°æ£€æŸ¥å‰ç«¯åº”ç”¨ï¼Œè€Œæ— éœ€æ‹…å¿ƒæµ‹è¯•è¶…æ—¶ã€‚è¿™ä»…åœ¨æœ¬åœ°è¿è¡Œæµ‹è¯•æ—¶æœ‰æ•ˆï¼Œä½†åœ¨è¿è¡Œæµ‹è¯•äº CI ç®¡é“ä¹‹å‰ï¼Œå¿…é¡»è¿˜åŸè‡ªåŠ¨å…³é—­ä»¥é¿å…ç”±äºæœªå…³é—­çš„æµè§ˆå™¨å®ä¾‹å¯¼è‡´å†…å­˜ä¸è¶³ã€‚\nä½¿ç”¨æˆªå›¾ åœ¨ä»¥æ— å¤´æ¨¡å¼è¿è¡Œæµ‹è¯•æ—¶ï¼Œè¿™åœ¨æµ‹è¯•ç¨³å®šä¸”ä»…åœ¨å‡ºç°å›å½’æ—¶æ‰å¤±è´¥çš„é˜¶æ®µå°¤å…¶æœ‰å¸®åŠ©ã€‚å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå¾ˆå¤šæ—¶å€™æˆªå›¾èƒ½è®©ä½ äº†è§£ä½ æ­£åœ¨å¼€å‘çš„åŠŸèƒ½æ˜¯å¦‚ä½•å½±å“ä¹‹å‰æ­£å¸¸å·¥ä½œçš„åŠŸèƒ½çš„ã€‚æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æµ‹è¯•å¤±è´¥æ—¶æˆªå›¾ï¼Œå¦åˆ™ï¼Œä½ å¯ä»¥åœ¨ UI æµ‹è¯•ä¸­ç¡®å®šä¸€äº›æ£€æŸ¥ç‚¹ï¼Œå¹¶åœ¨è¿™äº›æ­¥éª¤ä¸­æˆªå›¾ã€‚\né¢‘ç¹ä½¿ç”¨æ–­è¨€ ä¸€ä¸ªç»éªŒæ³•åˆ™ï¼šå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå®ƒå¿…é¡»ç›´æ¥å¸¦ä½ ç†è§£å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œè€Œä¸æ˜¯é‡æ–°å¯åŠ¨æµ‹è¯•å¹¶æ‰‹åŠ¨è°ƒè¯•ã€‚å°è¯•åœ¨ä½ çš„ä»£ç åº“ä¸­æ‰‹åŠ¨å¼•å…¥ä¸€äº›é”™è¯¯ï¼ˆæ”¹å˜è¯·æ±‚æœ‰æ•ˆè½½è·ï¼Œç§»é™¤å…ƒç´ ç­‰ï¼‰ï¼Œå¹¶æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šã€‚é”™è¯¯æ˜¯å¦ä¸ä½ å¼•å…¥çš„é”™è¯¯ç›¸å…³è”ï¼Ÿé˜…è¯»å¤±è´¥æŠ¥å‘Šçš„äººæ˜¯å¦èƒ½å¤Ÿç†è§£éœ€è¦ä¿®å¤ä»€ä¹ˆï¼Ÿ\nä½ éœ€è¦åœ¨æµ‹è¯•ä¸­æ·»åŠ å¾ˆå¤šæ–­è¨€ï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥çš„ï¼å•å…ƒæµ‹è¯•é€šå¸¸åªåŒ…å«ä¸€ä¸ªæ­¥éª¤å’Œä¸€ä¸ªæˆ–ä¸¤ä¸ªæ–­è¨€ï¼Œä½† UI æµ‹è¯•ä¸åŒï¼Œå®ƒä»¬æœ‰å¾ˆå¤šæ­¥éª¤ï¼Œå› æ­¤ä½ éœ€è¦å¾ˆå¤šæ–­è¨€ã€‚å°†å®ƒä»¬è§†ä¸ºä¸€ç³»åˆ—å•å…ƒæµ‹è¯•ï¼Œå…¶ä¸­å‰ä¸€ä¸ªæµ‹è¯•å¯¹ç¬¬äºŒä¸ªæµ‹è¯•çš„åˆ›å»ºæ˜¯å¿…è¦çš„ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nä½¿ç”¨ test.skip å’Œ test.only è¿™æ˜¯æ¯ä¸ªæµ‹è¯•è¿è¡Œå™¨çš„åŸºç¡€ä¹‹ä¸€ï¼Œä½†ä½ å¯èƒ½ä¸çŸ¥é“ï¼šå¦‚æœä½ ä¸ä¹ æƒ¯ä½¿ç”¨ skip å’Œ onlyï¼Œè¯·ä»ç°åœ¨å¼€å§‹å§ï¼å¦åˆ™ï¼Œä½ å°†æµªè´¹å¾ˆå¤šæ—¶é—´ï¼Œå³ä½¿ä½ çš„æµ‹è¯•æ–‡ä»¶åªåŒ…å«ä¸¤ä¸‰ä¸ªæµ‹è¯•ã€‚å§‹ç»ˆä»…è¿è¡Œä½ æ­£åœ¨å·¥ä½œæˆ–éœ€è¦è°ƒè¯•çš„æœ€å°æ•°é‡çš„æµ‹è¯•ï¼\nä¸²è¡Œè¿è¡Œæµ‹è¯• å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Puppeteer ç»“åˆ Jestï¼Œè¯·è®°ä½ Jest æœ‰ä¸€ä¸ªä¸“é—¨çš„ runInBand é€‰é¡¹ï¼Œå®ƒé˜²æ­¢æµ‹è¯•çš„æ‰§è¡Œåœ¨ä½ çš„ CPU æ ¸å¿ƒä¸Šåˆ†æ•£ã€‚å°†æµ‹è¯•å¹¶è¡ŒåŒ–å¯ä»¥åŠ å¿«æ‰§è¡Œé€Ÿåº¦ï¼Œä½†åœ¨ä½ éœ€è¦ç”¨çœ¼ç›è·Ÿè¸ªæµ‹è¯•æ“ä½œæ—¶å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°çƒ¦æ‰°ã€‚runInBand é€‰é¡¹ä½¿æµ‹è¯•ä¸²è¡Œè¿è¡Œã€‚å°†å®ƒä¸ test.skipã€test.only ä»¥åŠ jest-watch-typeahead ç»“åˆä½¿ç”¨å¯ä»¥é¿å…å¾ˆå¤šè°ƒè¯•çš„éº»çƒ¦ã€‚\nä¿æŒæµ‹è¯•ä»£ç ç®€å• å®æ„¿æœ‰äº›é‡å¤ï¼Œä¹Ÿä¸è¦è¿‡åº¦æŠ½è±¡ã€‚åŠªåŠ›è®©æµ‹è¯•ä»£ç ç®€å•æ˜“è¯»ã€‚ä½ è°ƒè¯• UI æµ‹è¯•è¶Šå¤šï¼Œå°±è¶Šèƒ½ä½“ä¼šåˆ°å…¶ä¸­çš„å›°éš¾ã€‚å½“ä½ éœ€è¦ç†è§£åº•å±‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä»¥åŠå“ªä¸€æ­¥ä¸æŒ‰é¢„æœŸå·¥ä½œæ—¶ï¼Œä½ é‚£è¶…åº¦æŠ½è±¡ã€å®Œå…¨ç¬¦åˆ DRY åŸåˆ™ï¼ˆä¸é‡å¤è‡ªå·±ï¼‰çš„æµ‹è¯•ä»£ç å°±ä¼šå˜å¾—ä»¤äººå¤´ç—›ã€‚\næ›´ä¸€èˆ¬è€Œè¨€ï¼Œæµ‹è¯•æ˜¯å°å‹è„šæœ¬ï¼Œå®ƒä»¬å¿…é¡»æ¯”å®ƒä»¬æµ‹è¯•çš„ä»£ç ç®€å•ä¸¤ä¸ªæ•°é‡çº§ï¼Œå°†å…¶è§†ä¸ºä¸€ä¸ªç›Ÿå‹ï¼Œè€Œä¸æ˜¯æ›´å¤æ‚çš„ç¨‹åºã€‚\né€‰æ‹©ä¸“é—¨è®¾è®¡çš„å·¥å…· ä¸Šè¿°æåˆ°çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å®ƒä»¬æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬éƒ½æ˜¯å˜é€šæ–¹æ³•ã€‚è¿™æ˜¯å› ä¸ºæˆ‘åœ¨ç¤ºä¾‹ä¸­ä½¿ç”¨çš„å·¥å…· Puppeteer å¹¶éä¸º UI æµ‹è¯•è€Œåˆ›å»ºçš„ï¼Œè€Œæ˜¯ä¸ºé€šç”¨æµè§ˆå™¨è‡ªåŠ¨åŒ–è€Œè®¾è®¡çš„ï¼Œç„¶åï¼Œé€šè¿‡ä¸€äº›å¤–éƒ¨å·¥å…·çš„å¸®åŠ©ï¼Œå¹¶åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ Puppeteerï¼Œä½¿å…¶å¯ä»¥ç”¨äº UI æµ‹è¯•ã€‚æµ‹è¯• Web åº”ç”¨æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œéœ€è¦ä¸åŒçš„å·¥å…·ï¼Œè€Œä¸ä»…ä»…æ˜¯è‡ªåŠ¨åŒ–æ“ä½œã€‚\nå¦‚æœä½ éœ€è¦ç¼–å†™ UI æµ‹è¯•ï¼Œä½ åº”è¯¥è€ƒè™‘åˆ‡æ¢åˆ° Cypress æˆ– TestCafÃ©ï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¢«è®¾è®¡æˆç®€åŒ–ä½ çš„æµ‹è¯•å·¥ä½œã€‚å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿé€šè¿‡ä¸€ç³»åˆ—å®ç”¨å·¥å…·å’Œé»˜è®¤è¡Œä¸ºï¼Œä»¥åŠä¸€ç³»åˆ—ä¸€æµçš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ä½ èƒ½å¤Ÿç†è§£å¹¶è°ƒè¯•æµè§ˆå™¨ä¸­å‘ç”Ÿçš„æƒ…å†µã€‚è¯·æ³¨æ„ï¼Œæœ¬ç« ä¸­æåˆ°çš„æ‰€æœ‰ Puppeteer æœ€ä½³å®è·µ\u0026hellip; åœ¨ Cypress æˆ– TestCafÃ© ä¸­å®Œå…¨æ— ç”¨ ğŸ˜‰\nä¸€äº› UI æµ‹è¯•é—®é¢˜åŠ Cypress æ–¹æ³• å’Œ å‰ç«¯ç”Ÿäº§åŠ›æå‡ï¼šå°† Cypress ä½œä¸ºä½ çš„ä¸»è¦å¼€å‘æµè§ˆå™¨ è¿™ä¸¤ç« åŒ…æ‹¬äº† Cypress ä¸€æµå·¥å…·çš„æ¦‚è¿°ã€‚\nç”±NoriSte åœ¨ dev.to å’Œ Mediumä¸Šè¿›è¡Œè”åˆå‘è¡¨._\nåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/reaching-ui-state.md\nä¸€æ®µç®€è¦è¯´æ˜ åœ¨ UI åœºæ™¯ä¸­è¦†ç›–ä¸€æ¬¡æ˜¯æœ‰ä»·å€¼çš„ï¼Œè€Œåœ¨å…¶ä»–æµ‹è¯•ä¸­å¤åˆ¶å…¶ä¸­ä»»ä½•éƒ¨åˆ†æä¾›çš„ä»·å€¼å¾ˆå°ï¼›è¿™äº›æµ‹è¯•å¯èƒ½éœ€è¦ç³»ç»Ÿçš„ç›¸å…³çŠ¶æ€ã€‚å‡è®¾åœ¨ä¸€ä¸ªæ–°æµ‹è¯•ä¸­ï¼Œä½ éœ€è¦ä¸€ç§çŠ¶æ€ï¼Œè€Œé‚£ç§çŠ¶æ€ - éƒ¨åˆ†æˆ–å…¨éƒ¨ - ä¸ UI æµ‹è¯•ä¸­çš„æŸäº›éƒ¨åˆ†é‡å¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æŠ€æœ¯ï¼š\nç›´æ¥å¯¼èˆª ç½‘ç»œå­˜æ ¹è®°å½•å’Œæ’­æ”¾ åº”ç”¨ç¨‹åºåŠ¨ä½œ æ•°æ®åº“ç§å­ å…è´£å£°æ˜ï¼šæ•´ä¸ªæŠ€æœ¯åŒ…çš„åº”ç”¨ä»…åœ¨ Cypress ä¸­å¯èƒ½ï¼ˆæ®æˆ‘ä»¬æ‰€çŸ¥ï¼‰ï¼Œå› æ­¤ä»¥ä¸‹ä»£ç ç¤ºä¾‹æ˜¯åœ¨ Cypress ä¸Šä¸‹æ–‡ä¸­ã€‚\nç›´æ¥å¯¼èˆª è¿™æ˜¯æœ€ç®€å•çš„æŠ€æœ¯ï¼Œé€‚ç”¨äºä»»ä½•æ¡†æ¶ã€‚å‡è®¾æµ‹è¯•çš„æ„å›¾ä¸ä½ çš„åº”ç”¨ç¨‹åºä¸­çš„æŸä¸ªé¡µé¢æœ‰å…³ã€‚ä¸å…¶è¿›è¡Œç‚¹å‡»å¯¼èˆªï¼Œç›´æ¥è®¿é—® URLã€‚ä¸€æ—¦åˆ°è¾¾ï¼Œä½ å¯ä»¥ç­‰å¾… UI å…ƒç´ ï¼ˆä»»ä½•æµ‹è¯•æ¡†æ¶ï¼‰æˆ–ç½‘ç»œè°ƒç”¨ï¼ˆä¸€äº›æµ‹è¯•æ¡†æ¶ï¼‰ï¼Œæˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚\n// Test A covers click-navigation to a certain page. // This is Test B, and navigating to that page is the prerequisite step. // assuming baseUrl is set in cypress.json or config file // directly navigate to the page. cy.visit(\u0026#39;/endpoint\u0026#39;); // to ensure stability, wait for network (preferred), ui elements, or both // note: checking the endpoint you are at is entirely optional, only for sanity that you are at the right page cy.url().should(\u0026#39;contain\u0026#39;, \u0026#39;endpoint\u0026#39;); // cy.url().should(\u0026#39;match\u0026#39;, /endpoint/); // there are many, some more complex, ways of doing it // network wait: this is in addition to the sanity url check, and it is more important // because you want the page to \u0026#34;settle\u0026#34; before you start running assertions on it // usually a GET request. Is aliased so we can wait for it. cy.intercept(\u0026#39;some-xhr-call-that-happens-upon-landing\u0026#39;).as(\u0026#39;crutcXHR\u0026#39;); // The default Cypress timeout is 4 seconds. 15 seconds here is arbitrary. // Most pages load faster, but if you need more time then increase the timeout. // The only caveat to increasing timeout is that the tests will take longer to fail, but still run as fast as possible when things work. cy.wait(\u0026#39;@crutchXHR\u0026#39;, {timeout: 15000}); // ui-element wait is straightforward, and may be optional, as well as less stable) cy.get(\u0026#39;element-on-page\u0026#39;).should(\u0026#39;exist\u0026#39;).and(\u0026#39;be.visible\u0026#39;); ç›´æ¥å¯¼èˆªçš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šä¸è¿›è¡Œç‚¹å‡»å¯¼èˆªå¯ä»¥èŠ‚çœæµ‹è¯•æ—¶é—´ï¼Œå¹¶å‡å°‘æµ‹è¯•ç»´æŠ¤çš„å·¥ä½œé‡ã€‚\nç¼ºç‚¹ï¼šè¿™ç§æŠ€æœ¯å¿½ç•¥äº†ç”¨æˆ·é€šè¿‡åº”ç”¨ç¨‹åºçš„ç«¯åˆ°ç«¯ç‚¹å‡»æ–¹å¼ã€‚ç¡®ä¿åœ¨å…¶ä»–æµ‹è¯•ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå·¥ä½œæµç¨‹è¦†ç›–ä¸ç‚¹å‡»å¯¼èˆªç›¸åŒçš„å·¥ä½œæµç¨‹ï¼Œä»¥ç¡®ä¿ç‚¹å‡»å¯¼èˆªåŠŸèƒ½ä¸ä¼šå‡ºç°å›å½’é—®é¢˜ã€‚é€šå¸¸ï¼Œç‚¹å‡»å¯¼èˆªå¯ä»¥æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„æµ‹è¯•ï¼›åœ¨è®¾ç½®å…¶ä»–æµ‹è¯•çš„çŠ¶æ€æ—¶ï¼Œä¸è¦é‡å¤å·²ç»åœ¨å…¶ä»–åœ°æ–¹è¦†ç›–çš„ UI æµ‹è¯•ã€‚æ€è€ƒæ¨¡å¼ç±»ä¼¼äºç™»å½•ï¼›å¦‚æœåœ¨ä¸€ä¸ªæµ‹è¯•ä¸­è¿›è¡Œ UI ç™»å½•ï¼Œåœ¨å…¶ä»–æµ‹è¯•ä¸­å¯ä»¥å®ç°ç¨‹åºåŒ–ç™»å½•ï¼Œè¿™æ—¢å¿«é€Ÿåˆç»æµã€‚\nåº”ç”¨ç¨‹åºæ“ä½œ Cypress ä¸ºä½ æä¾›äº†å¯¹åº”ç”¨ç¨‹åºçš„å®Œå…¨æ§åˆ¶æƒã€‚ä½ å¯ä»¥ç»•è¿‡é¡µé¢å¯¹è±¡çš„æŠ½è±¡å±‚ï¼ˆä¸ä½ çš„åº”ç”¨ç¨‹åºåˆ†ç¦»ï¼‰ï¼Œé€šè¿‡ cy.get() ç›´æ¥è®¿é—® UIï¼Œè¿˜å¯ä»¥è®¿é—® APIã€æ•°æ®åº“ï¼Œç”šè‡³å¯ä»¥è®¿é—®æºä»£ç ã€‚\nåº”ç”¨ç¨‹åºæ“ä½œæ˜¯ä¸€ç§å¿«æ·æ–¹å¼ï¼Œå…è®¸ä½ è®¿é—®å†…éƒ¨å·¥å…·ä»¥èŠ‚çœæ—¶é—´ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­å¯ä»¥æ˜¯ä¸€ä¸ª cy.signup() è‡ªå®šä¹‰å‘½ä»¤ï¼Œè¯¥å‘½ä»¤è¿›å…¥æ³¨å†Œè¡¨å•å¹¶è°ƒç”¨æ³¨å†Œè¡¨å•çš„å›è°ƒï¼Œè€Œä¸æ˜¯å¡«å†™è¡¨å•å¹¶ç‚¹å‡»æ³¨å†ŒæŒ‰é’®ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå¿«é€Ÿç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†åœ¨ Angular åº”ç”¨ç¨‹åºä¸­å¦‚ä½•å…è®¸ Cypress è®¿é—®æºä»£ç ã€‚\n// Angular Component file example /* setup: 1. Identify the component in the DOM; inspect and find the corresponding \u0026lt;app.. tag, 2. Right in the constructor of your component, insert conditional */ constructor( /* ... */ ) { /* if running inside Cypress tests, set the component may need // @ts-ignore initially */ if (window.Cypress) { window.yourComponent = this; } } // at https://github.com/naodeng/ui-testing-best-practices/blob/master/https://github.com/naodeng/ui-testing-best-practices/blob/master/support/app-actions.ts helper file: /** yields window.yourComponent */ export const yourComponent = () =\u0026gt; cy.window().should(\u0026#39;have.property\u0026#39;, \u0026#39;yourComponent\u0026#39;); /** yields the data property on your component */ export const getSomeListData = () =\u0026gt; yourComponent().should(\u0026#39;have.property\u0026#39;, \u0026#39;data\u0026#39;); åœ¨è¿™ä¹‹åï¼Œåœ¨ DevTools ä¸­æŸ¥çœ‹è¯¥ç»„ä»¶å…è®¸çš„å±æ€§ï¼Œæˆ–è€…åœ¨ç»„ä»¶ä»£ç ä¸­æŸ¥çœ‹ä½ å¯ä»¥ä½¿ç”¨ .invoke() è¿›è¡Œçš„å‡½æ•°ã€‚\nå¯ä»¥æŸ¥çœ‹ æ¼”ç¤ºå¹»ç¯ç‰‡ è·å–ä¸€ä¸ªä½¿ç”¨åº”ç”¨ç¨‹åºæ“ä½œè¿›è¡Œè§†è§‰æµ‹è¯•çš„ä»£ç ç¤ºä¾‹ã€‚\nå¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæ“ä½œçš„ç¤ºä¾‹ï¼Œåˆ©ç”¨çŠ¶æ€ï¼Œä½¿ç”¨ Siemens çš„ Building Operator Siemens çš„å»ºç­‘æ§åˆ¶äº§å“ åœ¨ä¸‹é¢çš„çŠ¶æ€å›¾ä¸­æœ‰ 3 ä¸ªçŠ¶æ€ã€‚æˆ‘ä»¬ä»å·¦å³ä¸¤ä¸ªçª—æ ¼éƒ½å­˜åœ¨çš„åœ°æ–¹å¼€å§‹ã€‚å¦‚æœåˆ é™¤å³çª—æ ¼ï¼ˆåˆ é™¤ç‚¹/çº¢è‰²æµï¼‰ï¼Œåˆ™åªå‰©ä¸‹å·¦çª—æ ¼ã€‚å¦‚æœåˆ é™¤å·¦çª—æ ¼ï¼ˆåˆ é™¤è®¾å¤‡ - è“è‰²æµï¼‰ï¼Œä¸¤ä¸ªçª—æ ¼éƒ½æ¶ˆå¤±ï¼Œå¹¶ä¸” UI è¢«é‡å®šå‘ã€‚\nåœ¨æµ‹è¯• UI æ—¶ï¼Œä½ å¯èƒ½é€‰æ‹©åˆ é™¤å³çª—æ ¼ï¼ˆçº¢è‰²æµï¼‰ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªæµ‹è¯•ä¸­ï¼Œä½ å¯èƒ½é€‰æ‹©åˆ é™¤å·¦çª—æ ¼ï¼ˆè“è‰²æµï¼‰ã€‚è¿™é—æ¼äº†é€šè¿‡çŠ¶æ€å›¾çš„æœ€åä¸€æ¡è·¯å¾„ï¼Œå…¶ä¸­å³çª—æ ¼å’Œå·¦çª—æ ¼è¢«é€ä¸€åˆ é™¤ã€‚\næˆ‘ä»¬å·²ç»åœ¨ä¸€ä¸ª UI æµ‹è¯•ä¸­æ¶µç›–äº†åˆ é™¤å³çª—æ ¼ï¼ˆçº¢è‰²è·¯å¾„ï¼‰ã€‚ä¸ºä»€ä¹ˆä¸é¿å…é‡å¤è¿›è¡Œæ­¤æµ‹è¯•ï¼Œåˆ©ç”¨åº”ç”¨ç¨‹åºæ“ä½œï¼Œè·å–æºä»£ç ä¸­çš„åˆ é™¤å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ cy.invoke() è°ƒç”¨å®ƒå‘¢ï¼Ÿ\nit(\u0026#39;Component test: delete right pane and then left\u0026#39;, () =\u0026gt; { /* tests a SEQUENCE not covered with UI tests * tests a COMBINATION of components */ appAction.deleteRightPane(); cy.window().should(\u0026#39;not.have.property\u0026#39;, \u0026#39;rightPaneComponent\u0026#39;); cy.window().should(\u0026#39;have.property\u0026#39;, \u0026#39;leftPaneComponent\u0026#39;); appAction.deleteLeftPane(); cy.window().should(\u0026#39;not.have.property\u0026#39;, \u0026#39;leftPaneComponent\u0026#39;); cy.window().should(\u0026#39;not.have.property\u0026#39;, \u0026#39;rightPaneComponent\u0026#39;); cy.url().should(\u0026#39;match\u0026#39;, redirectRoute); }); åº”ç”¨ç¨‹åºæ“ä½œçš„ä¼˜ç¼ºç‚¹ ä½¿ç”¨åº”ç”¨ç¨‹åºæ“ä½œ/æ‹¥æœ‰ç»„ä»¶è®¿é—®é€Ÿåº¦å¾ˆå¿«ï¼æµ‹è¯•ä¸å¤ªå®¹æ˜“å—åˆ°å˜åŒ–çš„å½±å“ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ˜¯åœ¨è¾ƒä½çº§åˆ«è¿›è¡Œæµ‹è¯•çš„å¥½å¤„ã€‚ç„¶è€Œï¼Œå¯¹äºå·¥ç¨‹å¸ˆè€Œè¨€ï¼Œè¿™å¯èƒ½ä¼šå˜å¾—è®©äººä¸Šç˜¾ï¼Œå¼€å§‹å¿½è§†å¯¹ç”¨æˆ·ç•Œé¢çš„æµ‹è¯•ï¼›ä¼˜åŠ¿å¯èƒ½å˜æˆåŠ£åŠ¿ã€‚\næœ‰ä¸€äº›åå¯¹åº”ç”¨ç¨‹åºçš„è®ºç‚¹ã€‚å¼€å‘äººå‘˜å¯èƒ½è®¤ä¸º Cypress å¯¹æºä»£ç çš„è®¿é—®ä¸ç†æƒ³ã€‚åœ¨ Cypress å…·æœ‰å®˜æ–¹ç»„ä»¶æµ‹è¯•æ”¯æŒä¹‹å‰ï¼Œè¿™æ²¡æœ‰åé©³çš„ç†ç”±ã€‚\nåº”ç”¨ç¨‹åºæ“ä½œçš„çœŸæ­£å¨åŠ›åœ¨äºå°†åº”ç”¨ç¨‹åºæ“ä½œä¸å…¶ä»–æŠ€æœ¯ç»“åˆä½¿ç”¨æ—¶æ˜¾ç°å‡ºæ¥ï¼›ä¸é‡å¤ UI å·¥ä½œæµç¨‹æ¥è®¾ç½®çŠ¶æ€ï¼Œå°†ç»„ä»¶æµ‹è¯•ä¸è§†è§‰æµ‹è¯•ç»“åˆä½¿ç”¨ï¼Œå°†ç»„ä»¶æµ‹è¯•ä¸ç½‘ç»œæ“ä½œç»“åˆä½¿ç”¨ï¼Œè¿™äº›éƒ½æ˜¯è¿™ç§æ–¹æ³•çš„äº®ç‚¹æ‰€åœ¨ã€‚\nç½‘ç»œå­˜æ ¹è®°å½•å’Œå›æ”¾ è¿™æ˜¯ä¸€ç§ä¸ UI é›†æˆæµ‹è¯•å¯†åˆ‡ç›¸å…³çš„é«˜çº§æŠ€æœ¯ã€‚å›é¡¾ UI é›†æˆå‚è€ƒ 1, 2ã€‚\nCypress å…è®¸ä½ å¯¹æ‰€æœ‰ç½‘ç»œæµé‡è¿›è¡Œå­˜æ ¹ã€‚æˆ‘ä»¬å¯ä»¥è®°å½•æ¥è‡ªä¸€ä¸ªç«¯ç‚¹çš„ç½‘ç»œæ•°æ®ï¼Œå¹¶åœ¨ UI æ¯æ¬¡è°ƒç”¨ä»»æ„æœåŠ¡å™¨æ—¶å­˜æ ¹è¯¥å“åº”ã€‚\né¦–å…ˆï¼Œä»å¼€å‘è€…å·¥å…·å¤åˆ¶ç½‘ç»œæ•°æ®åˆ°ä¸€ä¸ª json æ–‡ä»¶ä¸­ã€‚å°†å…¶æ”¾ç½®åœ¨ cypress/fixtures æ–‡ä»¶å¤¹ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹ä¸“ä¸ºæ­¤ç›®çš„è€Œåˆ›å»ºï¼Œå¯¹å®ƒçš„ä»»ä½•å¼•ç”¨éƒ½å°†é»˜è®¤æŒ‡å‘æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ã€‚\n// prerequisite: the data has been copied to a file `cypress/fixtures/agents.json` // this is a shorthand for cy.fixture(). More at https://docs.cypress.io/api/commands/fixture.html#Accessing-Fixture-Data cy.intercept(\u0026#39;some-xhr-call-that-happens-upon-landing\u0026#39;, { fixture: \u0026#39;agents.json\u0026#39;} ).as(\u0026#39;crutcXHR\u0026#39;); // all calls to the network route will be stubbed by the data in agents.json file å¦‚æœæœ‰å¾ˆå¤šç½‘ç»œè¯·æ±‚å‘ç”Ÿæ€ä¹ˆåŠï¼Ÿ æˆ‘ä»¬ä»å“ªé‡Œè·å–æ‰€æœ‰çš„æ¨¡æ‹Ÿæ•°æ®ï¼Ÿæˆ‘ä»¬ä¸æƒ³æ‰‹åŠ¨å¤åˆ¶å’Œä¿å­˜å®ƒä»¬ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨æµ‹è¯•è¿è¡Œæ—¶è®°å½•å®ƒä»¬ï¼Œä»¥ä¾¿ä¸çœŸå®çš„ API è¿›è¡Œæ¯”å¯¹ã€‚\nè‡³å°‘æœ‰ä¸¤ä¸ª Cypress æ’ä»¶å¯ä»¥ç”¨äºè¿™ä¸ªç›®çš„ 1 å’Œ 2ã€‚\nå¦‚æœè¿™äº›æ’ä»¶ä¸é€‚ç”¨äºä½ ï¼Œä½ å¯ä»¥è½»æ¾ä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°åˆ›å»ºè‡ªå·±çš„è®°å½•å’Œå›æ”¾å·¥å…·ã€‚\nfunction stubRecorder(pathToJson) { const xhrData = []; // an empty array to hold the data cy.server({ // if recording, save the response data in the array onResponse: (response) =\u0026gt; { const url = response.url; const method = response.method; const data = response.response.body; // We push a new entry into the xhrData array xhrData.push({ url, method, data }); } }); // cy.intercept() specification below is used as a selector for the data you want to record. // In this example, all GET requests from any url will be selected // You can specify the methods and routes that are recorded cy.log(\u0026#39;recording!\u0026#39;); cy.intercept({ method: \u0026#39;GET\u0026#39;, url: \u0026#39;*\u0026#39;, }); // if recording, after the test runs, create a fixture file with the recorded data after(function () { cy.writeFile(`./cypress/fixtures/${pathToJson}.json`, xhrData); cy.log(`Wrote ${xhrData.length} XHR responses to local file ${pathToJson}.json`); }); } /** Plays recorded fixture with all required network data as json*/ function playStubbedFixture(stateFixture) { cy.log(`playing fixture from ${stateFixture}`); cy.fixture(stateFixture, { timeout: 15000 }) // the fixture file may be large and take time in CI .each(({method, url, data}) =\u0026gt; { cy.intercept(method, url, data); }).as(`stateFixture_stub`); } /** Visits the stubbed state */ function visitStubbedState(stubFile, url, wait: boolean = true) { playStubbedFixture(stubFile); cy.visit(url); if (wait) { // sometimes you do not want to wait for network, this gives you the option cy.wait(\u0026#39;@stateFixture_stub\u0026#39;, { timeout: 15000 }); } } ////////// // usage // recording network it(\u0026#39;should run your test\u0026#39;, function () { stubrecorder(\u0026#39;jsonfileNameForNetworkData\u0026#39;); // your original test cy.wait(5000); // one-time wait so that the after() step records all the network without missing anything // the rest of your original test }); // playing the stubbed network it(\u0026#39;should run your test\u0026#39;, function () { // every time we visit this endpoint, all network will be stubbed // double check this by observing (XHR stubbed) network responses in the test runner visitStubbedState(\u0026#39;jsonfileNameForNetworkData\u0026#39;, \u0026#39;/endpoint\u0026#39;); // the rest of your original test }); ç½‘ç»œå­˜æ ¹è®°å½•å’Œå›æ”¾çš„ä¼˜ç¼ºç‚¹ UI é›†æˆæµ‹è¯•æ˜¯ UI æµ‹è¯•çš„æ ¸å¿ƒã€‚å®ƒä»¬åœ¨çœŸå®æµè§ˆå™¨ä¸­è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œè€Œä¸è¿æ¥çœŸå®æœåŠ¡å™¨ã€‚å®ƒä»¬è¿è¡Œé€Ÿåº¦æå¿«ï¼Œå¯¹ç½‘ç»œä¸­çš„éšæœºæ•…éšœæˆ–é”™è¯¯è´Ÿé¢å½±å“è¾ƒå°ã€‚\nå·¥ç¨‹å¸ˆä»¬å¿…é¡»è®¤è¯†åˆ°ï¼Œè¿™ç§ä¼˜åŠ¿å¦‚æœè¢«æ»¥ç”¨å¯èƒ½æˆä¸ºä¸€ç§è¯…å’’ã€‚UI åº”ç”¨ç¨‹åºæ˜¯éš”ç¦»çš„ï¼Œä½†å¦‚æœæœ‰ç½‘ç»œæ•…éšœï¼Œå®ƒä»¬ä¼šè¢«å¿½ç•¥ã€‚è¿™å¯¹äºåŠŸèƒ½åˆ†æ”¯æµ‹è¯•éå¸¸æœ‰ç”¨ï¼Œä½†åœ¨è¿›ä¸€æ­¥çš„éƒ¨ç½²ä¸­ï¼Œåº”ç¡®ä¿åç«¯ä¹Ÿæ­£å¸¸è¿è¡Œã€‚è¯·å‚é˜… ä½¿ç”¨é›†æˆæµ‹è¯•å‰ç«¯ï¼ŒåŒæ—¶ä½¿ç”¨ E2E æµ‹è¯•åç«¯ äº†è§£ä½•æ—¶ä½¿ç”¨å“ªç§æŠ€æœ¯ã€‚\nå¡«å……æ•°æ®åº“ Cypress cy.task() åŠŸèƒ½éå¸¸å¼ºå¤§ã€‚å®é™…ä¸Šï¼Œå®ƒå…è®¸ä½ åœ¨ Cypress ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ Node.jsã€‚è¿™å¯ä»¥æ˜¯ä»»ä½•å†…å®¹ï¼Œä» Node.js ä»£ç åˆ°ä½¿ç”¨ npm åŒ…æ¥æ“çºµæ•°æ®åº“ã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä½¿ç”¨ Node.jsï¼Œä½ å¯ä»¥é‡ç”¨åº”ç”¨ç¨‹åºä»£ç æ¥å¸®åŠ©è®¾ç½®å’Œæ“çºµæµ‹è¯•æ•°æ®ã€‚\nå…³äºè¿™ä¸ªä¸»é¢˜æœ‰ä¸€ä¸ª Cypress ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä»¥æ­¤ä½œä¸ºå‚è€ƒç»“æŸã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/","summary":"è¿™ç¯‡åšæ–‡æ¢è®¨äº† UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹äºŒï¼šUI æµ‹è¯•è°ƒè¯•å’Œæ— éœ€ä½¿ç”¨ UI è¾¾åˆ° UI çŠ¶æ€ã€‚åšæ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ–­ç‚¹ã€æ—¥å¿—å’Œäº¤äº’å¼è°ƒè¯•å·¥å…·ç­‰æ–¹æ³•ï¼Œæé«˜æµ‹è¯•è„šæœ¬çš„è°ƒè¯•æ•ˆç‡ã€‚æ­¤å¤–ï¼Œæ–‡ç« å¼ºè°ƒäº†é€šè¿‡ç›´æ¥è®¾ç½®åº”ç”¨ç¨‹åºçŠ¶æ€è€Œæ— éœ€ä¾èµ– UI å…ƒç´ æ¥è¾¾åˆ° UI çŠ¶æ€çš„æ–¹æ³•ï¼Œä»¥æé«˜æµ‹è¯•é€Ÿåº¦å’Œç¨³å®šæ€§ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œè¯»è€…èƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹ UI æµ‹è¯•ä¸­çš„è°ƒè¯•æŒ‘æˆ˜ï¼ŒåŒæ—¶ä¼˜åŒ–æµ‹è¯•è„šæœ¬çš„æ‰§è¡Œæ•ˆç‡ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆäºŒï¼‰ï¼šUI æµ‹è¯•è°ƒè¯•æœ€ä½³å®è·µå’Œåœ¨æµ‹è¯•ä¸­è¾¾åˆ° UI çŠ¶æ€è€Œæ— éœ€ä½¿ç”¨ UI"},{"content":"K6 å¸¸ç”¨åŠŸèƒ½ ä¸Šä¸€ç¯‡åšæ–‡ä»‹ç»äº†K6 æ€§èƒ½æµ‹è¯•æ•™ç¨‹ï¼šå¸¸ç”¨åŠŸèƒ½ï¼ˆ1ï¼‰- HTTP è¯·æ±‚ï¼ŒæŒ‡æ ‡å’Œæ£€æŸ¥ è¿™ä¸€ç¯‡æ–‡ç« ä¸»è¦èšç„¦åœ¨é˜ˆå€¼è®¾ç½®ã€æµ‹è¯•ç”Ÿå‘½å‘¨æœŸå’Œåœºæ™¯è®¾è®¡æ–¹é¢ã€‚é˜è¿°äº†å¦‚ä½•åˆ©ç”¨ K6 åœ¨æ€§èƒ½æµ‹è¯•ä¸­è®¾å®šåˆç†çš„é˜ˆå€¼ï¼Œä»¥ä¾¿æœ‰æ•ˆç›‘æµ‹ç³»ç»Ÿçš„æ€§èƒ½è¡¨ç°ã€‚åŒæ—¶ï¼Œæ¢è®¨äº†æµ‹è¯•ç”Ÿå‘½å‘¨æœŸçš„é‡è¦æ€§ï¼Œä»¥åŠå¦‚ä½•åœ¨ä¸åŒé˜¶æ®µè¿›è¡Œæœ‰é’ˆå¯¹æ€§çš„æ€§èƒ½æµ‹è¯•ã€‚\nThresholds é˜ˆå€¼ ä»€ä¹ˆæ˜¯é˜ˆå€¼ é˜ˆå€¼ä¸€èˆ¬æ˜¯æˆ‘ä»¬ä¸ºæµ‹è¯•æŒ‡æ ‡å®šä¹‰çš„é€šè¿‡/å¤±è´¥æ ‡å‡†ã€‚å¯¹äº K6 æ¥è¯´ï¼Œå¦‚æœè¢«æµ‹ç³»ç»Ÿçš„æ€§èƒ½ä¸æ»¡è¶³é˜ˆå€¼æ¡ä»¶ï¼Œæµ‹è¯•å°†ä»¥å¤±è´¥çŠ¶æ€ç»“æŸã€‚\nå‰é¢æåˆ°çš„æ£€æŸ¥ï¼ˆcheckï¼‰æ˜¯ç”¨æ¥éªŒè¯æµ‹è¯•ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œcheck ä¸é€šè¿‡ï¼Œæµ‹è¯•è¿˜ä¼šç»§ç»­ï¼Œè€Œé˜ˆå€¼ï¼ˆthresholdï¼‰æ˜¯ç”¨æ¥éªŒè¯æµ‹è¯•ç»“æœæ˜¯å¦ç¬¦åˆæ€§èƒ½è¦æ±‚ã€‚å¦‚æœä¸ç¬¦åˆï¼Œæµ‹è¯•å°†ä»¥å¤±è´¥çŠ¶æ€ç»“æŸã€‚\né€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿›è¡Œæ€§èƒ½æµ‹è¯•æ—¶ä¼šä½¿ç”¨é˜ˆå€¼æ¥ç¼–å†™ä¸åŒæœåŠ¡æˆ–æ¥å£çš„ SLOs(æœåŠ¡çº§åˆ«ç›®æ ‡ Service Level Objectives)ã€‚\nä¸‹é¢ä¸ºä¸€äº›é˜ˆå€¼çš„ä¾‹å­ï¼š\nä¸åˆ° 1% çš„è¯·æ±‚è¿”å›é”™è¯¯ã€‚ 95% çš„è¯·æ±‚å“åº”æ—¶é—´ä½äº 200 æ¯«ç§’ã€‚ 99% çš„è¯·æ±‚å“åº”æ—¶é—´ä½äº 400 æ¯«ç§’ã€‚ ç‰¹å®šç«¯ç‚¹å§‹ç»ˆåœ¨ 300 æ¯«ç§’å†…å“åº”ã€‚ è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆç­‰å¾…æ—¶é—´è¶‹åŠ¿ï¼‰çš„ä»»ä½•æ¡ä»¶ï¼ˆå¤§äº 300 æ¯«ç§’ï¼‰ã€‚ å¦‚æœåç»­ä¼šå†™æ€§èƒ½è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼Œé‚£ä¹ˆé˜ˆå€¼å°±æ˜¯å¿…ä¸å¯å°‘çš„ã€‚\nç»™ä½ çš„æµ‹è¯•ä¸€ä¸ªé˜ˆå€¼ã€‚ è‡ªåŠ¨åŒ–æ‰§è¡Œ è®¾ç½®æµ‹è¯•å¤±è´¥è­¦æŠ¥ã€‚ HTTP é”™è¯¯å’Œå“åº”æŒç»­æ—¶é—´çš„é˜ˆå€¼ç¤ºä¾‹ ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨é˜ˆå€¼æ¥è®¾ç½®å¹¶è¯„ä¼° HTTP é”™è¯¯ç‡ï¼ˆhttp_req_failed æŒ‡æ ‡ï¼‰å’Œè¯„ä¼° 95% çš„è¯·æ±‚å“åº”æ˜¯å¦åœ¨ç‰¹å®šæŒç»­æ—¶é—´å†…å‘ç”Ÿï¼ˆhttp_req_duration æŒ‡æ ‡ï¼‰ï¼š\nimport http from \u0026#39;k6/http\u0026#39;; export const options = { thresholds: { http_req_failed: [\u0026#39;rate\u0026lt;0.01\u0026#39;], // HTTP é”™è¯¯ç‡åº”è¯¥ä½äº 1% http_req_duration: [\u0026#39;p(95)\u0026lt;200\u0026#39;], // 95% çš„è¯·æ±‚å“åº”åº”è¯¥ä½äº 200ms }, }; export default function () { http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/1/\u0026#39;); } ä¸Šè¿°çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸¤ä¸ªé˜ˆå€¼ï¼š\nHTTP é”™è¯¯ç‡åº”è¯¥ä½äº 1%ã€‚ï¼ˆç”¨åˆ°äº† http_req_failed æŒ‡æ ‡ï¼‰ 95% çš„è¯·æ±‚å“åº”åº”è¯¥ä½äº 200msã€‚ï¼ˆç”¨åˆ°äº† http_req_duration æŒ‡æ ‡ï¼‰ å¯¹äºä¸Šé¢ä»£ç è®¾ç½®çš„é˜ˆå€¼ï¼Œå¦‚æœè¿è¡Œçš„æ—¶å€™ï¼ŒHTTP é”™è¯¯ç‡ä½äº 1% å’Œ 95% çš„è¯·æ±‚å“åº”ä½äº 200msï¼Œé‚£ä¹ˆæµ‹è¯•å°±ä¼šä»¥æˆåŠŸçŠ¶æ€ç»“æŸï¼Œå¦åˆ™ä»»ä¸€é˜ˆå€¼ä¸æ»¡è¶³ï¼Œæµ‹è¯•å°±å°†ä»¥å¤±è´¥çŠ¶æ€ç»“æŸã€‚\nè¿è¡Œè¯¥è„šæœ¬ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š\nç»“æœä¸­æ˜¾ç¤ºï¼Œhttp_req_failed é˜ˆå€¼é€šè¿‡äº†ï¼Œhttp_req_duration é˜ˆå€¼æ²¡æœ‰é€šè¿‡ï¼Œæ•´ä½“æµ‹è¯•ä»¥å¤±è´¥çŠ¶æ€ç»“æŸã€‚\nå¦‚æœä»»ä½•é˜ˆå€¼å¤±è´¥ï¼Œåˆ™é˜ˆå€¼åç§°ï¼ˆhttp_req_failedã€http_req_durationï¼‰æ—è¾¹çš„ç»¿è‰²å°å¤é€‰æ ‡è®° âœ“ å°†æ˜¯ âœ— å¹¶ä¸” k6 å°†ä»¥éé›¶å€¼é€€å‡ºé€€å‡ºä»£ç ã€‚\né˜ˆå€¼è¯­æ³• é˜ˆå€¼è¯­æ³•æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š\næŒ‡æ ‡åç§°ï¼ˆä¾‹å¦‚ http_req_durationï¼‰ã€‚ ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ï¼Œç”¨é€—å·åˆ†éš”ã€‚ æ¯ä¸ªæ¡ä»¶éƒ½ç”±ä¸€ä¸ªè¿ç®—ç¬¦å’Œä¸€ä¸ªå€¼ç»„æˆã€‚ è¿ç®—ç¬¦å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š\u0026gt;ã€\u0026gt;=ã€\u0026lt;ã€\u0026lt;=ã€==ã€!=ã€=~ã€!~ã€‚ å€¼å¯ä»¥æ˜¯æ•°å­—æˆ–ç™¾åˆ†æ¯”ã€‚ ç™¾åˆ†æ¯”å€¼å¿…é¡»åœ¨ 0 åˆ° 100 ä¹‹é—´ã€‚ æƒ³è¦åœ¨æµ‹è¯•è„šæœ¬ä¸­ä½¿ç”¨é˜ˆå€¼ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\n1.åœ¨ options å¯¹è±¡ä¸­æ·»åŠ  thresholds å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nexport const options = { thresholds: { /* ... */ }, }; 2.åœ¨ thresholds å¯¹è±¡ä¸­å®šä¹‰é˜ˆå€¼è¡¨è¾¾å¼ï¼ˆè‡³å°‘ä¸€ä¸ªï¼Œå¯ä»¥å¤šä¸ªï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nexport const options = { thresholds: { //çŸ­æ ¼å¼ METRIC_NAME1: [\u0026#39;THRESHOLD_EXPRESSION\u0026#39;, `...`], //é•¿æ ¼å¼ METRIC_NAME2: [ { threshold: \u0026#39;THRESHOLD_EXPRESSION\u0026#39;, abortOnFail: true, // boolean delayAbortEval: \u0026#39;10s\u0026#39;, // string }, ], // full format }, }; é˜ˆå€¼è¡¨è¾¾å¼æ”¯æŒçŸ­æ ¼å¼å’Œé•¿æ ¼å¼ï¼ŒçŸ­æ ¼å¼å°†æ‰€æœ‰é˜ˆå€¼è¡¨è¾¾å¼ä½œä¸ºå­—ç¬¦ä¸²æ”¾å…¥æ•°ç»„ä¸­ã€‚é•¿æ ¼å¼å°†æ¯ä¸ªé˜ˆå€¼æ”¾å…¥ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¹¶å…·æœ‰åœ¨å¤±è´¥æ—¶ä¸­æ­¢çš„é¢å¤–å±æ€§ã€‚ ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­çš„ METRIC_NAME1 å’Œ THRESHOLD_EXPRESSION æ˜¯å ä½ç¬¦ã€‚æ­£å¸¸æƒ…å†µä¸‹å¿…é¡»æ˜¯æŒ‡æ ‡åç§°å’Œé˜ˆå€¼è¡¨è¾¾å¼ã€‚ ç¤ºä¾‹ä»£ç å£°æ˜é…ç½®æŒ‡æ ‡ metric_name1 å’Œ metric_name2 çš„ä¸¤ä¸ªé˜ˆå€¼ã€‚é€šè¿‡è¯„ä¼°é˜ˆå€¼åçš„\u0026rsquo;threshold_expression\u0026rsquo;æ¥ç¡®å®šé˜ˆå€¼æ˜¯é€šè¿‡è¿˜æ˜¯å¤±è´¥ï¼Œ. é˜ˆå€¼è¡¨è¾¾å¼è¯­æ³• é˜ˆå€¼è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸º true æˆ– false ã€‚é˜ˆå€¼è¡¨è¾¾å¼å¿…é¡»é‡‡ç”¨ä»¥ä¸‹æ ¼å¼ï¼š\n\u0026lt;aggregation_method\u0026gt; \u0026lt;operator\u0026gt; \u0026lt;value\u0026gt; \u0026lt;aggregation_method\u0026gt;ï¼šèšåˆæ–¹æ³•ï¼Œç”¨äºè®¡ç®—æŒ‡æ ‡çš„å€¼ã€‚ä¾‹å¦‚ï¼Œp(95) è¡¨ç¤º 95% ç™¾åˆ†ä½æ•°ï¼Œè€Œ avg è¡¨ç¤ºå¹³å‡å€¼ã€‚ \u0026lt;operator\u0026gt;ï¼šè¿ç®—ç¬¦ï¼Œç”¨äºæ¯”è¾ƒæŒ‡æ ‡çš„å€¼ä¸é˜ˆå€¼è¡¨è¾¾å¼ä¸­çš„å€¼ã€‚ä¾‹å¦‚ï¼Œ\u0026gt; è¡¨ç¤ºå¤§äºï¼Œ\u0026lt; è¡¨ç¤ºå°äºï¼Œ== è¡¨ç¤ºç­‰äºã€‚ \u0026lt;value\u0026gt;ï¼šé˜ˆå€¼è¡¨è¾¾å¼ä¸­çš„å€¼ã€‚ä¾‹å¦‚ï¼Œ200 è¡¨ç¤º 200 æ¯«ç§’ï¼Œ95 è¡¨ç¤º 95%ã€‚ é˜ˆå€¼è¡¨è¾¾å¼çš„ä¸€äº›ç¤ºä¾‹å¦‚ä¸‹ï¼š\navg \u0026lt; 200 // å¹³å‡æŒç»­æ—¶é—´å¿…é¡»å°äº 200 æ¯«ç§’ count \u0026gt;= 500 // è®¡æ•°å¿…é¡»å¤§äºæˆ–ç­‰äº 500 p(90) \u0026lt; 300 // 90% çš„æ ·æœ¬å¿…é¡»ä½äº 300 æŒ‰ç±»å‹åˆ’åˆ†çš„èšåˆæ–¹æ³• k6 æ ¹æ®ç±»å‹èšåˆæŒ‡æ ‡ã€‚è¿™äº›èšåˆæ–¹æ³•æ„æˆé˜ˆå€¼è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚\nä»¥ä¸‹æ˜¯æŒ‰ç±»å‹åˆ’åˆ†çš„èšåˆæ–¹æ³•åˆ—è¡¨ï¼š\næŒ‡æ ‡ç±»å‹ èšåˆæ–¹æ³• ï½œCounter count è®¡æ•° å’Œ rate æ¯”ç‡ ï½œGauge value å…·ä½“çš„å€¼ ï½œRate rate æ¯”ç‡ ï½œTrend avg å¹³å‡å€¼ã€min æœ€å°å€¼ã€max æœ€å¤§å€¼ã€med å’Œ p(N) å…¶ä¸­ N æŒ‡å®šé˜ˆå€¼ç™¾åˆ†ä½å€¼ï¼Œè¡¨ç¤ºä¸º 0.0 åˆ° 100 ä¹‹é—´çš„æ•°å­—ã€‚p(99.99) è¡¨ç¤ºç¬¬ 99.99 ä¸ªç™¾åˆ†ä½ã€‚è¿™äº›å€¼ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚ï½œ ä¸€ä¸ªå¤æ‚çš„èšåˆæ–¹æ³•ç¤ºä¾‹ï¼š\nimport http from \u0026#39;k6/http\u0026#39;; import { Trend, Rate, Counter, Gauge } from \u0026#39;k6/metrics\u0026#39;; import { sleep } from \u0026#39;k6\u0026#39;; export const TrendRTT = new Trend(\u0026#39;RTT\u0026#39;); export const RateContentOK = new Rate(\u0026#39;Content OK\u0026#39;); export const GaugeContentSize = new Gauge(\u0026#39;ContentSize\u0026#39;); export const CounterErrors = new Counter(\u0026#39;Errors\u0026#39;); export const options = { thresholds: { // è®¡æ•°ï¼šä¸å…è®¸è¶…è¿‡ 99 æ¬¡è¿”å›é”™è¯¯çš„å†…å®¹ã€‚ \u0026#39;Errors\u0026#39;: [\u0026#39;count\u0026lt;100\u0026#39;], // è®¡é‡ï¼šè¿”å›çš„å†…å®¹å¿…é¡»æ§åˆ¶åœ¨ 4000 å­—èŠ‚ä»¥ä¸‹ã€‚ \u0026#39;ContentSize\u0026#39;: [\u0026#39;value\u0026lt;4000\u0026#39;], // æ¯”ç‡ï¼šå†…å®¹å¿…é¡»åœ¨ 95 æ¬¡ä»¥ä¸Šè¾¾åˆ°â€œOKâ€ã€‚ \u0026#39;Content OK\u0026#39;: [\u0026#39;rate\u0026gt;0.95\u0026#39;], // è¶‹åŠ¿ï¼šç™¾åˆ†ä½æ•°ã€å¹³å‡å€¼ã€ä¸­ä½æ•°å’Œæœ€å°å€¼å¿…é¡»ä¿æŒåœ¨æŒ‡å®šçš„æ¯«ç§’èŒƒå›´å†…ã€‚ \u0026#39;RTT\u0026#39;: [\u0026#39;p(99)\u0026lt;300\u0026#39;, \u0026#39;p(70)\u0026lt;250\u0026#39;, \u0026#39;avg\u0026lt;200\u0026#39;, \u0026#39;med\u0026lt;150\u0026#39;, \u0026#39;min\u0026lt;100\u0026#39;], }, }; export default function () { const res = http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/1/\u0026#39;); const contentOK = res.json(\u0026#39;name\u0026#39;) === \u0026#39;Bert\u0026#39;; TrendRTT.add(res.timings.duration); RateContentOK.add(contentOK); GaugeContentSize.add(res.body.length); CounterErrors.add(!contentOK); sleep(1); } æ³¨æ„ï¼šä¸è¦é€šè¿‡é‡å¤ç›¸åŒçš„å¯¹è±¡é”®æ¥ä¸ºåŒä¸€æŒ‡æ ‡æŒ‡å®šå¤šä¸ªé˜ˆå€¼ã€‚\nç”±äºé˜ˆå€¼è¢«å®šä¹‰ä¸º JavaScript å¯¹è±¡çš„å±æ€§ï¼Œå› æ­¤æ‚¨ä¸èƒ½æŒ‡å®šå¤šä¸ªå…·æœ‰ç›¸åŒå±æ€§åç§°çš„é˜ˆå€¼ã€‚å¦‚æœè¦ä¸ºä¸€ä¸ªæŒ‡æ ‡è®¾ç½®å¤šä¸ªé˜ˆå€¼ï¼Œè¯·ä½¿ç”¨åŒä¸€é”®çš„æ•°ç»„æŒ‡å®šå®ƒä»¬ã€‚\nå¸¸ç”¨çš„é˜ˆå€¼ç¤ºä¾‹ ä½¿ç”¨é˜ˆå€¼çš„æœ€å¿«æ–¹æ³•æ˜¯å…ˆä½¿ç”¨å†…ç½®æŒ‡æ ‡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å¤åˆ¶ç¤ºä¾‹\n1.åœ¨æŒ‡å®šæŒç»­æ—¶é—´å†…å®Œæˆçš„è¯·æ±‚ç™¾åˆ†æ¯” import http from \u0026#39;k6/http\u0026#39;; import { sleep } from \u0026#39;k6\u0026#39;; export const options = { thresholds: { // 90% çš„è¯·æ±‚å¿…é¡»åœ¨ 400 æ¯«ç§’å†…å®Œæˆã€‚ http_req_duration: [\u0026#39;p(90) \u0026lt; 400\u0026#39;], }, }; export default function () { http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/1/\u0026#39;); sleep(1); } 2.é”™è¯¯ç‡ä½äº 1% import http from \u0026#39;k6/http\u0026#39;; import { sleep } from \u0026#39;k6\u0026#39;; export const options = { thresholds: { // åœ¨æ•´ä¸ªæµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé”™è¯¯ç‡å¿…é¡»ä½äº 1ï¼…ã€‚ http_req_failed: [\u0026#39;rate\u0026lt;0.01\u0026#39;], }, }; export default function () { http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/1/\u0026#39;); sleep(1); } 3.å•ä¸ªæŒ‡æ ‡çš„å¤šä¸ªé˜ˆå€¼ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºä¸€é¡¹æŒ‡æ ‡åº”ç”¨å¤šä¸ªé˜ˆå€¼ã€‚è¯¥é˜ˆå€¼å¯¹äºä¸åŒçš„è¯·æ±‚ç™¾åˆ†ä½æ•°æœ‰ä¸åŒçš„æŒç»­æ—¶é—´è¦æ±‚ã€‚\nimport http from \u0026#39;k6/http\u0026#39;; import { sleep } from \u0026#39;k6\u0026#39;; export const options = { thresholds: { // 90ï¼…çš„è¯·æ±‚å¿…é¡»åœ¨ 400 æ¯«ç§’å†…å®Œæˆï¼Œ95ï¼…åœ¨ 800 æ¯«ç§’å†…å®Œæˆï¼Œ99.9ï¼…åœ¨ 2 ç§’å†…å®Œæˆã€‚ http_req_duration: [\u0026#39;p(90) \u0026lt; 400\u0026#39;, \u0026#39;p(95) \u0026lt; 800\u0026#39;, \u0026#39;p(99.9) \u0026lt; 2000\u0026#39;], }, }; export default function () { const res1 = http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/1/\u0026#39;); sleep(1); } 4.æŒç»­æ—¶é—´ç»„çš„é˜ˆå€¼ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªç»„è®¾ç½®é˜ˆå€¼ã€‚æ­¤ä»£ç å…·æœ‰é’ˆå¯¹å•ç‹¬è¯·æ±‚å’Œæ‰¹é‡è¯·æ±‚çš„ç»„ã€‚å¯¹äºæ¯ä¸ªç»„ï¼Œéƒ½æœ‰ä¸åŒçš„é˜ˆå€¼ã€‚\nimport http from \u0026#39;k6/http\u0026#39;; import { group, sleep } from \u0026#39;k6\u0026#39;; export const options = { thresholds: { \u0026#39;group_duration{group:::individualRequests}\u0026#39;: [\u0026#39;avg \u0026lt; 400\u0026#39;], \u0026#39;group_duration{group:::batchRequests}\u0026#39;: [\u0026#39;avg \u0026lt; 200\u0026#39;], }, vus: 1, duration: \u0026#39;10s\u0026#39;, }; export default function () { group(\u0026#39;individualRequests\u0026#39;, function () { http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/1/\u0026#39;); http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/2/\u0026#39;); http.get(\u0026#39;https://test-api.k6.io/public/crocodiles/3/\u0026#39;); }); group(\u0026#39;batchRequests\u0026#39;, function () { http.batch([ [\u0026#39;GET\u0026#39;, `https://test-api.k6.io/public/crocodiles/1/`], [\u0026#39;GET\u0026#39;, `https://test-api.k6.io/public/crocodiles/2/`], [\u0026#39;GET\u0026#39;, `https://test-api.k6.io/public/crocodiles/3/`], ]); }); sleep(1); } è¶…è¿‡é˜ˆå€¼æ—¶ä¸­æ­¢æµ‹è¯• å¦‚æœåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨é˜ˆå€¼ä¸æ»¡è¶³æ—¶ä¸­æ­¢æµ‹è¯•ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ abortOnFail å±æ€§ã€‚\nå°† abortOnFail å±æ€§è®¾ç½®ä¸º trueã€‚å½“æ‚¨è®¾ç½® abortOnFail æ—¶ï¼Œä¸€æ—¦é˜ˆå€¼å¤±è´¥ï¼Œæµ‹è¯•è¿è¡Œå°±ä¼šåœæ­¢ã€‚\nè¿™é‡Œä¹Ÿä¼šæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæµ‹è¯•å¯èƒ½ä¼šå› ä¸ºè¿™ä¸ªé˜ˆå€¼çš„è®¾å®šå¯¼è‡´åœ¨æµ‹è¯•ç”Ÿæˆé‡è¦æ•°æ®ä¹‹å‰ä¸­æ­¢ã€‚ä¸ºäº†é˜²æ­¢è¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ delayAbortEval å»¶è¿Ÿ abortOnFailã€‚åœ¨æ­¤è„šæœ¬ä¸­ï¼ŒabortOnFail å»¶è¿Ÿäº†åç§’ã€‚åç§’åï¼Œå¦‚æœæœªè¾¾åˆ° p(99) \u0026lt; 10 é˜ˆå€¼ï¼Œæµ‹è¯•å°†ä¸­æ­¢ã€‚\nexport const options = { thresholds: { metric_name: [ { threshold: \u0026#39;p(99) \u0026lt; 10\u0026#39;, // string abortOnFail: true, // boolean delayAbortEval: \u0026#39;10s\u0026#39;, // string /*...*/ }, ], }, }; æ›´å¤šé˜ˆå€¼çš„å†…å®¹ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://k6.io/docs/using-k6/thresholds/\nTest lifecycle æµ‹è¯•ç”Ÿå‘½å‘¨æœŸ K6 æ¡†æ¶ä¸­çš„æµ‹è¯•çš„ç”Ÿå‘½å‘¨æœŸï¼Œæµ‹è¯•è„šæœ¬å§‹ç»ˆéƒ½ä»¥ä¸‹é¢çš„ç›¸åŒé¡ºåºè¿›è¡Œæ‰§è¡Œï¼š\ninit åˆå§‹åŒ–é˜¶æ®µï¼šä¸Šä¸‹æ–‡ä¸­çš„ä»£ç å‡†å¤‡è„šæœ¬ã€åŠ è½½æ–‡ä»¶ã€å¯¼å…¥æ¨¡å—å¹¶å®šä¹‰æµ‹è¯•ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚å¿…éœ€çš„ã€‚ setup å‰ç½®å‡†å¤‡è®¾ç½®é˜¶æ®µï¼šè®¾ç½®æµ‹è¯•ç¯å¢ƒå¹¶ç”Ÿæˆæ•°æ®ã€‚å¯é€‰çš„ã€‚ VU UV é˜¶æ®µï¼šä»£ç åœ¨ default æˆ–åœºæ™¯å‡½æ•°ä¸­è¿è¡Œï¼Œè¿è¡Œæ—¶é—´å’Œæ¬¡æ•°ä¸ options å®šä¹‰çš„ä¸€æ ·é•¿ã€‚å¿…éœ€çš„ã€‚ teardown åç½®æµ‹è¯•é€€å‡ºé˜¶æ®µï¼šå¯¹æ•°æ®è¿›è¡Œåå¤„ç†å¹¶å…³é—­æµ‹è¯•ç¯å¢ƒã€‚å¯é€‰çš„ã€‚ ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šé™¤äº†åˆå§‹åŒ–ä»£ç ä¹‹å¤–ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å‘ç”Ÿï¼Œè¿™æ˜¯åœ¨ k6 è¿è¡Œæ—¶æŒ‰ç…§ç‰¹å®šé¡ºåºè°ƒç”¨çš„å‡½æ•°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•ç”Ÿå‘½å‘¨æœŸç¤ºä¾‹ï¼š\n// 1. é…ç½® init é˜¶æ®µï¼ˆå¿…éœ€çš„ï¼‰ export function setup() { // 2. é…ç½® setup é˜¶æ®µï¼ˆå¯é€‰çš„ï¼‰ } export default function (data) { // 3. é…ç½® VU é˜¶æ®µï¼ˆå¿…éœ€çš„ï¼‰ } export function teardown(data) { // 4. é…ç½® teardown é˜¶æ®µï¼ˆå¯é€‰çš„ï¼‰ } ç”Ÿå‘½å‘¨æœŸé˜¶æ®µæ¦‚è¿° æµ‹è¯•é˜¶æ®µ ç›®çš„ ç¤ºä¾‹ è¯·æ±‚æ¬¡æ•° init åˆå§‹åŒ–é˜¶æ®µ åŠ è½½æœ¬åœ°æ–‡ä»¶ã€å¯¼å…¥æ¨¡å—ã€å£°æ˜ç”Ÿå‘½å‘¨æœŸå‡½æ•° æ‰“å¼€ JSON æ–‡ä»¶ï¼Œå¯¼å…¥æ¨¡å— æ¯ä¸ª VU ä¸€æ¬¡* Setup å‰ç½®å‡†å¤‡é…ç½®é˜¶æ®µ è®¾ç½®è¦å¤„ç†çš„æ•°æ®ï¼Œåœ¨ VU ä¹‹é—´å…±äº«æ•°æ® è°ƒç”¨ API å¯åŠ¨æµ‹è¯•ç¯å¢ƒ ä¸€æ¬¡ VU code VU ä»£ç é˜¶æ®µ è¿è¡Œæµ‹è¯•å‡½æ•°ï¼Œé€šå¸¸æ˜¯ default å‘å‡º https è¯·æ±‚ï¼ŒéªŒè¯å“åº” æ¯æ¬¡è¿­ä»£ä¸€æ¬¡ï¼Œæ ¹æ®æµ‹è¯•é€‰é¡¹çš„éœ€è¦è¿›è¡Œå¤šæ¬¡ Teardown æµ‹è¯•åç½®é€€å‡ºé˜¶æ®µ è®¾ç½®ä»£ç çš„å¤„ç†ç»“æœï¼Œåœæ­¢æµ‹è¯•ç¯å¢ƒ éªŒè¯è®¾ç½®æ˜¯å¦æœ‰ä¸€å®šçš„ç»“æœï¼Œå‘é€ webhook é€šçŸ¥æµ‹è¯•å·²å®Œæˆ ä¸€æ¬¡ ** * åœ¨äº‘è„šæœ¬ä¸­ï¼Œinit ä»£ç å¯èƒ½ä¼šè¢«æ›´é¢‘ç¹åœ°è°ƒç”¨ã€‚** å¦‚æœ Setup å‡½æ•°å¼‚å¸¸ç»“æŸï¼ˆä¾‹å¦‚æŠ›å‡ºé”™è¯¯ï¼‰ï¼Œåˆ™ä¸ä¼šè°ƒç”¨ teardown() å‡½æ•°ã€‚è€ƒè™‘å‘ setup() å‡½æ•°æ·»åŠ é€»è¾‘ä»¥å¤„ç†é”™è¯¯å¹¶ç¡®ä¿æ­£ç¡®æ¸…ç†ã€‚\ninit åˆå§‹åŒ–é˜¶æ®µ K6 æµ‹è¯•çš„å¿…è¦é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µç”¨æ¥åœ¨æµ‹è¯•ä¹‹å‰å‡†å¤‡æµ‹è¯•ç¯å¢ƒå’Œåˆå§‹åŒ–æµ‹è¯•æ¡ä»¶\ninit ä¸Šä¸‹æ–‡ä¸­çš„ä»£ç æ¯ä¸ª VU éƒ½ä¼šè¿è¡Œä¸€æ¬¡ã€‚\nä¸€èˆ¬åœ¨init é˜¶æ®µå¯èƒ½ä¼šåšçš„äº‹æƒ…ï¼š\nå¯¼å…¥æ¨¡å— ä»æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½æ–‡ä»¶ ä¸ºæ‰€æœ‰ options é…ç½®æµ‹è¯• ä¸º VUã€setup å’Œ teardown é˜¶æ®µï¼ˆä»¥åŠè‡ªå®šä¹‰æˆ– handleSummary() å‡½æ•°ï¼‰å®šä¹‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚ init ä¸Šä¸‹æ–‡ä¸­çš„ä»£ç å§‹ç»ˆé¦–å…ˆæ‰§è¡Œ\nVU é˜¶æ®µ VU é˜¶æ®µæ˜¯æµ‹è¯•çš„æ ¸å¿ƒã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä»£ç åœ¨ default æˆ–åœºæ™¯å‡½æ•°ä¸­è¿è¡Œï¼Œè¿è¡Œæ—¶é—´å’Œæ¬¡æ•°ä¸ options å®šä¹‰çš„ä¸€æ ·é•¿ã€‚\nå…³äº UV é˜¶æ®µçš„ Q\u0026amp;Aï¼š\n1.ä¸ºä»€ä¹ˆæœ‰ VU é˜¶æ®µï¼Ÿ\nVU é˜¶æ®µæ˜¯æµ‹è¯•çš„æ ¸å¿ƒï¼Œè„šæœ¬å¿…é¡»è‡³å°‘åŒ…å«ä¸€ä¸ªå®šä¹‰ VU é€»è¾‘çš„åœºæ™¯å‡½æ•°ã€‚è¯¥å‡½æ•°å†…éƒ¨çš„ä»£ç æ˜¯ VU ä»£ç ã€‚ VU é˜¶æ®µæ˜¯çœŸæ­£çš„æµ‹è¯•ä»£ç ï¼Œæ‰€ä»¥ VU é˜¶æ®µçš„ä»£ç ä¼šè¢«å¤šæ¬¡æ‰§è¡Œï¼Œæ‰§è¡Œæ¬¡æ•°ç”± options å®šä¹‰çš„ä¸€æ ·é•¿ã€‚ 2.ä¸ºä»€ä¹ˆæŠŠ init é˜¶æ®µå’Œ VU é˜¶æ®µåˆ†å¼€\nå°† init é˜¶æ®µä¸ VU é˜¶æ®µåˆ†ç¦»ï¼Œå¯ä»¥æ¶ˆé™¤ VU ä»£ç ä¸­ä¸ç›¸å…³çš„è®¡ç®—ï¼Œä»è€Œæé«˜ k6 æ€§èƒ½å¹¶ä½¿æµ‹è¯•ç»“æœæ›´åŠ å¯é ã€‚init ä»£ç çš„ä¸€ä¸ªé™åˆ¶æ˜¯å®ƒæ— æ³•å‘å‡º HTTP è¯·æ±‚ã€‚æ­¤é™åˆ¶ç¡®ä¿ init é˜¶æ®µåœ¨æµ‹è¯•ä¸­å¯é‡ç°ï¼ˆåè®®è¯·æ±‚çš„å“åº”æ˜¯åŠ¨æ€ä¸”ä¸å¯é¢„æµ‹çš„ï¼‰ å°† init é˜¶æ®µä¸ VU é˜¶æ®µåˆ†ç¦»ï¼Œå¯ä»¥ä½¿ VU é˜¶æ®µçš„ä»£ç æ›´åŠ ç®€æ´ï¼Œæ›´åŠ ä¸“æ³¨äºæµ‹è¯•é€»è¾‘ã€‚ 3.UV é˜¶æ®µçš„é»˜è®¤å‡½æ•°ç”Ÿå‘½å‘¨æœŸçš„ç†è§£\nVU ä»å¤´åˆ°å°¾ä¾æ¬¡æ‰§è¡Œ default() å‡½æ•°ã€‚ä¸€æ—¦ VU åˆ°è¾¾å‡½æ•°æœ«å°¾ï¼Œå®ƒå°±ä¼šå¾ªç¯å›åˆ°å¼€å¤´å¹¶é‡æ–°æ‰§è¡Œä»£ç  ä½œä¸ºæ­¤â€œé‡æ–°å¯åŠ¨â€è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œk6 ä¼šé‡ç½® VUã€‚Cookie è¢«æ¸…é™¤ï¼ŒTCP è¿æ¥å¯èƒ½è¢«æ–­å¼€ï¼ˆå–å†³äºæˆ‘ä»¬çš„æµ‹è¯•é…ç½®é€‰é¡¹ï¼‰ã€‚ Setup æµ‹è¯•å‰ç½®å‡†å¤‡é…ç½®é˜¶æ®µ å’Œ teardown æµ‹è¯•åç½®é€€å‡ºé˜¶æ®µ Setup å’Œ teardown é˜¶æ®µæ˜¯å¯é€‰çš„ã€‚è¿™ä¸¤ä¸ªé˜¶æ®µéƒ½æ˜¯åœ¨ VU é˜¶æ®µä¹‹å‰å’Œä¹‹åè¿è¡Œçš„ã€‚\nä¸ default ä¸€æ ·ï¼Œsetup å’Œ teardown å‡½æ•°å¿…é¡»æ˜¯å¯¼å‡ºå‡½æ•°ã€‚ä½†ä¸ default å‡½æ•°ä¸åŒï¼Œk6 æ¯æ¬¡æµ‹è¯•ä»…è°ƒç”¨ setup å’Œ teardown ä¸€æ¬¡ã€‚\nsetup åœ¨æµ‹è¯•å¼€å§‹æ—¶è°ƒç”¨ï¼Œåœ¨ init é˜¶æ®µä¹‹åä½†åœ¨ VU é˜¶æ®µä¹‹å‰ã€‚ teardown åœ¨æµ‹è¯•ç»“æŸæ—¶ã€VU é˜¶æ®µï¼ˆdefault å‡½æ•°ï¼‰ä¹‹åè°ƒç”¨ã€‚ ä¸ init é˜¶æ®µä¸åŒï¼Œæ‚¨å¯ä»¥åœ¨è®¾ç½®å’Œæ‹†å¸é˜¶æ®µè°ƒç”¨å®Œæ•´çš„ k6 API æ›´å¤š K6 æµ‹è¯•ç”Ÿå‘½å‘¨æœŸçš„å†…å®¹ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://k6.io/docs/using-k6/test-life-cycle/\nScenarios æµ‹è¯•åœºæ™¯ åœ¨ K6 çš„æµ‹è¯•è„šæœ¬ä¸­ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªæµ‹è¯•åœºæ™¯ï¼Œæ¯ä¸ªåœºæ™¯éƒ½å¯ä»¥æœ‰è‡ªå·±çš„é…ç½®é¡¹ï¼Œä¾‹å¦‚ VU æ•°é‡ã€æŒç»­æ—¶é—´ç­‰ã€‚\næµ‹è¯•åœºæ™¯å¯ä»¥è¯¦ç»†é…ç½® VU å’Œè¿­ä»£è®¡åˆ’çš„æ–¹å¼ã€‚é€šè¿‡æµ‹è¯•åœºæ™¯é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ€§èƒ½æµ‹è¯•ä¸­å¯¹ä¸åŒçš„å·¥ä½œè´Ÿè½½æˆ–æµé‡æ¨¡å¼è¿›è¡Œæ›´å¥½çš„æ ¹æ®ä¸šåŠ¡è¿›è¡Œè‡ªå®šä¹‰ã€‚\nä½¿ç”¨æµ‹è¯•åœºæ™¯é…ç½®çš„å¥½å¤„ï¼š\næ›´ç®€ä¾¿ã€æ›´çµæ´»çš„æµ‹è¯•ç»„ç»‡æ–¹å¼ã€‚æ‚¨å¯ä»¥åœ¨åŒä¸€ä¸ªè„šæœ¬ä¸­å®šä¹‰å¤šä¸ªæµ‹è¯•åœºæ™¯ï¼Œæ¯ä¸ªåœºæ™¯å¯ä»¥ç‹¬ç«‹æ‰§è¡Œä¸åŒçš„ JavaScript å‡½æ•°ã€‚ æ¨¡æ‹Ÿæ›´çœŸå®çš„æµé‡æƒ…å†µã€‚æ¯ä¸ªæµ‹è¯•åœºæ™¯éƒ½å¯ä»¥ä½¿ç”¨ä¸åŒçš„è™šæ‹Ÿç”¨æˆ·ï¼ˆVUï¼‰å’Œè¿­ä»£è°ƒåº¦æ¨¡å¼ï¼Œç”±ä¸“é—¨è®¾è®¡çš„æ‰§è¡Œå™¨æä¾›æ”¯æŒã€‚ å¹¶è¡Œæˆ–é¡ºåºå·¥ä½œè´Ÿè½½ã€‚å„ä¸ªåœºæ™¯ç›¸äº’ç‹¬ç«‹å¹¶è¡Œè¿è¡Œï¼Œå°½ç®¡å¯ä»¥é€šè¿‡ä»”ç»†è®¾ç½®æ¯ä¸ªåœºæ™¯çš„ startTime å±æ€§ä½¿å®ƒä»¬çœ‹èµ·æ¥åƒæ˜¯æŒ‰é¡ºåºè¿è¡Œçš„ã€‚ ç»†è‡´å…¥å¾®çš„ç»“æœåˆ†æã€‚å¯ä»¥ä¸ºæ¯ä¸ªåœºæ™¯è®¾ç½®ä¸åŒçš„ç¯å¢ƒå˜é‡å’ŒæŒ‡æ ‡æ ‡ç­¾ã€‚ æµ‹è¯•åœºæ™¯é…ç½® æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç ä¸­çš„ options å¯¹è±¡ä¸­çš„ scenarios é”®å€¼æ¥é…ç½®å…·ä½“åœºæ™¯æ–¹æ¡ˆã€‚ä¹Ÿå¯ä»¥ä¸ºåœºæ™¯æŒ‡å®šä»»æ„åç§°ï¼Œåªè¦è„šæœ¬ä¸­çš„æ¯ä¸ªåœºæ™¯åç§°éƒ½æ˜¯å”¯ä¸€çš„å³å¯ã€‚\nåœºæ™¯é…ç½®ç¤ºä¾‹ï¼š\nexport const options = { scenarios: { example_scenario: { // ä½¿ç”¨çš„æ‰§è¡Œå™¨åç§° executor: \u0026#39;shared-iterations\u0026#39;, // å¸¸è§„çš„åœºæ™¯é…ç½® startTime: \u0026#39;10s\u0026#39;, gracefulStop: \u0026#39;5s\u0026#39;, env: { EXAMPLEVAR: \u0026#39;testing\u0026#39; }, tags: { example_tag: \u0026#39;testing\u0026#39; }, // ä¸æ‰§è¡Œå™¨ç›¸å…³çš„ç‰¹æ®Šé…ç½® vus: 10, iterations: 200, maxDuration: \u0026#39;10s\u0026#39;, }, another_scenario: { /*...*/ }, }, }; æµ‹è¯•åœºæ™¯æ‰§è¡Œå™¨ å¯¹äºæ¯ä¸ª k6 åœºæ™¯ï¼ŒVUï¼ˆè™šæ‹Ÿç”¨æˆ·ï¼‰çš„å·¥ä½œè´Ÿè½½ç”±æ‰§è¡Œå™¨è¿›è¡Œè°ƒåº¦ã€‚æ‰§è¡Œå™¨é…ç½®æµ‹è¯•è¿è¡Œçš„æŒç»­æ—¶é—´ã€æµé‡æ˜¯å¦ä¿æŒæ’å®šæˆ–å˜åŒ–ï¼Œä»¥åŠå·¥ä½œè´Ÿè½½æ˜¯ç”± VU è¿˜æ˜¯åˆ°è¾¾ç‡ï¼ˆå³å¼€æ”¾æˆ–å…³é—­æ¨¡å‹ï¼‰å»ºæ¨¡çš„ã€‚\næˆ‘ä»¬è®¾ç½®çš„æµ‹è¯•åœºæ™¯å¯¹è±¡å¿…é¡»å®šä¹‰ executor å±æ€§ï¼Œå¹¶é€‰æ‹©å…¶ä¸­ä¸€ä¸ªé¢„å®šä¹‰çš„æ‰§è¡Œå™¨åç§°ã€‚æ‚¨é€‰æ‹©çš„æ‰§è¡Œå™¨å°†å†³å®š k6 å¦‚ä½•å¯¹è´Ÿè½½è¿›è¡Œå»ºæ¨¡ã€‚å¯é€‰é¡¹åŒ…æ‹¬ï¼š\næŒ‰è¿­ä»£æ¬¡æ•°ã€‚\nshared-iterations åœ¨ VU ä¹‹é—´å…±äº«è¿­ä»£ã€‚ per-vu-iterations è®©æ¯ä¸ª VU è¿è¡Œé…ç½®çš„è¿­ä»£ã€‚ æŒ‰ VU æ•°é‡ã€‚\nconstant-VUs ä»¥æ’å®šæ•°é‡å‘é€ VUã€‚ ramping-vus æ ¹æ®æ‚¨é…ç½®çš„é˜¶æ®µå¢åŠ  VU æ•°é‡ã€‚ æŒ‰è¿­ä»£ç‡ã€‚\nconstant-arrival-rate ä»¥æ’å®šé€Ÿç‡å¼€å§‹è¿­ä»£ã€‚ ramping-arrival-rate æ ¹æ®æ‚¨é…ç½®çš„é˜¶æ®µæé«˜è¿­ä»£ç‡ã€‚ é™¤äº†è¿™äº›é€šç”¨åœºæ™¯é€‰é¡¹ä¹‹å¤–ï¼Œæ¯ä¸ªæ‰§è¡Œç¨‹åºå¯¹è±¡è¿˜å…·æœ‰ç‰¹å®šäºå…¶å·¥ä½œè´Ÿè½½çš„å…¶ä»–é€‰é¡¹ï¼Œå¯ä»¥ç‚¹å‡»æ‰§è¡Œè€…è·å–æ›´å¤š\næµ‹è¯•åœºæ™¯é…ç½®é€‰é¡¹ é€‰é¡¹åç§° ç±»å‹ æè¿° é»˜è®¤å€¼ executor(å¿…å¡«) string å”¯ä¸€çš„æ‰§è¡Œè€…åç§° - startTime string è‡ªæµ‹è¯•å¼€å§‹ä»¥æ¥çš„æ—¶é—´åç§»ï¼Œæ­¤æ—¶è¯¥åœºæ™¯åº”å¼€å§‹æ‰§è¡Œã€‚ \u0026ldquo;0s\u0026rdquo; gracefulStop string åœ¨å¼ºè¡Œåœæ­¢è¿­ä»£ä¹‹å‰ç­‰å¾…è¿­ä»£å®Œæˆæ‰§è¡Œçš„æ—¶é—´ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»ä¼˜é›…åœæ­¢ã€‚ \u0026ldquo;30s\u0026rdquo; exec string è¦æ‰§è¡Œçš„å¯¼å‡º JS å‡½æ•°çš„åç§°ã€‚ \u0026ldquo;default\u0026rdquo; env object æ­¤åœºæ™¯ç‰¹å®šçš„ç¯å¢ƒå˜é‡ã€‚ {} tags object ç‰¹å®šäºæ­¤åœºæ™¯çš„æ ‡ç­¾ã€‚ {} æµ‹è¯•åœºæ™¯ç¤ºä¾‹ æµ‹è¯•åœºæ™¯çš„ demo è„šæœ¬ ä¼šç»“åˆä¸¤ç§åœºæ™¯å¹¶æŒ‰é¡ºåºæ‰§è¡Œï¼š\nshared_iter_scenario ç«‹å³å¯åŠ¨ã€‚10 ä¸ª VU å°è¯•å°½å¿«ä½¿ç”¨ 100 æ¬¡è¿­ä»£ï¼ˆæŸäº› VU å¯èƒ½æ¯”å…¶ä»– VU ä½¿ç”¨æ›´å¤šè¿­ä»£ï¼‰ã€‚ per_vu_scenario åœ¨ 10 ç§’åå¼€å§‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåä¸ª VU æ¯ä¸ªè¿è¡Œåæ¬¡è¿­ä»£ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nimport http from \u0026#39;k6/http\u0026#39;; export const options = { scenarios: { shared_iter_scenario: { executor: \u0026#39;shared-iterations\u0026#39;, vus: 10, iterations: 100, startTime: \u0026#39;0s\u0026#39;, }, per_vu_scenario: { executor: \u0026#39;per-vu-iterations\u0026#39;, vus: 10, iterations: 10, startTime: \u0026#39;10s\u0026#39;, }, }, }; export default function () { http.get(\u0026#39;https://test.k6.io/\u0026#39;); } è¿è¡Œåœºæ™¯ demo è„šæœ¬ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š\nè§‚çœ‹æµ‹è¯•ç»“æœï¼Œä½ ä¼šå‘ç°é…ç½®äº†åœºæ™¯çš„æµ‹è¯•ç»“æœä¸­ï¼Œé™¤äº†å¸¸è§„çš„æµ‹è¯•ç»“æœå¤–ï¼Œk6 è¾“å‡ºå°†åŒ…å«æœ‰å…³ demo åœºæ™¯çš„ è¯¦ç»†ç»“æœä¿¡æ¯ (shared_iter_scenario åœºæ™¯å’Œ per_vu_scenario åœºæ™¯çš„å¾ˆè¯¦ç»†çš„æŒ‡æ ‡ä¿¡æ¯)ã€‚\næ›´å¤šå…³äºæµ‹è¯•åœºæ™¯çš„å†…å®¹ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://k6.io/docs/using-k6/scenarios/\nå‚è€ƒæ–‡æ¡£ K6 æ–‡æ¡£ï¼šhttps://k6.io/docs/ k6 å®˜æ–¹ç½‘ç«™ï¼šhttps://k6.io/ K6 æ€§èƒ½æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/K6-Performance-Test-starter/ K6 æ€§èƒ½æµ‹è¯•æ•™ç¨‹ï¼šå¸¸ç”¨åŠŸèƒ½ï¼ˆ1ï¼‰- HTTP è¯·æ±‚ï¼ŒæŒ‡æ ‡å’Œæ£€æŸ¥:https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-2-thresholds-test-lifecycle-and-scenarios/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥ä»‹ç»äº† K6 æ€§èƒ½æµ‹è¯•å·¥å…·çš„å¸¸ç”¨åŠŸèƒ½ï¼Œä¸»è¦èšç„¦åœ¨é˜ˆå€¼è®¾ç½®ã€æµ‹è¯•ç”Ÿå‘½å‘¨æœŸå’Œåœºæ™¯è®¾è®¡æ–¹é¢ã€‚é˜è¿°äº†å¦‚ä½•åˆ©ç”¨ K6 åœ¨æ€§èƒ½æµ‹è¯•ä¸­è®¾å®šåˆç†çš„é˜ˆå€¼ï¼Œä»¥ä¾¿æœ‰æ•ˆç›‘æµ‹ç³»ç»Ÿçš„æ€§èƒ½è¡¨ç°ã€‚åŒæ—¶ï¼Œæ¢è®¨äº†æµ‹è¯•ç”Ÿå‘½å‘¨æœŸçš„é‡è¦æ€§ï¼Œä»¥åŠå¦‚ä½•åœ¨ä¸åŒé˜¶æ®µè¿›è¡Œæœ‰é’ˆå¯¹æ€§çš„æ€§èƒ½æµ‹è¯•ã€‚æ­¤å¤–ï¼Œåšæ–‡è¿˜è¯¦ç»†è§£é‡Šäº† K6 ä¸­åœºæ™¯çš„æ¦‚å¿µï¼Œä»¥åŠå¦‚ä½•æ ¹æ®å®é™…éœ€æ±‚è®¾è®¡å’Œé…ç½®åœºæ™¯ï¼Œç¡®ä¿æµ‹è¯•å…¨é¢è¦†ç›–å„ç§ä½¿ç”¨æƒ…æ™¯ã€‚é€šè¿‡æœ¬æ–‡ï¼Œè¯»è€…èƒ½å¤Ÿæ›´æ·±å…¥åœ°äº†è§£ K6 æ€§èƒ½æµ‹è¯•å·¥å…·åœ¨é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨ï¼Œæé«˜æ€§èƒ½æµ‹è¯•çš„æ•ˆæœå’Œå‡†ç¡®æ€§ã€‚","title":"K6 æ€§èƒ½æµ‹è¯•æ•™ç¨‹ï¼šå¸¸ç”¨åŠŸèƒ½ï¼ˆ2ï¼‰- é˜ˆå€¼ï¼Œæµ‹è¯•ç”Ÿå‘½å‘¨æœŸå’Œåœºæ™¯"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nç­‰å¾…ï¼Œä¸è¦ä¼‘çœ  åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/await-dont-sleep.md\nä¸€æ®µç®€è¦è¯´æ˜ åœ¨æµ‹è¯• UI æ—¶ï¼Œæ‚¨éœ€è¦å®šä¹‰åº”ç”¨ç¨‹åºå¿…é¡»ç»è¿‡çš„å…³é”®ç‚¹ã€‚åˆ°è¾¾è¿™äº›å…³é”®ç‚¹æ˜¯ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼Œå› ä¸ºå‡ ä¹ 100% çš„æƒ…å†µä¸‹ï¼ŒUI ä¸ä¼šåŒæ­¥æ›´æ–°ã€‚\nè¿™äº›å…³é”®ç‚¹ç§°ä¸ºç¡®å®šæ€§äº‹ä»¶ï¼Œå³æ‚¨çŸ¥é“å¿…é¡»å‘ç”Ÿçš„äº‹ä»¶ã€‚\nå…·ä½“å–å†³äºæ‚¨å®šä¹‰çš„äº‹ä»¶ä»¥åŠ UI è¾¾åˆ°è¿™äº›äº‹ä»¶çš„æ–¹å¼ï¼Œä½†é€šå¸¸ä¼šå­˜åœ¨ä¸€äº›â€œé•¿æ—¶é—´â€ç­‰å¾…ï¼Œä¾‹å¦‚ XHR è¯·æ±‚ï¼Œä»¥åŠä¸€äº›æ›´å¿«çš„ç­‰å¾…ï¼Œä¾‹å¦‚é‡æ–°æ¸²æŸ“æ›´æ–°ã€‚\nè§£å†³å¼‚æ­¥æ›´æ–°çš„æ–¹æ³•ä¼¼ä¹å¾ˆç®€å•ï¼šä¼‘çœ /æš‚åœæµ‹è¯•ä¸€æ®µæ—¶é—´ï¼Œå‡ æ¯«ç§’ã€å‡ åˆ†ä¹‹ä¸€ç§’ï¼Œç”šè‡³å‡ ç§’é’Ÿã€‚è¿™å¯ä»¥ä½¿æµ‹è¯•æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºå®ƒç»™åº”ç”¨ç¨‹åºè¶³å¤Ÿçš„æ—¶é—´æ¥æ›´æ–°è‡ªèº«å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¦æµ‹è¯•çš„ç¡®å®šæ€§äº‹ä»¶ã€‚\nè¯·æ³¨æ„ï¼Œé™¤äº†ç‰¹å®šå’Œå·²çŸ¥çš„ç­‰å¾…ï¼ˆä¾‹å¦‚ä½¿ç”¨ setInterval æˆ– setTimeout æ—¶ï¼‰ï¼Œå®Œå…¨æ— æ³•é¢„æµ‹ä¼‘çœ æ—¶é—´åº”è¯¥æ˜¯å¤šä¹…ï¼Œå› ä¸ºå®ƒå¯èƒ½å–å†³äºï¼š\nç½‘ç»œçŠ¶æ€ï¼ˆå¯¹äº XHR è¯·æ±‚ï¼‰ å¯ç”¨æœºå™¨èµ„æºçš„æ€»é‡ï¼ˆCPUã€RAM ç­‰ï¼‰ ä¾‹å¦‚ï¼ŒCI æµæ°´çº¿å¯èƒ½ä¼šå¯¹å…¶è¿›è¡Œé™åˆ¶ åœ¨æœ¬åœ°æœºå™¨ä¸Šï¼Œå…¶ä»–åº”ç”¨ç¨‹åºä¹Ÿå¯èƒ½ä¼šæ¶ˆè€—è¿™äº›èµ„æº å…¶ä»–èµ„æºæ¶ˆè€—æ›´æ–°çš„å¹¶å‘æƒ…å†µï¼ˆcanvas ç­‰ï¼‰ ä¸€ç³»åˆ—ä¸å¯é¢„æµ‹çš„å› ç´ ï¼Œå¦‚ Service Workersã€ç¼“å­˜ç®¡ç†ç­‰ï¼Œå¯èƒ½åŠ å¿«æˆ–å‡ç¼“ UI æ›´æ–°è¿‡ç¨‹ æ¯ä¸ªå›ºå®šçš„å»¶è¿Ÿéƒ½ä¼šä½¿æµ‹è¯•å˜å¾—æ›´åŠ è„†å¼±ï¼Œå¹¶å¢åŠ å…¶æŒç»­æ—¶é—´ã€‚æ‚¨éœ€è¦åœ¨è™šå‡è´Ÿé¢å’Œå¤¸å¼ çš„æµ‹è¯•æŒç»­æ—¶é—´ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚\nç­‰å¾…å¯åˆ†ä¸ºå››ä¸ªä¸»è¦ç±»åˆ«ï¼š\né¡µé¢åŠ è½½ç­‰å¾…ï¼šæµ‹è¯•åº”ç”¨ç¨‹åºæ—¶éœ€è¦å¤„ç†çš„ç¬¬ä¸€ä¸ªç­‰å¾…ï¼Œç­‰å¾…ä¸€ä¸ªå…è®¸æ‚¨äº†è§£é¡µé¢æ˜¯å¦å¯äº¤äº’çš„äº‹ä»¶ å†…å®¹ç­‰å¾…ï¼šç­‰å¾…åŒ¹é…é€‰æ‹©å™¨çš„ DOM å…ƒç´  XHR è¯·æ±‚ç­‰å¾…ï¼šç­‰å¾… XHR è¯·æ±‚å¼€å§‹æˆ–ç›¸åº”æ¥æ”¶åˆ° ä»¥ä¸‹æ‰€æœ‰ç¤ºä¾‹éƒ½åŸºäº Cypressã€‚\né¡µé¢åŠ è½½ç­‰å¾… // Cypress code cy.visit(\u0026#39;http://localhost:3000\u0026#39;) å†…å®¹ç­‰å¾… è¯·çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼Œäº†è§£å¦‚ä½•åœ¨å¯ç”¨å·¥å…·ä¸­å®ç°ç­‰å¾… DOM å…ƒç´ ã€‚\nå†…å®¹ç­‰å¾…ä»£ç ç¤ºä¾‹ ç­‰å¾…å…ƒç´  // Cypress code // it waits up to 4 seconds by default cy.get(\u0026#39;#form-feedback\u0026#39;) // the timeout can be customized cy.get(\u0026#39;#form-feedback\u0026#39;, { timeout: 5000 }) ç­‰å¾…å…·æœ‰ç‰¹å®šå†…å®¹çš„å…ƒç´  // Cypress code cy.get(\u0026#39;#form-feedback\u0026#39;).contains(\u0026#39;Success\u0026#39;) XHR-è¯·æ±‚ç­‰å¾… XHR-è¯·æ±‚ç­‰å¾…ä»£ç ç¤ºä¾‹ ç­‰å¾… XHR è¯·æ±‚/å“åº” // Cypress code cy.intercept(\u0026#39;http://dummy.restapiexample.com/api/v1/employees\u0026#39;).as(\u0026#39;employees\u0026#39;) cy.wait(\u0026#39;@employees\u0026#39;) .its(\u0026#39;response.body\u0026#39;) .then((body) =\u0026gt; { /* ... */ }) ç”± NoriSte åœ¨ dev.to å’Œ Mediumä¸Šè¿›è¡Œè”åˆå‘è¡¨.\næ˜æ™ºåœ°ä¸ºæµ‹è¯•æ–‡ä»¶å‘½å åŸæ–‡é“¾æ¥ï¼šhttps://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/generic-best-practices/name-test-files-wisely.md\nä¸€æ®µç®€è¦è¯´æ˜ ç¼–å†™å„ç§ä¸åŒçš„ UI æµ‹è¯•æ˜¯ä¸€ç§å¥½ä¹ æƒ¯ï¼Œè€Œé‡‡ç”¨ä¸€ç§å¸¸è§çš„æµ‹è¯•æ–‡ä»¶å‘½åæ–¹å¼æ›´æ˜¯æœ‰ç›Šçš„ã€‚\nè¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºé€šå¸¸æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä»…è¿è¡ŒæŸä¸€ç±»æµ‹è¯•ï¼Œå¯èƒ½çš„æƒ…å†µåŒ…æ‹¬ï¼š\nåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ åªéœ€è¦è¿è¡Œå…¶ä¸­ä¸€äº›æµ‹è¯• ä½ æ­£åœ¨æ›´æ”¹ä¸€äº›ç›¸å…³ç»„ä»¶ï¼Œå¹¶éœ€è¦æ£€æŸ¥ç”Ÿæˆçš„æ ‡è®°æ˜¯å¦å‘ç”Ÿäº†å˜åŒ– ä½ æ­£åœ¨æ›´æ”¹å…¨å±€ CSS è§„åˆ™ï¼Œåªéœ€è¿è¡Œè§†è§‰æµ‹è¯• ä½ æ­£åœ¨æ›´æ”¹åº”ç”¨ç¨‹åºæµç¨‹ï¼Œéœ€è¦è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºé›†æˆæµ‹è¯• ä½ çš„ DevOps åŒäº‹éœ€è¦ç¡®ä¿ä¸€åˆ‡æ­£å¸¸è¿è¡Œï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åªè¿è¡Œç«¯å¯¹ç«¯æµ‹è¯• ä½ çš„æ„å»ºæµæ°´çº¿éœ€è¦è¿è¡Œé›†æˆæµ‹è¯•å’Œç«¯å¯¹ç«¯æµ‹è¯• ä½ çš„ç›‘æ§æµæ°´çº¿éœ€è¦ä¸€ä¸ªè„šæœ¬æ¥è¿è¡Œç«¯å¯¹ç«¯æµ‹è¯•å’Œç›‘æ§æµ‹è¯• å¦‚æœä½ ä¸ºæµ‹è¯•å–ä¸€ä¸ªæ˜æ™ºçš„å‘½åï¼Œå°†ä¼šéå¸¸å®¹æ˜“åªè¿è¡Œå…¶ä¸­çš„æŸäº›ç±»å‹ã€‚\nCypress:\ncypress run --spec \\\u0026#34;cypress/integration/**/*.e2e.*\\\u0026#34; Jest:\njest --testPathPattern=e2e\\\\.*$ æ²¡æœ‰ä¸€ç§å…¨å±€çš„å‘½åæµ‹è¯•æ–‡ä»¶çš„æ–¹å¼ï¼Œä¸€ä¸ªå»ºè®®æ˜¯ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å‘½åï¼š\næ­£åœ¨æµ‹è¯•çš„ä¸»é¢˜ æµ‹è¯•çš„ç±»å‹ï¼ˆintegrationã€e2eã€monitoringã€componentç­‰ï¼‰ é€‰æ‹©çš„æµ‹è¯•åç¼€ï¼ˆtestã€specç­‰ï¼‰ æ–‡ä»¶æ‰©å±•åï¼ˆ.jsã€.tsã€.jsxã€.tsxç­‰ï¼‰ å®ƒä»¬ä¹‹é—´ç”¨å¥ç‚¹åˆ†éš”ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š\nauthentication.e2e.test.ts authentication.integration.test.ts site.monitoring.test.js login.component.test.tsx ç­‰ç­‰ã€‚ å‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-generic-best-practices-1-await-dont-sleep-and-name-test-files-wisely/","summary":"è¿™ç¯‡åšæ–‡æ¢è®¨äº† UI æµ‹è¯•çš„é€šç”¨æœ€ä½³å®è·µä¹‹ä¸€ï¼šç­‰å¾…ç­–ç•¥ã€‚å¼ºè°ƒäº†åœ¨ UI æµ‹è¯•ä¸­é¿å…ä½¿ç”¨ä¼‘çœ ï¼ˆsleepï¼‰æ–¹æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨ç­‰å¾…æœºåˆ¶æ¥ç¡®ä¿æµ‹è¯•è„šæœ¬ä¸åº”ç”¨ç¨‹åºçš„åŒæ­¥ã€‚æ­¤å¤–ï¼Œåšæ–‡æå€¡ä¸ºæµ‹è¯•æ–‡ä»¶é‡‡ç”¨æ˜æ™ºçš„å‘½åè§„èŒƒï¼Œä»¥æé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚é€šè¿‡è¿™äº›æœ€ä½³å®è·µï¼Œè¯»è€…å°†æ›´æœ‰æ•ˆåœ°ç¼–å†™ç¨³å¥çš„ UI æµ‹è¯•è„šæœ¬ï¼Œç¡®ä¿æµ‹è¯•çš„å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œæå‡æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹çš„è´¨é‡ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„é€šç”¨æœ€ä½³å®è·µï¼ˆä¸€ï¼‰ï¼šç­‰å¾…ï¼Œä¸è¦ä¼‘çœ å’Œæ˜æ™ºåœ°ä¸ºæµ‹è¯•æ–‡ä»¶å‘½å"},{"content":"K6 å¸¸ç”¨åŠŸèƒ½ HTTP Requests ä½¿ç”¨ K6 è¿›è¡Œæ€§èƒ½æµ‹è¯•çš„ç¬¬ä¸€æ­¥å°±æ˜¯å®šä¹‰è¦æµ‹è¯•çš„ HTTP è¯·æ±‚ã€‚\nGET è¯·æ±‚ä¾‹å­ ä½¿ç”¨ k6 new å‘½ä»¤åˆ›å»ºçš„ demo æµ‹è¯•è„šæœ¬ä¸­ï¼Œå·²ç»åŒ…å«äº†ä¸€ä¸ªç®€å•çš„ GET æ–¹æ³• HTTP è¯·æ±‚ï¼š\nimport http from \u0026#39;k6/http\u0026#39;; import { sleep } from \u0026#39;k6\u0026#39;; export default function() { http.get(\u0026#39;https://test.k6.io\u0026#39;); sleep(1); } POST è¯·æ±‚ä¾‹å­ è¿™ä¸ª POST è¯·æ±‚ä¾‹å­å±•ç¤ºä¸€äº›å¤æ‚çš„åœºæ™¯çš„åº”ç”¨ï¼ˆå¸¦æœ‰ç”µå­é‚®ä»¶/å¯†ç èº«ä»½éªŒè¯è´Ÿè½½çš„ POST è¯·æ±‚ï¼‰\nimport http from \u0026#39;k6/http\u0026#39;; export default function () { const url = \u0026#39;http://test.k6.io/login\u0026#39;; const payload = JSON.stringify({ email: \u0026#39;aaa\u0026#39;, password: \u0026#39;bbb\u0026#39;, }); const params = { headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, }, }; http.post(url, payload, params); } ä»¥ä¸Šå†…å®¹å‚è€ƒè‡ª K6 å®˜æ–¹æ–‡æ¡£\næ”¯æŒçš„ HTTP æ–¹æ³• K6 æä¾›çš„ HTTP æ¨¡å—èƒ½å¤„ç†å„ç§ HTTP è¯·æ±‚å’Œæ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯æ”¯æŒçš„ HTTP æ–¹æ³•åˆ—è¡¨ï¼š\næ–¹æ³• ä½œç”¨ batch() å¹¶è¡Œå‘å‡ºå¤šä¸ª HTTP è¯·æ±‚ï¼ˆä¾‹å¦‚æµè§ˆå™¨å¾€å¾€ä¼šè¿™æ ·åšï¼‰ã€‚ del() å‘å‡º HTTP DELETE è¯·æ±‚ã€‚ get() å‘å‡º HTTP GET è¯·æ±‚ã€‚ head() å‘å‡º HTTP HEAD è¯·æ±‚ã€‚ options() å‘å‡º HTTP OPTIONS è¯·æ±‚ã€‚ patch() å‘å‡º HTTP PATCH è¯·æ±‚ã€‚ post() å‘å‡º HTTP POST è¯·æ±‚ã€‚ put() å‘å‡º HTTP PUT è¯·æ±‚ã€‚ request() å‘å‡ºä»»ä½•ç±»å‹çš„ HTTP è¯·æ±‚ã€‚ HTTP è¯·æ±‚æ ‡ç­¾ K6 å…è®¸ä¸ºæ¯ä¸ª HTTP è¯·æ±‚æ·»åŠ æ ‡ç­¾ï¼Œç»“åˆæ ‡ç­¾å’Œåˆ†ç»„ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æµ‹è¯•ç»“æœä¸­æ›´å¥½åœ°ç»„ç»‡ï¼Œåˆ†ç»„è¯·æ±‚å’Œè¿‡æ»¤ç»“æœç»„ç»‡åˆ†æã€‚\nä»¥ä¸‹ä¸ºæ”¯æŒçš„æ ‡ç­¾åˆ—è¡¨ï¼š\næ ‡ç­¾ ä½œç”¨ name è¯·æ±‚åç§°ã€‚é»˜è®¤ä¸ºè¯·æ±‚çš„ URL method è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POSTã€PUT ç­‰ï¼‰ url é»˜è®¤ä¸ºè¯·æ±‚çš„ URLã€‚ expected_response é»˜è®¤æƒ…å†µä¸‹ï¼Œ200 åˆ° 399 ä¹‹é—´çš„å“åº”çŠ¶æ€ä¸º trueã€‚ä½¿ç”¨ setResponseCallback æ›´æ”¹é»˜è®¤è¡Œä¸ºã€‚ group å½“è¯·æ±‚åœ¨ç»„å†…è¿è¡Œæ—¶ï¼Œæ ‡è®°å€¼æ˜¯ç»„åç§°ã€‚é»˜è®¤ä¸ºç©ºã€‚ scenario å½“è¯·æ±‚åœ¨åœºæ™¯å†…è¿è¡Œæ—¶ï¼Œæ ‡è®°å€¼æ˜¯åœºæ™¯åç§°ã€‚é»˜è®¤ä¸º defaultã€‚ status å“åº”çŠ¶æ€ HTTP è¯·æ±‚ä½¿ç”¨ tag å’Œ group æ ‡ç­¾çš„ä¾‹å­ä¼šåœ¨åç»­çš„ demo ä¸­å±•ç¤ºã€‚\nå¤§å®¶ä¹Ÿå¯ä»¥å‚è€ƒå®˜æ–¹çš„ä¾‹å­ï¼šhttps://grafana.com/docs/k6/latest/using-k6/http-requests/\nMetrics æŒ‡æ ‡ æŒ‡æ ‡ç”¨äºè¡¡é‡ç³»ç»Ÿåœ¨æµ‹è¯•æ¡ä»¶ä¸‹çš„æ€§èƒ½ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œk6 ä¼šè‡ªåŠ¨æ”¶é›†å†…ç½®æŒ‡æ ‡ã€‚é™¤äº†å†…ç½®æŒ‡æ ‡ï¼Œæ‚¨è¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æŒ‡æ ‡ã€‚\næŒ‡æ ‡ä¸€èˆ¬åˆ†ä¸ºå››å¤§ç±»ï¼š\nè®¡æ•°å™¨ï¼ˆCountersï¼‰ï¼šå¯¹å€¼æ±‚å’Œã€‚ è®¡é‡å™¨ï¼ˆGaugesï¼‰ï¼šè·Ÿè¸ªæœ€å°ã€æœ€å¤§å’Œæœ€æ–°çš„å€¼ã€‚ æ¯”ç‡ï¼ˆRatesï¼‰ï¼šè·Ÿè¸ªéé›¶å€¼å‘ç”Ÿçš„é¢‘ç‡ã€‚ è¶‹åŠ¿ï¼ˆTrendsï¼‰ï¼šè®¡ç®—å¤šä¸ªå€¼çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚å‡å€¼ã€æ¨¡å¼æˆ–ç™¾åˆ†ä½æ•°ï¼‰ã€‚ è¦ä½¿æµ‹è¯•æ–­è¨€ç¬¦åˆéœ€æ±‚æ ‡å‡†ï¼Œå¯ä»¥æ ¹æ®æ€§èƒ½æµ‹è¯•è¦æ±‚çš„æŒ‡æ ‡æ¡ä»¶ç¼–å†™é˜ˆå€¼ï¼ˆè¡¨è¾¾å¼çš„å…·ä½“å†…å®¹å–å†³äºæŒ‡æ ‡ç±»å‹ï¼‰ã€‚\nä¸ºäº†åç»­è¿›è¡Œç­›é€‰æŒ‡æ ‡ï¼Œå¯ä»¥ä½¿ç”¨æ ‡ç­¾å’Œåˆ†ç»„ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°ç»„ç»‡æµ‹è¯•ç»“æœã€‚\næµ‹è¯•ç»“æœè¾“å‡ºæ–‡ä»¶å¯ä»¥ä»¥å„ç§æ‘˜è¦å’Œç»†ç²’åº¦æ ¼å¼å¯¼å‡ºæŒ‡æ ‡ï¼Œå…·ä½“ä¿¡æ¯è¯·å‚é˜…ç»“æœè¾“å‡ºæ–‡æ¡£ã€‚ï¼ˆåé¢æµ‹è¯•ç»“æœè¾“å‡ºæ–‡æ¡£ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸€éƒ¨åˆ†ï¼‰\nK6 å†…ç½®æŒ‡æ ‡ æ¯ä¸ª k6 æµ‹è¯•æ‰§è¡Œéƒ½ä¼šå‘å‡ºå†…ç½®å’Œè‡ªå®šä¹‰æŒ‡æ ‡ã€‚æ¯ä¸ªæ”¯æŒçš„åè®®ä¹Ÿæœ‰å…¶ç‰¹å®šçš„æŒ‡æ ‡ã€‚\næ ‡å‡†å†…ç½®æŒ‡æ ‡ æ— è®ºæµ‹è¯•ä½¿ç”¨ä»€ä¹ˆåè®®ï¼Œk6 å§‹ç»ˆæ”¶é›†ä»¥ä¸‹æŒ‡æ ‡ï¼š\næŒ‡æ ‡åç§° æŒ‡æ ‡åˆ†ç±» æŒ‡æ ‡æè¿° vus Gauge å½“å‰æ´»è·ƒè™šæ‹Ÿç”¨æˆ·æ•° vus_max Gauge æœ€å¤§å¯èƒ½è™šæ‹Ÿç”¨æˆ·æ•°ï¼ˆVU èµ„æºå·²é¢„å…ˆåˆ†é…ï¼Œä»¥é¿å…æ‰©å¤§è´Ÿè½½æ—¶å½±å“æ€§èƒ½ï¼‰ iterations è¿­ä»£ Counter VU æ‰§è¡Œ JS è„šæœ¬ï¼ˆdefault å‡½æ•°ï¼‰çš„æ€»æ¬¡æ•°ã€‚ iteration_duration Trend å®Œæˆä¸€æ¬¡å®Œæ•´è¿­ä»£çš„æ—¶é—´ï¼ŒåŒ…æ‹¬åœ¨ setup å’Œ teardown ä¸­èŠ±è´¹çš„æ—¶é—´ã€‚è¦è®¡ç®—ç‰¹å®šåœºæ™¯çš„è¿­ä»£å‡½æ•°çš„æŒç»­æ—¶é—´ï¼Œè¯·å°è¯•æ­¤è§£å†³æ–¹æ³• dropped_iterations Counter ç”±äºç¼ºå°‘ VUï¼ˆå¯¹äºåˆ°è¾¾ç‡æ‰§è¡Œç¨‹åºï¼‰æˆ–æ—¶é—´ä¸è¶³ï¼ˆåŸºäºè¿­ä»£çš„æ‰§è¡Œç¨‹åºä¸­çš„ maxDuration å·²è¿‡æœŸï¼‰è€Œæœªå¯åŠ¨çš„è¿­ä»£æ¬¡æ•°ã€‚å…³äºåˆ é™¤è¿­ä»£ data_received Counter æ¥æ”¶åˆ°çš„æ•°æ®é‡ã€‚æ­¤ç¤ºä¾‹ä»‹ç»å¦‚ä½•è·Ÿè¸ªå•ä¸ª URL çš„æ•°æ®ã€‚ data_sent Counter å‘é€çš„æ•°æ®é‡ã€‚è·Ÿè¸ªå•ä¸ª URL çš„æ•°æ®ä»¥è·Ÿè¸ªå•ä¸ª URL çš„æ•°æ®ã€‚ checks Rate è®¾ç½®çš„æ£€æŸ¥æˆåŠŸç‡ã€‚ æŒ‡æ ‡åˆ†ç±»åˆ†åˆ«ä¸ºï¼šè®¡æ•°å™¨ï¼ˆCounterï¼‰ã€è®¡é‡å™¨ï¼ˆGaugesï¼‰ã€æ¯”ç‡ï¼ˆRatesï¼‰ã€è¶‹åŠ¿ï¼ˆTrendsï¼‰\nHTTP ç‰¹å®šçš„å†…ç½®æŒ‡æ ‡ HTTP ç‰¹å®šçš„å†…ç½®æŒ‡æ ‡æ˜¯ä»…åœ¨ HTTP è¯·æ±‚æœŸé—´æ‰ä¼šç”Ÿæˆå’Œæ”¶é›†çš„æŒ‡æ ‡ã€‚å…¶ä»–ç±»å‹çš„è¯·æ±‚ï¼ˆä¾‹å¦‚ WebSocketï¼‰ä¸ä¼šç”Ÿæˆè¿™äº›æŒ‡æ ‡ã€‚\næ³¨æ„ï¼šå¯¹äºæ‰€æœ‰ http_req_* æŒ‡æ ‡ï¼Œæ—¶é—´æˆ³åœ¨è¯·æ±‚ç»“æŸæ—¶å‘å‡ºã€‚æ¢å¥è¯è¯´ï¼Œæ—¶é—´æˆ³å‘ç”Ÿåœ¨ k6 æ”¶åˆ°å“åº”æ­£æ–‡æœ«å°¾æˆ–è¯·æ±‚è¶…æ—¶æ—¶ã€‚\nä¸‹è¡¨åˆ—å‡ºäº† HTTP ç‰¹å®šçš„å†…ç½®æŒ‡æ ‡ï¼š\næŒ‡æ ‡åç§° æŒ‡æ ‡åˆ†ç±» æŒ‡æ ‡æè¿° http_reqs Counter k6 æ€»å…±ç”Ÿæˆäº†å¤šå°‘ä¸ª HTTP è¯·æ±‚ã€‚ http_req_blocked Trend åœ¨å‘èµ·è¯·æ±‚ä¹‹å‰é˜»å¡ï¼ˆç­‰å¾…ç©ºé—² TCP è¿æ¥æ§½ï¼‰æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚floatç±»å‹ http_req_connecting Trend ä¸è¿œç¨‹ä¸»æœºå»ºç«‹ TCP è¿æ¥æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚floatç±»å‹ http_req_tls_handshaking Trend ä¸è¿œç¨‹ä¸»æœºæ¡æ‰‹ TLS ä¼šè¯æ‰€èŠ±è´¹çš„æ—¶é—´ http_req_sending Trend å‘è¿œç¨‹ä¸»æœºå‘é€æ•°æ®æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚floatç±»å‹ http_req_waiting Trend ç­‰å¾…è¿œç¨‹ä¸»æœºå“åº”æ‰€èŠ±è´¹çš„æ—¶é—´ï¼ˆä¹Ÿç§°ä¸ºâ€œç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´â€æˆ–â€œTTFBâ€ï¼‰ã€‚floatç±»å‹ http_req_receiving Trend ä»è¿œç¨‹ä¸»æœºæ¥æ”¶å“åº”æ•°æ®æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚floatç±»å‹ http_req_duration Trend è¯·æ±‚çš„æ€»æ—¶é—´ã€‚å®ƒç­‰äº http_req_sending + http_req_waiting + http_req_receivingï¼ˆå³è¿œç¨‹æœåŠ¡å™¨å¤„ç†è¯·æ±‚å’Œå“åº”æ‰€éœ€çš„æ—¶é—´ï¼Œæ²¡æœ‰åˆå§‹ DNS æŸ¥æ‰¾/è¿æ¥æ—¶é—´ï¼‰ã€‚floatç±»å‹ http_req_failed Rate æ ¹æ® setResponseCallback çš„å¤±è´¥è¯·æ±‚ç‡ã€‚ æŒ‡æ ‡åˆ†ç±»åˆ†åˆ«ä¸ºï¼šè®¡æ•°å™¨ï¼ˆCounterï¼‰ã€è®¡é‡å™¨ï¼ˆGaugesï¼‰ã€æ¯”ç‡ï¼ˆRatesï¼‰ã€è¶‹åŠ¿ï¼ˆTrendsï¼‰\nå…¶ä»–å†…ç½®æŒ‡æ ‡ K6 å†…ç½®æŒ‡æ ‡é™¤äº†æ ‡å‡†å†…ç½®æŒ‡æ ‡å’Œ HTTP ç‰¹å®šçš„å†…ç½®æŒ‡æ ‡å¤–ï¼Œè¿˜æœ‰å…¶ä»–å†…ç½®æŒ‡æ ‡ï¼š\nBrowser metrics æµè§ˆå™¨æŒ‡æ ‡ï¼šhttps://grafana.com/docs/k6/latest/using-k6/metrics/reference/#browser Built-in WebSocket metrics å†…ç½® WebSocket æŒ‡æ ‡ï¼šhttps://grafana.com/docs/k6/latest/using-k6/metrics/reference/#websockets Built-in gRPC metrics å†…ç½® gRPC æŒ‡æ ‡ï¼šhttps://grafana.com/docs/k6/latest/using-k6/metrics/reference/#grpc è‡ªå®šä¹‰æŒ‡æ ‡ é™¤äº†ç³»ç»Ÿå†…å»ºçš„æŒ‡æ ‡ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è®¡ç®—ä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„æŒ‡æ ‡ï¼Œæˆ–è€…åˆ©ç”¨ Response.timings å¯¹è±¡ä¸ºç‰¹å®šçš„ä¸€ç»„ç«¯ç‚¹åˆ›å»ºæŒ‡æ ‡ã€‚\næ¯ç§æŒ‡æ ‡ç±»å‹éƒ½æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºç”Ÿæˆè‡ªå®šä¹‰æŒ‡æ ‡ã€‚è¯¥æ„é€ å‡½æ•°ä¼šç”Ÿæˆä¸€ä¸ªå£°æ˜ç±»å‹çš„æŒ‡æ ‡å¯¹è±¡ã€‚æ¯ç§ç±»å‹éƒ½æœ‰ä¸€ä¸ª add æ–¹æ³•ï¼Œç”¨äºè®°å½•æŒ‡æ ‡æµ‹é‡å€¼ã€‚\næ³¨æ„ï¼šå¿…é¡»åœ¨ init ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºè‡ªå®šä¹‰æŒ‡æ ‡ã€‚è¿™ä¼šé™åˆ¶å†…å­˜å¹¶ç¡®ä¿ K6 å¯ä»¥éªŒè¯æ‰€æœ‰é˜ˆå€¼æ˜¯å¦è¯„ä¼°äº†å®šä¹‰çš„æŒ‡æ ‡ã€‚\nè‡ªå®šä¹‰æŒ‡æ ‡ demo ç¤ºä¾‹ ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•åˆ›å»ºç­‰å¾…æ—¶é—´çš„è‡ªå®šä¹‰è¶‹åŠ¿æŒ‡æ ‡ï¼š\né¡¹ç›®æ–‡ä»¶ä¸­çš„ demo_custom_metrics.js æ–‡ä»¶å·²ç»åŒ…å«äº†è¿™ä¸ª demo ç¤ºä¾‹ï¼Œå¯ä»¥ç›´æ¥è¿è¡ŒæŸ¥çœ‹ç»“æœã€‚\n1.ä»å¯¼å…¥ k6/metrics æ¨¡å—å¼•å…¥ Trend æ„é€ å‡½æ•° import { Trend } from \u0026#39;k6/metrics\u0026#39;; ç­‰å¾…æ—¶é—´è¶‹åŠ¿æŒ‡æ ‡å±äºè¶‹åŠ¿ï¼ˆTrendsï¼‰æŒ‡æ ‡ï¼Œæ‰€ä»¥éœ€è¦ä» k6/metrics æ¨¡å—å¼•å…¥ Trend æ„é€ å‡½æ•°ã€‚\n2.åœ¨ init ä¸Šä¸‹æ–‡ä¸­æ„é€ ä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰åº¦é‡ Trend å¯¹è±¡ const myTrend = new Trend(\u0026#39;waiting_time\u0026#39;); åœ¨ init ä¸Šä¸‹æ–‡ä¸­æ„é€ ä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰åº¦é‡ Trend å¯¹è±¡ï¼Œè„šæœ¬ä¸­çš„å¯¹è±¡ä¸º myTrendï¼Œå…¶æŒ‡æ ‡åœ¨ç»“æœè¾“å‡ºä¸­æ˜¾ç¤ºä¸º waiting_timeã€‚\n3.åœ¨è„šæœ¬ä¸­ä½¿ç”¨ add æ–¹æ³•è®°å½•æŒ‡æ ‡æµ‹é‡å€¼ export default function() { const res = http.get(\u0026#39;https://test.k6.io\u0026#39;); myTrend.add(res.timings.waiting); } åœ¨è„šæœ¬ä¸­ä½¿ç”¨ add æ–¹æ³•è®°å½•æŒ‡æ ‡æµ‹é‡å€¼ï¼Œè¿™é‡Œä½¿ç”¨äº† res.timings.waitingï¼Œå³ç­‰å¾…æ—¶é—´ã€‚\n4.demo_custom_metrics.js è‡ªå®šä¹‰æŒ‡æ ‡å®Œæ•´ä»£ç  import http from \u0026#39;k6/http\u0026#39;; import { Trend } from \u0026#39;k6/metrics\u0026#39;; const myTrend = new Trend(\u0026#39;waiting_time\u0026#39;); export default function () { const res = http.get(\u0026#39;https://httpbin.test.k6.io\u0026#39;); myTrend.add(res.timings.waiting); console.log(myTrend.name); // waiting_time } 5.è¿è¡Œ demo_custom_metrics.js å¹¶æŸ¥çœ‹è‡ªåŠ¨åŒ–è¶‹åŠ¿æŒ‡æ ‡ k6 run demo_custom_metrics.js è¿è¡Œç»“æœå¦‚ä¸‹ï¼š\nå¯ä»¥çœ‹åˆ°ï¼Œè‡ªå®šä¹‰æŒ‡æ ‡ waiting_time å·²ç»åœ¨ç»“æœè¾“å‡ºä¸­æ˜¾ç¤ºå‡ºæ¥äº†ã€‚\næ›´å¤šå…³äºè‡ªå®šä¹‰æŒ‡æ ‡çš„å†…å®¹ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://k6.io/docs/using-k6/metrics/#custom-metrics\nChecks æ£€æŸ¥ è¿™é‡Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ–­è¨€ï¼Œå³å¯¹æµ‹è¯•ç»“æœè¿›è¡ŒéªŒè¯ã€‚\næ£€æŸ¥ç”¨æ¥æ£€éªŒä¸åŒæµ‹è¯•ä¸­çš„å…·ä½“æµ‹è¯•æ¡ä»¶æ˜¯å¦æ­£ç¡®ç›¸åº”ï¼Œå’Œæˆ‘ä»¬å¸¸è§„åœ¨åšå…¶ä»–ç±»å‹æµ‹è¯•æ—¶ä¹Ÿä¼šå¯¹æµ‹è¯•ç»“æœè¿›è¡ŒéªŒè¯ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿæ˜¯å¦ä»¥æœŸæœ›çš„å†…å®¹ä½œå‡ºå“åº”ã€‚\nä¾‹å¦‚ï¼Œä¸€ä¸ªéªŒè¯å¯ä»¥ç¡®ä¿ POST è¯·æ±‚çš„å“åº”çŠ¶æ€ä¸º 201ï¼Œæˆ–è€…å“åº”ä½“çš„å¤§å°æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚\næ£€æŸ¥ç±»ä¼¼äºè®¸å¤šæµ‹è¯•æ¡†æ¶ä¸­ç§°ä¸ºæ–­è¨€çš„æ¦‚å¿µï¼Œä½†æ˜¯K6 åœ¨éªŒè¯å¤±è´¥å¹¶ä¸ä¼šä¸­æ­¢æµ‹è¯•æˆ–ä»¥å¤±è´¥çŠ¶æ€ç»“æŸã€‚ç›¸åï¼Œk6 ä¼šåœ¨æµ‹è¯•ç»§ç»­è¿è¡Œæ—¶è¿½è¸ªå¤±è´¥éªŒè¯çš„æ¯”ç‡ã€‚\næ¯ä¸ªæ£€æŸ¥éƒ½åˆ›å»ºä¸€ä¸ªé€Ÿç‡æŒ‡æ ‡ã€‚è¦ä½¿æ£€æŸ¥ä¸­æ­¢æˆ–å¯¼è‡´æµ‹è¯•å¤±è´¥ï¼Œå¯ä»¥å°†å…¶ä¸é˜ˆå€¼ç»“åˆä½¿ç”¨ã€‚\nä¸‹é¢ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ä¸åŒç±»å‹çš„æ£€æŸ¥ï¼Œä»¥åŠå¦‚ä½•åœ¨æµ‹è¯•ç»“æœä¸­æŸ¥çœ‹æ£€æŸ¥ç»“æœã€‚\n1.æ£€æŸ¥ HTTP å“åº”çŠ¶æ€ K6 çš„æ£€æŸ¥éå¸¸é€‚ç”¨äºä¸ HTTP è¯·æ±‚ç›¸å…³çš„å“åº”æ–­è¨€ã€‚\nç¤ºä¾‹ï¼Œä»¥ä¸‹ä»£ç ç‰‡æ®µæ¥æ£€æŸ¥ HTTP å“åº”ä»£ç ä¸º 200ï¼š\nimport { check } from \u0026#39;k6\u0026#39;; import http from \u0026#39;k6/http\u0026#39;; export default function () { const res = http.get(\u0026#39;https://httpbin.test.k6.io\u0026#39;); check(res, { \u0026#39;HTTP response code is status 200\u0026#39;: (r) =\u0026gt; r.status === 200, }); } è¿è¡Œè¯¥è„šæœ¬ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š\nå½“è„šæœ¬åŒ…å«æ£€æŸ¥æ—¶ï¼Œæ‘˜è¦æŠ¥å‘Šä¼šæ˜¾ç¤ºé€šè¿‡äº†å¤šå°‘æµ‹è¯•æ£€æŸ¥ã€‚\nåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¯·æ³¨æ„æ£€æŸ¥â€œHTTP response code is status 200â€åœ¨è°ƒç”¨æ—¶æ˜¯ 100% æˆåŠŸçš„ã€‚\n2.æ£€æŸ¥ HTTP å“åº”ä½“ é™¤äº†æ£€æŸ¥ HTTP å“åº”çŠ¶æ€å¤–ï¼Œè¿˜å¯ä»¥æ£€æŸ¥ HTTP å“åº”ä½“ã€‚\nç¤ºä¾‹ï¼Œä»¥ä¸‹ä»£ç ç‰‡æ®µæ¥æ£€æŸ¥ HTTP å“åº”ä½“å¤§å°ä¸º 9591 bytesï¼š\nimport { check } from \u0026#39;k6\u0026#39;; import http from \u0026#39;k6/http\u0026#39;; export default function () { const res = http.get(\u0026#39;https://httpbin.test.k6.io\u0026#39;); check(res, { \u0026#39;HTTP response body size is 9591 bytes\u0026#39;: (r) =\u0026gt; r.body.length == 9591, }); } è¿è¡Œè¯¥è„šæœ¬ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š\nå½“è„šæœ¬åŒ…å«æ£€æŸ¥æ—¶ï¼Œæ‘˜è¦æŠ¥å‘Šä¼šæ˜¾ç¤ºé€šè¿‡äº†å¤šå°‘æµ‹è¯•æ£€æŸ¥ã€‚\nåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¯·æ³¨æ„æ£€æŸ¥â€œHTTP response body size is 9591 bytesâ€åœ¨è°ƒç”¨æ—¶æ˜¯ 100% æˆåŠŸçš„ã€‚\n3.æ·»åŠ å¤šä¸ªæ£€æŸ¥ æœ‰æ—¶å€™æˆ‘ä»¬åœ¨ä¸€ä¸ªæµ‹è¯•è„šæœ¬ä¸­éœ€è¦æ·»åŠ å¤šä¸ªæ£€æŸ¥ï¼Œé‚£å¯ä»¥ç›´æ¥åœ¨å•â€‹â€‹ä¸ª check() è¯­å¥ä¸­æ·»åŠ å¤šä¸ªæ£€æŸ¥ï¼Œå¦‚ä¸‹é¢è„šæœ¬æ‰€ç¤ºï¼š\nimport { check } from \u0026#39;k6\u0026#39;; import http from \u0026#39;k6/http\u0026#39;; export default function () { const res = http.get(\u0026#39;https://httpbin.test.k6.io\u0026#39;); check(res, { \u0026#39;HTTP response code is status 200\u0026#39;: (r) =\u0026gt; r.status === 200, \u0026#39;HTTP response body size is 9591 bytes\u0026#39;: (r) =\u0026gt; r.body.length == 9591, }); } è¿è¡Œè¯¥è„šæœ¬ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š\nåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªæ£€æŸ¥éƒ½æ˜¯æ­£å¸¸é€šè¿‡çš„ï¼ˆè°ƒç”¨æ˜¯ 100% æˆåŠŸçš„ï¼‰ã€‚\næ³¨æ„ï¼šå½“æ£€æŸ¥å¤±è´¥æ—¶ï¼Œè„šæœ¬å°†ç»§ç»­æˆåŠŸæ‰§è¡Œï¼Œå¹¶ä¸”ä¸ä¼šè¿”å›â€œå¤±è´¥â€é€€å‡ºçŠ¶æ€ã€‚å¦‚æœæ‚¨éœ€è¦æ ¹æ®æ£€æŸ¥ç»“æœä½¿æ•´ä¸ªæµ‹è¯•å¤±è´¥ï¼Œåˆ™å¿…é¡»å°†æ£€æŸ¥ä¸é˜ˆå€¼ç»“åˆèµ·æ¥ã€‚è¿™åœ¨ç‰¹å®šç¯å¢ƒä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œä¾‹å¦‚å°† k6 é›†æˆåˆ° CI ç®¡é“ä¸­æˆ–åœ¨å®‰æ’æ€§èƒ½æµ‹è¯•æ—¶æ¥æ”¶è­¦æŠ¥ã€‚\nå‚è€ƒæ–‡æ¡£ K6 æ–‡æ¡£ï¼šhttps://k6.io/docs/ k6 å®˜æ–¹ç½‘ç«™ï¼šhttps://k6.io/ K6 æ€§èƒ½æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/K6-Performance-Test-starter/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-common-functions-1-http-request-metrics-and-checks/","summary":"è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº† K6 ä¸­çš„ HTTP è¯·æ±‚ï¼ˆhttp requestï¼‰åŠŸèƒ½ï¼Œè§£æäº†å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡å’Œæ£€æŸ¥åŠŸèƒ½ã€‚å­¦ä¼šå¦‚ä½•ä½¿ç”¨ K6 è¿›è¡Œå¼ºå¤§çš„æ€§èƒ½æµ‹è¯•ï¼Œé€šè¿‡ HTTP è¯·æ±‚æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼Œäº†è§£æ€§èƒ½æŒ‡æ ‡ä»¥è¯„ä¼°ç³»ç»Ÿå“åº”ã€‚æ–‡ç« è¿˜æ·±å…¥è®²è§£äº†å¦‚ä½•é…ç½®å’Œæ‰§è¡Œæ£€æŸ¥ï¼Œç¡®ä¿æ€§èƒ½ç¬¦åˆé¢„æœŸæ ‡å‡†ã€‚æ— è®ºæ‚¨æ˜¯åˆå­¦è€…è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„æ€§èƒ½æµ‹è¯•ä¸“ä¸šäººå‘˜ï¼Œè¿™ç¯‡æ•™ç¨‹å°†ä¸ºæ‚¨æä¾›å®ç”¨çŸ¥è¯†ï¼ŒåŠ©æ‚¨å……åˆ†å‘æŒ¥ K6 çš„æ€§èƒ½æµ‹è¯•æ½œåŠ›ã€‚ç‚¹å‡»é“¾æ¥ï¼Œå¼€å¯é«˜æ•ˆæ€§èƒ½æµ‹è¯•ä¹‹æ—…ï¼","title":"K6 æ€§èƒ½æµ‹è¯•æ•™ç¨‹ï¼šå¸¸ç”¨åŠŸèƒ½ï¼ˆ1ï¼‰- HTTP è¯·æ±‚ï¼ŒæŒ‡æ ‡å’Œæ£€æŸ¥"},{"content":"æ–‡ç« ç”± UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›® å†…å®¹ç¿»è¯‘è€Œæ¥ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„è¯å¯ä»¥å» UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®é˜…è¯»åŸæ–‡ã€‚\nä»€ä¹ˆæ ·çš„æµ‹è¯•ç­–ç•¥æ‰æ›´åˆç† ä¸Šä¸€ç¯‡æ–‡ç« è®²åˆ°äº†ä¸åŒçš„æµ‹è¯•ç±»å‹ï¼Œä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä»€ä¹ˆæ ·çš„æµ‹è¯•ç­–ç•¥æ‰æ›´ä¸ºåˆç†ã€‚ ä¼šä»åœ¨å¼€å§‹é˜¶æ®µï¼Œé¿å…è¿½æ±‚å®Œç¾ä¸»ä¹‰ï¼Œé€‰æ‹©ä¸€ä¸ªå‚è€ƒæµè§ˆå™¨ï¼Œå‘ç°äº† bugï¼Ÿå…ˆç¼–å†™æµ‹è¯•ï¼Œç„¶åå†ç€æ‰‹ä¿®å¤ï¼Œå’Œå•ä¸ªé•¿çš„ç«¯åˆ°ç«¯æµ‹è¯•è¿˜æ˜¯å¤šä¸ªå°çš„ç‹¬ç«‹æµ‹è¯•ï¼Ÿç­‰æ–¹é¢é˜è¿°äº†ä»€ä¹ˆæ ·çš„æµ‹è¯•ç­–ç•¥æ‰æ›´åˆç†\nåœ¨å¼€å§‹é˜¶æ®µï¼Œé¿å…è¿½æ±‚å®Œç¾ä¸»ä¹‰ æµ‹è¯•çœŸçš„æ”¹å˜äº†ä½ çš„å·¥ä½œæ–¹å¼ï¼Œä½†å°±åƒæ‰€æœ‰äº‹æƒ…ä¸€æ ·ï¼Œéœ€è¦ä¸€äº›ç»éªŒæ‰èƒ½çœŸæ­£å‘æŒ¥å…¶å¨åŠ›ã€‚åœ¨ä¸€å¼€å§‹ï¼ŒåŠ¡å¿…é¿å…å®Œç¾ä¸»ä¹‰çš„é™·é˜±ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\næµ‹è¯•æœ¬è´¨ä¸Šå°±æ˜¯å°ç¨‹åºã€‚å®Œç¾ä¸»ä¹‰å¯èƒ½ä¼šå¯¼è‡´ä½ åœ¨äº†è§£å¦‚ä½•å¤„ç†ä¸åŒçš„æµ‹è¯•ä¸Šä¸‹æ–‡ä¹‹å‰ç¼–å†™éå¸¸å¤æ‚çš„æµ‹è¯•ã€‚\nå¤æ‚çš„æµ‹è¯•æ˜¯ä¸ªå¤§æ•Œäººï¼Œå› ä¸ºè°ƒè¯•å¤±è´¥çš„æµ‹è¯•æ¯”è°ƒè¯•å¤±è´¥çš„åº”ç”¨ç¨‹åºæ›´åŠ å›°éš¾ã€‚è€Œä¸”å¤æ‚çš„æµ‹è¯•è®©ä½ å¤±å»äº†æµ‹è¯•å®è·µæœ¬èº«çš„ä¼˜åŠ¿ï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œæœ€ç»ˆä¸å¯é¿å…åœ°ä¼šè®©ä½ æ”¾å¼ƒã€‚å¦‚æœä½ æœ‰è¿™æ ·çš„ç»å†ï¼Œä¸è¦æ°”é¦ï¼Œå¯¹å¾ˆå¤šæµ‹è¯•åˆå­¦è€…æ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„ï¼ˆå¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯ï¼Œè¿™å°±æ˜¯æˆ‘å¼€å§‹å†™è¿™ä¸ª repo çš„åŸå›  ğŸ˜Šï¼‰ï¼Œä¸è¦å®³æ€•å‘åŒäº‹æˆ–å…¶ä»–å¼€å‘äººå‘˜å¯»æ±‚å¸®åŠ©ã€‚\nè¯¯æŠ¥ï¼šå®Œç¾ä¸»ä¹‰å¯¼è‡´å¾ˆå¤šè¯¯æŠ¥ã€‚è¯¯æŠ¥æ˜¯æŒ‡åº”ç”¨ç¨‹åºæŒ‰é¢„æœŸå·¥ä½œï¼Œä½†æµ‹è¯•å¤±è´¥çš„æƒ…å†µã€‚\nè¯¯æŠ¥åœ¨ä¸€å¼€å§‹ç¡®å®è®©äººæ³„æ°”ï¼Œå› ä¸ºä½ å¼€å§‹å†™æµ‹è¯•æ˜¯ä¸ºäº†æœ‰ä¸€ä¸ªç›Ÿå‹æ¥æ£€æŸ¥åº”ç”¨ç¨‹åºçŠ¶æ€\u0026hellip; ä½†æœ€ç»ˆä½ å´å¾—åˆ°äº†å¦ä¸€ä¸ªéœ€è¦ç»´æŠ¤çš„åº”ç”¨ç¨‹åºï¼Œè€Œæµ‹è¯•å¹¶æ²¡æœ‰æä¾›ä»»ä½•å¸®åŠ©ã€‚å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ä¸è¯¯æŠ¥ä½œæ–—äº‰ï¼Œè¯·åœä¸‹æ¥ï¼Œé‡æ–°å­¦ä¹ ï¼Œå¹¶å¯»æ±‚å¸®åŠ©ï¼\næµ‹è¯•çš„å®ç”¨æ€§ï¼šæˆåŠŸçš„æµ‹è¯•åœ¨å¤±è´¥æ—¶ç›´æ¥æŒ‡å‘é—®é¢˜ã€‚æ­£ç¡®çš„æ–­è¨€å’Œç¡®å®šæ€§äº‹ä»¶ä½¿ä½ çš„æµ‹è¯•å¼ºå¤§è€Œä¸”éå¸¸é‡è¦çš„æ˜¯ï¼Œå®ƒä»¬åœ¨å¤±è´¥æ—¶æ˜¯æœ‰ç”¨çš„ã€‚ç›¸åï¼Œè¿‡å¤šçš„æ–­è¨€å’Œæ£€æŸ¥å¯èƒ½ä¼šä½¿ä½ çš„æµ‹è¯•å› ä¸ºæ— ç”¨è€Œå˜å¾—è„†å¼±ã€‚\næ‰€è°“å®Œç¾ä¸»ä¹‰æ˜¯æŒ‡æ£€æŸ¥æ¯ä¸€ä¸ªå‰ç«¯ç»†èŠ‚ã€‚åœ¨å¼€å§‹æ—¶ï¼Œä½ çš„æœ‰é™çš„æµ‹è¯•ç»éªŒä¸å…è®¸ä½ æœ‰é’ˆå¯¹æ€§åœ°æµ‹è¯•æ‰€æœ‰çš„äº¤äº’ã€‚å¼€å§‹æ—¶ï¼Œæµ‹è¯•ä¸€äº›ç®€å•çš„äº‹æƒ…ï¼Œæ¯”å¦‚\né¡µé¢æ˜¯å¦æ­£ç¡®åŠ è½½ï¼Ÿ èœå•æŒ‰é’®æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ ç”¨æˆ·æ˜¯å¦èƒ½å¤Ÿå¡«å†™è¡¨å•å¹¶æˆåŠŸè·³è½¬åˆ°æ„Ÿè°¢é¡µé¢ï¼Ÿ è€Œåœ¨å¼€å§‹é˜¶æ®µï¼Œä¸è¦è¿‡äºå…³æ³¨æµ‹è¯•ä¸€äº›è¯¸å¦‚\næ¡ä»¶æ•°æ®åŠ è½½ å¤æ‚çš„è¡¨å•è§„åˆ™ æ— æ§åˆ¶çš„ï¼ˆç¬¬ä¸‰æ–¹ï¼‰é›†æˆ å…ƒç´ é€‰æ‹©å™¨ ç­‰å¤æ‚çš„äº¤äº’ã€‚ ä¸ºäº†é¿å…é™·å…¥å®Œç¾ä¸»ä¹‰çš„é™·é˜±ï¼Œåˆå­¦è€…çš„å¾…åŠäº‹é¡¹æ¸…å•å¯ä»¥æ˜¯ï¼š\né€‰æ‹©æœ€ç®€å•çš„æµ‹è¯•å¯¹è±¡ï¼ˆå¯¹ç”¨æˆ·æœ‰ç”¨çš„ä¸œè¥¿ï¼‰ã€‚ ä»ç”¨æˆ·çš„è§’åº¦è€ƒè™‘ã€‚è®°ä½ç”¨æˆ·å…³å¿ƒå†…å®¹å’ŒåŠŸèƒ½ï¼Œè€Œä¸å…³å¿ƒé€‰æ‹©å™¨å’Œå†…éƒ¨åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚ ç¼–å†™ä½ çš„æµ‹è¯•ã€‚ è¿è¡Œæµ‹è¯•å¤šæ¬¡ä»¥ç¡®ä¿å®ƒçš„ç¨³å®šæ€§ã€‚ å½“æµ‹è¯•æˆåŠŸæ—¶ï¼Œåœ¨å‰ç«¯åº”ç”¨ç¨‹åºä¸­æ’å…¥ä¸€ä¸ªå¯¼è‡´å®ƒå¤±è´¥çš„é”™è¯¯ï¼Œç„¶åæ£€æŸ¥æµ‹è¯•æ˜¯å¦å¤±è´¥ã€‚ç„¶åç§»é™¤ä½ æ•…æ„æ’å…¥çš„é”™è¯¯ã€‚ ä»¥æ— å¤´å’Œéæ— å¤´æ¨¡å¼è¿è¡Œæµ‹è¯•ã€‚ æ ¹æ®ä½ çš„ç»éªŒï¼ˆä¹Ÿé—®é—®åŒäº‹ï¼‰ï¼Œæ€è€ƒä»ä½ æµ‹è¯•çš„å†…å®¹çš„è§’åº¦çœ‹ï¼Œå¯èƒ½å¯¼è‡´å‰ç«¯åº”ç”¨ç¨‹åºå¤±è´¥çš„åŸå› æ˜¯ä»€ä¹ˆã€‚ æ¨¡æ‹Ÿä¸åŒçš„å‰ç«¯æ•…éšœï¼ˆå…³é—­æœåŠ¡å™¨ã€æ’å…¥å…¶ä»–é”™è¯¯ï¼‰å¹¶æ£€æŸ¥æµ‹è¯•æ˜¯å¦æä¾›è¶³å¤Ÿçš„åé¦ˆï¼Œä»¥äº†è§£å“ªé‡Œå¤±è´¥äº†ã€‚ ä»…å¯¹ä¸¤ä¸‰ç§æ•…éšœè¿›è¡Œæµ‹è¯•ï¼Œè®°ä½ä½ æœ‰é™çš„ç»éªŒå¯èƒ½å¯¼è‡´ä½ æµ‹è¯•é”™è¯¯çš„ä¸œè¥¿ã€‚ ç„¶åï¼Œè½¬ç§»åˆ°å¦ä¸€ä¸ªæµ‹è¯•å¯¹è±¡å¹¶é‡å¤æ‰€æœ‰å…ˆå‰çš„æ­¥éª¤ã€‚ è½¯ä»¶æµ‹è¯•æ˜¯ä¸€åœºå¥‡å¦™çš„æ—…ç¨‹ï¼Œè¿™ä¸ª repo çš„ç›®æ ‡æ˜¯å¸®åŠ©ä½ é¿å…æœ€å¸¸è§çš„é™·é˜±ã€‚\nå»ºè®®çš„æµç¨‹åªæ˜¯å¯èƒ½æ–¹æ³•ä¹‹ä¸€ã€‚æˆ‘çŸ¥é“ä¸€åˆ‡éƒ½æ˜¯ä¸»è§‚çš„ï¼Œè¯·ä¸ºæ¯ä¸ªå»ºè®®æå‡ºè¯·æ±‚ä»¥è¿›è¡Œæ”¹è¿›ï¼\né€‰æ‹©ä¸€ä¸ªå‚è€ƒæµè§ˆå™¨ æ¯ä¸ªäººéƒ½å…³å¿ƒè·¨æµè§ˆå™¨æµ‹è¯•ã€‚æˆ‘ä»¬é€šå¸¸ä¹ æƒ¯åœ¨æ¯ä¸ªæµè§ˆå™¨ä¸Šæ‰‹åŠ¨æµ‹è¯•æ‰€æœ‰å†…å®¹ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œä¸åŒæµè§ˆå™¨ä¹‹é—´å­˜åœ¨è®¸å¤šå·®å¼‚ã€‚å½“æˆ‘ä»¬å¼€å§‹è¯„ä¼°åˆé€‚çš„æµ‹è¯•å·¥å…·æ—¶ï¼Œè·¨æµè§ˆå™¨æµ‹è¯•æ˜¯ä¸€ä¸ªé‡è¦çš„è¯é¢˜ï¼Œä¹Ÿæ˜¯ä½ åœ¨è€ƒè™‘æ—¶å¯èƒ½é¦–å…ˆæƒ³åˆ°çš„ã€‚ä½†æ˜¯ä¸è¦æ‹…å¿ƒï¼šé¦–å…ˆä»åŠŸèƒ½æµ‹è¯•å’Œè§†è§‰æµ‹è¯•åˆ†ç¦»å¼€å§‹ï¼Œè¿™æ˜¯æ­£ç¡®è¯„ä¼°è·¨æµè§ˆå™¨æ”¯æŒéœ€æ±‚ï¼ˆä¹Ÿæ˜¯é€‰æ‹©æ­£ç¡®æµ‹è¯•å·¥å…·çš„ç¬¬ä¸€æ­¥ï¼‰ã€‚è§†è§‰æµ‹è¯•å¯ä»¥é›†æˆåˆ°æ¯ä¸ªæµ‹è¯•å·¥å…·ä¸­ï¼Œæ„Ÿè°¢è¯¸å¦‚ Applitools å’Œ Percy è¿™æ ·çš„æœåŠ¡ã€‚\næ¢å¥è¯è¯´ï¼Œä¸è¦ä»…ä»…åŸºäºè·¨æµè§ˆå™¨æ”¯æŒæ¥é€‰æ‹©æµ‹è¯•å·¥å…·ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®ï¼š\nSelenium å’Œ Puppeteer æ˜¯é€šç”¨çš„è‡ªåŠ¨åŒ–å·¥å…·ã€‚å®ƒä»¬å¯ä»¥ç”¨ä½œæµ‹è¯•å·¥å…·ï¼ˆæœ‰è®¸å¤šæ’ä»¶å’Œæ¨¡å—å¯å¸®åŠ©ä½ å®ç°ï¼‰ï¼Œä½†å®ƒä»¬å¹¶éä¸“ä¸ºæµ‹è¯•è€Œè®¾è®¡ï¼Œå› æ­¤å®ƒä»¬ç¼ºå°‘ä¸€äº›é›†æˆå®ç”¨å·¥å…·ï¼Œè¿™å¯èƒ½ä½¿æµ‹è¯•ç¼–å†™æ›´åŠ ç®€ä¾¿ã€‚\nåªè€ƒè™‘ Cypressã€Playwright å’Œ TestCafÃ©ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸“ä¸ºç®€åŒ– UI æµ‹è¯•è¿‡ç¨‹è€Œåˆ›å»ºçš„å·¥å…·ã€‚è¿™äº›å·¥å…·è‡ªåŠ¨å¤„ç†ä¸€åŠçš„æœ€ä½³å®è·µï¼Œè€Œåœ¨æµ‹è¯•ä¸­çš„ä¸€äº›æ–¹é¢ï¼Œå®ƒä»¬å¯èƒ½æ›´ç¬¦åˆä½ çš„éœ€æ±‚ã€‚åœ¨ UI æµ‹è¯•æ–¹é¢ï¼Œç”±äºå…¶\nå›°éš¾æ€§ï¼ŒèŠ±äº›æ—¶é—´è¯•éªŒè¿™äº›å·¥å…·æ˜¯å€¼å¾—çš„ã€‚\nä»”ç»†æ€è€ƒä½ éœ€è¦æµ‹è¯•ä»€ä¹ˆã€‚å¦‚æœä½ éœ€è¦æµ‹è¯•ç‰¹å®šçš„ç§»åŠ¨èƒ½åŠ›ï¼Œè¯·é€‰æ‹© TestCafÃ©ï¼Œä½†å¦‚æœä½ åªéœ€è¦æµ‹è¯•è¡¨å•å’ŒæŒ‰é’®æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œä½ åœ¨é€‰æ‹©ä¸Šå°±æ›´åŠ çµæ´»ã€‚\næŸ¥çœ‹ Cypress Test Runnerï¼Œè¿™æ˜¯ä½¿ Cypress å¼‚äºå¸¸äººçš„å·¥å…·ï¼Œå¯¹äºæµ‹è¯•å¼€å‘è¿‡ç¨‹ä¸­éå¸¸æœ‰å¸®åŠ©ã€‚\nç ”ç©¶ Playwright åœ¨è°ƒè¯•æ–¹é¢çš„ä¼˜åŠ¿ã€‚Playwright éå¸¸å¿«é€Ÿç¨³å®šï¼Œæœ€è¿‘å…¶å¼€å‘ä½“éªŒæœ‰äº†å¾ˆå¤§æ”¹è¿›ã€‚\nè·¨æµè§ˆå™¨æµ‹è¯•é€šå¸¸æ¶‰åŠåˆ°è§†è§‰æµ‹è¯•ï¼ˆCSS æµè§ˆå™¨å·®å¼‚ï¼‰ï¼Œä½†è¿™ä¸åŠŸèƒ½æµ‹è¯•ä¸åŒã€‚è§†è§‰æµ‹è¯•å¾—ç›Šäºè®¸å¤šä¸“ç”¨æ’ä»¶å’Œå·¥å…·çš„æ”¯æŒã€‚è¯¦ç»†äº†è§£ è§†è§‰æµ‹è¯•å¯¹åº”çš„ç« èŠ‚ Applitoolsï¼Œå…¶ä¸­æˆ‘ä»¬è®¨è®ºäº†ä¸€äº›ä¸“ç”¨äº§å“ï¼Œè¿™äº›äº§å“å¯ä»¥ä¸å‡ ä¹æ‰€æœ‰æµ‹è¯•å·¥å…·é›†æˆï¼Œé€šè¿‡å°†è¢«æµ‹è¯•é¡µé¢çš„å¿«ç…§ä¸Šä¼ åˆ°å…¶æœåŠ¡å™¨å¹¶è¿›è¡Œå‘ˆç°æ¥è¿›è¡Œå·¥ä½œã€‚\nä½ è¿˜å¯ä»¥åœ¨ ç­‰å¾…ï¼Œä¸æ˜¯ä¼‘çœ  ç« èŠ‚ä¸­äº†è§£å„ç§æµ‹è¯•å·¥å…·ä¹‹é—´çš„ä¸€äº›å·®å¼‚ã€‚\nå‘ç°äº† bugï¼Ÿå…ˆç¼–å†™æµ‹è¯•ï¼Œç„¶åå†ç€æ‰‹ä¿®å¤ æ‰€ä»¥ï¼Œå½“ä½ åœ¨å‰ç«¯åº”ç”¨ç¨‹åºä¸­å‘ç°é”™è¯¯å¹¶å·²ç»è¿›è¡Œäº†è°ƒè¯•æ—¶ï¼Œä½ å¯ä»¥ç³»ç»Ÿåœ°å¤ç°å®ƒï¼Œå‡†å¤‡å¥½ä¿®å¤å®ƒã€‚ä»¥æµ‹è¯•ä¸ºå¯¼å‘çš„æ€ç»´å¿…é¡»ç»å†ä»¥ä¸‹æ­¥éª¤ï¼š\nç¡®å®šé¢„æœŸçš„è¡Œä¸ºã€‚ ç¼–å†™ä¸€ä¸ªæµ‹è¯•ï¼Œæ—¨åœ¨ä»¥æ­£ç¡®çš„æ–¹å¼ä½¿ç”¨å‰ç«¯åº”ç”¨ç¨‹åºã€‚ æµ‹è¯•å¿…é¡»å¤±è´¥ï¼Œå› ä¸ºé”™è¯¯ä¸å…è®¸ç”¨æˆ·å®Œæˆä»»åŠ¡ã€‚ ä¿®å¤é”™è¯¯ã€‚ æ£€æŸ¥æµ‹è¯•ç°åœ¨æ˜¯å¦é€šè¿‡ã€‚ ä¸ºä»€ä¹ˆè¦é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Ÿä¸ºä»€ä¹ˆè¦ç¼–å†™æµ‹è¯•å‘¢ï¼Ÿæˆ‘çŸ¥é“ç›´æ¥ä¿®å¤é”™è¯¯å¯èƒ½çœ‹èµ·æ¥æ›´å¿«ï¼Œä½†è¯·è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š\né€šå¸¸æƒ…å†µä¸‹ï¼Œä½ çš„æµ‹è¯•å·¥å…·æ¯”ä½ æ›´å¿«åœ°è¾¾åˆ°æ˜¾ç¤ºé”™è¯¯çš„åº”ç”¨ç¨‹åºçŠ¶æ€ï¼ˆå‚è§ä½¿ç”¨æµ‹è¯•å·¥å…·ä½œä¸ºä¸»è¦å¼€å‘å·¥å…· ç« èŠ‚ï¼‰ã€‚\næœ‰æ—¶ä½ è®¤ä¸ºä½ èƒ½å¤Ÿç³»ç»Ÿåœ°å¤ç°é”™è¯¯ï¼Œä½†è¿™å¹¶ä¸æ€»æ˜¯æ­£ç¡®çš„ã€‚ç¼–å†™ä¸€ä¸ªæ­ç¤ºé”™è¯¯çš„æµ‹è¯•å¯ä»¥ç¡®ä¿ä½ ç™¾åˆ†ä¹‹ç™¾ç¡®å®šé”™è¯¯æ˜¯å¯é‡ç°çš„ï¼Œæ’é™¤äº†è®¸å¤šåå·®å˜é‡ï¼Œå¦‚ç°æœ‰çš„ä¼šè¯ã€ç¼“å­˜ã€æœåŠ¡å·¥ä½œè€…ã€æµè§ˆå™¨æ‰©å±•ã€æµè§ˆå™¨ç‰ˆæœ¬ç­‰ï¼Œè¿™äº›å¯èƒ½ä¼šå½±å“ä½ çš„ä¿¡å¿ƒã€‚æœ‰æ—¶ä½ å¯èƒ½ä¼šå‘ç°ä½ å¹¶æ²¡æœ‰å®Œå…¨æ­£ç¡®åœ°è¯†åˆ«é”™è¯¯ã€‚\nä¸æ­¤åŒæ—¶ï¼Œå½“æµ‹è¯•é€šè¿‡äº†ä½ çš„ä¿®å¤æ—¶ï¼Œä½ ç¡®å®çŸ¥é“ä½ çš„è§£å†³æ–¹\næ¡ˆæŒ‰é¢„æœŸå·¥ä½œã€‚å¯èƒ½å½±å“é”™è¯¯è¯†åˆ«è¿‡ç¨‹çš„ç›¸åŒå˜é‡å¯èƒ½ä¼šå½±å“å·¥ä½œæ•ˆæœçš„è™šå‡æ„Ÿè§‰ã€‚\næœ‰äº†æµ‹è¯•ï¼Œé”™è¯¯å°±å¯ä»¥æ°¸è¿œä¿®å¤äº†ï¼ æµ‹è¯•å°†è¢«æ‰§è¡Œæˆåƒä¸Šä¸‡æ¬¡ï¼Œè®©ä½ å¯¹é”™è¯¯ä¿®å¤æ„Ÿåˆ°ç™¾åˆ†ä¹‹ç™¾çš„ä¿¡å¿ƒã€‚\næˆåŠŸçš„æµ‹è¯•å¯ä»¥ä½œä¸ºä½ æ‰€åšå·¥ä½œçš„éªŒè¯è½¨è¿¹ã€‚\næœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼šç¡®ä¿ä½ ç¼–å†™çš„æµ‹è¯•ä¸€å¼€å§‹æ˜¯å¤±è´¥çš„ï¼è€Œä¸”å®ƒä¹‹æ‰€ä»¥å¤±è´¥æ˜¯å› ä¸ºæœ‰é”™è¯¯ï¼\næµ‹è¯•ä¸ä»…ä»…æ˜¯ä¸ºäº†é‡ç°é”™è¯¯å¹¶åœ¨è§†è§‰ä¸Šæ£€æŸ¥å®ƒï¼Œè€Œæ˜¯å¿…é¡»åœ¨ä¿®å¤é”™è¯¯åè·å¾—ç§¯æçš„åé¦ˆã€‚ä¸é”™è¯¯ç›¸å…³çš„æµ‹è¯•å¦‚æœä¸€å¼€å§‹å°±æ²¡æœ‰å¤±è´¥ï¼Œé‚£çœŸçš„éå¸¸å±é™©ï¼Œå› ä¸ºä½ å¯èƒ½è®¤ä¸ºä½ åšå¾—å¾ˆå¥½ï¼Œè€Œå®é™…ä¸Šä½ ä»ä¸€å¼€å§‹å°±æ²¡æœ‰å®Œå…¨æ­£ç¡®åœ°é‡ç°é”™è¯¯ã€‚\nä½œä¸ºä¸€èˆ¬è§„åˆ™ï¼šç ´ç¢çš„æµç¨‹å¿…é¡»æœ‰ä¸€ä¸ªç ´ç¢çš„æµ‹è¯•ï¼Œä¸€ä¸ªæˆåŠŸçš„æµ‹è¯•å¿…é¡»ä¸ä¸€ä¸ªæ­£å¸¸å·¥ä½œçš„åº”ç”¨ç¨‹åºç›¸å…³è”ã€‚\nå•ä¸ªé•¿çš„ç«¯åˆ°ç«¯æµ‹è¯•è¿˜æ˜¯å¤šä¸ªå°çš„ç‹¬ç«‹æµ‹è¯•ï¼Ÿ åœ¨è®¨è®ºå¯¹ CRUD åº”ç”¨è¿›è¡Œæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•ç»„ç»‡â€œåˆ›å»ºâ€ã€â€œä¿®æ”¹â€å’Œâ€œåˆ é™¤â€ç«¯åˆ°ç«¯ï¼ˆE2Eï¼‰æµ‹è¯•å‘¢ï¼Ÿ\nå®Œæ•´çš„é€‰é¡¹åˆ—è¡¨å¦‚ä¸‹ï¼š\næœ‰ä¸‰ä¸ªå°çš„ E2E æµ‹è¯•ï¼Œä¾èµ–äºæ‰§è¡Œé¡ºåºï¼ˆæµ‹è¯• B å‡è®¾æµ‹è¯• A å·²è¿è¡Œï¼‰- è¿™æ˜¯å”¯ä¸€çš„ä¸è‰¯è§£å†³æ–¹æ¡ˆï¼Œæˆ‘å°†è§£é‡ŠåŸå› ã€‚ æœ‰ä¸‰ä¸ªå°çš„ E2E æµ‹è¯•ï¼Œç‹¬ç«‹äºæ‰§è¡Œé¡ºåºï¼ˆæµ‹è¯• B ä¸å—æµ‹è¯• A æ˜¯å¦è¿è¡Œçš„å½±å“ï¼‰- ä»ç†è®ºä¸Šè®²ï¼Œæ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ä½†ä»ç„¶éœ€è¦å¤§é‡æ ·æ¿ä»£ç ï¼Œè€Œä¸”ä¸ºäº†å¿«é€Ÿæ‰§è¡Œã€‚ æœ‰ä¸€ä¸ªæ‰§è¡Œæ‰€æœ‰æ“ä½œçš„æ‰©å±• E2E æµ‹è¯• - å¯¹äºæœ¬æ–‡ä»‹ç»çš„æ¡ˆä¾‹æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŠ˜ä¸­æ–¹æ¡ˆã€‚ è¿™å–å†³äºæƒ…å†µï¼Œæˆ‘æåˆ°çš„å¤§å¤šæ•°é—®é¢˜ä¸ E2E æµ‹è¯•çš„éšå«é—®é¢˜æœ‰å…³ï¼Œè¿™æ˜¯æˆ‘ä»¬åº”è¯¥å°½é‡å‡å°‘è¿™ç±»æµ‹è¯•çš„å¼ºçƒˆä¿¡å·ã€‚ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘æ›´å–œæ¬¢æŠ•èµ„æ—¶é—´ç¼–å†™æ— éœ€æœåŠ¡å™¨çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ E2E æµ‹è¯•ã€‚ç»§ç»­é˜…è¯»ï¼Œä½ å°†äº†è§£åŸå› ã€‚\n1 - æœ‰ä¸‰ä¸ªå°çš„ E2E æµ‹è¯•ï¼Œä¾èµ–äºæ‰§è¡Œé¡ºåºï¼ˆæµ‹è¯• B å‡è®¾æµ‹è¯• A å·²è¿è¡Œï¼‰ æµ‹è¯•æµç¨‹å¦‚ä¸‹ï¼š\nå¼€å§‹ï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ æµ‹è¯• 1: åˆ›å»ºå®ä½“ æµ‹è¯• 2: ä¿®æ”¹å®ä½“ æµ‹è¯• 3: åˆ é™¤å®ä½“ ç»“æŸï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™äº›æµ‹è¯•ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œæ˜¯ä¾èµ–äºæ‰§è¡Œé¡ºåºã€‚ä¸ºäº†æµ‹è¯• CRUD æµç¨‹ï¼Œæœ‰ä¸‰ä¸ªä¸»è¦æµ‹è¯•ï¼š\u0026ldquo;åˆ›å»ºå®ä½“\u0026rdquo;ã€\u0026ldquo;ä¿®æ”¹å®ä½“\u0026rdquo;ã€\u0026ldquo;åˆ é™¤å®ä½“\u0026rdquo;ã€‚ç¬¬äºŒä¸ªæµ‹è¯•ï¼ˆ\u0026ldquo;ä¿®æ”¹å®ä½“\u0026rdquo;ï¼‰å‡è®¾åœ¨å…¶å¯åŠ¨æ—¶åº”ç”¨ç¨‹åºçŠ¶æ€æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºå®ƒåœ¨ \u0026ldquo;åˆ›å»ºå®ä½“\u0026rdquo; ä¹‹åè¿è¡Œã€‚\u0026ldquo;åˆ é™¤å®ä½“\u0026rdquo; ä¹Ÿå¿…é¡»åœ¨ \u0026ldquo;ä¿®æ”¹å®ä½“\u0026rdquo; ä¹‹åè¿è¡Œï¼Œä¾æ­¤ç±»æ¨ã€‚\nå°†å¤šä¸ªæµ‹è¯•è€¦åˆåœ¨ä¸€èµ·æ˜¯ä¸€ç§åæ¨¡å¼ï¼ŒåŸå› å¦‚ä¸‹ï¼š\nè¯¯æŠ¥ï¼šä¸€æ—¦ä¸€ä¸ªæµ‹è¯•å¤±è´¥ï¼Œåç»­æµ‹è¯•ä¼šè¿ç»­å¤±è´¥ã€‚ éš¾ä»¥è°ƒè¯•ï¼šç”±äºä¸ç¡®å®šæ€§è¾ƒé«˜ï¼Œç†è§£å¤±è´¥çš„æ ¹æœ¬åŸå› æ›´åŠ å¤æ‚ã€‚æµ‹è¯•å¤±è´¥æ˜¯å› ä¸ºä»£ç æœ¬èº«å¤±è´¥ï¼Ÿè¿˜æ˜¯å› ä¸ºå…ˆå‰æµ‹è¯•çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Ÿç„¶åï¼Œå½“ä¸€ä¸ªæµ‹è¯•å¤±è´¥æ—¶ï¼Œä½ å¿…é¡»è°ƒè¯•ä¸¤ä¸ªæµ‹è¯•ã€‚ éš¾ä»¥è°ƒè¯•ï¼ˆå†æ¬¡ï¼‰ï¼šå¼€å‘äººå‘˜ä¼šæµªè´¹å¤§é‡æ—¶é—´ï¼Œå› ä¸ºä»–ä»¬æ— æ³•è¿è¡Œå•ä¸ªæµ‹è¯•ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ skip å’Œ only ä»…è¿è¡Œå…¶ä¸­ä¸€éƒ¨åˆ†æµ‹è¯•ã€‚ éš¾ä»¥é‡æ„ï¼šæµ‹è¯•æ— æ³•ç§»åŠ¨åˆ°å…¶ä»–ä½ç½®ã€‚å¦‚æœæµ‹è¯•ä»£ç å˜å¾—å¤ªé•¿ã€å¤ªå¤æ‚ç­‰ï¼Œä½ æ— æ³•å°†å…¶ç§»åŠ¨åˆ°ä¸“ç”¨æ–‡ä»¶/ç›®å½•ä¸­ï¼Œå› ä¸ºå®ƒä¾èµ–äºå…ˆå‰çš„æµ‹è¯•ã€‚ éš¾ä»¥é˜…è¯»ï¼šè¯»è€…æ— æ³•çŸ¥é“ä¸€ä¸ªæµ‹è¯•çš„ä½œç”¨ï¼Œå› ä¸ºä»–ä»¬è¿˜å¿…é¡»äº†è§£å…ˆå‰çš„æµ‹è¯•ã€‚ä½ å¿…é¡»é˜…è¯»ä¸¤ä¸ªæµ‹è¯•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªï¼Œè¿™æ˜¯ä¸å¥½çš„ã€‚ æˆ‘ä¸å»ºè®®ä»¥è¿™ç§æ–¹å¼ç¼–å†™è€¦åˆçš„æµ‹è¯•ï¼Œä½†æˆ‘æƒ³åŒ…å«å®ƒä»¬ä»¥ç¡®ä¿æ‚¨æ˜ç™½åŸå› ã€‚\n2 - è®¾è®¡ä¸‰ä¸ªå°å‹ç«¯åˆ°ç«¯ï¼ˆE2Eï¼‰æµ‹è¯•ï¼Œä½¿å…¶ç‹¬ç«‹äºæ‰§è¡Œé¡ºåº ä¸ºäº†ç¡®ä¿æ¯ä¸ªæµ‹è¯•çš„ç‹¬ç«‹æ€§ï¼Œæ¯ä¸ªæµ‹è¯•åœ¨è¿è¡Œå‰éƒ½åº”è¯¥åˆ›å»ºæ‰€éœ€çš„åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œç„¶ååœ¨å®Œæˆåè¿›è¡Œæ¸…ç†ã€‚ç›¸è¾ƒäºåŸæœ‰çš„é¡ºåºï¼ˆåˆ›å»º-\u0026gt;ä¿®æ”¹-\u0026gt;åˆ é™¤ï¼‰ï¼Œå‰æ–‡æåˆ°çš„æµç¨‹åº”è¯¥è°ƒæ•´å¦‚ä¸‹ï¼ˆæ–œä½“ è¡¨ç¤ºä¸åŸæœ‰æµç¨‹ç›¸æ¯”çš„æ–°æ­¥éª¤ï¼‰ï¼š\nå¼€å§‹ï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ æµ‹è¯• 1ï¼šåˆ›å»ºå®ä½“ ä¹‹å‰ï¼šåŠ è½½é¡µé¢ï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ åˆ›å»ºå®ä½“ ä¹‹åï¼šåˆ é™¤å®ä½“ï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ æµ‹è¯• 2ï¼šä¿®æ”¹å®ä½“ ä¹‹å‰ï¼šé€šè¿‡ API åˆ›å»ºå®ä½“ ä¹‹å‰ï¼šåŠ è½½é¡µé¢ï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ ä¿®æ”¹å®ä½“ ä¹‹åï¼šé€šè¿‡ API åˆ é™¤å®ä½“ï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ æµ‹è¯• 3ï¼šåˆ é™¤å®ä½“ ä¹‹å‰ï¼šé€šè¿‡ API åˆ›å»ºå®ä½“ ä¹‹å‰ï¼šåŠ è½½é¡µé¢ï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ åˆ é™¤å®ä½“ ä¹‹åï¼šåˆ é™¤æ“ä½œï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ ç»“æŸï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¯ä¸ªæµ‹è¯•éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¹‹å‰å’Œä¹‹åçš„æ“ä½œç›´æ¥é€šè¿‡è°ƒç”¨æœåŠ¡å™¨ API å®Œæˆï¼Œå› ä¸ºé€šè¿‡ UI å®Œæˆè¿™äº›æ“ä½œå°†ä¼šå¾ˆæ…¢ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºæµ‹è¯•å˜å¾—æ›´åŠ è€—æ—¶ï¼Œå› ä¸ºæ¯ä¸ªæµ‹è¯•éƒ½éœ€è¦åˆ›å»ºå®ä½“ï¼Œå¹¶ä¸”æ¯ä¸ªæµ‹è¯•éƒ½éœ€è¦è®¿é—®é¡µé¢ã€‚å½“åº”ç”¨ç¨‹åºåŠ è½½éœ€è¦èŠ±è´¹ 10 ç§’é’Ÿæ—¶ï¼ˆHasura çš„æ§åˆ¶å°æœ€åˆçš„æƒ…å†µï¼‰ï¼Œé‡æ–°åŠ è½½åº”ç”¨ç¨‹åºå°†æˆä¸ºä¸€ä¸ªé—®é¢˜ã€‚\nä¸ºäº†ç¡®ä¿æµ‹è¯•æ—¢ç‹¬ç«‹åˆé«˜æ•ˆï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥æ”¹è¿›ä¸Šè¿°æµç¨‹ï¼š\nå……åˆ†åˆ©ç”¨å‰ä¸€ä¸ªæµ‹è¯•çš„åº”ç”¨çŠ¶æ€ã€‚ åŒæ—¶ï¼Œå¦‚æœå°šæœªè¿è¡Œæµ‹è¯•ï¼Œè¿˜éœ€è¦åˆ›å»ºæ‰€éœ€çš„åº”ç”¨çŠ¶æ€ã€‚ å…·ä½“æ¥è¯´ï¼Œæµç¨‹å¦‚ä¸‹ï¼ˆä¸å‰ä¸€ç« èŠ‚ç›¸æ¯”ï¼Œæ–œä½“è¡¨ç¤ºæ–°æ­¥éª¤ï¼‰ï¼š\nå¼€å§‹ï¼ˆåº”ç”¨çŠ¶æ€ä¸ºç©ºï¼‰\næµ‹è¯• 1ï¼š åˆ›å»ºå®ä½“\nä¹‹å‰ï¼šå®ä½“ æ˜¯å¦å­˜åœ¨ï¼Ÿ å¦ï¼šæ²¡é—®é¢˜ï¼ æ˜¯ï¼šé€šè¿‡ API åˆ é™¤å®ä½“ ä¹‹å‰ï¼šåŠ è½½é¡µé¢ï¼ˆåº”ç”¨çŠ¶æ€ä¸ºç©ºï¼‰ åˆ›å»ºå®ä½“ æµ‹è¯• 2ï¼š ä¿®æ”¹å®ä½“\nä¹‹å‰ï¼šå®ä½“ æ˜¯å¦å­˜åœ¨ï¼Ÿ æ˜¯ï¼šæ²¡é—®é¢˜ï¼ å¦ï¼šé€šè¿‡ API åˆ›å»ºå®ä½“ ä¹‹å‰ï¼šå®ä½“ æ˜¯å¦å·²åŒ…å«æµ‹è¯•å³å°†è¿›è¡Œçš„æ›´æ”¹ï¼Ÿ æ˜¯ï¼šæ²¡é—®é¢˜ï¼ å¦ï¼šé€šè¿‡ API ä¿®æ”¹å®ä½“ ä¹‹å‰ï¼šæˆ‘ä»¬æ˜¯å¦å·²ç»åœ¨æ­£ç¡®çš„é¡µé¢ä¸Šï¼Ÿ æ˜¯ï¼šæ²¡é—®é¢˜ï¼ å¦ï¼šåŠ è½½é¡µé¢ ä¿®æ”¹å®ä½“ æµ‹è¯• 3ï¼š åˆ é™¤å®ä½“\nä¹‹å‰ï¼šå®ä½“æ˜¯å¦å­˜åœ¨ï¼Ÿ æ˜¯ï¼šæ²¡é—®é¢˜ï¼ å¦ï¼šé€šè¿‡ API åˆ›å»ºå®ä½“ ä¹‹å‰ï¼šæˆ‘ä»¬æ˜¯å¦å·²ç»åœ¨æ­£ç¡®çš„é¡µé¢ä¸Šï¼Ÿ æ˜¯ï¼šæ²¡é—®é¢˜ï¼ å¦ï¼šåŠ è½½é¡µé¢ åˆ é™¤å®ä½“\nç»“æŸï¼ˆåº”ç”¨çŠ¶æ€ä¸ºç©ºï¼‰\nç°åœ¨ï¼Œå¦‚æœä½ ä¸€æ¬¡è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼Œæ¯ä¸ªæµ‹è¯•éƒ½ä¼šåˆ©ç”¨ä¹‹å‰æµ‹è¯•çš„åº”ç”¨çŠ¶æ€ã€‚å¦‚æœåªè¿è¡Œâ€œä¿®æ”¹å®ä½“â€æµ‹è¯•ï¼Œå®ƒä¼šåˆ›å»ºæ‰€éœ€çš„ä¸€åˆ‡ï¼Œç„¶åè¿è¡Œæµ‹è¯•æœ¬èº«ã€‚\nç°åœ¨æˆ‘ä»¬æ—¢æœ‰æµ‹è¯•çš„ç‹¬ç«‹æ€§åˆæœ‰æµ‹è¯•çš„æ€§èƒ½ï¼å¾ˆä¸é”™ï¼\nå—¯\u0026hellip; ä½ æ˜¯å¦æ³¨æ„åˆ°æˆ‘ä»¬éœ€è¦ç¼–å†™å¤§é‡ä»£ç ï¼Ÿcypress-data-session æ’ä»¶å¾ˆæ–¹ä¾¿ï¼Œä½†å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š\næœ‰å¾ˆå¤šä¸ cypress-data-session ç›¸å…³çš„æ ·æ¿ä»£ç  åœ¨ E2E æµ‹è¯•ä¸­ï¼Œå¿…é¡»ç»´æŠ¤è®¸å¤šå¯èƒ½ä¸ä¸»åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„ API è°ƒç”¨ä¸åŒæ­¥çš„ API è°ƒç”¨ã€‚ è¿™æ˜¯ä¸€ä¸ªä¸ cypress-data-session ç›¸å…³çš„æ ·æ¿ä»£ç ç¤ºä¾‹ï¼ˆæ¥è‡ª Hasura Console ä»£ç åº“ï¼‰ã€‚\nimport { readMetadata } from \u0026#39;../services/readMetadata\u0026#39;; import { deleteHakunaMatataPermission } from \u0026#39;../services/deleteHakunaMatataPermission\u0026#39;; /** * Ensure the Action does not have the Permission. * * ATTENTION: if you get the \u0026#34;setup function changed for session...\u0026#34; error, simply close the * Cypress-controlled browser and re-launch the test file. */ export function hakunaMatataPermissionMustNotExist( settingUpApplicationState = true ) { cy.dataSession({ name: \u0026#39;hakunaMatataPermissionMustNotExist\u0026#39;, // Without it, cy.dataSession run the setup function also the very first time, trying to // delete a Permission that does not exist init: () =\u0026gt; true, // Check if the Permission exists validate: () =\u0026gt; { Cypress.log({ message: \u0026#39;**--- Action check: start**\u0026#39; }); return readMetadata().then(response =\u0026gt; { const loginAction = response.body.actions?.find( action =\u0026gt; action.name === \u0026#39;login\u0026#39; ); if (!loginAction || !loginAction.permissions) return true; const permission = loginAction.permissions.find( permission =\u0026gt; permission.role === \u0026#39;hakuna_matata\u0026#39; ); // Returns true if the permission does not exist return !permission; }); }, preSetup: () =\u0026gt; Cypress.log({ message: \u0026#39;**--- The permission must be deleted**\u0026#39; }), // Delete the Permission setup: () =\u0026gt; { deleteHakunaMatataPermission(); if (settingUpApplicationState) { // Ensure the UI read the latest data if it were previously loaded cy.reload(); } }, }); } ä»¥ä¸‹æ˜¯ç”¨äºåˆ›å»ºå®ä½“çš„ API è°ƒç”¨ç¤ºä¾‹ï¼ˆæ¥è‡ª Hasura Console ä»£ç åº“ï¼‰ã€‚\n/** * Create the Action straight on the server. */ export function createLoginAction() { Cypress.log({ message: \u0026#39;**--- Action creation: start**\u0026#39; }); cy.request(\u0026#39;POST\u0026#39;, \u0026#39;http://localhost:8080/v1/metadata\u0026#39;, { type: \u0026#39;bulk\u0026#39;, source: \u0026#39;default\u0026#39;, args: [ { type: \u0026#39;set_custom_types\u0026#39;, args: { scalars: [], input_objects: [ { name: \u0026#39;SampleInput\u0026#39;, fields: [ { name: \u0026#39;username\u0026#39;, type: \u0026#39;String!\u0026#39; }, { name: \u0026#39;password\u0026#39;, type: \u0026#39;String!\u0026#39; }, ], }, ], objects: [ { name: \u0026#39;SampleOutput\u0026#39;, fields: [{ name: \u0026#39;accessToken\u0026#39;, type: \u0026#39;String!\u0026#39; }], }, { name: \u0026#39;LoginResponse\u0026#39;, description: null, fields: [ { name: \u0026#39;accessToken\u0026#39;, type: \u0026#39;String!\u0026#39;, description: null, }, ], }, { name: \u0026#39;AddResult\u0026#39;, fields: [{ name: \u0026#39;sum\u0026#39;, type: \u0026#39;Int\u0026#39; }], }, ], enums: [], }, }, { type: \u0026#39;create_action\u0026#39;, args: { name: \u0026#39;login\u0026#39;, definition: { arguments: [ { name: \u0026#39;username\u0026#39;, type: \u0026#39;String!\u0026#39;, description: null, }, { name: \u0026#39;password\u0026#39;, type: \u0026#39;String!\u0026#39;, description: null, }, ], kind: \u0026#39;synchronous\u0026#39;, output_type: \u0026#39;LoginResponse\u0026#39;, handler: \u0026#39;https://hasura-actions-demo.glitch.me/login\u0026#39;, type: \u0026#39;mutation\u0026#39;, headers: [], timeout: 25, request_transform: null, }, comment: null, }, }, ], }).then(() =\u0026gt; Cypress.log({ message: \u0026#39;**--- Action creation: end**\u0026#39; })); } å› æ­¤ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„æµ‹è¯•æ˜¯è‡³å…³é‡è¦çš„ï¼Œä½†ä¹Ÿä¼´éšç€ä¸€äº›æˆæœ¬ã€‚\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œé’ˆå¯¹è¿™ä¸ªå…·ä½“é—®é¢˜ï¼Œæˆ‘é€‰æ‹©äº†æœ€åä¸€ç§é€‰æ‹©\u0026hellip;\n3 - è¿›è¡Œä¸€æ¬¡å…¨é¢çš„ç«¯åˆ°ç«¯æµ‹è¯• ä¼˜ç‚¹ï¼šå¯ä»¥å‡å°‘å¾ˆå¤šæ ·æ¿æ–‡ä»¶ã€‚\nç¼ºç‚¹ï¼šä¸æµ‹è¯•ä¸€èµ·å·¥ä½œå˜å¾—æ›´æ…¢äº†ï¼ˆä½ ä¸èƒ½å†ä»…è¿è¡Œç¬¬ä¸‰ä¸ªæµ‹è¯•äº†ï¼‰\nä¸æˆ‘ä»¬éœ€è¦ç¼–å†™çš„æ ·æ¿å’Œéœ€è¦ç»´æŠ¤çš„ä»£ç ç›¸æ¯”ï¼Œå°†å®ƒä»¬ç»Ÿä¸€èµ·æ¥æ˜¯å€¼å¾—çš„ã€‚æ¯•ç«Ÿï¼Œæˆ‘æ­£åœ¨å¤„ç†çš„ç‰¹å®š CRUD æµç¨‹å¤§çº¦éœ€è¦ 20 ç§’ã€‚\nå¼€å§‹ (åº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©º) æµ‹è¯•ï¼šCRUD ä¹‹å‰*ï¼šå¦‚æœå­˜åœ¨å®ä½“ï¼Œåˆ™åˆ é™¤å®ƒï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰* ä¹‹å‰*ï¼šåŠ è½½é¡µé¢* åˆ›å»ºå®ä½“ ä¿®æ”¹å®ä½“ åˆ é™¤å®ä½“ ä¹‹å*ï¼šå¦‚æœå­˜åœ¨å®ä½“ï¼Œåˆ™åˆ é™¤å®ƒï¼ˆåº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©ºï¼‰* ç»“æŸ (åº”ç”¨ç¨‹åºçŠ¶æ€ä¸ºç©º) åŒæ—¶ï¼Œè¿™ä¹Ÿä½¿å¾— cypress-data-session å˜å¾—æ— ç”¨ã€‚å› æ­¤ï¼Œå°‘äº†ä¸€ä¸ªéœ€è¦ä¿æŒæ›´æ–°çš„ä¾èµ–ã€‚\nç»“è®º å¤„ç†ç«¯åˆ°ç«¯æµ‹è¯•å¾ˆå›°éš¾ã€‚å¤„ç†çœŸå®æ•°æ®ã€æ¸…é™¤çœŸå®åº”ç”¨ç¨‹åºçŠ¶æ€ç­‰éƒ½æ˜¯æœ‰æˆæœ¬çš„ã€‚æˆ‘çŸ¥é“ç«¯åˆ°ç«¯æµ‹è¯•æ˜¯å”¯ä¸€èƒ½å¤Ÿæä¾›å®Œæ•´ä¿¡å¿ƒçš„æµ‹è¯•ï¼Œä½†ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼ˆè¯·è®°ä½ï¼Œæˆ‘ä¸æ˜¯ QA å·¥ç¨‹å¸ˆï¼‰ï¼Œæˆ‘æ›´æ„¿æ„ä½¿ç”¨æ— éœ€æœåŠ¡å™¨çš„æµ‹è¯•ã€‚\nç›¸å…³ç« èŠ‚ ğŸ”— ä»é‡‘å­—å¡”çš„é¡¶ç«¯ç€æ‰‹æ„å»ºæµ‹è¯•ï¼ ğŸ”— æŠŠä½ çš„æµ‹è¯•å·¥å…·å½“ä½œä¸»è¦çš„å¼€å‘å·¥å…·æ¥ä½¿ç”¨ ç”± NoriSte åœ¨ dev.toä¸Šè¿›è¡Œäº†è·¨å‘è¡¨ã€‚\nå‚è€ƒèµ„æ–™ UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®:https://github.com/NoriSte/ui-testing-best-practices UI æµ‹è¯•æœ€ä½³å®è·µé¡¹ç›®ä¸­æ–‡ç¿»è¯‘:https://github.com/naodeng/ui-testing-best-practices æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-testing-strategy-2-more-reasonable-testing-strategy-for-ui-testing/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥æ¢è®¨ UI æµ‹è¯•æœ€ä½³å®è·µçš„æµ‹è¯•ç­–ç•¥ï¼ˆäºŒï¼‰ï¼Œç€é‡ä»‹ç»äº†æ›´ä¸ºåˆç†çš„æµ‹è¯•ç­–ç•¥ã€‚ä»é¿å…è¿½æ±‚å®Œç¾ä¸»ä¹‰ã€é€‰æ‹©å‚è€ƒæµè§ˆå™¨ã€å‘ç° Bug æ—¶çš„å¤„ç†æ–¹å¼ï¼Œåˆ°åœ¨ä¿®å¤ä¹‹å‰ç¼–å†™æµ‹è¯•ã€å•ä¸ªé•¿çš„ç«¯åˆ°ç«¯æµ‹è¯•ä¸å¤šä¸ªå°çš„ç‹¬ç«‹æµ‹è¯•çš„é€‰æ‹©ï¼Œå…¨é¢é˜è¿°äº†ä»€ä¹ˆæ ·çš„æµ‹è¯•ç­–ç•¥æ›´ä¸ºåˆç†ã€‚æ— è®ºæ˜¯åˆå­¦è€…è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„æµ‹è¯•ä¸“ä¸šäººå‘˜ï¼Œè¿™ç¯‡åšæ–‡éƒ½å°†ä¸ºæ‚¨æä¾›å®ç”¨çš„æŒ‡å¯¼ï¼Œå¸®åŠ©æ‚¨åˆ¶å®šæ›´æ˜æ™ºã€é«˜æ•ˆçš„ UI æµ‹è¯•ç­–ç•¥ã€‚ç‚¹å‡»é“¾æ¥ï¼Œæ¢ç´¢æ›´åˆç†çš„ UI æµ‹è¯•æ–¹æ³•ï¼","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„æµ‹è¯•ç­–ç•¥ï¼ˆäºŒï¼‰ï¼šä»€ä¹ˆæ ·çš„æµ‹è¯•ç­–ç•¥æ‰æ›´åˆç†"},{"content":"ä¸€æ®µç®€è¦è¯´æ˜ åœ¨è°ˆè®º UI æµ‹è¯•æ—¶ï¼ˆè¯·è®°ä½æˆ‘ä»¬åªè°ˆè®º UIï¼Œè€Œä¸æ˜¯åº•å±‚ JavaScript ä»£ç ï¼‰ï¼Œæœ‰ä¸‰ç§ä¸»è¦çš„æµ‹è¯•ç±»å‹ï¼š\nç»„ä»¶æµ‹è¯•ï¼šUI çš„å•å…ƒæµ‹è¯•ï¼Œå®ƒä»¬åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­æµ‹è¯•æ¯ä¸ªå•ç‹¬çš„ç»„ä»¶ã€‚\nåœ¨éš”ç¦»ä¸­å¼€å‘ç»„ä»¶å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸ä½ å°†å®ƒä»¬ä¸ç›¸åº”çš„å®¹å™¨/ç”¨é€”éš”ç¦»å¼€æ¥ã€‚ç»„ä»¶å­˜åœ¨æ˜¯ä¸ºäº†éš”ç¦»å•ä¸€çš„è¡Œä¸º/å†…å®¹ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰ï¼Œå› æ­¤ï¼Œåœ¨éš”ç¦»ä¸­ç¼–ç æ˜¯æœ‰ç›Šçš„ã€‚\næœ‰è®¸å¤šåœ¨éš”ç¦»ä¸­å¼€å‘ç»„ä»¶çš„æ–¹æ³•å’Œå·¥å…·ï¼Œä½†ç”±äºå…¶æ•ˆæœå’Œç”Ÿæ€ç³»ç»Ÿï¼ŒStorybook æˆä¸ºäº†æ ‡å‡†é€‰æ‹©ã€‚\nç»„ä»¶æœ‰ä¸‰ç§ç±»å‹çš„å¥‘çº¦ï¼šç”Ÿæˆçš„è¾“å‡ºï¼ˆHTMLï¼‰ï¼Œå®ƒä»¬çš„è§†è§‰æ–¹é¢ï¼ˆCSSï¼‰å’Œå¤–éƒ¨ APIï¼ˆprops å’Œå›è°ƒï¼‰ã€‚æµ‹è¯•æ¯ä¸ªæ–¹é¢å¯èƒ½å¾ˆç¹çï¼Œè¿™å°±æ˜¯ Storyshots å¯ä»¥æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚å®ƒå…è®¸ä½ è‡ªåŠ¨åŒ–ï¼š\nå¿«ç…§æµ‹è¯•ï¼šå¿«ç…§æ˜¯ç»„ä»¶ç”Ÿæˆçš„è¾“å‡ºï¼Œä¸€ä¸ªåŒ…å«æ‰€æœ‰å‘ˆç° HTML çš„å­—ç¬¦ä¸²ã€‚å¦‚æœç”Ÿæˆçš„ HTML æ›´æ”¹ï¼Œæ— è®ºæ˜¯æ„å¤–è¿˜æ˜¯éæ„å¤–ï¼Œå¿«ç…§æµ‹è¯•éƒ½ä¼šå¤±è´¥ï¼Œä½ å¯ä»¥é€‰æ‹©è¿™äº›æ›´æ”¹æ˜¯æœ‰æ„è¿˜æ˜¯æ— æ„ã€‚\nè§†è§‰å›å½’æµ‹è¯•ï¼šä¸å…ˆå‰çš„ç»„ä»¶ç›¸æ¯”ï¼Œç»„ä»¶çš„è§†è§‰æ–¹é¢é€åƒç´ æ¯”è¾ƒï¼ŒåŒæ ·ï¼Œä½ è¢«æç¤ºé€‰æ‹©æ˜¯å¦æ¥å—æ›´æ”¹ã€‚\nè¿™äº›æµ‹è¯•ç”± Storyshots åœ¨æ¯ä¸ª Storybook é¡µé¢ï¼ˆåˆåâ€œæ•…äº‹â€ï¼‰ä¸Šè‡ªåŠ¨å¯åŠ¨ã€‚\nå›è°ƒæµ‹è¯•ï¼šä¸€ä¸ªå°çš„ React å®¹å™¨åº”ç”¨å‘ˆç°ç»„ä»¶å¹¶ä¼ é€’ä¸€äº›å›è°ƒã€‚ç„¶åï¼Œæ¨¡æ‹Ÿç”¨æˆ·äº¤äº’å¹¶ä¼ é€’æœŸæœ›è°ƒç”¨çš„å›è°ƒã€‚React Testing Library æ˜¯è¿™ç±»æµ‹è¯•çš„æ ‡å‡†åº“ã€‚\näº¤äº’/çŠ¶æ€æµ‹è¯•ï¼šä¸ç»„ä»¶çš„ä¸€äº›äº¤äº’æœŸæœ›æ­£ç¡®çš„çŠ¶æ€ç®¡ç†ã€‚è¿™ç§ç±»å‹çš„æµ‹è¯•å¿…é¡»ä»æ¶ˆè´¹è€…çš„è§’åº¦ç¼–å†™ï¼Œè€Œä¸æ˜¯ä»å†…éƒ¨çš„è§’åº¦ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·å¡«å†™è¾“å…¥å­—æ®µæ—¶çš„è¾“å…¥å­—æ®µå€¼ï¼Œè€Œä¸æ˜¯å†…éƒ¨ç»„ä»¶çŠ¶æ€ï¼‰ã€‚äº¤äº’/çŠ¶æ€æµ‹è¯•åº”åœ¨è§¦å‘é”®ç›˜äº‹ä»¶åæ–­è¨€è¾“å…¥å­—æ®µçš„å€¼ã€‚\næˆ–è€…ï¼ŒCypress æ¨å‡ºäº†è‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥ä¾¿åœ¨å…¶ä¸­å¯åŠ¨ç»„ä»¶æµ‹è¯•ï¼Œè¯·æŸ¥çœ‹ ä½¿ç”¨ Cypress è¿›è¡Œ React ç»„ä»¶å•å…ƒæµ‹è¯• ç« èŠ‚ã€‚\nUI é›†æˆæµ‹è¯•ï¼šå®ƒä»¬åœ¨çœŸå®æµè§ˆå™¨ä¸­è¿è¡Œæ•´ä¸ªåº”ç”¨ è€Œä¸è¿æ¥çœŸå®æœåŠ¡å™¨ã€‚è¿™äº›æµ‹è¯•æ˜¯æ¯ä¸ªå‰ç«¯å¼€å‘äººå‘˜çš„ç‹ç‰Œã€‚å®ƒä»¬è¿è¡Œé€Ÿåº¦å¿«ï¼Œä¸å®¹æ˜“å‡ºç°éšæœºå¤±è´¥æˆ–å‡é˜´æ€§ã€‚\nå‰ç«¯åº”ç”¨ç¨‹åºå¹¶ä¸çŸ¥é“æ²¡æœ‰çœŸå®æœåŠ¡å™¨ï¼šæ¯ä¸ª AJAX è°ƒç”¨éƒ½ä¼šè¢«æµ‹è¯•å·¥å…·åœ¨ç¬é—´è§£å†³ã€‚é™æ€ JSON å“åº”ï¼ˆç§°ä¸ºâ€œfixturesâ€ï¼‰ç”¨äºæ¨¡æ‹ŸæœåŠ¡å™¨å“åº”ã€‚Fixtures å…è®¸æˆ‘ä»¬æµ‹è¯•å‰ç«¯çŠ¶æ€ï¼Œæ¨¡æ‹Ÿæ¯ç§å¯èƒ½çš„åç«¯çŠ¶æ€ã€‚\nå¦ä¸€ä¸ªæœ‰è¶£çš„æ•ˆæœæ˜¯ï¼šFixtures å…è®¸æ‚¨åœ¨æ²¡æœ‰å·¥ä½œçš„åç«¯ åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹å·¥ä½œã€‚æ‚¨å¯ä»¥å°† UI é›†æˆæµ‹è¯•è§†ä¸ºâ€œä»…å‰ç«¯â€æµ‹è¯•ã€‚\nåœ¨æœ€æˆåŠŸçš„æµ‹è¯•å¥—ä»¶çš„æ ¸å¿ƒï¼Œæœ‰å¾ˆå¤š UI é›†æˆæµ‹è¯•ï¼Œè€ƒè™‘åˆ°å¯¹å‰ç«¯åº”ç”¨ç¨‹åºçš„æœ€ä½³æµ‹è¯•ç±»å‹ã€‚\nç«¯åˆ°ç«¯ï¼ˆE2Eï¼‰æµ‹è¯•ï¼šå®ƒä»¬ä¸çœŸå®æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œè¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚ä»ç”¨æˆ·äº¤äº’ï¼ˆå…¶ä¸­ä¹‹ä¸€æ˜¯â€œç«¯â€ï¼‰åˆ°ä¸šåŠ¡æ•°æ®ï¼ˆå¦ä¸€ä¸ªâ€œç«¯â€ï¼‰ï¼šä¸€åˆ‡éƒ½å¿…é¡»æŒ‰è®¾è®¡å·¥ä½œã€‚E2E æµ‹è¯•é€šå¸¸å¾ˆæ…¢ï¼Œå› ä¸º\nå®ƒä»¬éœ€è¦ä¸€ä¸ª å·¥ä½œçš„åç«¯ åº”ç”¨ç¨‹åºï¼Œé€šå¸¸åœ¨å‰ç«¯åº”ç”¨ç¨‹åºæ—è¾¹å¯åŠ¨ã€‚æ²¡æœ‰æœåŠ¡å™¨ï¼Œä½ ä¸èƒ½å¯åŠ¨å®ƒä»¬ï¼Œæ‰€ä»¥ä½ ä¾èµ–äºåç«¯å¼€å‘äººå‘˜çš„å·¥ä½œ å®ƒä»¬éœ€è¦ å¯é çš„æ•°æ®ï¼Œåœ¨æ¯æ¬¡æµ‹è¯•ä¹‹å‰è¿›è¡Œç§æ¤å’Œæ¸…ç† è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ E2E æµ‹è¯•ä¸å¯è¡Œä½œä¸ºå”¯ä¸€/ä¸»è¦æµ‹è¯•ç±»å‹çš„åŸå› ã€‚å®ƒä»¬éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒä»¬æµ‹è¯•æ‰€æœ‰å†…å®¹ï¼ˆå‰ç«¯ + åç«¯ï¼‰ï¼Œä½†å¿…é¡»å°å¿ƒä½¿ç”¨ï¼Œä»¥é¿å…è„†å¼±ä¸”æŒç»­æ—¶é—´é•¿çš„æµ‹è¯•å¥—ä»¶ã€‚\nåœ¨å…·æœ‰è®¸å¤š UI é›†æˆæµ‹è¯•çš„å®Œæ•´å¥—ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥å°† E2E æµ‹è¯•è§†ä¸ºâ€œåç«¯æµ‹è¯•â€ã€‚é€šè¿‡å®ƒä»¬ï¼Œæ‚¨åº”è¯¥æµ‹è¯•å“ªäº›æµç¨‹ï¼Ÿ\nå¿«ä¹è·¯å¾„æµç¨‹ï¼šæ‚¨éœ€è¦ç¡®ä¿è‡³å°‘ç”¨æˆ·èƒ½å¤Ÿå®ŒæˆåŸºæœ¬æ“ä½œ å¯¹æ‚¨çš„ä¸šåŠ¡æœ‰ä»·å€¼ åœ¨å…·æœ‰è®¸å¤š UI é›†æˆæµ‹è¯•çš„å®Œæ•´å¥—ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥å°† E2E æµ‹è¯•è§†ä¸ºâ€œåç«¯æµ‹è¯•â€ã€‚é€šè¿‡å®ƒä»¬ï¼Œæ‚¨åº”è¯¥æµ‹è¯•å“ªäº›æµç¨‹ï¼Ÿ\nå¿«ä¹è·¯å¾„æµç¨‹ï¼šæ‚¨éœ€è¦ç¡®ä¿è‡³å°‘ç”¨æˆ·èƒ½å¤Ÿå®ŒæˆåŸºæœ¬æ“ä½œ å¯¹æ‚¨çš„ä¸šåŠ¡æœ‰ä»·å€¼çš„ä¸€åˆ‡ï¼šæ— è®ºæ˜¯å¿«ä¹è·¯å¾„è¿˜æ˜¯å…¶ä»–ï¼Œéƒ½è¦æµ‹è¯•æ‚¨çš„ä¸šåŠ¡å…³å¿ƒçš„ä»»ä½•å†…å®¹ï¼ˆæ˜æ˜¾æ˜¯ä¼˜å…ˆè€ƒè™‘å®ƒä»¬ï¼‰ ç»å¸¸ä¸­æ–­çš„ä¸€åˆ‡ï¼šç³»ç»Ÿçš„è–„å¼±åŒºåŸŸä¹Ÿå¿…é¡»å—åˆ°ç›‘è§† è¯†åˆ«/å®šä¹‰æµ‹è¯•ç±»å‹å¯¹äºå¯¹å®ƒä»¬è¿›è¡Œåˆ†ç»„ã€åˆç†å‘½åæµ‹è¯•æ–‡ä»¶ã€é™åˆ¶å®ƒä»¬çš„\nèŒƒå›´ä»¥åŠé€‰æ‹©æ˜¯å¦åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºå’Œéƒ¨ç½²æµæ°´çº¿ä¸­è¿è¡Œå®ƒä»¬å¾ˆæœ‰ç”¨ã€‚\nç”±NoriSteåœ¨dev.toå’ŒMediumä¸Šè¿›è¡Œäº†è·¨å‘è¡¨ã€‚\nç¿»è¯‘è‡ªï¼šComponent vs (UI) Integration vs E2E Tests*\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/ui-automation-testing/ui-testing-best-practice-testing-strategy-1-component-tests-vs-ui-integration-tests-vs-e2e-tests/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥ç ”ç©¶ UI æµ‹è¯•æœ€ä½³å®è·µï¼Œé¦–ç¯‡èšç„¦äºæµ‹è¯•ç­–ç•¥çš„é€‰æ‹©ï¼šç»„ä»¶æµ‹è¯•ã€UI é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯ï¼ˆE2Eï¼‰æµ‹è¯•çš„åŒºåˆ«ã€‚äº†è§£æ¯ç§æµ‹è¯•ç±»å‹çš„ä¼˜ç¼ºç‚¹ï¼Œå¸®åŠ©æ‚¨åœ¨ UI æµ‹è¯•ä¸­åšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚ä¸è®ºæ‚¨æ˜¯å¼€å‘è€…è¿˜æ˜¯æµ‹è¯•ä¸“ä¸šäººå‘˜ï¼Œè¿™ç¯‡æ–‡ç« å°†ä¸ºæ‚¨æä¾›æ·±å…¥æ´å¯Ÿï¼ŒåŠ©åŠ›æ‚¨è®¾è®¡å‡ºæ›´å¯é ã€é«˜æ•ˆçš„ UI æµ‹è¯•ç­–ç•¥ã€‚ç‚¹å‡»é“¾æ¥ï¼Œæ¢ç´¢ UI æµ‹è¯•çš„æœ€ä½³å®è·µï¼Œæå‡æ‚¨çš„æµ‹è¯•æµç¨‹è´¨é‡ã€‚","title":"UI æµ‹è¯•æœ€ä½³å®è·µçš„æµ‹è¯•ç­–ç•¥ï¼ˆä¸€ï¼‰ï¼šç»„ä»¶æµ‹è¯• vsï¼ˆUIï¼‰é›†æˆæµ‹è¯• vs E2E æµ‹è¯•"},{"content":"ä»€ä¹ˆæ˜¯ K6 k6 æ˜¯ä¸€æ¬¾ç”¨äºæ€§èƒ½æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•çš„å¼€æºå·¥å…·ï¼Œä¸»è¦ç”¨äºè¯„ä¼°å’ŒéªŒè¯åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚ä»¥ä¸‹æ˜¯å…³äº k6 çš„ä¸€äº›ä¸»è¦ç‰¹ç‚¹å’Œä¿¡æ¯ï¼š\nå¼€æºæ€§ï¼š k6 æ˜¯ä¸€æ¬¾å®Œå…¨å¼€æºçš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œä»£ç å­˜å‚¨åœ¨ GitHub ä¸Šã€‚è¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥è‡ªç”±è®¿é—®ã€ä½¿ç”¨å’Œä¿®æ”¹å·¥å…·çš„æºä»£ç ã€‚\nJavaScript ç¼–å†™è„šæœ¬ï¼š k6 ä½¿ç”¨ JavaScript è¯­è¨€ç¼–å†™æµ‹è¯•è„šæœ¬ï¼Œè¿™ä½¿å¾—ç¼–å†™æµ‹è¯•ç”¨ä¾‹ç›¸å¯¹ç®€å•ï¼Œå¹¶ä¸”å¯¹äºå¼€å‘äººå‘˜è€Œè¨€æ›´åŠ å‹å¥½ã€‚è„šæœ¬å¯ä»¥åŒ…å« HTTP è¯·æ±‚ã€WebSocket è¿æ¥ã€è„šæœ¬æ‰§è¡Œé€»è¾‘ç­‰ã€‚\næ”¯æŒå¤šç§åè®®ï¼š k6 æ”¯æŒå¤šç§å¸¸è§çš„åè®®ï¼ŒåŒ…æ‹¬ HTTPã€WebSocketã€Socket.IOã€gRPC ç­‰ï¼Œä½¿å…¶å¯ä»¥å¹¿æ³›åº”ç”¨äºå„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚\nåˆ†å¸ƒå¼æµ‹è¯•ï¼š k6 å…·æœ‰åˆ†å¸ƒå¼æµ‹è¯•çš„èƒ½åŠ›ï¼Œå…è®¸åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œæµ‹è¯•ï¼Œä»è€Œæ¨¡æ‹Ÿæ›´çœŸå®çš„ç”Ÿäº§ç¯å¢ƒè´Ÿè½½ã€‚\nå®æ—¶ç»“æœå’ŒæŠ¥å‘Šï¼š k6 æä¾›å®æ—¶ç»“æœï¼ŒåŒ…æ‹¬è¯·æ±‚å“åº”æ—¶é—´ã€ååé‡ç­‰ï¼Œå¹¶èƒ½å¤Ÿç”Ÿæˆè¯¦ç»†çš„ HTML æŠ¥å‘Šï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£åº”ç”¨ç¨‹åºçš„æ€§èƒ½çŠ¶å†µã€‚\nå®¹å™¨åŒ–æ”¯æŒï¼š k6 é€‚åº”å®¹å™¨åŒ–ç¯å¢ƒï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ° CI/CD æµæ°´çº¿ä¸­ï¼Œå¹¶ä¸å¸¸è§çš„å®¹å™¨ç¼–æ’å·¥å…·ï¼ˆå¦‚ Kubernetesï¼‰é…åˆä½¿ç”¨ã€‚\næ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼š k6 æ”¯æŒæ’ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ’ä»¶æ‰©å±•å…¶åŠŸèƒ½ï¼Œæ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚\næ´»è·ƒçš„ç¤¾åŒºï¼š ç”±äº k6 æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ‹¥æœ‰ä¸€ä¸ªç§¯æçš„ç¤¾åŒºï¼Œæä¾›æ”¯æŒã€æ–‡æ¡£å’Œç¤ºä¾‹ï¼Œä½¿ç”¨æˆ·æ›´å®¹æ˜“ä¸Šæ‰‹å’Œè§£å†³é—®é¢˜ã€‚\næ€»ä½“è€Œè¨€ï¼Œk6 æ˜¯ä¸€ä¸ªçµæ´»ã€å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œé€‚ç”¨äºå„ç§è§„æ¨¡çš„åº”ç”¨ç¨‹åºå’Œç³»ç»Ÿã€‚\nå®˜æ–¹ç½‘ç«™åŠæ–‡æ¡£ å®˜æ–¹ç½‘ç«™ å®˜æ–¹æ–‡æ¡£ å®‰è£… Mac ç³»ç»Ÿå®‰è£… Mac ç³»ç»Ÿå¯ä»¥é€šè¿‡ Homebrew å®‰è£… k6ï¼š\nbrew install k6 Windows ç³»ç»Ÿå®‰è£… Windows ç³»ç»Ÿå¯ä»¥é€šè¿‡ Chocolatey å®‰è£… k6ï¼š\nchoco install k6 æˆ–è€…é€šè¿‡ winget å®‰è£… k6ï¼š\nwinget install k6 Docker å®‰è£… k6 ä¹Ÿå¯ä»¥é€šè¿‡ Docker å®‰è£…ï¼š\ndocker pull grafana/k6 å…¶ä»–ç³»ç»Ÿå®‰è£… K6 é™¤äº†æ”¯æŒä¸Šè¿°ç³»ç»Ÿå¤–ï¼Œè¿˜æ”¯æŒ Linuxï¼ˆDebian/Ubuntu/Fedora/CentOSï¼‰ï¼Œä¹Ÿæ”¯æŒä¸‹è½½ K6 äºŒè¿›åˆ¶æ–‡ä»¶å’Œ K6 æ‰©å±•è¿›è¡Œå®‰è£…ï¼Œå…·ä½“å®‰è£…æ–¹å¼è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚\nç¡®è®¤ K6 å®‰è£…æˆåŠŸ å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç¡®è®¤ k6 æ˜¯å¦å®‰è£…æˆåŠŸï¼š\nk6 version å¦‚æœå®‰è£…æˆåŠŸï¼Œä¼šæ˜¾ç¤º k6 çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š\nç¬¬ä¸€ä¸ª K6 æµ‹è¯•è„šæœ¬ ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•è„šæœ¬ æ–°å»ºä¸€ä¸ª K6 æ€§èƒ½æµ‹è¯•é¡¹ç›®ç›®å½•å¹¶è¿›å…¥ mkdir k6-demo cd k6-demo åˆ›å»ºä¸€ä¸ªåä¸º demo.js çš„æ–‡ä»¶ï¼Œç”¨äºç¼–å†™æµ‹è¯•è„šæœ¬ å¯ä»¥é€šè¿‡ k6 new å‘½ä»¤åˆ›å»ºä¸€ä¸ªæµ‹è¯•è„šæœ¬æ–‡ä»¶ï¼š k6 new demo.js ä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªåä¸º demo.js çš„æµ‹è¯•è„šæœ¬æ–‡ä»¶ touch demo.js ç¼–è¾‘æµ‹è¯•è„šæœ¬ å¦‚æœæ˜¯é€šè¿‡ k6 new å‘½ä»¤åˆ›å»ºçš„æµ‹è¯•è„šæœ¬æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç®€å•çš„æµ‹è¯•è„šæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nimport http from \u0026#39;k6/http\u0026#39;; import { sleep } from \u0026#39;k6\u0026#39;; export const options = { // A number specifying the number of VUs to run concurrently. vus: 10, // A string specifying the total duration of the test run. duration: \u0026#39;30s\u0026#39;, // The following section contains configuration options for execution of this // test script in Grafana Cloud. // // See https://grafana.com/docs/grafana-cloud/k6/get-started/run-cloud-tests-from-the-cli/ // to learn about authoring and running k6 test scripts in Grafana k6 Cloud. // // ext: { // loadimpact: { // // The ID of the project to which the test is assigned in the k6 Cloud UI. // // By default tests are executed in default project. // projectID: \u0026#34;\u0026#34;, // // The name of the test in the k6 Cloud UI. // // Test runs with the same name will be grouped. // name: \u0026#34;demo.js\u0026#34; // } // }, // Uncomment this section to enable the use of Browser API in your tests. // // See https://grafana.com/docs/k6/latest/using-k6-browser/running-browser-tests/ to learn more // about using Browser API in your test scripts. // // scenarios: { // // The scenario name appears in the result summary, tags, and so on. // // You can give the scenario any name, as long as each name in the script is unique. // ui: { // // Executor is a mandatory parameter for browser-based tests. // // Shared iterations in this case tells k6 to reuse VUs to execute iterations. // // // // See https://grafana.com/docs/k6/latest/using-k6/scenarios/executors/ for other executor types. // executor: \u0026#39;shared-iterations\u0026#39;, // options: { // browser: { // // This is a mandatory parameter that instructs k6 to launch and // // connect to a chromium-based browser, and use it to run UI-based // // tests. // type: \u0026#39;chromium\u0026#39;, // }, // }, // }, // } }; // The function that defines VU logic. // // See https://grafana.com/docs/k6/latest/examples/get-started-with-k6/ to learn more // about authoring k6 scripts. // export default function() { http.get(\u0026#39;https://test.k6.io\u0026#39;); sleep(1); } å¦‚æœæ˜¯ç›´æ¥åˆ›å»ºçš„æµ‹è¯•è„šæœ¬æ–‡ä»¶ï¼Œå¯ä»¥å°†ä¸Šè¿°å†…å®¹å¤åˆ¶åˆ° demo.js æ–‡ä»¶ä¸­ã€‚\nè¿è¡Œæµ‹è¯•è„šæœ¬ åœ¨ demo.js æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nk6 run demo.js æŸ¥çœ‹æµ‹è¯•ç»“æœ å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼š\nåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š\nexecution: æ‰§è¡Œä¿¡æ¯ï¼ŒåŒ…æ‹¬å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€æŒç»­æ—¶é—´ã€VU æ•°é‡ã€è¿­ä»£æ¬¡æ•°ç­‰ã€‚ scenarios: åœºæ™¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœºæ™¯åç§°ã€VU æ•°é‡ã€è¿­ä»£æ¬¡æ•°ã€æŒç»­æ—¶é—´ã€å¹³å‡å“åº”æ—¶é—´ã€ååé‡ç­‰ã€‚ http_reqs: HTTP è¯·æ±‚ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚åç§°ã€è¯·æ±‚æ•°é‡ã€å¤±è´¥æ•°é‡ã€å¹³å‡å“åº”æ—¶é—´ã€ååé‡ç­‰ã€‚ è§£æ demo æµ‹è¯•è„šæœ¬ import http from 'k6/http';ï¼šå¯¼å…¥ k6 çš„ HTTP æ¨¡å—ï¼Œç”¨äºå‘é€ HTTP è¯·æ±‚ã€‚\nimport { sleep } from 'k6';ï¼šå¯¼å…¥ k6 çš„ sleep æ–¹æ³•ï¼Œç”¨äºæ‰§è¡Œè„šæœ¬ç­‰å¾…ã€‚\nexport const options = { ... }ï¼šå®šä¹‰æµ‹è¯•è„šæœ¬çš„é…ç½®é¡¹ï¼ŒåŒ…æ‹¬ VU æ•°é‡ã€æŒç»­æ—¶é—´ç­‰ã€‚\nvus: 10,ï¼šå®šä¹‰ VU æ•°é‡ä¸º 10ï¼ˆæŒ‡å®šå¹¶å‘è¿è¡Œçš„ VU æ•°é‡ï¼‰ã€‚\nduration: '30s',ï¼šå®šä¹‰æŒç»­æ—¶é—´ä¸º 30 ç§’ï¼ˆæŒ‡å®šæµ‹è¯•è¿è¡Œæ€»æŒç»­æ—¶é—´ï¼‰ã€‚\nexport default function() { ... }ï¼šå®šä¹‰æµ‹è¯•è„šæœ¬çš„é€»è¾‘ï¼ŒåŒ…æ‹¬å‘é€ HTTP è¯·æ±‚ã€æ‰§è¡Œç­‰å¾…ç­‰ã€‚\nhttp.get('https://test.k6.io');ï¼šå‘é€ä¸€ä¸ª GET è¯·æ±‚åˆ° https://test.k6.ioã€‚\nsleep(1);ï¼šæ‰§è¡Œç­‰å¾… 1 ç§’ã€‚\nå…¶ä»–æ³¨é‡Šå†…å®¹å¯ä»¥å¿½ç•¥ï¼Œè¿™äº›å†…å®¹æ˜¯å…³äº k6 çš„ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œåç»­ä¼šä»‹ç»ã€‚\nå‚è€ƒæ–‡æ¡£ K6 æ–‡æ¡£ï¼šhttps://k6.io/docs/ k6 å®˜æ–¹ç½‘ç«™ï¼šhttps://k6.io/ K6 æ€§èƒ½æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/K6-Performance-Test-starter/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/k6-tutorial-getting-started-and-your-first-k6-test-script/","summary":"è¿™ç¯‡æ–‡ç« å°†å¸¦æ‚¨è¿›å…¥ K6 æ€§èƒ½æµ‹è¯•çš„ä¸–ç•Œã€‚åšæ–‡å†…å®¹æ¶µç›–äº† K6 æ€§èƒ½æµ‹è¯•çš„å…¥é—¨çŸ¥è¯†ã€ç¯å¢ƒæ­å»ºæ­¥éª¤ï¼Œä»¥åŠå¦‚ä½•ç¼–å†™æ‚¨çš„ç¬¬ä¸€ä¸ªæµ‹è¯•è„šæœ¬ã€‚æ— è®ºæ‚¨æ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„æ€§èƒ½æµ‹è¯•ä¸“ä¸šäººå‘˜ï¼Œè¿™ç¯‡æ•™ç¨‹éƒ½å°†ä¸ºæ‚¨æä¾›æ¸…æ™°çš„æŒ‡å¯¼ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ K6ï¼Œå¹¶å¼€å§‹æ„å»ºé«˜æ•ˆçš„æ€§èƒ½æµ‹è¯•è„šæœ¬","title":"K6 æ€§èƒ½æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»ï¼Œç¯å¢ƒæ­å»ºå’Œç¼–å†™ç¬¬ä¸€ä¸ª K6 æµ‹è¯•è„šæœ¬"},{"content":"äº²çˆ±çš„è¯»è€…ä»¬ï¼Œ\næœ€è¿‘ï¼Œåœ¨æœç´¢å¼•æ“ä¸Šæ£€æŸ¥ä¸ªäººåšå®¢æ–‡ç« çš„æ”¶å½•æƒ…å†µæ—¶ï¼Œæˆ‘ä¸å¾—ä¸å‘å¤§å®¶é€šæŠ¥ä¸€ä»¶ä»¤äººç—›å¿ƒçš„äº‹æƒ…ã€‚æˆ‘å‘ç°æˆ‘çš„åšå®¢æ–‡ç« ç«Ÿç„¶è¢«ä¸€ä½ CSDN åšä¸»åŸå°ä¸åŠ¨åœ°æŠ„è¢­å¤åˆ¶åˆ°ä»–çš„åšå®¢ä¸Šï¼Œè€Œä¸”æ›´ä»¤äººé—æ†¾çš„æ˜¯ï¼Œä»–å¹¶æœªæ³¨æ˜å‡ºå¤„ã€‚\nå¯¹äºè¿™ç§ä¸é“å¾·çš„è¡Œä¸ºï¼Œæˆ‘æ„Ÿåˆ°æ„¤æ€’å’Œå¤±æœ›ã€‚æˆ‘ä¸€ç›´åŠªåŠ›ä¸ºå¤§å®¶æä¾›åŸåˆ›ã€æœ‰ä»·å€¼çš„å†…å®¹ï¼Œè€Œè¿™æ ·çš„æŠ„è¢­è¡Œä¸ºæ˜¯å¯¹æˆ‘çš„è¾›å‹¤åŠªåŠ›å’Œä»˜å‡ºçš„ä¸¥é‡ä¸å°Šé‡ã€‚ä¸ºäº†æå«è‡ªå·±çš„æƒç›Šï¼Œæˆ‘è®¤ä¸ºæœ‰å¿…è¦å‘å¸ƒè¿™ç¯‡å£°æ˜ï¼Œè®©å¤§å®¶äº†è§£äº‹å®çœŸç›¸ã€‚\né¦–å…ˆï¼Œæˆ‘è¦æ˜ç¡®è¡¨ç¤ºï¼Œæˆ‘åšå†³åå¯¹ä¸€åˆ‡å½¢å¼çš„æŠ„è¢­å’Œä¾µæƒè¡Œä¸ºã€‚æˆ‘è¿è¥çš„åšå®¢æ˜¯æˆ‘çš„ä¸ªäººåˆ›ä½œç©ºé—´ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½æˆä¸ºåˆ†äº«å’Œäº¤æµçš„å¹³å°ï¼Œè€Œä¸æ˜¯è¢«ä»–äººè‚†æ„å‰½çªƒçš„å¯¹è±¡ã€‚\nåœ¨ç¡®è®¤äº† CSDN åšä¸»çš„è¡Œä¸ºåï¼Œæˆ‘æ·±æ„Ÿé—æ†¾ï¼Œä¹Ÿå†³å®šé‡‡å–ä¸€åˆ‡å¿…è¦çš„æ³•å¾‹æ‰‹æ®µæ¥ç»´æŠ¤è‡ªå·±çš„åˆæ³•æƒç›Šã€‚åŒæ—¶ï¼Œæˆ‘å‘¼åæ‰€æœ‰åšä¸»å’Œåˆ›ä½œè€…å…±åŒåŠªåŠ›ï¼Œç»´æŠ¤è‰¯å¥½çš„åˆ›ä½œç¯å¢ƒï¼Œæœç»æŠ„è¢­ç°è±¡ã€‚\næœ€åï¼Œæˆ‘è¦æ„Ÿè°¢ä¸€ç›´ä»¥æ¥æ”¯æŒæˆ‘çš„è¯»è€…ä»¬ã€‚ä½ ä»¬çš„æ”¯æŒæ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼Œä¹Ÿæ˜¯æˆ‘æˆ˜èƒœå›°éš¾çš„åŠ›é‡ã€‚æˆ‘ä¼šç»§ç»­ä¸ºå¤§å®¶å¸¦æ¥çœŸå®ã€æœ‰ä»·å€¼çš„å†…å®¹ã€‚\næŠ„è¢­åšå®¢é“¾æ¥ï¼šhttps://blog.csdn.net/2301_76387166?type=blog\næˆ‘å·²ç»è”ç³» CSDN ä¸‹æ¶ã€‚\nå†æ¬¡æ„Ÿè°¢å¤§å®¶çš„å…³æ³¨å’Œæ”¯æŒã€‚\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/article-plagiarism-statement/","summary":"è¿™ç¯‡åšæ–‡æ˜¯å…³äºæˆ‘çš„æ–‡ç« è¢«æŠ„è¢­çš„å£°æ˜ã€‚","title":"å…³äºæˆ‘çš„æ–‡ç« è¢«æŠ„è¢­çš„å£°æ˜"},{"content":"Java å’Œ REST Assured æ¡†æ¶å®ç°æ¥å£è‡ªåŠ¨åŒ–é¡¹ç›® REST Assured æ¡†æ¶æ•™ç¨‹ç›®å½• ç›®å½•ä¸å¯ç‚¹å‡»ï¼Œä»…ä¸ºå±•ç¤ºç›®å½•ç»“æ„\nRestAssured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›® RestAssured ä»‹ç» é¡¹ç›®ç»“æ„ Gradle æ„å»ºçš„ç‰ˆæœ¬ Maven æ„å»ºçš„ç‰ˆæœ¬ é¡¹ç›®ä¾èµ– ä» 0 åˆ° 1 æ­å»º REST Assured æ¥å£æµ‹è¯•é¡¹ç›® Gradle ç‰ˆæœ¬ Maven ç‰ˆæœ¬ è¿›é˜¶ç”¨æ³• éªŒè¯å“åº”æ•°æ® æ–‡ä»¶ä¸Šä¼  Logging æ—¥å¿— Filters è¿‡æ»¤å™¨ æŒç»­é›†æˆ æ¥å…¥ github action é›†æˆ allure æµ‹è¯•æŠ¥å‘Š æ•°æ®é©±åŠ¨ å¤šç¯å¢ƒæ”¯æŒ REST Assured æ¡†æ¶æ•™ç¨‹å¯¹åº”æ–‡ç«  REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œé›†æˆ allure æµ‹è¯•æŠ¥å‘Š:https://naodeng.tech/zh/posts/api-automation-testing/rest-assured-tutorial-advance-usage-integration-ci-cd-and-allure-report/\nREST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - éªŒè¯å“åº”å’Œæ—¥å¿—è®°å½•ï¼Œè¿‡æ»¤å™¨ï¼Œæ–‡ä»¶ä¸Šä¼ :https://naodeng.tech/zh/posts/api-automation-testing/rest-assured-tutorial-advance-usage-verifying-response-and-logging/\nREST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»º REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®:https://naodeng.tech/zh/posts/api-automation-testing/rest-assured-tutorial-building-your-own-project-from-0-to-1/\nREST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡:https://naodeng.tech/zh/posts/api-automation-testing/rest-assured-tutorial-and-environment-preparation/\nREST Assured æ¡†æ¶æ•™ç¨‹å‚è€ƒæ–‡æ¡£ Demo é¡¹ç›®åœ°å€ï¼šhttps://github.com/Automation-Test-Starter/RestAssured-API-Test-Starter/ Rest assured å®˜æ–¹æ–‡æ¡£ï¼šhttps://rest-assured.io/ Rest assured å®˜æ–¹ githubï¼šhttps://github.com/rest-assured/rest-assured Rest assured å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç¿»è¯‘ï¼šhttps://github.com/RookieTester/rest-assured-doc Allure æ–‡æ¡£ï¼šhttps://docs.qameta.io/allure/ gitHub action æ–‡æ¡£ï¼šhttps://docs.github.com/en/actions JavaScript å’Œ SuperTest æ¡†æ¶å®ç°æ¥å£è‡ªåŠ¨åŒ–é¡¹ç›® SuperTest æ¡†æ¶æ•™ç¨‹ç›®å½• ç›®å½•ä¸å¯ç‚¹å‡»ï¼Œä»…ä¸ºå±•ç¤ºç›®å½•ç»“æ„\nSuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›® ä»‹ç» é¡¹ç›®ä¾èµ– é¡¹ç›®æ–‡ä»¶ç»“æ„ ä» 0 åˆ° 1 æ­å»º SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® Mocha ç‰ˆæœ¬ Jest ç‰ˆæœ¬ è¿›é˜¶ç”¨æ³• æŒç»­é›†æˆ æ¥å…¥ github action å¸¸ç”¨æ–­è¨€ SuperTest çš„å†…ç½®æ–­è¨€ CHAI çš„å¸¸ç”¨æ–­è¨€ Jest çš„å¸¸ç”¨æ–­è¨€ æ•°æ®é©±åŠ¨ å¤šç¯å¢ƒæ”¯æŒ SuperTest æ¡†æ¶æ•™ç¨‹å¯¹åº”æ–‡ç«  SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¤šç¯å¢ƒæ”¯æŒï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-multiple-environment-support/ SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - æ•°æ®é©±åŠ¨ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-data-driven/ SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨æ–­è¨€ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-common-assertions/ SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œ Github action:https://naodeng.tech/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-integration-ci-cd-and-github-action/ SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»º Supertest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/supertest-tutorial-building-your-own-project-from-0-to-1/ SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/supertest-tutorial-getting-started-and-own-environment-preparation/ SuperTest æ¡†æ¶æ•™ç¨‹å‚è€ƒæ–‡æ¡£ Demo é¡¹ç›®åœ°å€ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-API-Test-Starter SuperTest æ–‡æ¡£ï¼šhttps://github.com/ladjs/supertest Jest æ–‡æ¡£ï¼šhttps://jestjs.io/docs/en/getting-started Mocha æ–‡æ¡£ï¼šhttps://mochajs.org/ Chai æ–‡æ¡£ï¼šhttps://www.chaijs.com/ Allure æ–‡æ¡£ï¼šhttps://docs.qameta.io/allure/ gitHub action æ–‡æ¡£ï¼šhttps://docs.github.com/en/actions Python å’Œ Pytest æ¡†æ¶å®ç°æ¥å£è‡ªåŠ¨åŒ–é¡¹ç›® Pytest æ¡†æ¶æ•™ç¨‹ç›®å½• ç›®å½•ä¸å¯ç‚¹å‡»ï¼Œä»…ä¸ºå±•ç¤ºç›®å½•ç»“æ„\nPytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å¿«é€Ÿå¯åŠ¨é¡¹ç›® ä»‹ç» Pytest ä»‹ç» python è™šæ‹Ÿç¯å¢ƒä»‹ç» é¡¹ç›®ä¾èµ– é¡¹ç›®ç›®å½•ç»“æ„ ä» 0 åˆ° 1 æ­å»º Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® è¿›é˜¶ç”¨æ³• æŒç»­é›†æˆ æ¥å…¥ github action å¸¸ç”¨æ–­è¨€ æ•°æ®é©±åŠ¨ å¤šç¯å¢ƒæ”¯æŒ é›†æˆ allure æŠ¥å‘Š å¹¶å‘æµ‹è¯•å’Œåˆ†å¸ƒå¼æµ‹è¯• ç­›é€‰ç”¨ä¾‹æ‰§è¡Œ Pytest æ¡†æ¶æ•™ç¨‹å¯¹åº”æ–‡ç«  Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - ç­›é€‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œï¼Œå¹¶å‘æµ‹è¯•å’Œåˆ†å¸ƒå¼æµ‹è¯•ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-filter-testcase-and-concurrent-testing-distributed-testing/ Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¤šç¯å¢ƒæ”¯æŒ å’Œ é›†æˆ allure æŠ¥å‘Šï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/ Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨æ–­è¨€å’Œæ•°æ®é©±åŠ¨ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/ Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œ Github actionï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-integration-ci-cd-and-github-action/ Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»º Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-building-your-own-project-from-0-to-1/ Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/pytest-tutorial-getting-started-and-own-environment-preparation/ Pytest æ¡†æ¶æ•™ç¨‹å‚è€ƒæ–‡æ¡£ Demo é¡¹ç›®åœ°å€ï¼šhttps://github.com/Automation-Test-Starter/Pytest-API-Test-Starter Pytest æ–‡æ¡£ï¼šhttps://docs.pytest.org/en/stable/ Pytest-html æ–‡æ¡£ï¼šhttps://pypi.org/project/pytest-html/ Pytest-xdist æ–‡æ¡£ï¼šhttps://pypi.org/project/pytest-xdist/ Allure-pytest æ–‡æ¡£ï¼šhttps://pypi.org/project/allure-pytest/ Allure æ–‡æ¡£ï¼šhttps://docs.qameta.io/allure/ gitHub action æ–‡æ¡£ï¼šhttps://docs.github.com/en/actions æµ‹è¯•å·¥å…·å®ç°æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯• Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯• Postman æ¡†æ¶æ•™ç¨‹ç›®å½• ç›®å½•ä¸å¯ç‚¹å‡»ï¼Œä»…ä¸ºå±•ç¤ºç›®å½•ç»“æ„\nPostman-API-Test-Starter ä»‹ç» æ¥å£æµ‹è¯•ç®€ä»‹ Postman ä¸ newman ä»‹ç» é¡¹ç›®ä¾èµ– é¡¹ç›®æ–‡ä»¶ç»“æ„ ä» 0 åˆ° 1 æ­å»º Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® è¿›é˜¶ç”¨æ³• è¾“å‡º html æµ‹è¯•æŠ¥å‘Š CI/CD æŒç»­é›†æˆ æ¥å…¥ github action é›†æˆ allure æµ‹è¯•æŠ¥å‘Š å¸¸ç”¨æµ‹è¯•è„šæœ¬ å“åº”æµ‹è¯•è„šæœ¬ è¯·æ±‚å‰è„šæœ¬ æµ‹è¯•è„šæœ¬ä¸­å¯ç”¨çš„ç¬¬ä¸‰æ–¹åº“ chai.js æ–­è¨€åº“æ–¹æ³• ä½¿ç”¨ cheerio æ“ä½œ HTML æ–‡ä»¶ ä½¿ç”¨ tv4 æ¥éªŒè¯ JSON Schema ç”Ÿæˆ uuid ä½¿ç”¨ xml2js å°† XML è½¬æ¢ä¸º JavaScript å¯¹è±¡ å¸¸ç”¨å·¥å…·å‡½æ•° util stream æµæ“ä½œ å®šæ—¶å™¨ timers æ—¶é—´å¤„ç† events æ•°æ®é©±åŠ¨ ä½¿ç”¨ç¯å¢ƒå˜é‡ ä½¿ç”¨æ•°æ®æ–‡ä»¶ æ–‡ä»¶ä¸Šä¼  å¹¶å‘æµ‹è¯• Postman æ¡†æ¶æ•™ç¨‹å¯¹åº”æ–‡ç«  Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨å‘½ä»¤è¡Œé€‰é¡¹ï¼Œæ–‡ä»¶ä¸Šä¼ åœºæ™¯å’Œ SSL è¯ä¹¦åœºæ™¯ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/postman-tutorial-advance-usage-common-command-line-options-and-file-upload/ Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - æ•°æ®é©±åŠ¨ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/postman-tutorial-advance-usage-data-driven-and-environment-data-driven/ Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨çš„æµ‹è¯•è„šæœ¬å’Œå¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åŒ…ç”¨æ³•ç¤ºä¾‹ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/postman-tutorial-advance-usage-common-test-scripts-and-commonly-used-third-party-packages/ Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œ Github actionï¼Œæ¥å…¥ allure æµ‹è¯•æŠ¥å‘Šï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/postman-tutorial-advance-usage-integration-html-report-and-allure-report-integration-github-action/ Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œä» 0 åˆ° 1 æ­å»º Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼šhttps://naodeng.tech/zh/posts/api-automation-testing/postman-tutorial-getting-started-and-building-your-own-project-from-0-to-1/ Postman æ¡†æ¶æ•™ç¨‹å‚è€ƒæ–‡æ¡£ Demo é¡¹ç›®åœ°å€ï¼šhttps://github.com/Automation-Test-Starter/Postman-API-Test-Starter Postman å®˜æ–¹æ–‡æ¡£:https://learning.postman.com/docs/getting-started/introduction/ Newman å®˜æ–¹æ–‡æ¡£:https://github.com/postmanlabs/newman gitHub action æ–‡æ¡£ï¼šhttps://docs.github.com/en/actions allure æ–‡æ¡£ï¼šhttps://docs.qameta.io/allure/ Bruno æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯• Bruno æ¡†æ¶æ•™ç¨‹ç›®å½• ç›®å½•ä¸å¯ç‚¹å‡»ï¼Œä»…ä¸ºå±•ç¤ºç›®å½•ç»“æ„\nbruno-user-guide ä¸ºä»€ä¹ˆé€‰æ‹© bruno å®‰è£… bruno å®¢æˆ·ç«¯ä½¿ç”¨å…¥é—¨ é»˜è®¤ä¸»ç•Œé¢ API è¯·æ±‚é›† API è¯·æ±‚ ç¼–å†™ API è¯·æ±‚æµ‹è¯•è„šæœ¬ ç¯å¢ƒå˜é‡ æµ‹è¯•è„šæœ¬æ¥å£è‡ªåŠ¨åŒ– å‰ç½®æ¡ä»¶ æ¥å£è‡ªåŠ¨åŒ–é¡¹ç›® demo æ¥å…¥ CI æ¥å…¥ github action Postman è„šæœ¬è¿ç§» API è¯·æ±‚é›†è¿ç§» ç¯å¢ƒå˜é‡è¿ç§» æµ‹è¯•è„šæœ¬è¿ç§»å‚è€ƒ Bruno æ¡†æ¶æ•™ç¨‹å¯¹åº”æ–‡ç«  postman æ›¿æ¢å·¥å…· bruno ä½¿ç”¨ä»‹ç»:https://naodeng.tech/zh/posts/api-automation-testing/introduction_of_bruno/ Bruno æ¡†æ¶æ•™ç¨‹å‚è€ƒæ–‡æ¡£ Demo é¡¹ç›®åœ°å€ï¼šhttps://github.com/Automation-Test-Starter/Bruno-API-Test-Starter Bruno æ–‡æ¡£ï¼šhttps://docs.usebruno.com/ gitHub action æ–‡æ¡£ï¼šhttps://docs.github.com/en/actions æ¨èé˜…è¯» ä½¿ç”¨ Postman è¿›è¡Œæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å¿«é€Ÿå¼€å¯æ•™ç¨‹ç³»åˆ— ä½¿ç”¨ Pytest è¿›è¡Œæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å¿«é€Ÿå¼€å¯æ•™ç¨‹ç³»åˆ— ä½¿ç”¨ SuperTest è¿›è¡Œæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å¿«é€Ÿå¼€å¯æ•™ç¨‹ç³»åˆ— ä½¿ç”¨ Rest Assured è¿›è¡Œæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å¿«é€Ÿå¼€å¯æ•™ç¨‹ç³»åˆ— ä½¿ç”¨ Galting è¿›è¡Œæ€§èƒ½æµ‹è¯•å¿«é€Ÿå¼€å¯æ•™ç¨‹ç³»åˆ— æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/a-collection-of-tutorials-on-api-automation-testing-for-different-frameworks-and-different-development-languages/","summary":"è¿™ç¯‡åšæ–‡æ±‡æ€»äº†å…³äºä¸åŒæ¡†æ¶å’Œå¼€å‘è¯­è¨€çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼Œä¸ºè¯»è€…æä¾›å…¨é¢çš„å­¦ä¹ èµ„æºã€‚æ¶µç›–äº†å„ç§æµè¡Œæµ‹è¯•æ¡†æ¶å’Œç¼–ç¨‹è¯­è¨€ï¼Œè®©æ‚¨èƒ½å¤Ÿé€‰æ‹©é€‚åˆè‡ªå·±é¡¹ç›®çš„æœ€ä½³æ–¹æ¡ˆã€‚æ— è®ºæ‚¨æ˜¯ Pythonã€Javaã€JavaScript è¿˜æ˜¯å…¶ä»–è¯­è¨€çš„å¼€å‘è€…ï¼Œæ— è®ºæ‚¨åå¥½ä½¿ç”¨çš„æ˜¯ REST Assuredã€SuperTest è¿˜æ˜¯å…¶ä»–æ¡†æ¶ï¼Œè¿™ä¸ªåˆé›†éƒ½å°†ä¸ºæ‚¨æä¾›æ·±å…¥çš„å­¦ä¹ æŒ‡å—ï¼Œå¸®åŠ©æ‚¨åœ¨æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¢†åŸŸæ›´åŠ æ¸¸åˆƒæœ‰ä½™ã€‚ä¸å®¹é”™è¿‡çš„èµ„æºï¼ŒåŠ©æ‚¨å…¨é¢æŒæ¡æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•çš„å„ç§å·¥å…·å’ŒæŠ€æœ¯ã€‚","title":"æ¥å£æµ‹è¯•æ–°æ‰‹å…¥é—¨æ•™ç¨‹ï¼šä¸åŒæ¡†æ¶å’Œä¸åŒå¼€å‘è¯­è¨€"},{"content":"è¿›é˜¶ç”¨æ³• ä»¥ä¸‹ä¼šä»‹ç» Postman å’Œ Newman çš„ä¸€äº›è¿›é˜¶ç”¨æ³•ï¼ŒåŒ…æ‹¬å¸¸ç”¨å‘½ä»¤è¡Œé€‰é¡¹ã€æ–‡ä»¶ä¸Šä¼ åœºæ™¯å’Œ SSL è¯ä¹¦åœºæ™¯ã€‚\næ–‡ä»¶ä¸Šä¼ åœºæ™¯ åœ¨ postman å’Œ newman åšæ¥å£è‡ªåŠ¨åŒ–æ—¶ï¼Œæ–‡ä»¶ä¸Šä¼ å¯ä»¥é€šè¿‡ form-data çš„æ–¹å¼æ¥å®ç°ã€‚\næ–‡ä»¶å¿…é¡»å­˜åœ¨äºå½“å‰å·¥ä½œç›®å½•ä¸­ã€‚è¯·æ±‚çš„ \u0026ldquo;src \u0026ldquo;å±æ€§ä¸­ä¹Ÿå¿…é¡»åŒ…å«æ–‡ä»¶åã€‚\nåœ¨æ­¤é›†åˆä¸­ï¼Œå½“å‰å·¥ä½œç›®å½•ä¸­åº”åŒ…å«åä¸º \u0026ldquo;demo.txt\u0026rdquo; çš„æ–‡ä»¶ã€‚\n{ \u0026#34;info\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;file-upload\u0026#34; }, \u0026#34;item\u0026#34;: [ { \u0026#34;request\u0026#34;: { \u0026#34;url\u0026#34;: \u0026#34;https://postman-echo.com/post\u0026#34;, \u0026#34;method\u0026#34;: \u0026#34;POST\u0026#34;, \u0026#34;body\u0026#34;: { \u0026#34;mode\u0026#34;: \u0026#34;formdata\u0026#34;, \u0026#34;formdata\u0026#34;: [ { \u0026#34;key\u0026#34;: \u0026#34;file\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;file\u0026#34;, \u0026#34;enabled\u0026#34;: true, \u0026#34;src\u0026#34;: \u0026#34;demo.txt\u0026#34; } ] } } } ] } æ³¨æ„ï¼šè°ƒæ•´æ–‡ä»¶ä¸Šä¼ çš„è·¯å¾„ï¼Œç¡®ä¿æ–‡ä»¶å­˜åœ¨è·¯å¾„åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å­˜åœ¨æˆ–è€…ä½¿ç”¨ç»å¯¹è·¯å¾„\nNewman å¸¸ç”¨å‘½ä»¤è¡Œé€‰é¡¹ newman æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥è¿è¡Œ postman é›†åˆã€‚newman æä¾›äº†è®¸å¤šé€‰é¡¹ï¼Œå¯ä»¥åœ¨è¿è¡Œé›†åˆæ—¶ä½¿ç”¨è¿™äº›é€‰é¡¹ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ newman å‘½ä»¤è¡Œé€‰é¡¹çš„ä»‹ç»å’Œç¤ºä¾‹ï¼š\nåŸºæœ¬å‘½ä»¤ newman run \u0026lt;collection\u0026gt;ï¼š ç”¨äºè¿è¡Œ Postman é›†åˆã€‚\nnewman run collection.json -e, --environment \u0026lt;environment\u0026gt;ï¼š æŒ‡å®šç¯å¢ƒæ–‡ä»¶ã€‚\nnewman run collection.json -e environment.json -g, --globals \u0026lt;globals\u0026gt;ï¼š æŒ‡å®šå…¨å±€å˜é‡æ–‡ä»¶ã€‚\nnewman run collection.json -g globals.json -d, --iteration-data \u0026lt;data\u0026gt;ï¼š æŒ‡å®šæ•°æ®æ–‡ä»¶ï¼Œç”¨äºæ•°æ®é©±åŠ¨æµ‹è¯•ã€‚\nnewman run collection.json -d data-file.csv è¾“å‡ºå’ŒæŠ¥å‘Š -r, --reporters \u0026lt;reporters\u0026gt;ï¼š æŒ‡å®šæŠ¥å‘Šå™¨ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªæŠ¥å‘Šï¼Œå¦‚ cliã€jsonã€html ç­‰ã€‚\nnewman run collection.json -r cli,json --reporter-json-export \u0026lt;file\u0026gt;ï¼š å°†æµ‹è¯•ç»“æœå¯¼å‡ºä¸º JSON æ–‡ä»¶ã€‚\nnewman run collection.json --reporters json --reporter-json-export output.json --reporter-html-export \u0026lt;file\u0026gt;ï¼š å°†æµ‹è¯•ç»“æœå¯¼å‡ºä¸º HTML æ–‡ä»¶ã€‚\nnewman run collection.json --reporters html --reporter-html-export output.html --reporter-html-template \u0026lt;file\u0026gt;ï¼š ä½¿ç”¨è‡ªå®šä¹‰ HTML æ¨¡æ¿ç”Ÿæˆ HTML æŠ¥å‘Šã€‚\nnewman run collection.json --reporters html --reporter-html-template custom-template.hbs å…¶ä»–é€‰é¡¹ -h, --helpï¼š æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼Œåˆ—å‡ºæ‰€æœ‰å‘½ä»¤è¡Œé€‰é¡¹ã€‚\nnewman run --help -v, --versionï¼š æ˜¾ç¤º Newman ç‰ˆæœ¬ä¿¡æ¯ã€‚\nnewman --version -x, --suppress-exit-codeï¼š åœ¨è¿è¡Œå¤±è´¥æ—¶ï¼Œä¸è¿”å›éé›¶çš„é€€å‡ºä»£ç ã€‚\nnewman run collection.json -x --delay-request \u0026lt;ms\u0026gt;ï¼š è®¾ç½®è¯·æ±‚ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´ï¼Œä»¥æ¨¡æ‹Ÿå®é™…åœºæ™¯ã€‚\nnewman run collection.json --delay-request 1000 --timeout \u0026lt;ms\u0026gt;ï¼š è®¾ç½®è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ã€‚\nnewman run collection.json --timeout 5000 --no-colorï¼š ç¦ç”¨æ§åˆ¶å°è¾“å‡ºçš„é¢œè‰²ã€‚\nnewman run collection.json --no-color --bailï¼š åœ¨ç¬¬ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•æ—¶åœæ­¢è¿è¡Œã€‚\nnewman run collection.json --bail è¿™åªæ˜¯ä¸€äº›å¸¸è§çš„ Newman å‘½ä»¤è¡Œé€‰é¡¹ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œ newman run --help æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é€‰é¡¹ä»¥åŠå®ƒä»¬çš„æè¿°ã€‚æ ¹æ®ä½ çš„æµ‹è¯•éœ€æ±‚ï¼Œä½ å¯èƒ½éœ€è¦è°ƒæ•´å’Œç»„åˆè¿™äº›é€‰é¡¹ã€‚\nSSL è¯ä¹¦é…ç½® å®¢æˆ·ç«¯è¯ä¹¦æ˜¯ä¼ ç»Ÿèº«ä»½éªŒè¯æœºåˆ¶çš„æ›¿ä»£æ–¹æ¡ˆã€‚è¿™äº›å…è®¸ç”¨æˆ·ä½¿ç”¨å…¬å…±è¯ä¹¦å’ŒéªŒè¯è¯ä¹¦æ‰€æœ‰æƒçš„å¯é€‰ç§é’¥å‘æœåŠ¡å™¨å‘å‡ºç»è¿‡èº«ä»½éªŒè¯çš„è¯·æ±‚ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç§é’¥ä¹Ÿå¯èƒ½å—åˆ°ç§˜å¯†å¯†ç çš„ä¿æŠ¤ï¼Œä»è€Œæä¾›é¢å¤–çš„èº«ä»½éªŒè¯å®‰å…¨å±‚ã€‚\nNewman é€šè¿‡ä»¥ä¸‹ CLI é€‰é¡¹æ”¯æŒ SSL å®¢æˆ·ç«¯è¯ä¹¦ï¼š\nä½¿ç”¨å•ä¸ª SSL å®¢æˆ·ç«¯è¯ä¹¦ ç›´æ¥åœ¨ newman å‘½ä»¤åé¢æ ¹æ®è¯ä¹¦çš„å®é™…æƒ…å†µæ·»åŠ ä»¥ä¸‹é€‰é¡¹å³å¯\n--ssl-client-cert å‚æ•°åè·Ÿç€å…¬å…±å®¢æˆ·ç«¯è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„ã€‚\n--ssl-client-key å‚æ•°åè·Ÿç€å®¢æˆ·ç«¯ç§é’¥çš„è·¯å¾„ï¼ˆå¯é€‰ï¼‰ã€‚\n--ssl-client-passphrase å‚æ•°åè·Ÿç€ç”¨äºä¿æŠ¤ç§æœ‰å®¢æˆ·ç«¯å¯†é’¥çš„ç§˜å¯†å¯†ç ï¼ˆå¯é€‰ï¼‰ã€‚\nä½¿ç”¨å¤šä¸ª SSL å®¢æˆ·ç«¯è¯ä¹¦ é€‚ç”¨äºæ¯æ¬¡è¿è¡Œéœ€è¦æ”¯æŒå¤šä¸ªè¯ä¹¦çš„æƒ…å†µ\n--ssl-client-cert-list SSL å®¢æˆ·ç«¯è¯ä¹¦åˆ—è¡¨é…ç½®æ–‡ä»¶ï¼ˆJSON æ ¼å¼ï¼‰çš„è·¯å¾„ã€‚ å‚è€ƒç¤ºä¾‹/ssl-client-cert-list.jsonã€‚\n[ { \u0026#34;name\u0026#34;: \u0026#34;domain1\u0026#34;, \u0026#34;matches\u0026#34;: [\u0026#34;https://test.domain1.com/*\u0026#34;, \u0026#34;https://www.domain1/*\u0026#34;], \u0026#34;key\u0026#34;: {\u0026#34;src\u0026#34;: \u0026#34;./client.domain1.key\u0026#34;}, \u0026#34;cert\u0026#34;: {\u0026#34;src\u0026#34;: \u0026#34;./client.domain1.crt\u0026#34;}, \u0026#34;passphrase\u0026#34;: \u0026#34;changeme\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;domain2\u0026#34;, \u0026#34;matches\u0026#34;: [\u0026#34;https://domain2.com/*\u0026#34;], \u0026#34;key\u0026#34;: {\u0026#34;src\u0026#34;: \u0026#34;./client.domain2.key\u0026#34;}, \u0026#34;cert\u0026#34;: {\u0026#34;src\u0026#34;: \u0026#34;./client.domain2.crt\u0026#34;}, \u0026#34;passphrase\u0026#34;: \u0026#34;changeme\u0026#34; } ] å¦å¤–è¿™ç§ json é…ç½®ä¹Ÿé€‚ç”¨äºä¸åŒè¯ä¹¦ä¸åŒç¯å¢ƒçš„æƒ…å†µï¼Œæ ¹æ® matches åŒ¹é…ä¸åŒçš„ç¯å¢ƒå’ŒåŸŸåã€‚\nå¤‡æ³¨ï¼šæ­¤é€‰é¡¹å…è®¸æ ¹æ® URL æˆ–ä¸»æœºåè®¾ç½®ä¸åŒçš„ SSL å®¢æˆ·ç«¯è¯ä¹¦ã€‚æ­¤é€‰é¡¹ä¼˜å…ˆäº \u0026ndash;ssl-client-certã€ \u0026ndash;ssl-client-key å’Œ \u0026ndash;ssl-client-passphrase é€‰é¡¹ã€‚å¦‚æœåˆ—è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„ URLï¼Œè¿™äº›é€‰é¡¹å°†ç”¨ä½œåå¤‡é€‰é¡¹ã€‚\nTrusted CA è¯ä¹¦ é€‚ç”¨äºéœ€è¦ä¿¡ä»»è‡ªå®šä¹‰ CA è¯ä¹¦çš„æƒ…å†µ\nå¦‚æœä¸æƒ³ä½¿ç”¨ \u0026ndash;insecure é€‰é¡¹ï¼Œå¯ä»¥åƒè¿™æ ·æä¾›é¢å¤–çš„å¯ä¿¡ CA è¯ä¹¦ï¼š\n--ssl-extra-ca-certs å‚æ•°åè·Ÿç€ä¿å­˜ä¸€ä¸ªæˆ–å¤šä¸ª PEM æ ¼å¼å¯ä¿¡ CA è¯ä¹¦çš„æ–‡ä»¶è·¯å¾„çš„åˆ—è¡¨ã€‚ å‚è€ƒæ–‡æ¡£ Postman å®˜æ–¹æ–‡æ¡£:https://learning.postman.com/docs/getting-started/introduction/ Newman å®˜æ–¹æ–‡æ¡£:https://github.com/postmanlabs/newman?tab=readme-ov-file#command-line-options æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/postman-tutorial-advance-usage-common-command-line-options-and-file-upload/","summary":"è¿™ç¯‡åšæ–‡æ·±åº¦æŒ–æ˜ Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¿›é˜¶ç”¨æ³•ï¼Œé›†ä¸­è®¨è®ºå¸¸ç”¨å‘½ä»¤è¡Œé€‰é¡¹ã€æ–‡ä»¶ä¸Šä¼ åœºæ™¯å’Œ SSL è¯ä¹¦åœºæ™¯ã€‚å­¦ä¼šå¦‚ä½•è¿ç”¨å¸¸ç”¨å‘½ä»¤è¡Œé€‰é¡¹ä¼˜åŒ–æµ‹è¯•æµç¨‹ï¼Œè§£å†³æ–‡ä»¶ä¸Šä¼ å’Œ SSL è¯ä¹¦ç­‰ç‰¹æ®Šåœºæ™¯çš„æµ‹è¯•æŒ‘æˆ˜","title":"Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨å‘½ä»¤è¡Œé€‰é¡¹ï¼Œæ–‡ä»¶ä¸Šä¼ åœºæ™¯å’Œ SSL è¯ä¹¦åœºæ™¯"},{"content":"è¿›é˜¶ç”¨æ³• ä»¥ä¸‹ä¼šä»‹ç» Postman å’Œ Newman çš„ä¸€äº›è¿›é˜¶ç”¨æ³•ï¼ŒåŒ…æ‹¬æ•°æ®æ–‡ä»¶é©±åŠ¨å’Œç¯å¢ƒå˜é‡æ•°æ®é©±åŠ¨ã€‚\næ•°æ®é©±åŠ¨ åœ¨ API è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¿‡ç¨‹ä¸­ã€‚ä½¿ç”¨æ•°æ®é©±åŠ¨æ˜¯ä¸€ç§å¸¸è§„æµ‹è¯•æ–¹æ³•ï¼Œå…¶ä¸­æµ‹è¯•ç”¨ä¾‹çš„è¾“å…¥æ•°æ®å’Œé¢„æœŸè¾“å‡ºæ•°æ®éƒ½è¢«å­˜å‚¨åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼Œæµ‹è¯•æ¡†æ¶æ ¹æ®è¿™äº›æ•°æ®æ–‡ä»¶æ‰§è¡Œå¤šæ¬¡æµ‹è¯•ï¼Œä»¥éªŒè¯ API çš„å„ä¸ªæ–¹é¢ã€‚\næµ‹è¯•æ•°æ®å¯ä»¥å¾ˆå®¹æ˜“åœ°ä¿®æ”¹ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹ä»£ç ã€‚\næ•°æ®é©±åŠ¨æµ‹è¯•å¯ä»¥å¸®åŠ©ä½ æœ‰æ•ˆåœ°è¦†ç›–å¤šç§æƒ…å†µï¼Œç¡®ä¿ API åœ¨å„ç§è¾“å…¥æ•°æ®ä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚\nå¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/Postman-Newman-demo\nåœ¨ Postman ä¸­è¿›è¡Œæ•°æ®é©±åŠ¨æµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨ JSON æ•°æ®ä½œä¸ºæµ‹è¯•æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡å’Œæ•°æ®æ–‡ä»¶é…åˆ Postman æä¾›çš„æµ‹è¯•è„šæœ¬æ¥å®ç°ï¼Œä»¥ä¸‹ä¼šåˆ†åˆ«ä»¥ç®€å•çš„ç¤ºä¾‹æ¥ä»‹ç»ç¯å¢ƒå˜é‡å’Œæ•°æ®æ–‡ä»¶çš„ä½¿ç”¨ã€‚\nä½¿ç”¨ç¯å¢ƒå˜é‡ å¤§è‡´çš„æ­¥éª¤æ˜¯ï¼šå°†æµ‹è¯•æ•°æ®å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œç„¶ååœ¨æµ‹è¯•è„šæœ¬ä¸­è¯»å–ç¯å¢ƒå˜é‡ä¸­çš„æ•°æ®ï¼Œè¿›è¡Œæµ‹è¯•ã€‚\n1. åˆ›å»ºç¯å¢ƒå˜é‡ åœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥åœ¨ \u0026ldquo;Manage Environments\u0026rdquo; çª—å£ä¸­åˆ›å»ºç¯å¢ƒå˜é‡ã€‚åœ¨ \u0026ldquo;Manage Environments\u0026rdquo; çª—å£ä¸­ï¼Œä½ å¯ä»¥åˆ›å»ºå¤šä¸ªç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒéƒ½æœ‰ä¸€ç»„ç¯å¢ƒå˜é‡ã€‚\nä¹‹å‰åœ¨ demo ä¸­åˆ›å»ºäº†ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œåä¸º DemoEnvï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ baseURLï¼Œç”¨äºå­˜å‚¨ API çš„åŸºæœ¬ URLã€‚ è¿™ä¸€æ¬¡æˆ‘ä»¬åœ¨ DemoEnv ç¯å¢ƒä¸­æ·»åŠ å¤šä¸ªç¯å¢ƒå˜é‡ï¼Œç”¨äºå­˜å‚¨ get-demo æ¥å£å’Œ post-demo æ¥å£çš„å„ç±»æµ‹è¯•æ•°æ®ã€‚\nç‚¹å‡»ç¼–è¾‘DemoEnvç¯å¢ƒï¼Œæ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š\nKey Value getAPI posts/1 getAPIResponseStatus 200 getAPIResponseData {\u0026ldquo;userId\u0026rdquo;:1,\u0026ldquo;id\u0026rdquo;:1,\u0026ldquo;title\u0026rdquo;:\u0026ldquo;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026rdquo;,\u0026ldquo;body\u0026rdquo;:\u0026ldquo;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026rdquo;} postAPI posts postAPIResponseStatus 201 postAPIResponseData {\u0026ldquo;title\u0026rdquo;:\u0026ldquo;foo\u0026rdquo;,\u0026ldquo;body\u0026rdquo;:\u0026ldquo;bar\u0026rdquo;,\u0026ldquo;userId\u0026rdquo;:1,\u0026ldquo;id\u0026rdquo;:101} 2. ä½¿ç”¨ç¯å¢ƒå˜é‡ åœ¨ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å­˜å‚¨å’Œè·å–æ•°æ®ã€‚åœ¨è¯·æ±‚ Body ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ pm.environment.get è·å–ç¯å¢ƒå˜é‡çš„å€¼ã€‚\næ³¨æ„ï¼šåœ¨ JavaScript ä¸­ï¼Œç¯å¢ƒå˜é‡è·å–çš„å€¼æ˜¯å­—ç¬¦ä¸²\nç¼–è¾‘ get-demo æ¥å£ å°† URL ä¿®æ”¹ä¸º {{baseURL}}/{{getAPI}}ï¼Œ ç¼–è¾‘ Tests è„šæœ¬ç”¨æ¥éªŒè¯å“åº”æ•°æ®ï¼š // è·å–ç¯å¢ƒå˜é‡ä¸­çš„æ•°æ® const getAPIResponseStatus = parseInt(pm.environment.get(\u0026#34;getAPIResponseStatus\u0026#34;)); const getAPIResponseData = JSON.parse(pm.environment.get(\u0026#39;getAPIResponseData\u0026#39;)); pm.test(\u0026#34;res.status should be 200\u0026#34;, function () { pm.response.to.have.status(getAPIResponseStatus); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(getAPIResponseData.id); pm.expect(data.userId).to.equal(getAPIResponseData.userId); pm.expect(data.title).to.equal(getAPIResponseData.title); pm.expect(data.body).to.equal(getAPIResponseData.body); }); ç‚¹å‡»ä¿å­˜ï¼Œç„¶åç‚¹å‡»å‘é€ï¼Œå¯ä»¥çœ‹åˆ°æµ‹è¯•é€šè¿‡ã€‚ ç¼–è¾‘ post-demo æ¥å£ å°† URL ä¿®æ”¹ä¸º {{baseURL}}/{{postAPI}}ï¼Œ ç¼–è¾‘ Tests è„šæœ¬ç”¨æ¥éªŒè¯å“åº”æ•°æ®ï¼š // è·å–ç¯å¢ƒå˜é‡ä¸­çš„æ•°æ® const postAPIResponseStatus = parseInt(pm.environment.get(\u0026#34;postAPIResponseStatus\u0026#34;)); const postAPIResponseData = JSON.parse(pm.environment.get(\u0026#39;postAPIResponseData\u0026#39;)); pm.test(\u0026#34;res.status should be 201\u0026#34;, function () { pm.response.to.have.status(postAPIResponseStatus); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(postAPIResponseData.id); pm.expect(data.userId).to.equal(postAPIResponseData.userId); pm.expect(data.title).to.equal(postAPIResponseData.title); pm.expect(data.body).to.equal(postAPIResponseData.body); }); ç‚¹å‡»ä¿å­˜ï¼Œç„¶åç‚¹å‡»å‘é€ï¼Œå¯ä»¥çœ‹åˆ°æµ‹è¯•é€šè¿‡ã€‚ 3. è°ƒè¯•ç¯å¢ƒå˜é‡æ•°æ®é©±åŠ¨è„šæœ¬ é€‰æ‹©å¯¹åº”çš„ç¯å¢ƒå˜é‡å’Œæ›´æ–°åçš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¿è¡Œæ•´ä¸ª demo collectionï¼Œç¡®è®¤æµ‹è¯•é€šè¿‡\n4.è‡ªåŠ¨åŒ–è¿è¡Œç¯å¢ƒå˜é‡æ•°æ®é©±åŠ¨è„šæœ¬ å°†æ›´æ–°åçš„æµ‹è¯•ç”¨ä¾‹å¯¼å‡ºåˆ°è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹ä¸‹ è°ƒæ•´ package.json åœ¨ package.json æ–‡ä»¶ä¸­ï¼Œæ›´æ–°æµ‹è¯•è„šæœ¬ï¼Œç”¨äºè¿è¡Œç¯å¢ƒå˜é‡æ•°æ®é©±åŠ¨æµ‹è¯•ç”¨ä¾‹ï¼š\ndemo é¡¹ç›®ä¸ºäº†åŒºåˆ†ä¸åŒåœºæ™¯ï¼Œæ–°å¢äº†æµ‹è¯•å‘½ä»¤ä¸º environment-driven-test\n\u0026#34;environment-driven-test\u0026#34;: \u0026#34;newman run Testcase/Environment-Driven.postman_collection.json -e Env/Environment-Driven-DemoEnv.postman_environment.json -r cli,allure --reporter-allure-export ./allure-results\u0026#34;, è¿è¡Œæµ‹è¯• npm run environment-driven-test ä½¿ç”¨æ•°æ®æ–‡ä»¶ å¤§è‡´çš„æ­¥éª¤æ˜¯ï¼šå°†æµ‹è¯•æ•°æ®å­˜æ”¾åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨æµ‹è¯•è„šæœ¬ä¸­è¯»å–æ•°æ®æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¿›è¡Œæµ‹è¯•ã€‚\npostman çš„æ•°æ®æ–‡ä»¶æ”¯æŒ jsonï¼Œcsv å’Œ txt ç­‰å¤šç§æ ¼å¼ï¼Œä»¥ä¸‹ç¤ºä¾‹ä¼šä»¥ json æ ¼å¼ è¿›è¡Œ\n1.åˆ›å»ºæ•°æ®æ–‡ä»¶ åœ¨ postma æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ä¸‹æ–°å»º Data æ–‡ä»¶å¤¹ mkdir Data åœ¨ Data æ–‡ä»¶å¤¹ä¸‹æ–°å»º json æ ¼å¼æ•°æ®æ–‡ä»¶ testdata.json cd Data touch testdata.json æ›´æ–°æµ‹è¯•æ•°æ®æ–‡ä»¶ testdata.json [ { \u0026#34;getAPI\u0026#34;: \u0026#34;posts/1\u0026#34;, \u0026#34;postAPI\u0026#34;: \u0026#34;posts\u0026#34;, \u0026#34;getAPIResponseStatus\u0026#34;: 200, \u0026#34;getAPIResponseData\u0026#34;: { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; }, \u0026#34;postAPIResponseStatus\u0026#34;: 201, \u0026#34;postAPIResponseData\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 } } ] 2.æ›´æ–°æµ‹è¯•ç”¨ä¾‹ æ›´æ–° get-demo æ¥å£ ç¼–è¾‘ Pre-request Script è„šæœ¬æ¥ä»æµ‹è¯•æ•°æ®æ–‡ä»¶ä¸­è·å– è¯·æ±‚ url const getAPI = pm.iterationData.get(\u0026#39;getAPI\u0026#39;); å°† URL ä¿®æ”¹ä¸º {{baseURL}}/{{getAPI}}ï¼Œ\nç¼–è¾‘ test è„šæœ¬æ¥ä»æµ‹è¯•æ•°æ®æ–‡ä»¶ä¸­è·å–æµ‹è¯•æ•°æ®\nconst getAPIResponseStatus = pm.iterationData.get(\u0026#39;getAPIResponseStatus\u0026#39;); const getAPIResponseData = pm.iterationData.get(\u0026#39;getAPIResponseData\u0026#39;); pm.test(\u0026#34;res.status should be 200\u0026#34;, function () { pm.response.to.have.status(getAPIResponseStatus); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(getAPIResponseData.id); pm.expect(data.userId).to.equal(getAPIResponseData.userId); pm.expect(data.title).to.equal(getAPIResponseData.title); pm.expect(data.body).to.equal(getAPIResponseData.body); }); æ›´æ–° post-demo æ¥å£ ç¼–è¾‘ Pre-request Script è„šæœ¬æ¥ä»æµ‹è¯•æ•°æ®æ–‡ä»¶ä¸­è·å– è¯·æ±‚ url const postAPI = pm.iterationData.get(\u0026#39;postAPI\u0026#39;); å°† URL ä¿®æ”¹ä¸º {{baseURL}}/{{postAPI}}ï¼Œ\nç¼–è¾‘ test è„šæœ¬æ¥ä»æµ‹è¯•æ•°æ®æ–‡ä»¶ä¸­è·å–æµ‹è¯•æ•°æ®\n// ä»æ•°æ®æ–‡ä»¶è·å–æµ‹è¯•æ•°æ® const postAPIResponseStatus = pm.iterationData.get(\u0026#39;postAPIResponseStatus\u0026#39;); const postAPIResponseData = pm.iterationData.get(\u0026#39;postAPIResponseData\u0026#39;); pm.test(\u0026#34;res.status should be 201\u0026#34;, function () { pm.response.to.have.status(postAPIResponseStatus); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(postAPIResponseData.id); pm.expect(data.userId).to.equal(postAPIResponseData.userId); pm.expect(data.title).to.equal(postAPIResponseData.title); pm.expect(data.body).to.equal(postAPIResponseData.body); }); 3.è°ƒè¯• åœ¨ postman é¡µé¢é€‰æ‹© get-demo request å’Œ post-demo request æ‰€åœ¨çš„ demo Collectionï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œé€‰æ‹© Run Collection åœ¨ runner å‡†å¤‡é¡µé¢å³ä¾§åŒºåŸŸç‚¹å‡» Data çš„ Select File æŒ‰é’®ï¼Œé€‰æ‹©ä¹‹å‰çš„æµ‹è¯•æ•°æ®æ–‡ä»¶ testdata.json ç„¶åç‚¹å‡» Run demoï¼Œç¡®è®¤è¿è¡Œé€šè¿‡å³å¯å¯¼å‡ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ 4.è‡ªåŠ¨åŒ–è¿è¡Œæ•°æ®é©±åŠ¨è„šæœ¬ å°†æ›´æ–°åçš„æµ‹è¯•ç”¨ä¾‹å¯¼å‡ºåˆ°è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹ä¸‹ è°ƒæ•´ package.json åœ¨ package.json æ–‡ä»¶ä¸­ï¼Œæ›´æ–°æµ‹è¯•æµ‹è¯•è„šæœ¬ï¼Œç”¨äºè¿è¡Œæ•°æ®é©±åŠ¨æµ‹è¯•ç”¨ä¾‹ï¼š\ndemo é¡¹ç›®ä¸ºäº†åŒºåˆ†ä¸åŒåœºæ™¯ï¼Œæ–°å¢äº†æµ‹è¯•å‘½ä»¤ä¸º data-driven-testï¼Œä¸”å‘½ä»¤ååŠ äº†-d å‚æ•° ç”¨äºæŒ‡å®šæµ‹è¯•æ•°æ®æ–‡ä»¶è·¯å¾„\n\u0026#34;data-driven-test\u0026#34;: \u0026#34;newman run Testcase/Data-Driven.postman_collection.json -e Env/DemoEnv.postman_environment.json -d Data/testdata.json -r cli,allure --reporter-allure-export ./allure-results\u0026#34; è¿è¡Œæµ‹è¯• npm run data-driven-test å‚è€ƒæ–‡æ¡£ Postman å®˜æ–¹æ–‡æ¡£ newman å®˜æ–¹æ–‡æ¡£ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/postman-tutorial-advance-usage-data-driven-and-environment-data-driven/","summary":"è¿™ç¯‡åšæ–‡æ·±å…¥ç ”ç©¶ Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•çš„é«˜çº§æŠ€å·§ï¼Œä¸“æ³¨äºæ•°æ®æ–‡ä»¶é©±åŠ¨å’Œç¯å¢ƒå˜é‡æ•°æ®é©±åŠ¨ã€‚å­¦ä¹ å¦‚ä½•é€šè¿‡å¤–éƒ¨æ•°æ®æ–‡ä»¶å’Œçµæ´»çš„ç¯å¢ƒå˜é‡ï¼Œä¼˜é›…åœ°è¿›è¡Œæµ‹è¯•æ•°æ®çš„é©±åŠ¨ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡ã€‚åšæ–‡å°†ä¸ºæ‚¨å±•ç¤ºå¦‚ä½•ä»¥æ›´æ™ºèƒ½çš„æ–¹å¼ç®¡ç†å’Œåˆ©ç”¨æ•°æ®ï¼Œä½¿æµ‹è¯•ç”¨ä¾‹æ›´å…·å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚","title":"Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - æ•°æ®é©±åŠ¨"},{"content":"è¿›é˜¶ç”¨æ³• ä»¥ä¸‹ä¼šä»‹ç» Postman å’Œ Newman çš„ä¸€äº›è¿›é˜¶ç”¨æ³•ï¼ŒåŒ…æ‹¬å¸¸ç”¨æµ‹è¯•å“åº”æµ‹è¯•è„šæœ¬ï¼Œæµ‹è¯•å‰ç½®è„šæœ¬å’Œå¸¸ç”¨çš„æµ‹è¯•è„šæœ¬å¯ç”¨çš„ç¬¬ä¸‰æ–¹åŒ…ç­‰ã€‚\nå¸¸ç”¨æµ‹è¯•è„šæœ¬ Postman æä¾›äº†æµ‹è¯•è„šæœ¬åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ JavaScript ç¼–å†™è„šæœ¬æ¥éªŒè¯ API çš„å“åº”å’Œè¡Œä¸ºã€‚è¿™äº›è„šæœ¬å¯ä»¥åœ¨è¯·æ±‚çš„â€œTestsâ€æ ‡ç­¾ä¸‹æ·»åŠ ï¼Œåˆ†ä¸ºè¯·æ±‚å‰è„šæœ¬ï¼ˆPre-request Scriptï¼‰å’Œå“åº”åè„šæœ¬ï¼ˆTestsï¼‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ Postman å’Œ Newman æµ‹è¯•è„šæœ¬ï¼š\nå“åº”æµ‹è¯•è„šæœ¬ çŠ¶æ€ç æ£€æŸ¥ï¼š\npm.test(\u0026#34;Status code is 200\u0026#34;, function () { pm.response.to.have.status(200); }); å“åº”æ—¶é—´æ£€æŸ¥ï¼š\npm.test(\u0026#34;Response time is less than 200ms\u0026#34;, function () { pm.expect(pm.response.responseTime).to.be.below(200); }); å“åº”ä½“ JSON æ ¼å¼æ£€æŸ¥ï¼š\npm.test(\u0026#34;Response body is a valid JSON\u0026#34;, function () { pm.response.to.be.json; }); å“åº”ä½“å­—æ®µå€¼æ£€æŸ¥ï¼š\npm.test(\u0026#34;Response body contains expected value\u0026#34;, function () { pm.expect(pm.response.json().key).to.eql(\u0026#34;expectedValue\u0026#34;); }); å“åº”ä½“æ•°ç»„é•¿åº¦æ£€æŸ¥ï¼š\npm.test(\u0026#34;Response body array has correct length\u0026#34;, function () { pm.expect(pm.response.json().arrayKey).to.have.lengthOf(3); }); å“åº”ä½“å±æ€§å­˜åœ¨æ€§æ£€æŸ¥ï¼š\npm.test(\u0026#34;Response body has required properties\u0026#34;, function () { pm.expect(pm.response.json()).to.have.property(\u0026#34;key\u0026#34;); }); è¯·æ±‚å‰è„šæœ¬ åŠ¨æ€è®¾ç½®è¯·æ±‚å‚æ•°ï¼š\npm.variables.set(\u0026#34;dynamicVariable\u0026#34;, \u0026#34;dynamicValue\u0026#34;); ä½¿ç”¨å…¨å±€å˜é‡è®¾ç½®è¯·æ±‚å¤´ï¼š\npm.request.headers.add({ key: \u0026#39;Authorization\u0026#39;, value: pm.globals.get(\u0026#39;authToken\u0026#39;) }); ç”Ÿæˆéšæœºæ•°å¹¶è®¾ç½®ä¸ºå˜é‡ï¼š\nconst randomNumber = Math.floor(Math.random() * 1000); pm.variables.set(\u0026#34;randomNumber\u0026#34;, randomNumber); ç­¾åç”Ÿæˆæˆ–åŠ å¯†ç­‰æ“ä½œï¼š\n// ç¤ºä¾‹ï¼šä½¿ç”¨ CryptoJS è¿›è¡Œ HMAC SHA256 ç­¾å const CryptoJS = require(\u0026#39;crypto-js\u0026#39;); const secretKey = \u0026#39;yourSecretKey\u0026#39;; const message = \u0026#39;dataToSign\u0026#39;; const signature = CryptoJS.HmacSHA256(message, secretKey).toString(CryptoJS.enc.Base64); pm.variables.set(\u0026#34;signature\u0026#34;, signature); æµ‹è¯•è„šæœ¬ä¸­å¯ç”¨çš„ç¬¬ä¸‰æ–¹åº“ æä¾›çš„ require æ–¹æ³•å…è®¸æ‚¨ä½¿ç”¨æ²™ç®±å†…ç½®åº“æ¨¡å—ã€‚ä¸‹é¢åˆ—å‡ºäº†ä¸ªäººå¸¸ç”¨çš„å¯ç”¨åº“å’Œç¤ºä¾‹ æ›´å¤šå¯ç”¨çš„åº“å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°\nchai.js æ–­è¨€åº“æ–¹æ³• åœ¨ Postman çš„æµ‹è¯•è„šæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Chai æ–­è¨€åº“æ¥ç¼–å†™æ–­è¨€ï¼Œä»¥éªŒè¯ä½ çš„ API å“åº”æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚Chai æä¾›äº†å¤šç§æ–­è¨€é£æ ¼ï¼ŒåŒ…æ‹¬ BDDï¼ˆBehavior Driven Developmentï¼‰ã€TDDï¼ˆTest Driven Developmentï¼‰ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬çš„ Chai ä½¿ç”¨æ–¹æ³•ï¼š\n1. å®‰è£… Chai åœ¨ Postman çš„è„šæœ¬ç¯å¢ƒä¸­ï¼Œä½ æ— éœ€å•ç‹¬å®‰è£… Chaiï¼Œå› ä¸º Postman é»˜è®¤å·²ç»å†…ç½®äº† Chaiã€‚\n2. ä½¿ç”¨ BDD é£æ ¼æ–­è¨€ åœ¨ Postman çš„ \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Chai çš„ BDD é£æ ¼æ–­è¨€ï¼Œä¾‹å¦‚ï¼š\n// å¼•å…¥ Chai åº“ const chai = require(\u0026#39;chai\u0026#39;); // ä½¿ç”¨ BDD é£æ ¼æ–­è¨€ const expect = chai.expect; // ç¤ºä¾‹ï¼šéªŒè¯å“åº”çŠ¶æ€ç ä¸º 200 pm.test(\u0026#39;Status code is 200\u0026#39;, function() { expect(pm.response.code).to.equal(200); }); // ç¤ºä¾‹ï¼šéªŒè¯å“åº”ä½“æ˜¯ JSON pm.test(\u0026#39;Response body is JSON\u0026#39;, function() { expect(pm.response.headers.get(\u0026#39;Content-Type\u0026#39;)).to.include(\u0026#39;application/json\u0026#39;); }); 3. ä½¿ç”¨ TDD é£æ ¼æ–­è¨€ // å¼•å…¥ Chai åº“ const chai = require(\u0026#39;chai\u0026#39;); // ä½¿ç”¨ TDD é£æ ¼æ–­è¨€ const assert = chai.assert; // ç¤ºä¾‹ï¼šä½¿ç”¨ assert æ–­è¨€å“åº”çŠ¶æ€ç ä¸º 200 assert.equal(pm.response.code, 200, \u0026#39;Status code should be 200\u0026#39;); 4. Chai æ”¯æŒçš„ä¸€äº›å¸¸ç”¨æ–­è¨€ ç›¸ç­‰æ€§ï¼š\nexpect(actual).to.equal(expected); åŒ…å«ï¼š\nexpect(actual).to.include(expected); ç±»å‹æ£€æŸ¥ï¼š\nexpect(actual).to.be.a(\u0026#39;string\u0026#39;); å¤§äº/å°äºï¼š\nexpect(actual).to.be.above(expected); expect(actual).to.be.below(expected); ç©º/éç©ºï¼š\nexpect(actual).to.be.null; expect(actual).to.not.be.null; æ·±åº¦ç›¸ç­‰æ€§ï¼š\nexpect(actual).to.deep.equal(expected); ä»¥ä¸Šåªæ˜¯ Chai æ–­è¨€åº“çš„ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨æ›´å¤šçš„æ–­è¨€æ–¹æ³•å’Œç»„åˆã€‚Chai æä¾›äº†ä¸°å¯Œçš„æ–­è¨€åŠŸèƒ½ï¼Œå¯ä»¥æ»¡è¶³å„ç§æµ‹è¯•éœ€æ±‚ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥é˜… Chai çš„å®˜æ–¹æ–‡æ¡£ï¼šChai Documentationã€‚\nä½¿ç”¨ cheerio æ“ä½œ HTML æ–‡ä»¶ åœ¨ Postman ä¸­ï¼ŒCheerio æ˜¯ä¸€ä¸ªåŸºäº jQuery çš„åº“ï¼Œç”¨äºåœ¨æœåŠ¡å™¨ç«¯æ“ä½œ HTML æ–‡æ¡£ã€‚å®ƒå…è®¸ä½ ä½¿ç”¨ç±»ä¼¼äº jQuery çš„è¯­æ³•æ¥é€‰æ‹©å’Œæ“ä½œ HTML å…ƒç´ ï¼Œéå¸¸é€‚ç”¨äºè§£æå’Œæå– HTML é¡µé¢ä¸­çš„ä¿¡æ¯ã€‚åœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Cheerio åº“è¿›è¡Œ HTML å“åº”çš„è§£æã€‚ä»¥ä¸‹æ˜¯ Cheerio åœ¨ Postman ä¸­çš„åŸºæœ¬ç”¨æ³•ï¼š\nå®‰è£… Cheerioï¼š\nç”±äº Postman ä½¿ç”¨çš„æ˜¯ Node.js è¿è¡Œæ—¶ç¯å¢ƒï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ Postman çš„è„šæœ¬ä¸­å®‰è£… Cheerio æ¥ä½¿ç”¨å®ƒã€‚åœ¨è¯·æ±‚çš„ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£… Cheerioï¼š // å®‰è£… Cheerio const cheerio = require(\u0026#39;cheerio\u0026#39;); ä½¿ç”¨ Cheerio è§£æ HTMLï¼š\nåœ¨è¯·æ±‚çš„ \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Cheerio è§£æ HTMLã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š // ä»å“åº”ä¸­è·å– HTML å†…å®¹ const htmlContent = pm.response.text(); // ä½¿ç”¨ Cheerio è§£æ HTML const $ = cheerio.load(htmlContent); // ç¤ºä¾‹ï¼šä» HTML ä¸­æå–æ ‡é¢˜æ–‡æœ¬ const titleText = $(\u0026#39;title\u0026#39;).text(); console.log(\u0026#39;Title:\u0026#39;, titleText); // ç¤ºä¾‹ï¼šä» HTML ä¸­æå–æ‰€æœ‰é“¾æ¥çš„ href å±æ€§ const links = []; $(\u0026#39;a\u0026#39;).each(function () { const link = $(this).attr(\u0026#39;href\u0026#39;); links.push(link); }); console.log(\u0026#39;Links:\u0026#39;, links); åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œcheerio.load(htmlContent) ç”¨äºåŠ è½½ HTML å†…å®¹ï¼Œå¹¶ä½¿ç”¨ç±»ä¼¼äº jQuery çš„è¯­æ³•æ¥é€‰æ‹©å’Œæ“ä½œå…ƒç´ ã€‚\næ³¨æ„äº‹é¡¹ï¼š\nCheerio ä¸»è¦ç”¨äºè§£æé™æ€ HTMLï¼Œå¯¹äºä½¿ç”¨ JavaScript åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ï¼Œå¯èƒ½æ— æ³•æ­£å¸¸è·å–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ Puppeteer æˆ–å…¶ä»–æ”¯æŒ JavaScript æ‰§è¡Œçš„å·¥å…·ã€‚ è¿™åªæ˜¯ Cheerio åœ¨ Postman ä¸­çš„åŸºæœ¬ç”¨æ³•ã€‚ä½ å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚ä½¿ç”¨ Cheerio æä¾›çš„å„ç§é€‰æ‹©å™¨å’Œæ–¹æ³•ã€‚è¯·æŸ¥é˜… Cheerio çš„å®˜æ–¹æ–‡æ¡£ä»¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼šCheerio Documentationã€‚\nä½¿ç”¨ tv4 æ¥éªŒè¯ JSON Schema åœ¨ Postman ä¸­ï¼Œtv4 æ˜¯ä¸€ä¸ª JSON Schema éªŒè¯åº“ï¼Œç”¨äºéªŒè¯ JSON æ•°æ®æ˜¯å¦ç¬¦åˆç»™å®šçš„ JSON Schemaã€‚JSON Schema æ˜¯ä¸€ç§æè¿° JSON æ•°æ®ç»“æ„çš„è§„èŒƒï¼Œå®ƒå®šä¹‰äº† JSON å¯¹è±¡çš„å±æ€§ã€ç±»å‹å’Œå…¶ä»–çº¦æŸã€‚\nä»¥ä¸‹æ˜¯åœ¨ Postman ä¸­ä½¿ç”¨ tv4 è¿›è¡Œ JSON Schema éªŒè¯çš„åŸºæœ¬æ­¥éª¤ï¼š\nå®‰è£… tv4 åº“ï¼š\nç”±äº Postman ä½¿ç”¨çš„æ˜¯ Node.js è¿è¡Œæ—¶ç¯å¢ƒï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ Postman çš„è„šæœ¬ä¸­å®‰è£… tv4 æ¥ä½¿ç”¨å®ƒã€‚åœ¨è¯·æ±‚çš„ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£… tv4ï¼š // å®‰è£… tv4 const tv4 = require(\u0026#39;tv4\u0026#39;); å®šä¹‰ JSON Schemaï¼š\nåœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥åœ¨è¯·æ±‚çš„ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†å®šä¹‰ JSON Schemaã€‚JSON Schema å¯ä»¥ä½œä¸ºä¸€ä¸ª JavaScript å¯¹è±¡è¿›è¡Œå®šä¹‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š // å®šä¹‰ JSON Schema const jsonSchema = { \u0026#34;type\u0026#34;: \u0026#34;object\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;name\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;string\u0026#34; }, \u0026#34;age\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;number\u0026#34; } }, \u0026#34;required\u0026#34;: [\u0026#34;name\u0026#34;, \u0026#34;age\u0026#34;] }; ä½¿ç”¨ tv4 è¿›è¡ŒéªŒè¯ï¼š\nåœ¨è¯·æ±‚çš„ \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ï¼Œä½ å¯ä»¥ä½¿ç”¨ tv4 å¯¹ JSON æ•°æ®è¿›è¡ŒéªŒè¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š // è·å–å“åº”çš„ JSON æ•°æ® const jsonResponse = pm.response.json(); // ä½¿ç”¨ tv4 è¿›è¡Œ JSON Schema éªŒè¯ const isValid = tv4.validate(jsonResponse, jsonSchema); // æ£€æŸ¥éªŒè¯ç»“æœ pm.test(\u0026#39;JSON is valid according to the schema\u0026#39;, function() { pm.expect(isValid).to.be.true; }); åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œtv4.validate(jsonResponse, jsonSchema) ç”¨äºéªŒè¯ jsonResponse æ˜¯å¦ç¬¦åˆ jsonSchema å®šä¹‰çš„è§„èŒƒã€‚éªŒè¯ç»“æœå­˜å‚¨åœ¨ isValid å˜é‡ä¸­ï¼Œç„¶åä½¿ç”¨ pm.test æ¥æ£€æŸ¥éªŒè¯ç»“æœã€‚\nè¿™åªæ˜¯ tv4 åœ¨ Postman ä¸­çš„åŸºæœ¬ç”¨æ³•ã€‚ä½ å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚ï¼Œå®šä¹‰æ›´å¤æ‚çš„ JSON Schemaï¼Œå¹¶ä½¿ç”¨ tv4 çš„å…¶ä»–åŠŸèƒ½è¿›è¡Œæ›´çµæ´»çš„éªŒè¯ã€‚è¯·æŸ¥é˜… tv4 çš„å®˜æ–¹æ–‡æ¡£ä»¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼štv4 Documentationã€‚\nç”Ÿæˆ uuid åœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ uuid æ¨¡å—æ¥ç”Ÿæˆ UUIDï¼ˆUniversally Unique Identifierï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º GUIDã€‚ä»¥ä¸‹æ˜¯åœ¨ Postman ä¸­ä½¿ç”¨ uuid æ¨¡å—çš„åŸºæœ¬ç”¨æ³•ï¼š\n1. å®‰è£… uuid æ¨¡å— åœ¨ Postman çš„ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£… uuid æ¨¡å—ï¼š\n// å®‰è£… uuid æ¨¡å— const uuid = require(\u0026#39;uuid\u0026#39;); 2. ç”Ÿæˆ UUID // ç”Ÿæˆ UUID const generatedUUID = uuid.v4(); console.log(\u0026#39;Generated UUID:\u0026#39;, generatedUUID); åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œuuid.v4() ç”¨äºç”Ÿæˆä¸€ä¸ªåŸºäºéšæœºæ•°çš„ UUIDã€‚ä½ å¯ä»¥åœ¨ Postman è„šæœ¬ä¸­ä½¿ç”¨ç”Ÿæˆçš„ UUIDï¼Œä¾‹å¦‚å°†å…¶è®¾ç½®ä¸ºè¯·æ±‚å¤´æˆ–å‚æ•°çš„å€¼ã€‚\nç¤ºä¾‹ ä»¥ä¸‹æ˜¯ä¸€ä¸ªåœ¨ Postman \u0026ldquo;Pre-request Script\u0026rdquo; ä¸­ç”Ÿæˆ UUID å¹¶è®¾ç½®ä¸ºè¯·æ±‚å¤´çš„ç¤ºä¾‹ï¼š\n// å®‰è£… uuid æ¨¡å— const uuid = require(\u0026#39;uuid\u0026#39;); // ç”Ÿæˆ UUID const generatedUUID = uuid.v4(); // è®¾ç½®è¯·æ±‚å¤´ pm.request.headers.add({ key: \u0026#39;X-Request-ID\u0026#39;, value: generatedUUID }); åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒX-Request-ID æ˜¯ä¸€ä¸ªå¸¸è§çš„è¯·æ±‚å¤´ï¼Œç”¨äºæ ‡è¯†è¯·æ±‚çš„å”¯ä¸€æ€§ã€‚ç”Ÿæˆçš„ UUID è¢«è®¾ç½®ä¸ºè¿™ä¸ªè¯·æ±‚å¤´çš„å€¼ï¼Œä»¥ç¡®ä¿æ¯ä¸ªè¯·æ±‚éƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ã€‚\nè¯·æ³¨æ„ï¼ŒPostman åœ¨è¿è¡Œè„šæœ¬æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œå®‰è£…ä¾èµ–é¡¹çš„æ­¥éª¤ï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£… uuid æ¨¡å—ã€‚\nä½¿ç”¨ xml2js å°† XML è½¬æ¢ä¸º JavaScript å¯¹è±¡ åœ¨ Postman ä¸­ï¼Œxml2js æ˜¯ä¸€ä¸ªç”¨äºå°† XML è½¬æ¢ä¸º JavaScript å¯¹è±¡çš„åº“ã€‚åœ¨ Postman çš„è„šæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ xml2js æ¥å¤„ç† XML å“åº”å¹¶å°†å…¶è½¬æ¢ä¸ºæ˜“äºå¤„ç†çš„ JavaScript å¯¹è±¡ã€‚ä»¥ä¸‹æ˜¯åœ¨ Postman ä¸­ä½¿ç”¨ xml2js çš„åŸºæœ¬æ­¥éª¤ï¼š\nå®‰è£… xml2js åº“ï¼š\nç”±äº Postman ä½¿ç”¨çš„æ˜¯ Node.js è¿è¡Œæ—¶ç¯å¢ƒï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ Postman çš„è„šæœ¬ä¸­å®‰è£… xml2js æ¥ä½¿ç”¨å®ƒã€‚åœ¨è¯·æ±‚çš„ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®‰è£… xml2jsï¼š // å®‰è£… xml2js const xml2js = require(\u0026#39;xml2js\u0026#39;); è§£æ XML å“åº”ï¼š\nè·å– XML å“åº”åï¼Œä½ å¯ä»¥ä½¿ç”¨ xml2js å°†å…¶è§£æä¸º JavaScript å¯¹è±¡ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š // è·å–å“åº”çš„ XML å†…å®¹ const xmlContent = pm.response.text(); // ä½¿ç”¨ xml2js è§£æ XML xml2js.parseString(xmlContent, function (err, result) { if (err) { console.error(\u0026#39;Error parsing XML:\u0026#39;, err); return; } // result æ˜¯è§£æåçš„ JavaScript å¯¹è±¡ console.log(\u0026#39;Parsed XML:\u0026#39;, result); }); åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œxml2js.parseString(xmlContent, function (err, result) {...} ç”¨äºå¼‚æ­¥åœ°è§£æ XML å†…å®¹ã€‚è§£æåçš„ JavaScript å¯¹è±¡å­˜å‚¨åœ¨ result ä¸­ã€‚\nå¤„ç†è§£æåçš„ JavaScript å¯¹è±¡ï¼š\nä¸€æ—¦ä½ è·å¾—äº†è§£æåçš„ JavaScript å¯¹è±¡ï¼Œä½ å°±å¯ä»¥æŒ‰ç…§æ™®é€šçš„ JavaScript å¯¹è±¡å¤„ç†æ–¹å¼è®¿é—®å’Œæ“ä½œå®ƒçš„å±æ€§ã€‚ // ç¤ºä¾‹ï¼šè®¿é—®è§£æåçš„ JavaScript å¯¹è±¡çš„å±æ€§ const value = result.root.element[0].subelement[0]._; console.log(\u0026#39;Value from parsed XML:\u0026#39;, value); åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œresult.root.element[0].subelement[0]._ æ˜¯ä¸€ä¸ªè®¿é—®è§£æåå¯¹è±¡å±æ€§çš„ç¤ºä¾‹ã€‚å…·ä½“çš„ç»“æ„å–å†³äºä½ çš„ XML ç»“æ„ã€‚\nè¿™åªæ˜¯ xml2js åœ¨ Postman ä¸­çš„åŸºæœ¬ç”¨æ³•ã€‚ä½ å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚ä½¿ç”¨ xml2js çš„å…¶ä»–åŠŸèƒ½ï¼Œä¾‹å¦‚è®¾ç½®è§£æé€‰é¡¹ï¼Œå¤„ç†å‘½åç©ºé—´ç­‰ã€‚è¯·æŸ¥é˜… xml2js çš„å®˜æ–¹æ–‡æ¡£ä»¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼šxml2js Documentationã€‚\nå¸¸ç”¨å·¥å…·å‡½æ•° util åœ¨ Postman ä¸­ï¼Œutil æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæä¾›äº†ä¸€äº›å¸¸ç”¨çš„å®ç”¨å·¥å…·å‡½æ•°ï¼Œå¯ä»¥åœ¨ Postman è„šæœ¬ä¸­ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ util å¯¹è±¡çš„ç”¨æ³•ï¼š\n1. util.guid() - ç”Ÿæˆå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆGUIDï¼‰ // ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ const uniqueId = util.guid(); console.log(\u0026#39;Unique ID:\u0026#39;, uniqueId); 2. util.timestamp() - è·å–å½“å‰æ—¶é—´æˆ³ // è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ const timestamp = util.timestamp(); console.log(\u0026#39;Timestamp:\u0026#39;, timestamp); 3. util.randomInt(min, max) - ç”ŸæˆæŒ‡å®šèŒƒå›´å†…çš„éšæœºæ•´æ•° // ç”Ÿæˆ 1 åˆ° 100 ä¹‹é—´çš„éšæœºæ•´æ•° const randomInt = util.randomInt(1, 100); console.log(\u0026#39;Random Integer:\u0026#39;, randomInt); 4. util.unixTimestamp() - è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆUnix æ—¶é—´æˆ³ï¼Œç§’ï¼‰ // è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆç§’ï¼‰ const unixTimestamp = util.unixTimestamp(); console.log(\u0026#39;Unix Timestamp:\u0026#39;, unixTimestamp); 5. util.encodeBase64(str) å’Œ util.decodeBase64(base64Str) - Base64 ç¼–ç å’Œè§£ç  // Base64 ç¼–ç  const encodedString = util.encodeBase64(\u0026#39;Hello, World!\u0026#39;); console.log(\u0026#39;Encoded String:\u0026#39;, encodedString); // Base64 è§£ç  const decodedString = util.decodeBase64(encodedString); console.log(\u0026#39;Decoded String:\u0026#39;, decodedString); 6. util.each(obj, callback) - éå†å¯¹è±¡æˆ–æ•°ç»„ // éå†æ•°ç»„ const array = [1, 2, 3, 4]; util.each(array, function (value, index) { console.log(`Index ${index}: ${value}`); }); // éå†å¯¹è±¡ const obj = { a: 1, b: 2, c: 3 }; util.each(obj, function (value, key) { console.log(`Key ${key}: ${value}`); }); æ³¨æ„äº‹é¡¹ åœ¨ Postman è„šæœ¬ä¸­ï¼Œå¯ä»¥é€šè¿‡ util å¯¹è±¡ç›´æ¥è°ƒç”¨è¿™äº›å®ç”¨å·¥å…·å‡½æ•°ã€‚ util å¯¹è±¡æä¾›çš„è¿™äº›æ–¹æ³•èƒ½å¤Ÿç®€åŒ–åœ¨ Postman è„šæœ¬ä¸­çš„ä¸€äº›å¸¸è§ä»»åŠ¡ï¼Œå¦‚ç”Ÿæˆéšæœºæ•°ã€å¤„ç†æ—¶é—´æˆ³ç­‰ã€‚ è¯·æ³¨æ„æŸ¥é˜… Postman çš„å®˜æ–¹æ–‡æ¡£ï¼Œå› ä¸º Postman ä¼šä¸æ–­æ›´æ–°å’Œæ”¹è¿›å…¶è„šæœ¬ç¯å¢ƒï¼Œå¯èƒ½ä¼šå¼•å…¥æ–°çš„å®ç”¨å·¥å…·å‡½æ•°ã€‚ stream æµæ“ä½œ åœ¨ Node.js ä¸­ä½¿ç”¨æµï¼ˆStreamsï¼‰é€šå¸¸ç”¨äºå¤„ç†å¤§é‡çš„æ•°æ®ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é™ä½å†…å­˜å ç”¨å¹¶æé«˜æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åœ¨ Node.js ä¸­ä½¿ç”¨æµçš„åŸºæœ¬ç”¨æ³•ï¼Œå¯ä»¥å‚è€ƒè¿™äº›æ–¹æ³•æ¥å¤„ç†æ•°æ®æˆ–æ–‡ä»¶ã€‚\n1. è¯»å–æµï¼ˆReadable Streamsï¼‰ï¼š const fs = require(\u0026#39;fs\u0026#39;); // åˆ›å»ºå¯è¯»æµ const readableStream = fs.createReadStream(\u0026#39;input.txt\u0026#39;); // è®¾ç½®ç¼–ç ï¼ˆå¦‚æœæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼‰ readableStream.setEncoding(\u0026#39;utf-8\u0026#39;); // å¤„ç†æ•°æ® readableStream.on(\u0026#39;data\u0026#39;, function(chunk) { console.log(\u0026#39;Received chunk:\u0026#39;, chunk); }); // å¤„ç†ç»“æŸ readableStream.on(\u0026#39;end\u0026#39;, function() { console.log(\u0026#39;Stream ended.\u0026#39;); }); // å¤„ç†é”™è¯¯ readableStream.on(\u0026#39;error\u0026#39;, function(err) { console.error(\u0026#39;Error:\u0026#39;, err); }); 2. å†™å…¥æµï¼ˆWritable Streamsï¼‰ï¼š const fs = require(\u0026#39;fs\u0026#39;); // åˆ›å»ºå¯å†™æµ const writableStream = fs.createWriteStream(\u0026#39;output.txt\u0026#39;); // å†™å…¥æ•°æ® writableStream.write(\u0026#39;Hello, World!\\n\u0026#39;); writableStream.write(\u0026#39;Another line.\u0026#39;); // ç»“æŸå†™å…¥ writableStream.end(); // å¤„ç†ç»“æŸ writableStream.on(\u0026#39;finish\u0026#39;, function() { console.log(\u0026#39;Write completed.\u0026#39;); }); // å¤„ç†é”™è¯¯ writableStream.on(\u0026#39;error\u0026#39;, function(err) { console.error(\u0026#39;Error:\u0026#39;, err); }); 3. è½¬æ¢æµï¼ˆTransform Streamsï¼‰ï¼š const { Transform } = require(\u0026#39;stream\u0026#39;); // åˆ›å»ºè½¬æ¢æµ const myTransform = new Transform({ transform(chunk, encoding, callback) { // è½¬æ¢æ•°æ® const transformedData = chunk.toString().toUpperCase(); this.push(transformedData); callback(); } }); // ç®¡é“è¿æ¥è¯»å–æµã€è½¬æ¢æµå’Œå†™å…¥æµ readableStream.pipe(myTransform).pipe(writableStream); è¿™åªæ˜¯ Node.js ä¸­ä½¿ç”¨æµçš„ä¸€äº›åŸºæœ¬ç”¨æ³•ã€‚åœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥åœ¨è¯·æ±‚çš„è„šæœ¬ä¸­ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œä¾‹å¦‚ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ï¼Œé€šè¿‡ Node.js è¿è¡Œç¯å¢ƒæ¥æ‰§è¡Œè¿™äº›è„šæœ¬ã€‚è¯·æ³¨æ„ï¼ŒNode.js ä¸­çš„æµ API å¯ä»¥æ›´å¤æ‚ï¼Œä¾‹å¦‚é€šè¿‡ä½¿ç”¨ pipeline å‡½æ•°æ¥å¤„ç†å¤šä¸ªæµçš„è¿æ¥ã€‚\nå®šæ—¶å™¨ timers åœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Node.js çš„å®šæ—¶å™¨åŠŸèƒ½æ¥å¤„ç†å®šæ—¶ä»»åŠ¡æˆ–å»¶æ—¶æ‰§è¡Œçš„æ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬çš„ Node.js å®šæ—¶å™¨çš„ç”¨æ³•ï¼Œè¿™äº›ç”¨æ³•å¯ä»¥åœ¨ Postman çš„è„šæœ¬ä¸­ä½¿ç”¨ã€‚\n1. setTimeout - å»¶æ—¶æ‰§è¡Œ // å»¶æ—¶æ‰§è¡Œæ“ä½œ setTimeout(function() { console.log(\u0026#39;Delayed operation.\u0026#39;); }, 2000); // 2000 æ¯«ç§’ï¼ˆ2 ç§’ï¼‰ 2. setInterval - å®šæ—¶æ‰§è¡Œé‡å¤æ“ä½œ // å®šæ—¶æ‰§è¡Œé‡å¤æ“ä½œ const intervalId = setInterval(function() { console.log(\u0026#39;Repeated operation.\u0026#39;); }, 3000); // 3000 æ¯«ç§’ï¼ˆ3 ç§’ï¼‰ // å–æ¶ˆå®šæ—¶æ‰§è¡Œ // clearInterval(intervalId); 3. åœ¨ Postman ä¸­ä½¿ç”¨ åœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥åœ¨ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ä¸­ä½¿ç”¨è¿™äº›å®šæ—¶å™¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†ä¸­å»¶æ—¶æ‰§è¡Œæ“ä½œï¼š\n// åœ¨ \u0026#34;Tests\u0026#34; éƒ¨åˆ†å»¶æ—¶æ‰§è¡Œæ“ä½œ setTimeout(function() { console.log(\u0026#39;Delayed operation in Tests.\u0026#39;); }, 2000); // 2000 æ¯«ç§’ï¼ˆ2 ç§’ï¼‰ è¯·æ³¨æ„ï¼Œåœ¨ Postman çš„ \u0026ldquo;Pre-request Script\u0026rdquo; æˆ– \u0026ldquo;Tests\u0026rdquo; éƒ¨åˆ†æ‰§è¡Œçš„ä»£ç æ˜¯åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œçš„ï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨ Node.js æ”¯æŒçš„å¤§å¤šæ•°åŠŸèƒ½ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨ã€‚\nåœ¨ä»¥ä¸Šä¾‹å­ä¸­ï¼ŒsetTimeout ä¼šåœ¨æŒ‡å®šçš„å»¶æ—¶åæ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œè€Œ setInterval ä¼šåœ¨æ¯éš”æŒ‡å®šçš„æ—¶é—´é—´éš”åæ‰§è¡Œä¸€æ¬¡æ“ä½œã€‚åœ¨ Postman ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚ä½¿ç”¨è¿™äº›å®šæ—¶å™¨åŠŸèƒ½ã€‚\næ—¶é—´å¤„ç† events åœ¨ Postman çš„è„šæœ¬ç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Node.js çš„ events æ¨¡å—æ¥å¤„ç†äº‹ä»¶ã€‚events æ¨¡å—æä¾›äº† EventEmitter ç±»ï¼Œè¯¥ç±»å¯ä»¥ç”¨äºå®šä¹‰å’Œè§¦å‘äº‹ä»¶ã€‚ä»¥ä¸‹æ˜¯åœ¨ Postman ä¸­ä½¿ç”¨ Node.js çš„ events æ¨¡å—çš„ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼š\n1. åˆ›å»ºäº‹ä»¶å‘å°„å™¨ const EventEmitter = require(\u0026#39;events\u0026#39;); const myEmitter = new EventEmitter(); 2. å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•° // å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•° function myEventHandler() { console.log(\u0026#39;Event handled.\u0026#39;); } 3. æ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•° // æ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•° myEmitter.on(\u0026#39;myEvent\u0026#39;, myEventHandler); 4. è§¦å‘äº‹ä»¶ // è§¦å‘äº‹ä»¶ myEmitter.emit(\u0026#39;myEvent\u0026#39;); ç¤ºä¾‹ åœ¨ Postman çš„è„šæœ¬ç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨äº‹ä»¶æ¥å®ç°å¼‚æ­¥æ“ä½œçš„å›è°ƒæˆ–å¤„ç†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåè§¦å‘äº‹ä»¶ï¼š\nconst EventEmitter = require(\u0026#39;events\u0026#39;); const myEmitter = new EventEmitter(); // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ function performAsyncOperation() { setTimeout(function() { console.log(\u0026#39;Async operation completed.\u0026#39;); // è§¦å‘äº‹ä»¶ myEmitter.emit(\u0026#39;asyncOperationComplete\u0026#39;); }, 2000); } // æ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•° myEmitter.on(\u0026#39;asyncOperationComplete\u0026#39;, function() { console.log(\u0026#39;Handling async operation completion.\u0026#39;); // è¿™é‡Œå¯ä»¥æ‰§è¡Œå¼‚æ­¥æ“ä½œå®Œæˆåçš„å¤„ç†é€»è¾‘ }); // æ‰§è¡Œå¼‚æ­¥æ“ä½œ performAsyncOperation(); åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼ŒperformAsyncOperation å‡½æ•°æ¨¡æ‹Ÿäº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå½“è¯¥æ“ä½œå®Œæˆæ—¶ï¼Œé€šè¿‡ myEmitter.emit è§¦å‘äº† asyncOperationComplete äº‹ä»¶ã€‚åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œä½ å¯ä»¥ç¼–å†™å¤„ç†å¼‚æ­¥æ“ä½œå®Œæˆåçš„é€»è¾‘ã€‚\nè¯·æ³¨æ„ï¼Œåœ¨ Postman çš„è„šæœ¬ä¸­ï¼Œå¼‚æ­¥æ“ä½œçš„æ‰§è¡Œæ–¹å¼å¯èƒ½å—åˆ°é™åˆ¶ï¼Œå› æ­¤åœ¨å®é™…ä½¿ç”¨ä¸­éœ€è¦è°¨æ…è€ƒè™‘ã€‚\nå‚è€ƒæ–‡æ¡£ Postman å®˜æ–¹æ–‡æ¡£ newman å®˜æ–¹æ–‡æ¡£ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/postman-tutorial-advance-usage-common-test-scripts-and-commonly-used-third-party-packages/","summary":"æ·±å…¥ç ”ç©¶ Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•çš„é«˜çº§ç”¨æ³•ï¼Œä¸“æ³¨äºå¸¸ç”¨çš„æµ‹è¯•è„šæœ¬å’Œç¬¬ä¸‰æ–¹åŒ…ç¤ºä¾‹ã€‚æ¢è®¨å¦‚ä½•ç¼–å†™å¼ºå¤§çš„æµ‹è¯•è„šæœ¬ï¼Œæ¶µç›–å„ç§æµ‹è¯•åœºæ™¯ï¼Œå¹¶ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¼˜åŒ–æµ‹è¯•æµç¨‹ã€‚","title":"Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨çš„æµ‹è¯•è„šæœ¬å’Œå¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åŒ…ç”¨æ³•ç¤ºä¾‹"},{"content":"è¿›é˜¶ç”¨æ³• ä»¥ä¸‹ä¼šä»‹ç» Postman å’Œ Newman çš„ä¸€äº›è¿›é˜¶ç”¨æ³•ï¼ŒåŒ…æ‹¬æµ‹è¯•æ•°æ®ã€æµ‹è¯•è„šæœ¬ã€æµ‹è¯•æŠ¥å‘Šå’Œæµ‹è¯•æŠ¥å‘Šé›†æˆç­‰ã€‚ ä¹Ÿä¼šä»‹ç»å¦‚ä½•å°† Postman å’Œ Newman é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼Œä»¥å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚\nè¾“å‡º html æµ‹è¯•æŠ¥å‘Š demo ä¼šä»¥é›†æˆnewman-reporter-htmlextraä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•è¾“å‡º html æµ‹è¯•æŠ¥å‘Šã€‚\nå®‰è£… newman-reporter-htmlextra ä¾èµ–åŒ… npm install newman-reporter-htmlextra --save-dev æ³¨æ„ï¼šç›®å‰ newman æœ€æ–° V6 ç‰ˆæœ¬åœ¨ html æµ‹è¯•æŠ¥å‘Šçš„ä¸€äº›åŒ…å…¼å®¹æ€§ä¸Šæœ‰é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ 5.1.2 ç‰ˆæœ¬\nè°ƒæ•´ package.json åœ¨ package.json æ–‡ä»¶ä¸­ï¼Œæ›´æ–°æµ‹è¯•æµ‹è¯•è„šæœ¬ï¼Œç”¨äºè¿è¡Œæµ‹è¯•ç”¨ä¾‹å¹¶è¾“å‡º html æµ‹è¯•æŠ¥å‘Šï¼š\n\u0026#34;test\u0026#34;: \u0026#34;newman run Testcase/demo.postman_collection.json -e Env/DemoEnv.postman_environment.json -r htmlextra --reporter-htmlextra-export ./Report/Postman-newman-demo-api-testing-report.html\u0026#34; æŒ‡å®šè¾“å‡º html æµ‹è¯•æŠ¥å‘Šçš„è·¯å¾„ä¸º Report/Postman-newman-demo-api-testing-report.html\nè¿è¡Œæµ‹è¯•ç”¨ä¾‹è¾“å‡º html æŠ¥å‘Š è¿è¡Œæµ‹è¯•ç”¨ä¾‹ npm run test æ£€æŸ¥æŠ¥å‘Šæ–‡ä»¶ æµè§ˆå™¨æ‰“å¼€æŠ¥å‘Šæ–‡ä»¶ è¾“å‡ºå¤šç§æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Š å‰é¢çš„é…ç½®æ˜¯è¾“å‡º html æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Šï¼Œå¦‚æœæƒ³è¦è¾“å‡ºå¤šç§æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Šï¼Œå¦‚å‘½ä»¤è¡Œ cli çš„æŠ¥å‘Šï¼Œå¯ä»¥åœ¨ package.json æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼š\n\u0026#34;test\u0026#34;: \u0026#34;newman run Testcase/demo.postman_collection.json -e Env/DemoEnv.postman_environment.json -r cli,htmlextra --reporter-htmlextra-export ./Report/Postman-newman-demo-api-testing-report.html\u0026#34; å†æ¬¡è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ Report æ–‡ä»¶å¤¹ä¸‹ï¼Œé™¤äº† html æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Šï¼Œè¿˜æœ‰ cli æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Šã€‚\nCI/CD æŒç»­é›†æˆ å°†æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»£ç é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæé«˜æµ‹è¯•æ•ˆç‡ã€‚\næ¥å…¥ github action ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\nå¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/Postman-Newman-demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ postman.ymlã€‚\nç¼–è¾‘ postman.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­\nname: RUN Postman API Test CI on: push: branches: [ \u0026#34;main\u0026#34; ] pull_request: branches: [ \u0026#34;main\u0026#34; ] jobs: RUN-Postman-API-Test: runs-on: ubuntu-latest strategy: matrix: node-version: [ 18.x] # See supported Node.js release schedule at https://nodejs.org/en/about/releases/ steps: - uses: actions/checkout@v3 - name: Use Node.js ${{ matrix.node-version }} uses: actions/setup-node@v3 with: node-version: ${{ matrix.node-version }} cache: \u0026#39;npm\u0026#39; - name: Installation of related packages run: npm ci - name: RUN SuperTest API Testing run: npm test - name: Archive Postman test report uses: actions/upload-artifact@v3 with: name: Postman-test-report path: Report - name: Upload Postman report to GitHub uses: actions/upload-artifact@v3 with: name: Postman-test-report path: Report æäº¤ä»£ç ï¼šå°† postman.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ RUN-Postman-API-Test å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ é›†æˆ allure æµ‹è¯•æŠ¥å‘Š allure æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€çµæ´»çš„ã€å¤šè¯­è¨€æ”¯æŒçš„æµ‹è¯•æŠ¥å‘Šå·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆå„ç§å„æ ·çš„æµ‹è¯•æŠ¥å‘Šï¼ŒåŒ…æ‹¬é¥¼å›¾ã€æŸ±çŠ¶å›¾ã€æ›²çº¿å›¾ç­‰ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹æµ‹è¯•ç»“æœã€‚\nå®‰è£… allure æµ‹è¯•æŠ¥å‘Šä¾èµ– npm install newman-reporter-allure --save-dev è°ƒæ•´ package.json ä¸­è¾“å‡º allure æµ‹è¯•æŠ¥å‘Šçš„è„šæœ¬ \u0026#34;test\u0026#34;: \u0026#34;newman run Testcase/demo.postman_collection.json -e Env/DemoEnv.postman_environment.json -r cli,allure --reporter-allure-export ./allure-results\u0026#34; è°ƒæ•´ Postman æµ‹è¯•ç”¨ä¾‹ è°ƒæ•´ get-demo çš„ Tests è„šæœ¬ï¼Œæ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼Œç”¨äºç”Ÿæˆ allure æµ‹è¯•æŠ¥å‘Šï¼š // @allure.label.suite=postman-new-api-testing-demo // @allure.label.story=\u0026#34;Verify-the-get-api-return-correct-data\u0026#34; // @allure.label.owner=\u0026#34;naodeng\u0026#34; // @allure.label.tag=\u0026#34;GETAPI\u0026#34; pm.test(\u0026#34;res.status should be 200\u0026#34;, function () { pm.response.to.have.status(200); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(1); pm.expect(data.title).to.contains(\u0026#39;provident\u0026#39;); }); è°ƒæ•´ post-demo çš„ Tests è„šæœ¬ï¼Œæ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼Œç”¨äºç”Ÿæˆ allure æµ‹è¯•æŠ¥å‘Šï¼š // @allure.label.suite=postman-new-api-testing-demo // @allure.label.story=\u0026#34;Verify-the-post-api-return-correct-data\u0026#34; // @allure.label.owner=\u0026#34;naodeng\u0026#34; // @allure.label.tag=\u0026#34;POSTAPI\u0026#34; pm.test(\u0026#34;res.status should be 201\u0026#34;, function () { pm.response.to.have.status(201); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(101); pm.expect(data.title).to.equal(\u0026#39;foo\u0026#39;); }); ä¿å­˜æ›´æ”¹åçš„ postman æµ‹è¯•ç”¨ä¾‹ï¼Œé‡æ–°å¯¼å‡ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¹¶æ›¿æ¢åŸæ¥çš„æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ã€‚ è¿è¡Œæµ‹è¯•ç”¨ä¾‹è¾“å‡º allure æŠ¥å‘Š è¿è¡Œæµ‹è¯•ç”¨ä¾‹ npm run test ä¼šåœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆ allure-results æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«äº†æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œç»“æœã€‚\né¢„è§ˆ allure æµ‹è¯•æŠ¥å‘Š allure serve å‚è€ƒæ–‡æ¡£ Postman å®˜æ–¹æ–‡æ¡£ newman å®˜æ–¹æ–‡æ¡£ newman-reporter-htmlextra newman-reporter-allure github action å®˜æ–¹æ–‡æ¡£ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/postman-tutorial-advance-usage-integration-html-report-and-allure-report-integration-github-action/","summary":"Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¿›é˜¶åº”ç”¨ï¼Œä¸“æ³¨äº CI/CD å’Œ GitHub Actions çš„é›†æˆï¼Œä»¥åŠ Allure æµ‹è¯•æŠ¥å‘Šçš„æ¥å…¥ã€‚å­¦ä¹ å¦‚ä½•å°† Postman æµ‹è¯•æ— ç¼æ•´åˆåˆ° CI/CD æµç¨‹ä¸­ï¼Œé€šè¿‡ GitHub Actions å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚æ­¤å¤–ï¼Œäº†è§£å¦‚ä½•é›†æˆ Allure æµ‹è¯•æŠ¥å‘Šæ¡†æ¶ï¼Œç”Ÿæˆè¯¦å°½çš„æµ‹è¯•ç»“æœæŠ¥å‘Š","title":"Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œ Github actionï¼Œæ¥å…¥ allure æµ‹è¯•æŠ¥å‘Š"},{"content":"ä»‹ç» æ¥å£æµ‹è¯•ç®€ä»‹ ä»€ä¹ˆæ˜¯ API? API:åº”ç”¨ç¨‹åºæ¥å£ï¼ˆå…¨ç§°ï¼šapplication programming interfaceï¼‰ï¼Œç¼©å†™ä¸º APIï¼Œæ˜¯ä¸€ç§è®¡ç®—æ¥å£ï¼Œå®ƒå®šä¹‰å¤šä¸ªè½¯ä»¶ä¸­ä»‹ä¹‹é—´çš„äº¤äº’ï¼Œä»¥åŠå¯ä»¥è¿›è¡Œçš„è°ƒç”¨ï¼ˆcallï¼‰æˆ–è¯·æ±‚ï¼ˆrequestï¼‰çš„ç§ç±»ï¼Œå¦‚ä½•è¿›è¡Œè°ƒç”¨æˆ–å‘å‡ºè¯·æ±‚ï¼Œåº”ä½¿ç”¨çš„æ•°æ®æ ¼å¼ï¼Œåº”éµå¾ªçš„æƒ¯ä¾‹ç­‰ã€‚å®ƒè¿˜å¯ä»¥æä¾›æ‰©å±•æœºåˆ¶ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥é€šè¿‡å„ç§æ–¹å¼å¯¹ç°æœ‰åŠŸèƒ½è¿›è¡Œä¸åŒç¨‹åº¦çš„æ‰©å±•ã€‚ä¸€ä¸ª API å¯ä»¥æ˜¯å®Œå…¨å®šåˆ¶çš„ï¼Œé’ˆå¯¹æŸä¸ªç»„ä»¶çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºè¡Œä¸šæ ‡å‡†è®¾è®¡çš„ä»¥ç¡®ä¿äº’æ“ä½œæ€§ã€‚é€šè¿‡ä¿¡æ¯éšè—ï¼ŒAPI å®ç°äº†æ¨¡å—åŒ–ç¼–ç¨‹ï¼Œä»è€Œå…è®¸ç”¨æˆ·å®ç°ç‹¬ç«‹åœ°ä½¿ç”¨æ¥å£ã€‚\nä»€ä¹ˆæ˜¯ API æµ‹è¯•ï¼Ÿ æ¥å£æµ‹è¯•æ˜¯è½¯ä»¶æµ‹è¯•çš„ä¸€ç§ï¼Œå®ƒåŒ…æ‹¬ä¸¤ç§æµ‹è¯•ç±»å‹ï¼šç‹­ä¹‰ä¸ŠæŒ‡çš„æ˜¯ç›´æ¥é’ˆå¯¹åº”ç”¨ç¨‹åºæ¥å£ï¼ˆä¸‹é¢ä½¿ç”¨ç¼©å†™ API æŒ‡ä»£ï¼Œå…¶ä¸­æ–‡ç®€ç§°ä¸ºæ¥å£ï¼‰çš„åŠŸèƒ½è¿›è¡Œçš„æµ‹è¯•ï¼›å¹¿ä¹‰ä¸ŠæŒ‡é›†æˆæµ‹è¯•ä¸­ï¼Œé€šè¿‡è°ƒç”¨ API æµ‹è¯•æ•´ä½“çš„åŠŸèƒ½å®Œæˆåº¦ã€å¯é æ€§ã€å®‰å…¨æ€§ä¸æ€§èƒ½ç­‰æŒ‡æ ‡ã€‚\nAPI Best Practice:\nAPI å®šä¹‰éµå¾ª RESTFUL API é£æ ¼ï¼Œè¯­æ„åŒ–çš„ URI å®šä¹‰ï¼Œå‡†ç¡®çš„ HTTP çŠ¶æ€ç ï¼Œé€šè¿‡ API çš„å®šä¹‰å°±å¯ä»¥çŸ¥é“èµ„æºé—´çš„å…³ç³» é…æœ‰è¯¦ç»†ä¸”å‡†ç¡®çš„ API æ–‡æ¡£ï¼ˆå¦‚ Swagger æ–‡æ¡£ï¼‰ å¯¹å¤–çš„ API å¯ä»¥åŒ…å«ç‰ˆæœ¬å·ä»¥å¿«é€Ÿè¿­ä»£ï¼ˆå¦‚ https://thoughtworks.com/v1/users/ï¼‰ æµ‹è¯•å››è±¡é™ä¸­ä¸åŒè±¡é™çš„æµ‹è¯•ï¼Œå…¶æµ‹è¯•ç›®çš„è·Ÿæµ‹è¯•ç­–ç•¥ä¹Ÿä¸åŒï¼ŒAPI æµ‹è¯•ä¸»è¦ä½äºç¬¬äºŒã€ç¬¬å››è±¡é™\nAPI æµ‹è¯•åœ¨æµ‹è¯•é‡‘å­å¡”ä¸­å¤„äºä¸€ä¸ªç›¸å¯¹é ä¸Šçš„ä½ç½®ï¼Œä¸»è¦ç«™åœ¨ç³»ç»Ÿã€æœåŠ¡è¾¹ç•Œæ¥æµ‹è¯•åŠŸèƒ½å’Œä¸šåŠ¡é€»è¾‘ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨æœåŠ¡å®Œæˆæ„å»ºã€éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒä¹‹åå†æ‰§è¡Œã€éªŒè¯ã€‚\nAPI æµ‹è¯•ç±»å‹ åŠŸèƒ½æµ‹è¯•\næ­£ç¡®æ€§æµ‹è¯• å¼‚å¸¸å¤„ç† å†…éƒ¨é€»è¾‘ â€¦â€¦ éåŠŸèƒ½æµ‹è¯•\næ€§èƒ½ å®‰å…¨ â€¦â€¦ API æµ‹è¯•æ­¥éª¤ å‘é€è¯·æ±‚ å¾—åˆ°å“åº” éªŒè¯å“åº”ç»“æœ Postman ä¸ newman ä»‹ç» Postman æ˜¯ä¸€ä¸ªæµè¡Œçš„ API å¼€å‘å·¥å…·ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„å›¾å½¢ç•Œé¢ï¼Œå¯ç”¨äºåˆ›å»ºï¼Œæµ‹è¯•å’Œè°ƒè¯• APIã€‚Postman è¿˜æä¾›äº†ä¸€ä¸ªå¯ä»¥è½»æ¾ç¼–å†™å’Œå…±äº«æµ‹è¯•è„šæœ¬çš„åŠŸèƒ½ã€‚å®ƒæ”¯æŒå¤šç§ HTTP è¯·æ±‚æ–¹æ³•ï¼ŒåŒ…æ‹¬ GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETE ç­‰ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å„ç§èº«ä»½éªŒè¯å’Œæˆæƒæ–¹å¼æ¥æµ‹è¯• APIã€‚\nNewman æ˜¯ Postman çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ç”¨äºåœ¨ä¸ä½¿ç”¨ Postman GUI çš„æƒ…å†µä¸‹è¿è¡Œæµ‹è¯•é›†ã€‚ä½¿ç”¨ Newmanï¼Œç”¨æˆ·å¯ä»¥è½»æ¾åœ°å°† Postman é›†åˆå¯¼å‡ºä¸ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶åœ¨ä»»ä½•ç¯å¢ƒä¸­è¿è¡Œå®ƒã€‚æ­¤å¤–ï¼ŒNewman è¿˜æ”¯æŒç”Ÿæˆ HTML æˆ– Junit æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Šï¼Œä»¥åŠé›†æˆåˆ° CI/CD ç®¡é“ä¸­ä»¥å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚\næ€»çš„æ¥è¯´ï¼ŒPostman æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ API å¼€å‘å’Œæµ‹è¯•å·¥å…·ï¼Œè€Œ Newman åˆ™æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨ä¸ä½¿ç”¨ Postman GUI çš„æƒ…å†µä¸‹è¿è¡Œæµ‹è¯•é›†ã€‚å®ƒä»¬çš„ç»“åˆä½¿ç”¨å¯ä»¥æé«˜ API æµ‹è¯•å’Œå¼€å‘çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚\né™¤äº†åŸºæœ¬åŠŸèƒ½ï¼ŒPostman è¿˜å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\nç¯å¢ƒå’Œå˜é‡ç®¡ç†ï¼šPostman æ”¯æŒåœ¨ä¸åŒç¯å¢ƒä¹‹é—´åˆ‡æ¢ï¼Œä¾‹å¦‚åœ¨å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒä¹‹é—´åˆ‡æ¢ã€‚åŒæ—¶ï¼Œå®ƒè¿˜æ”¯æŒå˜é‡ç®¡ç†ï¼Œå¯ä»¥è½»æ¾åœ°ä¸ºä¸åŒçš„æµ‹è¯•ç”¨ä¾‹å’Œè¯·æ±‚è®¾ç½®å˜é‡ã€‚ è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šç”¨æˆ·å¯ä»¥ä½¿ç”¨ Postman åˆ›å»ºå’Œè¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»¥ä¾¿åœ¨æŒç»­é›†æˆæˆ–éƒ¨ç½²æµç¨‹ä¸­é›†æˆã€‚è¿™ä½¿å¾—æµ‹è¯•å˜å¾—æ›´åŠ å‡†ç¡®å’Œé«˜æ•ˆã€‚ åä½œå’Œå…±äº«ï¼šPostman æ”¯æŒå°†é›†åˆå’Œç¯å¢ƒä¸å›¢é˜Ÿå…±äº«ï¼Œæ–¹ä¾¿å›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„åä½œã€‚ ç›‘æ§ï¼šPostman è¿˜æä¾› API ç›‘æ§åŠŸèƒ½ï¼Œå¯ä»¥å®æ—¶ç›‘æ§ API çš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚ è€Œ Newman åˆ™ä¸»è¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\nå‘½ä»¤è¡Œæ¥å£ï¼šNewman å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼Œå› æ­¤å¯ä»¥æ–¹ä¾¿åœ°è‡ªåŠ¨åŒ–æµ‹è¯•å’Œé›†æˆåˆ° CI/CD æµç¨‹ä¸­ã€‚ æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼šNewman æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼ŒåŒ…æ‹¬ HTMLã€JSON å’Œ JUnit æ ¼å¼ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨ä¸åŒåœºæ™¯ä¸‹ä½¿ç”¨ã€‚ å¹¶å‘æ‰§è¡Œï¼šNewman æ”¯æŒå¹¶å‘æ‰§è¡Œæµ‹è¯•ï¼Œä»è€Œæé«˜äº†æµ‹è¯•çš„æ•ˆç‡ã€‚ è½»é‡çº§ï¼šä¸ Postman GUI ç›¸æ¯”ï¼ŒNewman æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å·¥å…·ï¼Œå› æ­¤åœ¨è¿è¡Œæµ‹è¯•æ—¶éœ€è¦æ›´å°‘çš„èµ„æºã€‚ æ€»ä¹‹ï¼ŒPostman å’Œ Newman æ˜¯ç°ä»£ API æµ‹è¯•çš„é‡è¦å·¥å…·ï¼Œå®ƒä»¬æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ API æµ‹è¯•å˜å¾—æ›´åŠ é«˜æ•ˆã€å‡†ç¡®å’Œè‡ªåŠ¨åŒ–ã€‚\né™¤äº†ä¸Šè¿°æåˆ°çš„åŠŸèƒ½å’Œç‰¹ç‚¹ï¼ŒPostman å’Œ Newman è¿˜æœ‰å…¶ä»–ä¸€äº›é‡è¦çš„åŠŸèƒ½å’Œä¼˜åŠ¿ï¼š\né›†æˆï¼šPostman å’Œ Newman å¯ä»¥ä¸è®¸å¤šå…¶ä»–å·¥å…·å’ŒæœåŠ¡è¿›è¡Œé›†æˆï¼Œä¾‹å¦‚ GitHubã€Jenkinsã€Slack ç­‰ã€‚è¿™ä½¿å¾—å®ƒä»¬å¯ä»¥è½»æ¾åœ°é›†æˆåˆ°å¼€å‘å’Œéƒ¨ç½²æµç¨‹ä¸­ï¼Œä»¥å®ç°æ›´é«˜æ•ˆçš„ API å¼€å‘å’Œæµ‹è¯•ã€‚ æ–‡æ¡£ç”Ÿæˆï¼šPostman å¯ä»¥ä½¿ç”¨ API çš„è¯·æ±‚å’Œå“åº”æ¥ç”Ÿæˆ API æ–‡æ¡£ã€‚è¿™å¯ä»¥ä½¿ API æ–‡æ¡£æ›´åŠ å‡†ç¡®å’ŒåŠæ—¶ã€‚ æµ‹è¯•è„šæœ¬ï¼šPostman å¯ä»¥ä½¿ç”¨ JavaScript ç¼–å†™æµ‹è¯•è„šæœ¬ï¼Œè¿™å¯ä»¥ä½¿æµ‹è¯•å˜å¾—æ›´åŠ çµæ´»å’Œè‡ªå®šä¹‰ã€‚ç”¨æˆ·å¯ä»¥è½»æ¾åœ°ç¼–å†™è‡ªå®šä¹‰æµ‹è¯•è„šæœ¬ï¼Œä»¥ç¡®ä¿ API çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚ å†å²è®°å½•ï¼šPostman å¯ä»¥å­˜å‚¨ API è¯·æ±‚çš„å†å²è®°å½•ï¼Œè¿™å¯ä»¥æ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹å’Œç®¡ç†ä»¥å‰çš„è¯·æ±‚å’Œå“åº”ã€‚è¿™å¯¹äºè°ƒè¯•å’Œé—®é¢˜æ’æŸ¥éå¸¸æœ‰ç”¨ã€‚ å¤šå¹³å°æ”¯æŒï¼šPostman å’Œ Newman å¯ä»¥åœ¨å¤šç§å¹³å°ä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬ Windowsã€MacOS å’Œ Linux ç­‰ã€‚ æ€»ä¹‹ï¼ŒPostman å’Œ Newman æ˜¯ç°ä»£ API æµ‹è¯•å’Œå¼€å‘çš„å¼ºå¤§å·¥å…·ã€‚å®ƒä»¬æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œçµæ´»çš„æµ‹è¯•è„šæœ¬ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜æ›´å¿«ã€æ›´å‡†ç¡®åœ°æ„å»ºå’Œæµ‹è¯• APIã€‚\né¡¹ç›®ä¾èµ– éœ€æå‰å®‰è£…å¥½ä»¥ä¸‹ç¯å¢ƒ\nnodejs, demo ç‰ˆæœ¬ä¸º v21.1.0 Postman å®‰è£…å®Œæˆï¼Œå¯é€šè¿‡å®˜æ–¹ç½‘ç«™ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£… é¡¹ç›®æ–‡ä»¶ç»“æ„ ä»¥ä¸‹æ˜¯ä¸€ä¸ª Postman å’Œ Newman çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®çš„æ–‡ä»¶ç»“æ„ï¼Œå…¶ä¸­åŒ…å«äº†æµ‹è¯•é…ç½®æ–‡ä»¶ã€æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ã€æµ‹è¯•å·¥å…·æ–‡ä»¶å’Œæµ‹è¯•æŠ¥å‘Šæ–‡ä»¶ã€‚å¯è¿›è¡Œå‚è€ƒã€‚\nPostman-Newman-demo â”œâ”€â”€ README.md â”œâ”€â”€ package.json â”œâ”€â”€ package-lock.json â”œâ”€â”€ Data // æµ‹è¯•é…ç½®æ–‡ä»¶ â”‚ â””â”€â”€ testdata.csv // æµ‹è¯•æ•°æ® â”œâ”€â”€ Testcase // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹ â”‚ â””â”€â”€ APITestDemo.postman_collection.json // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ â”œâ”€â”€ Env // ä¸åŒæµ‹è¯•ç¯å¢ƒæ–‡ä»¶å¤¹ â”‚ â””â”€â”€ DemoEnv.postman_environment.json // æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ â”œâ”€â”€ Report // æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶ â”‚ â””â”€â”€ report.html â”œâ”€â”€ .gitignore â””â”€â”€ node_modules // é¡¹ç›®ä¾èµ– ä» 0 åˆ° 1 æ­å»º Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® ä¸‹é¢ä¼šä»‹ç»ä» 0 åˆ° 1 æ­å»ºä¸€ä¸ª Postman å’Œ Newman çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼ŒåŒ…æ‹¬æµ‹è¯•é…ç½®ã€æµ‹è¯•ç”¨ä¾‹ã€æµ‹è¯•ç¯å¢ƒã€æµ‹è¯•å·¥å…·å’Œæµ‹è¯•æŠ¥å‘Šç­‰ã€‚\nå¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/Postman-Newman-demo\næ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ mkdir Postman-Newman-demo é¡¹ç›®åˆå§‹åŒ– // è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ cd Postman-Newman-demo // nodejs é¡¹ç›®åˆå§‹åŒ– npm init -y å®‰è£…ä¾èµ– ç›®å‰ newman æœ€æ–°ç‰ˆæœ¬åœ¨ html æµ‹è¯•æŠ¥å‘Šçš„ä¸€äº›åŒ…å…¼å®¹æ€§ä¸Šæœ‰é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ 4.2.3 ç‰ˆæœ¬\n// å®‰è£… newman npm install newman@4.2.3 --save-dev Postman ç¼–å†™æ¥å£æµ‹è¯•ç”¨ä¾‹ æ–°å»º Collection å’Œ Request æ‰“å¼€ Postmanï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„ New æŒ‰é’®ï¼Œé€‰æ‹© Collectionï¼Œè¾“å…¥ Collection çš„åç§°ï¼Œç‚¹å‡» Create Collection æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªåç§°ä¸º demo çš„ Collectionã€‚ åœ¨ Collection ä¸­ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œé€‰æ‹© Add Requestï¼Œè¾“å…¥ Request çš„åç§°ï¼Œç‚¹å‡» Save æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ª Request å‘½åä¸º get-demoã€‚å†æ·»åŠ ä¸€ä¸ª Request å‘½åä¸º post-demoã€‚ ç¼–è¾‘ Request å’Œç¼–å†™æµ‹è¯•ç”¨ä¾‹ å¯æ ¹æ®é¡¹ç›®æ–‡ä»¶ä¸‹çš„ demoAPI.md æ–‡ä»¶ä¸­çš„æ¥å£æ–‡æ¡£ï¼Œè·å– demo ä½¿ç”¨çš„ Request çš„ URLã€è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰ä¿¡æ¯ã€‚\nget-demo åœ¨ get-demo çš„ Request ä¸­ï¼Œé€‰æ‹© GET è¯·æ±‚æ–¹æ³•ï¼Œè¾“å…¥ URL ä¸ºhttps://jsonplaceholder.typicode.com/posts/1 åœ¨ Headers ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª Key ä¸º Content-Typeï¼ŒValue ä¸º application/json; çš„è¯·æ±‚å¤´ã€‚ åœ¨ Tests ä¸‹ï¼Œæ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼Œç”¨äºéªŒè¯å“åº”ç»“æœï¼š pm.test(\u0026#34;res.status should be 200\u0026#34;, function () { pm.response.to.have.status(200); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(1); pm.expect(data.title).to.contains(\u0026#39;provident\u0026#39;); }); ç‚¹å‡» Send æŒ‰é’®ï¼Œå‘é€è¯·æ±‚ï¼ŒéªŒè¯å“åº”ç»“æœã€‚ ç¡®è®¤å“åº”ç»“æœæ­£ç¡®åï¼Œç‚¹å‡» Save æŒ‰é’®ï¼Œä¿å­˜ Requestã€‚\npost-demo åœ¨ post-demo çš„ Request ä¸­ï¼Œé€‰æ‹© POST è¯·æ±‚æ–¹æ³•ï¼Œè¾“å…¥ URL ä¸ºhttps://jsonplaceholder.typicode.com/posts åœ¨ Headers ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª Key ä¸º Content-Typeï¼ŒValue ä¸º application/json; çš„è¯·æ±‚å¤´ã€‚ åœ¨ Body ä¸­ï¼Œé€‰æ‹© rawï¼Œé€‰æ‹© JSON æ ¼å¼ï¼Œè¾“å…¥ä»¥ä¸‹è¯·æ±‚ä½“ï¼š { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } åœ¨ Tests ä¸‹ï¼Œæ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼Œç”¨äºéªŒè¯å“åº”ç»“æœï¼š pm.test(\u0026#34;res.status should be 201\u0026#34;, function () { pm.response.to.have.status(201); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(101); pm.expect(data.title).to.equal(\u0026#39;foo\u0026#39;); }); ç¡®è®¤å“åº”ç»“æœæ­£ç¡®åï¼Œç‚¹å‡» Save æŒ‰é’®ï¼Œä¿å­˜ Requestã€‚\nPostman ç¼–å†™æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ ä¸‹é¢ä¼šå–æ¥å£è¯·æ±‚çš„ host ä¸ºç¯å¢ƒå˜é‡æ¥è¿›è¡Œ demo\næ·»åŠ ç¯å¢ƒå˜é‡ åœ¨ Postman çš„å³ä¸Šè§’ï¼Œç‚¹å‡»é½¿è½®å›¾æ ‡ï¼Œé€‰æ‹© Manage Environmentsï¼Œç‚¹å‡» Add æŒ‰é’®ï¼Œè¾“å…¥ç¯å¢ƒåç§°ä¸º DemoEnvï¼Œç‚¹å‡» Add æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªåç§°ä¸º DemoEnv çš„ç¯å¢ƒã€‚ ç¼–è¾‘ç¯å¢ƒå˜é‡ï¼Œæ·»åŠ ä¸€ä¸ª Key ä¸º hostï¼ŒValue ä¸ºhttps://jsonplaceholder.typicode.comçš„ç¯å¢ƒå˜é‡ã€‚ ç‚¹å‡» Add æŒ‰é’®ï¼Œä¿å­˜ç¯å¢ƒå˜é‡ã€‚ æ›´æ–° Request åœ¨ get-demo çš„ Request ä¸­ï¼Œæ›´æ–° URL ä¸º{{host}}/posts/1 åœ¨ post-demo çš„ Request ä¸­ï¼Œæ›´æ–° URL ä¸º{{host}}/posts éªŒè¯ç¯å¢ƒå˜é‡ åœ¨ Postman çš„å³ä¸Šè§’ï¼Œç‚¹å‡»é½¿è½®å›¾æ ‡ï¼Œé€‰æ‹© DemoEnvï¼Œåˆ‡æ¢ç¯å¢ƒå˜é‡ä¸º DemoEnvã€‚ é€‰æ‹© get-demo çš„ Requestï¼Œç‚¹å‡» Send æŒ‰é’®ï¼Œå‘é€è¯·æ±‚ï¼ŒéªŒè¯å“åº”ç»“æœã€‚ç¡®è®¤å“åº”ç»“æœæ­£ç¡®åï¼Œç‚¹å‡» Save æŒ‰é’®ï¼Œä¿å­˜ Requestã€‚ é€‰æ‹© post-demo çš„ Requestï¼Œç‚¹å‡» Send æŒ‰é’®ï¼Œå‘é€è¯·æ±‚ï¼ŒéªŒè¯å“åº”ç»“æœã€‚ç¡®è®¤å“åº”ç»“æœæ­£ç¡®åï¼Œç‚¹å‡» Save æŒ‰é’®ï¼Œä¿å­˜ Requestã€‚ å¯¼å‡ºç¯å¢ƒå˜é‡å’Œæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ åœ¨ Postman çš„å³ä¸Šè§’ï¼Œç‚¹å‡»é½¿è½®å›¾æ ‡ï¼Œé€‰æ‹© Exportï¼Œé€‰æ‹© DemoEnvï¼Œç‚¹å‡» Export æŒ‰é’®ï¼Œå¯¼å‡ºç¯å¢ƒå˜é‡ã€‚ é€‰æ‹© get-demo request å’Œ post-demo request æ‰€åœ¨çš„ demo Collectionï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œé€‰æ‹© Exportï¼Œé€‰æ‹© Collection v2.1ï¼Œç‚¹å‡» Export æŒ‰é’®ï¼Œå¯¼å‡ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ã€‚ è°ƒæ•´é¡¹ç›®æ–‡ä»¶ç»“æ„ æ–°å»º Env å’Œ Testcase æ–‡ä»¶å¤¹ åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåä¸º Env çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾ç¯å¢ƒå˜é‡æ–‡ä»¶ã€‚ // æ–°å»º Env æ–‡ä»¶å¤¹ mkdir Env åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåä¸º Testcase çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ã€‚ // æ–°å»º Testcase æ–‡ä»¶å¤¹ mkdir Testcase è°ƒæ•´ç”¨ä¾‹æ–‡ä»¶å’Œç¯å¢ƒå˜é‡æ–‡ä»¶ å°†å¯¼å‡ºçš„ç¯å¢ƒå˜é‡æ–‡ä»¶å’Œæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶æ”¾åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹çš„ Env å’Œ Testcase æ–‡ä»¶å¤¹ä¸‹ã€‚\nè°ƒæ•´ package.json æ–‡ä»¶ åœ¨ package.json æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼Œç”¨äºè¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼š \u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;newman run Testcase/demo.postman_collection.json -e Env/DemoEnv.postman_environment.json\u0026#34; } è¿è¡Œæµ‹è¯•ç”¨ä¾‹ npm run test å‚è€ƒæ–‡æ¡£ Postman å®˜æ–¹æ–‡æ¡£ newman å®˜æ–¹æ–‡æ¡£ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/postman-tutorial-getting-started-and-building-your-own-project-from-0-to-1/","summary":"å…³äº Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¯¼å¼•ï¼Œå…¨é¢ä»‹ç»å…¥é—¨åŸºç¡€å’Œä»é›¶å¼€å§‹æ­å»ºé¡¹ç›®çš„æ­¥éª¤ã€‚å­¦ä¹ å¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨ Postman è¿›è¡Œ API æµ‹è¯•ï¼Œäº†è§£é¡¹ç›®æ­å»ºçš„åŸºç¡€ç»“æ„ã€ç¯å¢ƒè®¾ç½®å’Œæµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™","title":"Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œä» 0 åˆ° 1 æ­å»º Postman æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®"},{"content":"è¿›é˜¶ç”¨æ³• å¹¶å‘æµ‹è¯•å’Œåˆ†å¸ƒå¼æµ‹è¯• åœ¨æ—¥å¸¸çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¹¶å‘æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä»¥æé«˜æµ‹è¯•æ•ˆç‡ã€‚\næœ‰æ—¶å€™ä¹Ÿéœ€è¦å¼•å…¥åˆ†å¸ƒå¼æµ‹è¯•ï¼Œä»¥ä¾¿åœ¨å¤šå°æœºå™¨ä¸ŠåŒæ—¶è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿèƒ½æ›´å¥½çš„æå‡æµ‹è¯•æ•ˆç‡ã€‚\npytest-xdist æ˜¯ Pytest çš„ä¸€ä¸ªæ’ä»¶ï¼Œèƒ½æä¾›äº†ä¸€äº›å¯¹åº”çš„åŠŸèƒ½ï¼Œä¸»è¦ç”¨äºæ”¯æŒå¹¶å‘æµ‹è¯•å’Œåˆ†å¸ƒå¼æµ‹è¯•ã€‚\npytest-xdist åŠŸèƒ½ä»‹ç» å¹¶å‘æ‰§è¡Œæµ‹è¯•ï¼š\nä½¿ç”¨ -n é€‰é¡¹ï¼špytest -n NUM å…è®¸å¹¶å‘è¿è¡Œæµ‹è¯•ï¼Œå…¶ä¸­ NUM æ˜¯å¹¶å‘ worker çš„æ•°é‡ã€‚è¿™å¯ä»¥åŠ é€Ÿæµ‹è¯•æ‰§è¡Œï¼Œç‰¹åˆ«æ˜¯åœ¨æ‹¥æœ‰å¤šä¸ª CPU å†…æ ¸çš„è®¡ç®—æœºä¸Šã€‚ pytest -n 3 # å¯åŠ¨ 3 ä¸ªå¹¶å‘ worker æ‰§è¡Œæµ‹è¯• åˆ†å¸ƒå¼æµ‹è¯•ï¼š\nä½¿ç”¨ pytest --dist=loadscopeï¼šå…è®¸åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œæµ‹è¯•ï¼Œé€šè¿‡åˆ†å¸ƒå¼æµ‹è¯•å¯ä»¥æ›´å¿«åœ°å®Œæˆæµ‹è¯•è¿è¡Œã€‚ pytest --dist=loadscope ä½¿ç”¨ pytest --dist=eachï¼šæ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ç»„æµ‹è¯•ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼æµ‹è¯•ã€‚ pytest --dist=each å‚æ•°åŒ–æµ‹è¯•å’Œå¹¶å‘ï¼š\nä½¿ç”¨ pytest.mark.runï¼šç»“åˆ pytest.mark.run æ ‡è®°ï¼Œå¯ä»¥é€‰æ‹©åœ¨ä¸åŒçš„è¿›ç¨‹æˆ–èŠ‚ç‚¹ä¸Šè¿è¡Œå…·æœ‰ä¸åŒæ ‡è®°çš„æµ‹è¯•ã€‚ @pytest.mark.run(processes=2) def test_example(): pass åˆ†å¸ƒå¼ç¯å¢ƒè®¾ç½®ï¼š\nä½¿ç”¨ pytest_configure_nodeï¼šå¯ä»¥åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œæµ‹è¯•ä¹‹å‰è¿›è¡Œé…ç½®ã€‚ def pytest_configure_node(node): node.slaveinput[\u0026#39;my_option\u0026#39;] = \u0026#39;some value\u0026#39; ä½¿ç”¨ pytest_configure_nodeï¼šå¯ä»¥åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œæµ‹è¯•ä¹‹å‰è¿›è¡Œé…ç½®ã€‚ def pytest_configure_node(node): node.slaveinput[\u0026#39;my_option\u0026#39;] = \u0026#39;some value\u0026#39; åˆ†å¸ƒå¼æµ‹è¯•ç¯å¢ƒé”€æ¯ï¼š\nä½¿ç”¨ pytest_configure_nodeï¼šå¯ä»¥åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œæµ‹è¯•ä¹‹åè¿›è¡Œæ¸…ç†ã€‚ def pytest_configure_node(node): # é…ç½®èŠ‚ç‚¹ yield # åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œæµ‹è¯•åæ‰§è¡Œæ¸…ç† print(\u0026#34;Cleaning up after test run on node %s\u0026#34; % node.gateway.id) è¿™äº›æ˜¯ pytest-xdist æä¾›çš„ä¸€äº›åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ›´æœ‰æ•ˆåœ°æ‰§è¡Œå¹¶å‘æµ‹è¯•å’Œåˆ†å¸ƒå¼æµ‹è¯•ï¼Œä»¥åŠ é€Ÿæµ‹è¯•æ‰§è¡Œå¹¶æé«˜æ•ˆç‡ã€‚ç¡®ä¿åœ¨ä½¿ç”¨å‰æŸ¥é˜… pytest-xdist çš„æ–‡æ¡£ä»¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯å’Œç”¨æ³•ç¤ºä¾‹ã€‚\nå®‰è£… pytest-xdist ä¾èµ– pip install pytest-xdist å¹¶å‘è¿è¡Œæµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹ å¹¶å‘ 3 ä¸ª worker æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ åˆ†åˆ«è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œæ—¶é•¿\nå¹¶å‘æ‰§è¡Œ pytest -n 3 é»˜è®¤ä¸²è¡Œæ‰§è¡Œ pytest ä¸²è¡Œæ‰§è¡Œè€—æ—¶ 9.81sï¼Œè€Œå¹¶å‘æ‰§è¡Œè€—æ—¶ 1.63sï¼Œå¯ä»¥çœ‹åˆ°å¹¶å‘æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹å¯ä»¥å¤§å¤§æé«˜æµ‹è¯•æ•ˆç‡ã€‚\nå¹¶å‘ 3 ä¸ª worker æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶ä¸”æ¯ä¸ª worker éƒ½ä¼šæ‰“å°æµ‹è¯•ç”¨ä¾‹çš„è¿›åº¦ pytest -n 3 -v æµ‹è¯•ç»“æœä¸­ä¼šæ‰“å°æµ‹è¯•è¿›åº¦ï¼Œå¯ä»¥æ›´å¥½çš„äº†è§£æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œæƒ…å†µã€‚\nåˆ†å¸ƒå¼æµ‹è¯•ç¤ºä¾‹ åˆ†å¸ƒå¼æµ‹è¯•ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ç»„æµ‹è¯• pytest --dist=each åˆ†å¸ƒå¼æµ‹è¯•å¯ä»¥æ›´å¿«åœ°å®Œæˆæµ‹è¯•è¿è¡Œã€‚\nåˆ†å¸ƒå¼æµ‹è¯•ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ç»„æµ‹è¯•ï¼Œå¹¶ä¸”æ¯ä¸ª worker éƒ½ä¼šæ‰“å°æµ‹è¯•ç”¨ä¾‹çš„è¿›åº¦ pytest --dist=each -v æµ‹è¯•ç»“æœä¸­ä¼šæ‰“å°æµ‹è¯•è¿›åº¦ï¼Œå¯ä»¥æ›´å¥½çš„äº†è§£æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œæƒ…å†µã€‚\nåˆ†å¸ƒå¼æµ‹è¯•ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ç»„æµ‹è¯•ï¼Œå¹¶ä¸”æ¯ä¸ª worker éƒ½ä¼šæ‰“å°æµ‹è¯•ç”¨ä¾‹çš„è¿›åº¦ï¼ŒåŒæ—¶æ‰“å°æµ‹è¯•æ—¥å¿—çš„è¾“å‡º pytest --dist=each -v --capture=no æµ‹è¯•ç»“æœä¸­ä¼šæ‰“å°æµ‹è¯•æ—¥å¿—çš„è¾“å‡ºï¼Œå¯ä»¥æ›´å¥½çš„äº†è§£æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œæƒ…å†µã€‚\nç­›é€‰ç”¨ä¾‹æ‰§è¡Œ åœ¨æ—¥å¸¸çš„æ¥å£æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥é€‰æ‹©æ€§åœ°æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä»¥æé«˜æµ‹è¯•æ•ˆç‡ã€‚\nä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ allure æµ‹è¯•æŠ¥å‘Šçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ Allure æ ‡ç­¾ç‰¹æ€§æ¥è¿›è¡Œç­›é€‰å¯¹åº”æ ‡ç­¾çš„çš„ç”¨ä¾‹æ¥æ‰§è¡Œæµ‹è¯•ï¼Œä½† Pytest æ¡†æ¶ä¸ç›´æ¥æ”¯æŒè¿è¡ŒåŸºäº Allure æ ‡ç­¾çš„æµ‹è¯•ã€‚æ‰€ä»¥å¯ä»¥ä½¿ç”¨ Pytest æ ‡è®°æ¥å®ç°è¿™ä¸€ç‚¹ã€‚\nPytest æä¾› marksæ ‡è®°åŠŸèƒ½å¯ä»¥ç”¨æ¥æ ‡è®°ä¸åŒç±»å‹çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç„¶åè¿›è¡Œç­›é€‰å¯¹åº”ç±»å‹çš„æµ‹è¯•ç”¨ä¾‹è¿›è¡Œæ‰§è¡Œã€‚\nå¤§è‡´æµç¨‹ä¸ºä½ å¯ä»¥ç”¨è‡ªå®šä¹‰æ ‡è®°ï¼ˆå¦‚ Regression/Smokeï¼‰æ¥æ ‡è®°æµ‹è¯•ï¼Œç„¶åä½¿ç”¨ pytest çš„ -m é€‰é¡¹åªè¿è¡Œè¿™äº›æµ‹è¯•ã€‚\nå®šä¹‰ Pytest æ ‡è®° ç¼–è¾‘ pytest.ini æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼šè‡ªå®šä¹‰æ ‡è®°çš„ç±»å‹\nRegression:æ ‡è®°ä¸ºå›å½’æµ‹è¯•çš„ç”¨ä¾‹ Smoke:æ ‡è®°ä¸ºå†’çƒŸæµ‹è¯•çš„ç”¨ä¾‹ markers = Regression: marks tests as Regression Smoke: marks tests as Smoke æ ‡è®°ç”¨ä¾‹ æ“ä½œæ­¥éª¤ä¸ºï¼š\nå¼•å…¥ pytest ä½¿ç”¨ @pytest.mark æ ‡è®°æµ‹è¯•ç”¨ä¾‹ ä¸ºåšåŒºåˆ†ï¼Œè¿™é‡Œæ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º test_demo_filter.py\nimport pytest import requests import json class TestPytestMultiEnvDemo: @pytest.mark.Regression # mark the test case as regression def test_get_demo_filter(self, env_config, env_request_data, env_response_data): host = env_config[\u0026#34;host\u0026#34;] get_api = env_config[\u0026#34;getAPI\u0026#34;] get_api_response_data = env_response_data[\u0026#34;getAPI\u0026#34;] # send request response = requests.get(host+get_api) # assert assert response.status_code == 200 assert response.json() == get_api_response_data @pytest.mark.Smoke # mark the test case as smoke def test_post_demo_filter(self, env_config, env_request_data, env_response_data): host = env_config[\u0026#34;host\u0026#34;] post_api = env_config[\u0026#34;postAPI\u0026#34;] post_api_request_data = env_request_data[\u0026#34;postAPI\u0026#34;] print(\u0026#34;make the request\u0026#34;) post_api_response_data = env_response_data[\u0026#34;postAPI\u0026#34;] # Your test code here response = requests.post(host + post_api, json=post_api_request_data) print(\u0026#34;verify the response status code\u0026#34;) assert response.status_code == 201 print(\u0026#34;verify the response data\u0026#34;) assert response.json() == post_api_response_data ç­›é€‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œ è¿è¡Œ Regression æ ‡è®°çš„æµ‹è¯•ç”¨ä¾‹ pytest -m Regression è¿™æ¡å‘½ä»¤å‘Šè¯‰ pytest åªè¿è¡Œæ ‡æœ‰ Regression çš„æµ‹è¯•ã€‚\nè¿è¡Œ Smoke æ ‡è®°çš„æµ‹è¯•ç”¨ä¾‹ pytest -m Smoke è¿™æ¡å‘½ä»¤å‘Šè¯‰ pytest åªè¿è¡Œæ ‡æœ‰ Smoke çš„æµ‹è¯•ã€‚\nå‚è€ƒèµ„æ–™ pytest-xdist æ–‡æ¡£:https://pytest-xdist.readthedocs.io/en/stable/ pytest makers æ–‡æ¡£:https://docs.pytest.org/en/6.2.x/example/markers.html pytest æ–‡æ¡£:https://docs.pytest.org/en/6.2.x/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-filter-testcase-and-concurrent-testing-distributed-testing/","summary":"èšç„¦äºæµ‹è¯•ç”¨ä¾‹ç­›é€‰ã€å¹¶å‘æµ‹è¯•å’Œåˆ†å¸ƒå¼æµ‹è¯•ã€‚å­¦ä¼šå¦‚ä½•æœ‰é’ˆå¯¹æ€§åœ°æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜æµ‹è¯•æ•ˆç‡ã€‚æ¢ç´¢ Pytest çš„å¹¶å‘æµ‹è¯•ç‰¹æ€§ï¼Œäº†è§£å¦‚ä½•åŒæ—¶æ‰§è¡Œå¤šä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œç¼©çŸ­æµ‹è¯•æ—¶é—´ã€‚","title":"Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - ç­›é€‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œï¼Œå¹¶å‘æµ‹è¯•å’Œåˆ†å¸ƒå¼æµ‹è¯•"},{"content":"è¿›é˜¶ç”¨æ³• å¤šç¯å¢ƒæ”¯æŒ åœ¨å®é™…çš„ API è‡ªåŠ¨åŒ–æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä»¥ç¡®ä¿ API åœ¨å„ä¸ªç¯å¢ƒä¸­éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚\né€šè¿‡ä½¿ç”¨ Pytest çš„ fixture åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°å¤šç¯å¢ƒæ”¯æŒã€‚\nå¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/Pytest-API-Test-Demo\næ–°å»ºä¸åŒç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ é…ç½®æ–‡ä»¶ä¼šä»¥ json æ ¼å¼å­˜å‚¨ä¸ºä¾‹ï¼Œå…¶ä»–æ ¼å¼å¦‚ YAMLã€CSV ç­‰ç±»ä¼¼ï¼Œå‡å¯å‚è€ƒ\n// æ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶å¤¹ mkdir config // è¿›å…¥æµ‹è¯•é…ç½®æ–‡ä»¶å¤¹ cd config // æ–°å»ºå¼€å‘ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ touch dev_config.json // æ–°å»ºç”Ÿäº§ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ touch prod_config.json ç¼–å†™ä¸åŒç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ ç¼–å†™å¼€å‘ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µé…ç½®å¼€å‘ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶\n{ \u0026#34;host\u0026#34;: \u0026#34;https://jsonplaceholder.typicode.com\u0026#34;, \u0026#34;getAPI\u0026#34;: \u0026#34;/posts/1\u0026#34;, \u0026#34;postAPI\u0026#34;:\u0026#34;/posts\u0026#34; } ç¼–å†™ç”Ÿäº§ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µé…ç½®ç”Ÿäº§ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶\n{ \u0026#34;host\u0026#34;: \u0026#34;https://jsonplaceholder.typicode.com\u0026#34;, \u0026#34;getAPI\u0026#34;: \u0026#34;/posts/1\u0026#34;, \u0026#34;postAPI\u0026#34;:\u0026#34;/posts\u0026#34; } æ–°å»ºä¸åŒç¯å¢ƒæµ‹è¯•æ•°æ®æ–‡ä»¶ ä¸åŒç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶å’Œå“åº”æ•°æ®æ–‡ä»¶åˆ†åˆ«å­˜å‚¨æµ‹è¯•ç”¨ä¾‹çš„ä¸åŒç¯å¢ƒè¯·æ±‚æ•°æ®å’Œä¸åŒç¯å¢ƒé¢„æœŸå“åº”æ•°æ®ã€‚\n// æ–°å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ mkdir data // è¿›å…¥æµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ cd data // æ–°å»ºå¼€å‘ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ touch dev_request_data.json // æ–°å»ºå¼€å‘ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ touch dev_response_data.json // æ–°å»ºç”Ÿäº§ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ touch prod_request_data.json // æ–°å»ºç”Ÿäº§ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ touch prod_response_data.json ç¼–å†™ä¸åŒç¯å¢ƒæµ‹è¯•æ•°æ®æ–‡ä»¶ ç¼–å†™å¼€å‘ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ å¼€å‘ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ä¸­é…ç½®äº† getAPI æ¥å£çš„è¯·æ±‚æ•°æ®å’Œ postAPI æ¥å£çš„è¯·æ±‚æ•°æ®\n{ \u0026#34;getAPI\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;postAPI\u0026#34;:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } } ç¼–å†™å¼€å‘ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ å¼€å‘ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ä¸­é…ç½®äº† getAPI æ¥å£çš„å“åº”æ•°æ®å’Œ postAPI æ¥å£çš„å“åº”æ•°æ®\n{ \u0026#34;getAPI\u0026#34;: { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; }, \u0026#34;postAPI\u0026#34;:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 } } ç¼–å†™ç”Ÿäº§ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ ç”Ÿäº§ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ä¸­é…ç½®äº† getAPI æ¥å£çš„è¯·æ±‚æ•°æ®å’Œ postAPI æ¥å£çš„è¯·æ±‚æ•°æ®\n{ \u0026#34;getAPI\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;postAPI\u0026#34;:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } } ç¼–å†™ç”Ÿäº§ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ ç”Ÿäº§ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ä¸­é…ç½®äº† getAPI æ¥å£çš„å“åº”æ•°æ®å’Œ postAPI æ¥å£çš„å“åº”æ•°æ®\n{ \u0026#34;getAPI\u0026#34;: { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; }, \u0026#34;postAPI\u0026#34;:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 } } é…ç½®æ”¯æŒå¤šç¯å¢ƒçš„ fixture fixture ä¼šä»¥ conftest.py æ–‡ä»¶å­˜å‚¨ä¸ºä¾‹ï¼Œå…¶ä»–æ ¼å¼å¦‚ YAMLã€CSV ç­‰ç±»ä¼¼ï¼Œå‡å¯å‚è€ƒ\né¡¹ç›®æ ¹ç›®å½•æ–°å»º conftest.py æ–‡ä»¶ mkdrir conftest.py ç¼–å†™ conftest.py æ–‡ä»¶ import pytest import json import json import os @pytest.fixture(scope=\u0026#34;session\u0026#34;) def env_config(request): # get config file from different env env = os.getenv(\u0026#39;ENV\u0026#39;, \u0026#39;dev\u0026#39;) with open(f\u0026#39;config/{env}_config.json\u0026#39;, \u0026#39;r\u0026#39;) as config_file: config = json.load(config_file) return config @pytest.fixture(scope=\u0026#34;session\u0026#34;) def env_request_data(request): # get request data file from different env env = os.getenv(\u0026#39;ENV\u0026#39;, \u0026#39;dev\u0026#39;) with open(f\u0026#39;data/{env}_request_data.json\u0026#39;, \u0026#39;r\u0026#39;) as request_data_file: request_data = json.load(request_data_file) return request_data @pytest.fixture (scope=\u0026#34;session\u0026#34;) def env_response_data(request): # get response data file from different env env = os.getenv(\u0026#39;ENV\u0026#39;, \u0026#39;dev\u0026#39;) with open(f\u0026#39;data/{env}_response_data.json\u0026#39;, \u0026#39;r\u0026#39;) as response_data_file: response_data = json.load(response_data_file) return response_data æ›´æ–°æµ‹è¯•ç”¨ä¾‹æ¥æ”¯æŒå¤šç¯å¢ƒ ä¸ºåšåŒºåˆ†ï¼Œè¿™é‡Œæ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º test_demo_multi_environment.py\nimport requests import json class TestPytestMultiEnvDemo: def test_get_demo_multi_env(self, env_config, env_request_data, env_response_data): host = env_config[\u0026#34;host\u0026#34;] get_api = env_config[\u0026#34;getAPI\u0026#34;] get_api_response_data = env_response_data[\u0026#34;getAPI\u0026#34;] # send request response = requests.get(host+get_api) # assert assert response.status_code == 200 assert response.json() == get_api_response_data def test_post_demo_multi_env(self, env_config, env_request_data, env_response_data): host = env_config[\u0026#34;host\u0026#34;] post_api = env_config[\u0026#34;postAPI\u0026#34;] post_api_request_data = env_request_data[\u0026#34;postAPI\u0026#34;] post_api_response_data = env_response_data[\u0026#34;postAPI\u0026#34;] # send request response = requests.post(host + post_api, post_api_request_data) # assert assert response.status_code == 201 assert response.json() == post_api_response_data è¿è¡Œè¯¥æµ‹è¯•ç”¨ä¾‹ç¡®è®¤å¤šç¯å¢ƒæ”¯æŒæ˜¯å¦ç”Ÿæ•ˆ è¿è¡Œå¼€å‘ç¯å¢ƒæµ‹è¯•ç”¨ä¾‹ ENV=dev pytest test_case/test_demo_multi_environment.py è¿è¡Œç”Ÿäº§ç¯å¢ƒæµ‹è¯•ç”¨ä¾‹ ENV=prod pytest test_case/test_demo_multi_environment.py é›†æˆ allure æŠ¥å‘Š allure æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€çµæ´»çš„ã€æ˜“äºæ‰©å±•çš„æµ‹è¯•æŠ¥å‘Šå·¥å…·ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„æŠ¥å‘Šç±»å‹å’ŒåŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°å¯è§†åŒ–æµ‹è¯•ç»“æœã€‚\nallure æŠ¥å‘Šå¯ä»¥ä¸ Pytest é›†æˆï¼Œä»¥ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šã€‚\nå¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/Pytest-API-Test-Demo\nå®‰è£… allure-pytest ä¾èµ– pip install allure-pytest é¿å…ä¹‹å‰å®‰è£…çš„ pytest-html-reporter ä¸ allure-pytest å†²çªï¼Œå»ºè®®å…ˆå¸è½½ pytest-html-reporter\npip uninstall pytest-html-reporter é…ç½® allure-pytest æ›´æ–° pytest.ini æ–‡ä»¶æ¥æŒ‡å®š allure æŠ¥å‘Šçš„å­˜å‚¨ä½ç½®\n[pytest] # allure addopts = --alluredir ./allure-results è°ƒæ•´æµ‹è¯•ç”¨ä¾‹æ¥æ”¯æŒ allure æŠ¥å‘Š ä¸ºåšåŒºåˆ†ï¼Œè¿™é‡Œæ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º test_demo_allure.py\nimport allure import requests @allure.feature(\u0026#34;Test example API\u0026#34;) class TestPytestAllureDemo: @allure.story(\u0026#34;Test example get endpoint\u0026#34;) @allure.title(\u0026#34;Verify the get API\u0026#34;) @allure.description(\u0026#34;verify the get API response status code and data\u0026#34;) @allure.severity(\u0026#34;blocker\u0026#34;) def test_get_example_endpoint_allure(self, env_config, env_request_data, env_response_data): host = env_config[\u0026#34;host\u0026#34;] get_api = env_config[\u0026#34;getAPI\u0026#34;] get_api_request_data = env_request_data[\u0026#34;getAPI\u0026#34;] get_api_response_data = env_response_data[\u0026#34;getAPI\u0026#34;] # send get request response = requests.get(host + get_api) # assert print(\u0026#34;response status code is\u0026#34; + str(response.status_code)) assert response.status_code == 200 print(\u0026#34;response data is\u0026#34; + str(response.json())) assert response.json() == get_api_response_data @allure.story(\u0026#34;Test example POST API\u0026#34;) @allure.title(\u0026#34;Verify the POST API\u0026#34;) @allure.description(\u0026#34;verify the POST API response status code and data\u0026#34;) @allure.severity(\u0026#34;Critical\u0026#34;) def test_post_example_endpoint_allure(self, env_config, env_request_data, env_response_data): host = env_config[\u0026#34;host\u0026#34;] post_api = env_config[\u0026#34;postAPI\u0026#34;] post_api_request_data = env_request_data[\u0026#34;postAPI\u0026#34;] post_api_response_data = env_response_data[\u0026#34;postAPI\u0026#34;] # send request response = requests.post(host + post_api, json=post_api_request_data) # assert print(\u0026#34;response status code is\u0026#34; + str(response.status_code)) assert response.status_code == 201 print(\u0026#34;response data is\u0026#34; + str(response.json())) assert response.json() == post_api_response_data è¿è¡Œæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ allure æŠ¥å‘Š ENV=dev pytest test_case/test_demo_allure.py æŸ¥çœ‹ allure æŠ¥å‘Š è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ allure æœåŠ¡å¹¶æµè§ˆå™¨ä¸­æŸ¥çœ‹ allure æŠ¥å‘Š\nallure serve allure-results è°ƒæ•´ CI/CD æµç¨‹æ¥æ”¯æŒ allure æŠ¥å‘Š ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\næ›´æ–°.github/workflows/pytest.yml æ–‡ä»¶å†…å®¹æ¥ä¸Šä¼  allure æŠ¥å‘Šåˆ° GitHub\nname: Pytest API Testing on: push: branches: [ \u0026#34;main\u0026#34; ] pull_request: branches: [ \u0026#34;main\u0026#34; ] permissions: contents: read jobs: Pytes-API-Testing: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Set up Python 3.10 uses: actions/setup-python@v3 with: python-version: \u0026#34;3.10\u0026#34; - name: Install dependencies run: | python -m pip install --upgrade pip pip install -r requirements.txt - name: Test with pytest run: | ENV=dev pytest - name: Archive Pytest allure test report uses: actions/upload-artifact@v3 with: name: Pytest-allure-report path: allure-results - name: Upload Pytest allure report to GitHub uses: actions/upload-artifact@v3 with: name: Pytest-allure-report path: allure-results æŸ¥çœ‹ github action allure æŠ¥å‘Š åœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ Pytest API Testing å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚\nå‚è€ƒ Pytest æ–‡æ¡£ Allure æ–‡æ¡£ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-multiple-environment-support-and-integration-allure-report/","summary":"æ·±å…¥æ¢è®¨ Pytest çš„é«˜çº§ç”¨æ³•ï¼Œç€é‡ä»‹ç»å¦‚ä½•å°† Pytest å¦‚ä½•æ”¯æŒä¸åŒç¯å¢ƒæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œï¼Œä»¥åŠå¦‚ä½•é›†æˆ allure æŠ¥å‘Šæ¥å®ç°æµ‹è¯•æŠ¥å‘Šå¤šæ ·åŒ–ã€‚","title":"Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¤šç¯å¢ƒæ”¯æŒ å’Œ é›†æˆ allure æŠ¥å‘Š"},{"content":"è¿›é˜¶ç”¨æ³• å¸¸ç”¨æ–­è¨€ ä½¿ç”¨ Pytest åœ¨æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å„ç§æ–­è¨€æ¥éªŒè¯æµ‹è¯•çš„é¢„æœŸç»“æœã€‚\nPytest æä¾›äº†æ›´å¤šçš„æ–­è¨€å’Œçµæ´»çš„æ–­è¨€åº“ï¼Œä»¥æ»¡è¶³å„ç§æµ‹è¯•éœ€æ±‚ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ–­è¨€ï¼š\nç›¸ç­‰æ€§æ–­è¨€ï¼šæ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚\nassert actual_value == expected_value ä¸ç›¸ç­‰æ€§æ–­è¨€ï¼šæ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰ã€‚\nassert actual_value != expected_value åŒ…å«æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå€¼ä¸­ï¼Œé€šå¸¸ç”¨äºæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸²ã€‚\nassert substring in full_string æˆå‘˜èµ„æ ¼æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦åœ¨é›†åˆã€åˆ—è¡¨æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ä¸­ã€‚\nassert item in iterable çœŸå€¼æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªè¡¨è¾¾å¼æˆ–å˜é‡æ˜¯å¦ä¸ºçœŸã€‚\nassert expression æˆ–\nassert variable å‡å€¼æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªè¡¨è¾¾å¼æˆ–å˜é‡æ˜¯å¦ä¸ºå‡ã€‚\nassert not expression æˆ–\nassert not variable å¤§äºã€å°äºã€å¤§äºç­‰äºã€å°äºç­‰äºæ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦å¤§äºã€å°äºã€å¤§äºç­‰äºæˆ–å°äºç­‰äºå¦ä¸€ä¸ªå€¼ã€‚\nassert value \u0026gt; other_value assert value \u0026lt; other_value assert value \u0026gt;= other_value assert value \u0026lt;= other_value ç±»å‹æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼çš„ç±»å‹æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚\nassert isinstance(value, expected_type) ä¾‹å¦‚ï¼Œæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯å­—ç¬¦ä¸²ï¼š\nassert isinstance(my_string, str) å¼‚å¸¸æ–­è¨€ï¼šæ£€æŸ¥åœ¨ä»£ç å—ä¸­æ˜¯å¦å¼•å‘äº†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚\nwith pytest.raises(ExpectedException): # ä»£ç å—ï¼ŒæœŸæœ›å¼•å‘ ExpectedException å¼‚å¸¸ è¿‘ä¼¼ç›¸ç­‰æ–­è¨€ï¼šæ£€æŸ¥ä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦åœ¨æŸä¸ªè¯¯å·®èŒƒå›´å†…ç›¸ç­‰ã€‚\nassert math.isclose(actual_value, expected_value, rel_tol=1e-9) åˆ—è¡¨ç›¸ç­‰æ–­è¨€ï¼šæ£€æŸ¥ä¸¤ä¸ªåˆ—è¡¨æ˜¯å¦ç›¸ç­‰ã€‚\nassert actual_list == expected_list å­—å…¸ç›¸ç­‰æ–­è¨€ï¼šæ£€æŸ¥ä¸¤ä¸ªå­—å…¸æ˜¯å¦ç›¸ç­‰ã€‚\nassert actual_dict == expected_dict æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚\nimport re assert re.match(pattern, string) ç©ºå€¼æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º Noneã€‚\nassert value is None éç©ºå€¼æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ä¸º Noneã€‚\nassert value is not None å¸ƒå°”å€¼æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º True æˆ– Falseã€‚\nassert boolean_expression ç©ºå®¹å™¨æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªåˆ—è¡¨ã€é›†åˆæˆ–å­—å…¸æ˜¯å¦ä¸ºç©ºã€‚\nassert not container # æ£€æŸ¥å®¹å™¨æ˜¯å¦ä¸ºç©º åŒ…å«å­é›†æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªé›†åˆæ˜¯å¦åŒ…å«å¦ä¸€ä¸ªé›†åˆä½œä¸ºå­é›†ã€‚\nassert subset \u0026lt;= full_set å­—ç¬¦ä¸²å¼€å¤´æˆ–ç»“å°¾æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€æˆ–åç¼€å¼€å¤´æˆ–ç»“å°¾ã€‚\nassert string.startswith(prefix) assert string.endswith(suffix) æ•°é‡æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªåˆ—è¡¨ã€é›†åˆæˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ æ•°é‡ã€‚\nassert len(iterable) == expected_length èŒƒå›´æ–­è¨€ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦åœ¨æŒ‡å®šçš„èŒƒå›´å†…ã€‚\nassert lower_bound \u0026lt;= value \u0026lt;= upper_bound æ–‡ä»¶å­˜åœ¨æ–­è¨€ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚\nimport os assert os.path.exists(file_path) ä»¥ä¸Šæ˜¯ä¸€äº› Pytest å¸¸ç”¨çš„æ–­è¨€ï¼Œä½†æ ¹æ®å…·ä½“çš„æµ‹è¯•éœ€æ±‚ï¼Œæ‚¨å¯èƒ½ä¼šä½¿ç”¨å…¶ä»–æ–­è¨€æˆ–ç»“åˆå¤šä¸ªæ–­è¨€æ¥æ›´å…¨é¢åœ°éªŒè¯æµ‹è¯•ç»“æœã€‚ è¯¦ç»†çš„æ–­è¨€æ–‡æ¡£å¯ä»¥åœ¨ Pytest å®˜æ–¹ç½‘ç«™æ‰¾åˆ°ï¼šPytest - Built-in fixtures, marks, and nodes\næ•°æ®é©±åŠ¨ åœ¨ API è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¿‡ç¨‹ä¸­ã€‚ä½¿ç”¨æ•°æ®é©±åŠ¨æ˜¯ä¸€ç§å¸¸è§„æµ‹è¯•æ–¹æ³•ï¼Œå…¶ä¸­æµ‹è¯•ç”¨ä¾‹çš„è¾“å…¥æ•°æ®å’Œé¢„æœŸè¾“å‡ºæ•°æ®éƒ½è¢«å­˜å‚¨åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼Œæµ‹è¯•æ¡†æ¶æ ¹æ®è¿™äº›æ•°æ®æ–‡ä»¶æ‰§è¡Œå¤šæ¬¡æµ‹è¯•ï¼Œä»¥éªŒè¯ API çš„å„ä¸ªæ–¹é¢ã€‚\næµ‹è¯•æ•°æ®å¯ä»¥å¾ˆå®¹æ˜“åœ°ä¿®æ”¹ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹ä»£ç ã€‚\næ•°æ®é©±åŠ¨æµ‹è¯•å¯ä»¥å¸®åŠ©ä½ æœ‰æ•ˆåœ°è¦†ç›–å¤šç§æƒ…å†µï¼Œç¡®ä¿ API åœ¨å„ç§è¾“å…¥æ•°æ®ä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚\nå¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/Pytest-API-Test-Demo\næ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶ é…ç½®æ–‡ä»¶ä¼šä»¥ json æ ¼å¼å­˜å‚¨ä¸ºä¾‹ï¼Œå…¶ä»–æ ¼å¼å¦‚ YAMLã€CSV ç­‰ç±»ä¼¼ï¼Œå‡å¯å‚è€ƒ\n// æ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶å¤¹ mkdir config // æ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶ cd config touch config.json ç¼–å†™æµ‹è¯•é…ç½®æ–‡ä»¶ é…ç½®æ–‡ä»¶å­˜å‚¨æµ‹è¯•ç¯å¢ƒçš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æµ‹è¯•ç¯å¢ƒçš„ URLã€æ•°æ®åº“è¿æ¥ä¿¡æ¯ç­‰ã€‚\ndemo ä¸­çš„æµ‹è¯•é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\né…ç½® host ä¿¡æ¯ é…ç½® getAPI æ¥å£ä¿¡æ¯ é…ç½® postAPI æ¥å£ä¿¡æ¯ { \u0026#34;host\u0026#34;: \u0026#34;https://jsonplaceholder.typicode.com\u0026#34;, \u0026#34;getAPI\u0026#34;: \u0026#34;/posts/1\u0026#34;, \u0026#34;postAPI\u0026#34;:\u0026#34;/posts\u0026#34; } æ–°å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶ è¯·æ±‚æ•°æ®æ–‡ä»¶å’Œå“åº”æ•°æ®æ–‡ä»¶åˆ†åˆ«å­˜å‚¨æµ‹è¯•ç”¨ä¾‹çš„è¯·æ±‚æ•°æ®å’Œé¢„æœŸå“åº”æ•°æ®ã€‚\n// æ–°å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ mkdir data // è¿›å…¥æµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ cd data // æ–°å»ºè¯·æ±‚æ•°æ®æ–‡ä»¶ touch request_data.json // æ–°å»ºå“åº”æ•°æ®æ–‡ä»¶ touch response_data.json ç¼–å†™æµ‹è¯•æ•°æ®æ–‡ä»¶ ç¼–å†™è¯·æ±‚æ•°æ®æ–‡ä»¶ è¯·æ±‚æ•°æ®æ–‡ä»¶ä¸­é…ç½®äº† getAPI æ¥å£çš„è¯·æ±‚æ•°æ®å’Œ postAPI æ¥å£çš„è¯·æ±‚æ•°æ®\n{ \u0026#34;getAPI\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;postAPI\u0026#34;:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } } ç¼–å†™å“åº”æ•°æ®æ–‡ä»¶ è¯·æ±‚æ•°æ®æ–‡ä»¶ä¸­é…ç½®äº† getAPI æ¥å£çš„å“åº”æ•°æ®å’Œ postAPI æ¥å£çš„å“åº”æ•°æ®\n{ \u0026#34;getAPI\u0026#34;: { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; }, \u0026#34;postAPI\u0026#34;:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 } } æ›´æ–°æµ‹è¯•ç”¨ä¾‹æ¥æ”¯æŒæ•°æ®é©±åŠ¨ ä¸ºåšåŒºåˆ†ï¼Œè¿™é‡Œæ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º test_demo_data_driving.py\nimport requests import json # ä»é…ç½®æ–‡ä»¶å¤¹è·å–æµ‹è¯•é…ç½® with open(\u0026#34;config/config.json\u0026#34;, \u0026#34;r\u0026#34;) as json_file: config = json.load(json_file) # ä»æµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹è·å–æ¥å£è¯·æ±‚æ•°æ® with open(\u0026#39;data/request_data.json\u0026#39;, \u0026#39;r\u0026#39;) as json_file: request_data = json.load(json_file) # ä»æµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹è·å–æ¥å£å“åº”æ•°æ® with open(\u0026#39;data/response_data.json\u0026#39;, \u0026#39;r\u0026#39;) as json_file: response_data = json.load(json_file) class TestPytestDemo: def test_get_demo(self): host = config.get(\u0026#34;host\u0026#34;) get_api = config.get(\u0026#34;getAPI\u0026#34;) get_api_response_data = response_data.get(\u0026#34;getAPI\u0026#34;) # å‘èµ·è¯·æ±‚ response = requests.get(host+get_api) # æ–­è¨€ assert response.status_code == 200 assert response.json() == get_api_response_data def test_post_demo(self): host = config.get(\u0026#34;host\u0026#34;) post_api = config.get(\u0026#34;postAPI\u0026#34;) post_api_request_data = request_data.get(\u0026#34;postAPI\u0026#34;) post_api_response_data = response_data.get(\u0026#34;postAPI\u0026#34;) # å‘èµ·è¯·æ±‚ response = requests.post(host + post_api, post_api_request_data) # æ–­è¨€ assert response.status_code == 201 assert response.json() == post_api_response_data è¿è¡Œè¯¥æµ‹è¯•ç”¨ä¾‹ç¡®è®¤æ•°æ®é©±åŠ¨æ˜¯å¦ç”Ÿæ•ˆ è‹¥ç”¨ demo é¡¹ç›®è¿è¡Œæ•°æ®é©±åŠ¨æ”¯æŒæµ‹è¯•ç”¨ä¾‹ï¼štest_demo_data_driving.pyï¼Œå»ºè®®å…ˆå±è”½æ‰å…¶ä»–æµ‹è¯•ç”¨ä¾‹ï¼Œå¦åˆ™å¯èƒ½ä¼šæŠ¥é”™\nå‚è€ƒ pytest æ–‡æ¡£ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/","summary":"æ·±å…¥æ¢è®¨ Pytest çš„é«˜çº§ç”¨æ³•ï¼Œç€é‡ä»‹ç»å¦‚ä½•å°† Pytest å¸¸ç”¨æ–­è¨€å’Œæ•°æ®é©±åŠ¨ã€‚","title":"Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨æ–­è¨€å’Œæ•°æ®é©±åŠ¨"},{"content":"è¿›é˜¶ç”¨æ³• æŒç»­é›†æˆ æ¥å…¥ github action ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\nå¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/Pytest-API-Test-Demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ pytest.ymlã€‚\nç¼–è¾‘ pytest.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­\n# This workflow will install Python dependencies, run tests and lint with a single version of Python # For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-python name: Pytest API Testing on: push: branches: [ \u0026#34;main\u0026#34; ] pull_request: branches: [ \u0026#34;main\u0026#34; ] permissions: contents: read jobs: Pytes-API-Testing: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Set up Python 3.10 uses: actions/setup-python@v3 with: python-version: \u0026#34;3.10\u0026#34; - name: Install dependencies run: | python -m pip install --upgrade pip pip install -r requirements.txt - name: Test with pytest run: | pytest - name: Archive Pytest test report uses: actions/upload-artifact@v3 with: name: SuperTest-test-report path: report - name: Upload Pytest report to GitHub uses: actions/upload-artifact@v3 with: name: Pytest-test-report path: report æäº¤ä»£ç ï¼šå°† pytest.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ Pytest API Testing å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ å‚è€ƒ pytest æ–‡æ¡£ gitHub action æ–‡æ¡£ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/pytest-tutorial-advance-usage-integration-ci-cd-and-github-action/","summary":"æ·±å…¥æ¢è®¨ Pytest çš„é«˜çº§ç”¨æ³•ï¼Œç€é‡ä»‹ç»å¦‚ä½•å°† Pytest é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ GitHub Actions å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚","title":"Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œ Github action"},{"content":"ä» 0 åˆ° 1 æ­å»º Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® 1.åˆ›å»ºé¡¹ç›®ç›®å½• mkdir Pytest-API-Testing-Demo 2.é¡¹ç›®åˆå§‹åŒ– // è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ cd Pytest-API-Testing-Demo // åˆ›å»ºé¡¹ç›® python é¡¹ç›®è™šæ‹Ÿç¯å¢ƒ python -m venv .env // å¯ç”¨é¡¹ç›® python é¡¹ç›®è™šæ‹Ÿç¯å¢ƒ source .env/bin/activate 3.å®‰è£…é¡¹ç›®ä¾èµ– // å®‰è£… requests åŒ… pip install requests // å®‰è£…pytest åŒ… pip install pytest // å°†é¡¹ç›®ä¾èµ–é¡¹ä¿å­˜åˆ° requirements.txt æ–‡ä»¶ä¸­ pip freeze \u0026gt; requirements.txt 4.æ–°å»ºæµ‹è¯•æ–‡ä»¶åŠæµ‹è¯•ç”¨ä¾‹ // æ–°å»ºæµ‹è¯•æ–‡ä»¶å¤¹ mkdir tests // æ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ cd tests touch test_demo.py 5.ç¼–å†™æµ‹è¯•ç”¨ä¾‹ æµ‹è¯•æ¥å£å¯å‚è€ƒé¡¹ç›®ä¸­ demoAPI.md æ–‡ä»¶\nimport requests class TestPytestDemo: def test_get_demo(self): base_url = \u0026#34;https://jsonplaceholder.typicode.com\u0026#34; # å‘èµ·è¯·æ±‚ response = requests.get(f\u0026#34;{base_url}/posts/1\u0026#34;) # æ–­è¨€ assert response.status_code == 200 assert response.json()[\u0026#39;userId\u0026#39;] == 1 assert response.json()[\u0026#39;id\u0026#39;] == 1 def test_post_demo(self): base_url = \u0026#34;https://jsonplaceholder.typicode.com\u0026#34; requests_data = { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } # å‘èµ·è¯·æ±‚ response = requests.post(f\u0026#34;{base_url}/posts\u0026#34;, requests_data) # æ–­è¨€ assert response.status_code == 201 print(response.json()) assert response.json()[\u0026#39;userId\u0026#39;] == \u0026#39;1\u0026#39; assert response.json()[\u0026#39;id\u0026#39;] == 101 6.è¿è¡Œæµ‹è¯•ç”¨ä¾‹ pytest 7.æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š 8.æ¥å…¥ pytest-html-reporter æµ‹è¯•æŠ¥å‘Š https://github.com/prashanth-sams/pytest-html-reporter\nå®‰è£… pytest-html-reporter ä¾èµ– pip install pytest-html-reporter é…ç½®æµ‹è¯•æŠ¥å‘Šå‚æ•° é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º pytest.ini æ–‡ä»¶ æ·»åŠ ä»¥ä¸‹å†…å®¹ [pytest] addopts = -vs -rf --html-report=./report --title=\u0026#39;PYTEST REPORT\u0026#39; --self-contained-html è¿è¡Œæµ‹è¯•ç”¨ä¾‹ pytest æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š æŠ¥å‘Šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ report ç›®å½•ä¸‹ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ pytest_html_report.html æ–‡ä»¶å³å¯æŸ¥çœ‹\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/pytest-tutorial-building-your-own-project-from-0-to-1/","summary":"å°†ä»é›¶å¼€å§‹æ•™æ‚¨å¦‚ä½•å»ºç«‹ Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ã€‚æ‚¨å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºé¡¹ç›®çš„åŸºç¡€ç»“æ„ï¼Œè®¾ç½®ç¯å¢ƒï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥åŠæ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚","title":"Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»º Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®"},{"content":"ä»‹ç» Pytest ä»‹ç» Pytest æ˜¯ä¸€ä¸ªæµè¡Œçš„ Python æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºç¼–å†™ã€ç»„ç»‡å’Œè¿è¡Œå„ç§ç±»å‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½¿æ‚¨èƒ½å¤Ÿè½»æ¾ç¼–å†™å’Œç®¡ç†æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥åŠç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šã€‚ä»¥ä¸‹æ˜¯ Pytest çš„ä¸€äº›ä¸»è¦ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼š\nç®€å•å’Œæ˜“ç”¨ï¼šPytest çš„è®¾è®¡ä½¿å¾—ç¼–å†™æµ‹è¯•ç”¨ä¾‹å˜å¾—ç®€å•ä¸”æ˜“äºç†è§£ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Python çš„æ ‡å‡† assert è¯­å¥æ¥ç¼–å†™æµ‹è¯•æ–­è¨€ï¼Œè€Œä¸éœ€è¦å­¦ä¹ æ–°çš„æ–­è¨€è¯­æ³•ã€‚\nè‡ªåŠ¨å‘ç°æµ‹è¯•ç”¨ä¾‹ï¼šPytest å¯ä»¥è‡ªåŠ¨å‘ç°å’Œè¿è¡Œé¡¹ç›®ä¸­çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè€Œä¸éœ€è¦æ˜¾å¼é…ç½®æµ‹è¯•å¥—ä»¶ã€‚æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¯ä»¥å‘½åä¸º test_*.py æˆ– *_test.pyï¼Œæˆ–ä½¿ç”¨ç‰¹å®šçš„æµ‹è¯•å‡½æ•°å‘½åè§„èŒƒã€‚\nä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼šPytest å¯ä»¥é€šè¿‡æ’ä»¶æ‰©å±•å…¶åŠŸèƒ½ã€‚æœ‰è®¸å¤šç¬¬ä¸‰æ–¹æ’ä»¶å¯ç”¨ï¼Œä»¥æ»¡è¶³ä¸åŒæµ‹è¯•éœ€æ±‚ï¼Œå¦‚ Allure æŠ¥å‘Šã€å‚æ•°åŒ–ã€è¦†ç›–ç‡åˆ†æç­‰ã€‚\nå‚æ•°åŒ–æµ‹è¯•ï¼šPytest æ”¯æŒå‚æ•°åŒ–æµ‹è¯•ï¼Œå…è®¸æ‚¨è¿è¡Œç›¸åŒçš„æµ‹è¯•ç”¨ä¾‹å¤šæ¬¡ï¼Œä½†ä½¿ç”¨ä¸åŒçš„å‚æ•°ã€‚è¿™å¯ä»¥å‡å°‘ä»£ç é‡å¤ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡ã€‚\nå¼‚å¸¸å’Œæ•…éšœå®šä½ï¼šPytest æä¾›è¯¦ç»†çš„é”™è¯¯å’Œå¼‚å¸¸ä¿¡æ¯ï¼Œæœ‰åŠ©äºæ‚¨æ›´å®¹æ˜“åœ°å®šä½å’Œè§£å†³é—®é¢˜ã€‚å®ƒè¿˜æä¾›è¯¦ç»†çš„å›æº¯ï¼ˆtracebackï¼‰ä¿¡æ¯ã€‚\nå¹¶è¡Œæµ‹è¯•æ‰§è¡Œï¼šPytest æ”¯æŒå¹¶è¡Œæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜äº†æµ‹è¯•æ‰§è¡Œçš„é€Ÿåº¦ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ã€‚\nå¤šç§æŠ¥å‘Šæ ¼å¼ï¼šPytest æ”¯æŒå¤šç§æµ‹è¯•æŠ¥å‘Šæ ¼å¼ï¼ŒåŒ…æ‹¬ç»ˆç«¯è¾“å‡ºã€JUnit XMLã€HTML æŠ¥å‘Šå’Œ Allure æŠ¥å‘Šç­‰ã€‚è¿™äº›æŠ¥å‘Šå¯ä»¥å¸®åŠ©æ‚¨å¯è§†åŒ–æµ‹è¯•ç»“æœã€‚\nå‘½ä»¤è¡Œé€‰é¡¹ï¼šPytest æä¾›äº†ä¸°å¯Œçš„å‘½ä»¤è¡Œé€‰é¡¹ï¼Œä»¥å®šåˆ¶æµ‹è¯•è¿è¡Œçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬è¿‡æ»¤ã€é‡è¯•ã€è¦†ç›–ç‡åˆ†æç­‰ã€‚\né›†æˆæ€§ï¼šPytest å¯ä»¥ä¸å…¶ä»–æµ‹è¯•æ¡†æ¶å’Œå·¥å…·ï¼ˆå¦‚ Seleniumã€Djangoã€Flask ç­‰ï¼‰ä»¥åŠæŒç»­é›†æˆç³»ç»Ÿï¼ˆå¦‚ Jenkinsã€Travis CI ç­‰ï¼‰è½»æ¾é›†æˆã€‚\næ´»è·ƒçš„ç¤¾åŒºï¼šPytest æ‹¥æœ‰ä¸€ä¸ªæ´»è·ƒçš„ç¤¾åŒºï¼Œæœ‰å¹¿æ³›çš„æ–‡æ¡£å’Œæ•™ç¨‹å¯ä¾›å­¦ä¹ å’Œå‚è€ƒã€‚æ‚¨è¿˜å¯ä»¥åœ¨ç¤¾åŒºä¸­è·å¾—æ”¯æŒå’Œè§£å†³é—®é¢˜ã€‚\næ€»ä¹‹ï¼ŒPytest æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„æµ‹è¯•æ¡†æ¶ï¼Œé€‚ç”¨äºå„ç§è§„æ¨¡å’Œç±»å‹çš„é¡¹ç›®ã€‚å®ƒçš„æ˜“ç”¨æ€§ã€è‡ªåŠ¨åŒ–èƒ½åŠ›ä»¥åŠä¸°å¯Œçš„æ’ä»¶ä½¿å®ƒæˆä¸º Python æµ‹è¯•é¢†åŸŸçš„é¦–é€‰å·¥å…·ä¹‹ä¸€ã€‚\nå®˜æ–¹ç½‘ç«™ï¼šhttps://docs.pytest.org/en/latest/\npython è™šæ‹Ÿç¯å¢ƒä»‹ç» Python è™šæ‹Ÿç¯å¢ƒï¼ˆVirtual Environmentï¼‰æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºåœ¨å•ä¸ª Python å®‰è£…ä¸­åˆ›å»ºå’Œç®¡ç†å¤šä¸ªéš”ç¦»çš„å¼€å‘ç¯å¢ƒã€‚è™šæ‹Ÿç¯å¢ƒæœ‰åŠ©äºè§£å†³ä¸åŒé¡¹ç›®ä¹‹é—´çš„ä¾èµ–å†²çªé—®é¢˜ï¼Œç¡®ä¿æ¯ä¸ªé¡¹ç›®éƒ½èƒ½å¤Ÿä½¿ç”¨å…¶ç‹¬ç«‹çš„ Python åŒ…å’Œåº“ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ Python è™šæ‹Ÿç¯å¢ƒçš„æ­¥éª¤ï¼š\nå®‰è£…è™šæ‹Ÿç¯å¢ƒå·¥å…·: åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿æ‚¨å·²å®‰è£… Python çš„è™šæ‹Ÿç¯å¢ƒå·¥å…·ã€‚åœ¨ Python 3.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œvenv æ¨¡å—å·²ç»å†…ç½®ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚å¦‚æœæ‚¨ä½¿ç”¨è¾ƒæ—§ç‰ˆæœ¬çš„ Pythonï¼Œæ‚¨å¯ä»¥å®‰è£… virtualenv å·¥å…·ã€‚\nå¯¹äº Python 3.3+ï¼Œvenv å·¥å…·å·²å†…ç½®ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚\nå¯¹äº Python 2.xï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… virtualenv å·¥å…·ï¼š\npip install virtualenv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ: æ‰“å¼€ç»ˆç«¯ï¼Œç§»åŠ¨åˆ°æ‚¨å¸Œæœ›åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„ç›®å½•ï¼Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š\nä½¿ç”¨ venvï¼ˆé€‚ç”¨äº Python 3.3+ï¼‰ï¼š\npython -m venv myenv ä½¿ç”¨ virtualenvï¼ˆé€‚ç”¨äº Python 2.xï¼‰ï¼š\nvirtualenv myenv åœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œmyenv æ˜¯è™šæ‹Ÿç¯å¢ƒçš„åç§°ï¼Œæ‚¨å¯ä»¥è‡ªå®šä¹‰åç§°ã€‚\næ¿€æ´»è™šæ‹Ÿç¯å¢ƒ: è¦å¼€å§‹ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œéœ€è¦æ¿€æ´»å®ƒã€‚åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œæ¿€æ´»å‘½ä»¤ç•¥æœ‰ä¸åŒï¼š\nåœ¨ macOS å’Œ Linux ä¸Šï¼š\nsource myenv/bin/activate åœ¨ Windows ä¸Šï¼ˆä½¿ç”¨ Command Promptï¼‰ï¼š\nmyenv\\Scripts\\activate åœ¨ Windows ä¸Šï¼ˆä½¿ç”¨ PowerShellï¼‰ï¼š\n.\\myenv\\Scripts\\Activate.ps1 ä¸€æ—¦è™šæ‹Ÿç¯å¢ƒæ¿€æ´»ï¼Œæ‚¨ä¼šåœ¨ç»ˆç«¯æç¤ºç¬¦å‰çœ‹åˆ°è™šæ‹Ÿç¯å¢ƒçš„åç§°ï¼Œè¡¨ç¤ºæ‚¨å·²è¿›å…¥è™šæ‹Ÿç¯å¢ƒã€‚\nåœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ä¾èµ–: åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ pip å®‰è£…é¡¹ç›®æ‰€éœ€çš„ä»»ä½• Python åŒ…å’Œåº“ï¼Œè¿™äº›ä¾èµ–å°†ä¸è¯¥è™šæ‹Ÿç¯å¢ƒå…³è”ã€‚ä¾‹å¦‚ï¼š\npip install requests ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ: åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å·¥ä½œæ—¶ï¼Œæ‚¨å¯ä»¥è¿è¡Œ Python è„šæœ¬å’Œä½¿ç”¨å®‰è£…åœ¨è™šæ‹Ÿç¯å¢ƒä¸­çš„åŒ…ã€‚è¿™ç¡®ä¿äº†æ‚¨çš„é¡¹ç›®åœ¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œä¸ä¼šä¸å…¨å±€ Python å®‰è£…äº§ç”Ÿå†²çªã€‚\né€€å‡ºè™šæ‹Ÿç¯å¢ƒ: è¦é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼Œåªéœ€åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\ndeactivate è¿™å°†ä½¿æ‚¨è¿”å›åˆ°å…¨å±€ Python ç¯å¢ƒã€‚\né€šè¿‡ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œæ‚¨å¯ä»¥åœ¨ä¸åŒé¡¹ç›®ä¹‹é—´ç»´æŠ¤å¹²å‡€çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ç¡®ä¿é¡¹ç›®çš„ç¨³å®šæ€§å’Œéš”ç¦»æ€§ã€‚è¿™æ˜¯ Python å¼€å‘ä¸­çš„ä¸€ä¸ªè‰¯å¥½å®è·µã€‚\né¡¹ç›®ä¾èµ– éœ€æå‰å®‰è£…å¥½ä»¥ä¸‹ç¯å¢ƒ\npython, demo ç‰ˆæœ¬ä¸º v3.11.6 å¤§å®¶å®‰è£… python3.x ä»¥ä¸Šçš„ç‰ˆæœ¬å³å¯\né¡¹ç›®ç›®å½•ç»“æ„ ä»¥ä¸‹ä¸ºä¸€ä¸ª Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®çš„ç›®å½•ç»“æ„ç¤ºä¾‹ï¼š\nåç»­ demo é¡¹ç›®ä¼šå¼•å…¥ allure æŠ¥å‘Šï¼Œæ‰€ä»¥ä¼šå¤šå‡ºä¸€ä¸ª allure-report ç›®å½•\nPytest-allure-demo/ â”œâ”€â”€ tests/ # å­˜æ”¾æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ â”‚ â”œâ”€â”€ test_login.py # ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ â”‚ â”œâ”€â”€ test_order.py # ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ â”‚ â””â”€â”€ ... â”œâ”€â”€ data/ # å­˜æ”¾æµ‹è¯•æ•°æ®æ–‡ä»¶ï¼ˆå¦‚ JSONã€CSV ç­‰ï¼‰ â”‚ â”œâ”€â”€ dev_test_data.json # å¼€å‘ç¯å¢ƒæµ‹è¯•æ•°æ®æ–‡ä»¶ â”‚ â”œâ”€â”€ prod_test_data.json # ç”Ÿäº§ç¯å¢ƒæµ‹è¯•æ•°æ®æ–‡ä»¶ â”‚ â”œâ”€â”€ ... â”œâ”€â”€ config/ â”‚ â”œâ”€â”€ dev_config.json # å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ â”‚ â”œâ”€â”€ prod_config.json # ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶ â”‚ â”œâ”€â”€ ... â”œâ”€â”€ conftest.py # Pytest çš„å…¨å±€é…ç½®æ–‡ä»¶ â”œâ”€â”€ pytest.ini # Pytest é…ç½®æ–‡ä»¶ â”œâ”€â”€ requirements.txt # é¡¹ç›®ä¾èµ–é¡¹æ–‡ä»¶ â””â”€â”€ allure-report/ # å­˜æ”¾ Allure æŠ¥å‘Š å‚è€ƒ Pytest: https://docs.pytest.org/en/latest/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/pytest-tutorial-getting-started-and-own-environment-preparation/","summary":"åŒ…æ‹¬å…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡ã€‚åœ¨åšå®¢ä¸­ï¼Œè¯»è€…å°†äº†è§£ä»€ä¹ˆæ˜¯ Pytest ä»¥åŠå¦‚ä½•å¼€å§‹ä½¿ç”¨å®ƒæ¥è¿›è¡Œ API æµ‹è¯•ã€‚","title":"Pytest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡"},{"content":"å¤šç¯å¢ƒæ”¯æŒ åœ¨ä½¿ç”¨ Jest æˆ– Mocha è¿›è¡Œ API æµ‹è¯•æ—¶ï¼Œä½ å¯èƒ½éœ€è¦æ”¯æŒæµ‹è¯•ä¸åŒçš„ç¯å¢ƒï¼Œä¾‹å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚è¿™å¯ä»¥é€šè¿‡é…ç½®ä¸åŒçš„æµ‹è¯•è„šæœ¬å’Œç¯å¢ƒå˜é‡æ¥å®ç°ã€‚\nä¸‹é¢ä¼šç®€å•æè¿°ä¸€ä¸‹å¦‚ä½•åœ¨ Jest å’Œ Mocha ä¸­é…ç½®å¤šç¯å¢ƒæ”¯æŒï¼Œä¼šä»¥æ”¯æŒä¸¤ä¸ªç¯å¢ƒæ¥è¿›è¡Œ demo æ¼”ç¤ºã€‚\nMocha ç‰ˆæœ¬å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Mocha-demo\nJest ç‰ˆæœ¬å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Jest-demo\nmocha ç‰ˆæœ¬å’Œ Jest ç‰ˆæœ¬ç±»ä¼¼ï¼Œè¿™é‡Œä»¥ Mocha ç‰ˆæœ¬ä¸ºä¾‹\næ–°å»ºå¤šç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ // æ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶å¤¹ è‹¥å·²æœ‰åˆ™ä¸ç”¨æ–°å»º mkdir Config // æ–°å»ºæµ‹è¯•ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ cd Config touch testConfig-test.js // æ–°å»ºå¼€å‘ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ touch testConfig-dev.js ç¼–å†™å¤šç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ ç¼–å†™æµ‹è¯•ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µç¼–å†™æµ‹è¯•ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶\n// Test config file for test environment module.exports = { host: \u0026#39;https://jsonplaceholder.typicode.com\u0026#39;, // Test endpoint getAPI: \u0026#39;/posts/1\u0026#39;, // Test GET API URL postAPI: \u0026#39;/posts\u0026#39;, // Test POST API URL }; ç¼–å†™å¼€å‘ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µç¼–å†™å¼€å‘ç¯å¢ƒæµ‹è¯•é…ç½®æ–‡ä»¶\n// Test config file for dev environment module.exports = { host: \u0026#39;https://jsonplaceholder.typicode.com\u0026#39;, // Test endpoint getAPI: \u0026#39;/posts/1\u0026#39;, // Test GET API URL postAPI: \u0026#39;/posts\u0026#39;, // Test POST API URL }; æ–°å»ºå¤šç¯å¢ƒæµ‹è¯•æ•°æ®æ–‡ä»¶ // æ–°å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ è‹¥å·²æœ‰åˆ™ä¸ç”¨æ–°å»º mkdir testData // è¿›å…¥æµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ cd testData // æ–°å»ºæµ‹è¯•ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ touch requestData-test.js // æ–°å»ºæµ‹è¯•ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ touch responseData-test.js // æ–°å»ºå¼€å‘ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ touch requestData-dev.js // æ–°å»ºå¼€å‘ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ touch responseData-dev.js ç¼–å†™å¤šç¯å¢ƒæµ‹è¯•æ•°æ®æ–‡ä»¶ ç¼–å†™æµ‹è¯•ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µç¼–å†™æµ‹è¯•ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶\n// Test request data file for test environment module.exports = { getAPI: \u0026#39;\u0026#39;, // request data for GET API postAPI:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 }, // request data for POST API }; ç¼–å†™æµ‹è¯•ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µç¼–å†™æµ‹è¯•ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶\n// Test response data file for test environment module.exports = { getAPI: { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; }, // response data for GET API postAPI:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 }, // response data for POST API }; ç¼–å†™å¼€å‘ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µç¼–å†™å¼€å‘ç¯å¢ƒè¯·æ±‚æ•°æ®æ–‡ä»¶\n// Test request data file for dev environment module.exports = { getAPI: \u0026#39;\u0026#39;, // request data for GET API postAPI:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 }, // request data for POST API }; ç¼–å†™å¼€å‘ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶ æ ¹æ®å®é™…æƒ…å†µç¼–å†™å¼€å‘ç¯å¢ƒå“åº”æ•°æ®æ–‡ä»¶\n// Test response data file for dev environment module.exports = { getAPI: { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; }, // response data for GET API postAPI:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 }, // response data for POST API }; æ›´æ–°æµ‹è¯•ç”¨ä¾‹æ¥æ”¯æŒå¤šç¯å¢ƒ ä¸ºåšåŒºåˆ†ï¼Œè¿™é‡Œæ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º multiEnvTest.spec.js\n// Test: multiEnvTest.spec.js const request = require(\u0026#39;supertest\u0026#39;); // import supertest require(\u0026#39;chai\u0026#39;); // import chai const expect = require(\u0026#39;chai\u0026#39;).expect; // import expect const config = process.env.NODE_ENV === \u0026#39;test\u0026#39; ? require(\u0026#39;../Config/testConfig-test\u0026#39;) : require(\u0026#39;../Config/testConfig-dev\u0026#39;); // import test config const requestData = process.env.NODE_ENV === \u0026#39;test\u0026#39; ? require(\u0026#39;../TestData/requestData-test\u0026#39;) : require(\u0026#39;../TestData/requestData-dev\u0026#39;); // import request data const responseData= process.env.NODE_ENV === \u0026#39;test\u0026#39; ? require(\u0026#39;../TestData/responseData-test\u0026#39;) : require(\u0026#39;../TestData/responseData-dev\u0026#39;); // import response data // Test Suite describe(\u0026#39;multiEnv-Verify that the Get and POST API returns correctly\u0026#39;, function(){ // Test case 1 it(\u0026#39;multiEnv-Verify that the GET API returns correctly\u0026#39;, function(done){ request(config.host) // Test endpoint .get(config.getAPI) // API endpoint .expect(200) // expected response status code .expect(function (res) { expect(res.body.id).to.equal(responseData.getAPI.id) expect(res.body.userId).to.equal(responseData.getAPI.userId) expect(res.body.title).to.equal(responseData.getAPI.title) expect(res.body.body).to.equal(responseData.getAPI.body) }) // expected response body .end(done) // end the test case }); // Test case 2 it(\u0026#39;multiEnv-Verify that the POST API returns correctly\u0026#39;, function(done){ request(config.host) // Test endpoint .post(config.postAPI) // API endpoint .send(requestData.postAPI) // request body .expect(201) // expected response status code .expect(function (res) { expect(res.body.id).to.equal(responseData.postAPI.id ) expect(res.body.userId).to.equal(responseData.postAPI.userId ) expect(res.body.title).to.equal(responseData.postAPI.title ) expect(res.body.body).to.equal(responseData.postAPI.body ) }) // expected response body .end(done) // end the test case }); }); æ›´æ–°æµ‹è¯•è„šæœ¬æ¥æ”¯æŒå¤šç¯å¢ƒ \u0026lsquo;\u0026lsquo;\u0026lsquo;json // package.json \u0026ldquo;scripts\u0026rdquo;: { \u0026ldquo;test\u0026rdquo;: \u0026ldquo;NODE_ENV=test mocha\u0026rdquo; // è¿è¡Œæµ‹è¯•ç¯å¢ƒæµ‹è¯•è„šæœ¬ \u0026ldquo;dev\u0026rdquo;: \u0026ldquo;NODE_ENV=dev mocha\u0026rdquo; // è¿è¡Œ dev ç¯å¢ƒæµ‹è¯•è„šæœ¬ }, \u0026rsquo;\u0026rsquo;\u0026rsquo;\nè¿è¡Œè¯¥æµ‹è¯•ç”¨ä¾‹ç¡®è®¤å¤šç¯å¢ƒæ”¯æŒæ˜¯å¦ç”Ÿæ•ˆ è‹¥ç”¨ demo é¡¹ç›®è¿è¡Œå¤šç¯å¢ƒæ”¯æŒæµ‹è¯•ç”¨ä¾‹ï¼šmultiEnvTest.spec.jsï¼Œå»ºè®®å…ˆå±è”½æ‰ dataDrivingTest.spec.js å’Œ test.spec.js æµ‹è¯•ç”¨ä¾‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™\nè¿è¡Œæµ‹è¯•ç¯å¢ƒæµ‹è¯•è„šæœ¬ npm run test è¿è¡Œå¼€å‘ç¯å¢ƒæµ‹è¯•è„šæœ¬ npm run dev æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-multiple-environment-support/","summary":"ä¸“æ³¨äº SuperTest çš„é«˜çº§ç”¨æ³•ï¼Œç€é‡ä»‹ç»å¤šç¯å¢ƒæ”¯æŒã€‚æ‚¨å°†å­¦ä¹ å¦‚ä½•é…ç½®å’Œç®¡ç†å¤šä¸ªæµ‹è¯•ç¯å¢ƒï¼Œä»¥é€‚åº”ä¸åŒå¼€å‘å’Œéƒ¨ç½²é˜¶æ®µã€‚","title":"SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¤šç¯å¢ƒæ”¯æŒ"},{"content":"æ•°æ®é©±åŠ¨ API æµ‹è¯•çš„æ•°æ®é©±åŠ¨æ˜¯ä¸€ç§æµ‹è¯•æ–¹æ³•ï¼Œå…¶ä¸­æµ‹è¯•ç”¨ä¾‹çš„è¾“å…¥æ•°æ®å’Œé¢„æœŸè¾“å‡ºæ•°æ®éƒ½è¢«å­˜å‚¨åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼Œæµ‹è¯•æ¡†æ¶æ ¹æ®è¿™äº›æ•°æ®æ–‡ä»¶æ‰§è¡Œå¤šæ¬¡æµ‹è¯•ï¼Œä»¥éªŒè¯ API çš„å„ä¸ªæ–¹é¢ã€‚æ•°æ®é©±åŠ¨æµ‹è¯•å¯ä»¥å¸®åŠ©ä½ æœ‰æ•ˆåœ°è¦†ç›–å¤šç§æƒ…å†µï¼Œç¡®ä¿ API åœ¨å„ç§è¾“å…¥æ•°æ®ä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚\nMocha ç‰ˆæœ¬å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Mocha-demo\nJest ç‰ˆæœ¬å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Jest-demo\nmocha ç‰ˆæœ¬å’Œ Jest ç‰ˆæœ¬ç±»ä¼¼ï¼Œè¿™é‡Œä»¥ Mocha ç‰ˆæœ¬ä¸ºä¾‹\næ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶ // æ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶å¤¹ mkdir Config // æ–°å»ºæµ‹è¯•é…ç½®æ–‡ä»¶ cd Config touch config.js ç¼–å†™æµ‹è¯•é…ç½®æ–‡ä»¶ // Test config file module.exports = { host: \u0026#39;https://jsonplaceholder.typicode.com\u0026#39;, // Test endpoint getAPI: \u0026#39;/posts/1\u0026#39;, // Test GET API URL postAPI: \u0026#39;/posts\u0026#39;, // Test POST API URL }; æ–°å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶ // æ–°å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ mkdir testData // è¿›å…¥æµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ cd testData // æ–°å»ºè¯·æ±‚æ•°æ®æ–‡ä»¶ touch requestData.js // æ–°å»ºå“åº”æ•°æ®æ–‡ä»¶ touch responseData.js ç¼–å†™æµ‹è¯•æ•°æ®æ–‡ä»¶ ç¼–å†™è¯·æ±‚æ•°æ®æ–‡ä»¶ // Test request data file module.exports = { getAPI: \u0026#39;\u0026#39;, // request data for GET API postAPI:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 }, // request data for POST API }; ç¼–å†™å“åº”æ•°æ®æ–‡ä»¶ // Test response data file module.exports = { getAPI: { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; }, // response data for GET API postAPI:{ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 }, // response data for POST API }; æ›´æ–°æµ‹è¯•ç”¨ä¾‹æ¥æ”¯æŒæ•°æ®é©±åŠ¨ ä¸ºåšåŒºåˆ†ï¼Œè¿™é‡Œæ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º dataDrivingTest.spec.js\n// Test: dataDrivingTest.spec.js const request = require(\u0026#39;supertest\u0026#39;); // import supertest require(\u0026#39;chai\u0026#39;); // import chai const expect = require(\u0026#39;chai\u0026#39;).expect; // import expect const config = require(\u0026#39;../Config/testConfig\u0026#39;); // import test config const requestData = require(\u0026#39;../TestData/requestData\u0026#39;); // import request data const responseData = require(\u0026#39;../TestData/responseData\u0026#39;); // import response data // Test Suite describe(\u0026#39;Data Driving-Verify that the Get and POST API returns correctly\u0026#39;, function(){ // Test case 1 it(\u0026#39;Data Driving-Verify that the GET API returns correctly\u0026#39;, function(done){ request(config.host) // Test endpoint .get(config.getAPI) // API endpoint .expect(200) // expected response status code .expect(function (res) { expect(res.body.id).to.equal(responseData.getAPI.id) expect(res.body.userId).to.equal(responseData.getAPI.userId) expect(res.body.title).to.equal(responseData.getAPI.title) expect(res.body.body).to.equal(responseData.getAPI.body) }) // expected response body .end(done) // end the test case }); // Test case 2 it(\u0026#39;Data Driving-Verify that the POST API returns correctly\u0026#39;, function(done){ request(config.host) // Test endpoint .post(config.postAPI) // API endpoint .send(requestData.postAPI) // request body .expect(201) // expected response status code .expect(function (res) { expect(res.body.id).to.equal(responseData.postAPI.id ) expect(res.body.userId).to.equal(responseData.postAPI.userId ) expect(res.body.title).to.equal(responseData.postAPI.title ) expect(res.body.body).to.equal(responseData.postAPI.body ) }) // expected response body .end(done) // end the test case }); }); è¿è¡Œè¯¥æµ‹è¯•ç”¨ä¾‹ç¡®è®¤æ•°æ®é©±åŠ¨æ˜¯å¦ç”Ÿæ•ˆ è‹¥ç”¨ demo é¡¹ç›®è¿è¡Œæ•°æ®é©±åŠ¨æ”¯æŒæµ‹è¯•ç”¨ä¾‹ï¼šdataDrivingTest.spec.jsï¼Œå»ºè®®å…ˆå±è”½æ‰ test.spec.js æµ‹è¯•ç”¨ä¾‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-data-driven/","summary":"ä¸“æ³¨äº SuperTest çš„é«˜çº§ç”¨æ³•ï¼Œä¾§é‡äºæ•°æ®é©±åŠ¨æµ‹è¯•ã€‚æ‚¨å°†å­¦ä¹ å¦‚ä½•é€šè¿‡æ•°æ®å‚æ•°åŒ–æ¥æ‰©å±•å’Œä¼˜åŒ–æ‚¨çš„ SuperTest æµ‹è¯•å¥—ä»¶ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡ã€‚","title":"SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - æ•°æ®é©±åŠ¨"},{"content":"å¸¸ç”¨æ–­è¨€ ä¸‹é¢ä¼šä¸€æ¬¡ä»‹ç»ä¸€ä¸‹ SuperTest,CHAI å’Œ Jest å¸¸ç”¨çš„æ–­è¨€ã€‚\nSuperTest çš„å†…ç½®æ–­è¨€ Supertest æ˜¯åŸºäºSuperAgent æ„å»ºçš„ä¸€ä¸ªæ›´é«˜çº§çš„åº“ï¼Œæ‰€ä»¥ Supertest å¯ä»¥å¾ˆè½»æ¾çš„ä½¿ç”¨ SuperAgent çš„ HTTP æ–­è¨€ã€‚\nç¤ºä¾‹å¦‚ä¸‹ï¼š\n.expect(status[, fn]) //æ–­è¨€å“åº”çŠ¶æ€ä»£ç ã€‚ .expect(status, body[, fn]) // æ–­è¨€å“åº”çŠ¶æ€ä»£ç å’Œæ­£æ–‡ã€‚ .expect(body[, fn]) // ç”¨å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼æˆ–è§£æåçš„æ­£æ–‡å¯¹è±¡æ–­è¨€å“åº”æ­£æ–‡æ–‡æœ¬ã€‚ .expect(field, value[, fn]) // ç”¨å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼æ–­è¨€æ ‡é¢˜å­—æ®µå€¼ã€‚ .expect(function(res) {}) // ä¼ é€’ä¸€ä¸ªè‡ªå®šä¹‰æ–­è¨€å‡½æ•°ã€‚å®ƒå°†å¾—åˆ°è¦æ£€æŸ¥çš„å“åº”å¯¹è±¡ã€‚å¦‚æœæ£€æŸ¥å¤±è´¥ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚ CHAI çš„å¸¸ç”¨æ–­è¨€ ç›¸ç­‰æ€§æ–­è¨€ï¼ˆEquality Assertionsï¼‰ expect(actual).to.equal(expected) // éªŒè¯å®é™…å€¼æ˜¯å¦ç­‰äºæœŸæœ›å€¼ã€‚ expect(actual).to.deep.equal(expected) // éªŒè¯å®é™…å€¼å’ŒæœŸæœ›å€¼æ˜¯å¦æ·±åº¦ç›¸ç­‰ï¼Œé€‚ç”¨äºå¯¹è±¡å’Œæ•°ç»„æ¯”è¾ƒã€‚ expect(actual).to.eql(expected) // ä¸ deep.equal ä¸€æ ·ï¼Œç”¨äºæ·±åº¦ç›¸ç­‰çš„æ¯”è¾ƒã€‚ åŒ…å«æ€§æ–­è¨€ï¼ˆInclusion Assertionsï¼‰ expect(array).to.include(value) // éªŒè¯æ•°ç»„æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼ã€‚ expect(string).to.include(substring) // éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­å­—ç¬¦ä¸²ã€‚ expect(object).to.include(key) // éªŒè¯å¯¹è±¡æ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®ã€‚ ç±»å‹æ–­è¨€ï¼ˆType Assertionsï¼‰ expect(actual).to.be.a(type) // éªŒè¯å®é™…å€¼çš„ç±»å‹æ˜¯å¦ç­‰äºæŒ‡å®šç±»å‹ã€‚ expect(actual).to.be.an(type) // ä¸ to.be.a ä¸€æ ·ï¼Œç”¨äºç±»å‹æ–­è¨€ã€‚ expect(actual).to.be.an.instanceof(constructor) // éªŒè¯å®é™…å€¼æ˜¯å¦æ˜¯æŒ‡å®šæ„é€ å‡½æ•°çš„å®ä¾‹ã€‚ çœŸå‡æ€§æ–­è¨€ï¼ˆTruthiness Assertionsï¼‰ expect(value).to.be.true // éªŒè¯å€¼æ˜¯å¦ä¸ºçœŸã€‚ expect(value).to.be.false // éªŒè¯å€¼æ˜¯å¦ä¸ºå‡ã€‚ expect(value).to.exist // éªŒè¯å€¼æ˜¯å¦å­˜åœ¨ï¼Œé null å’Œé undefinedã€‚ é•¿åº¦æ–­è¨€ï¼ˆLength Assertionsï¼‰ expect(array).to.have.length(length) // éªŒè¯æ•°ç»„çš„é•¿åº¦æ˜¯å¦ç­‰äºæŒ‡å®šé•¿åº¦ã€‚ expect(string).to.have.lengthOf(length) // éªŒè¯å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å¦ç­‰äºæŒ‡å®šé•¿åº¦ã€‚ ç©ºå€¼æ–­è¨€ï¼ˆEmpty Assertionsï¼‰ expect(array).to.be.empty // éªŒè¯æ•°ç»„æ˜¯å¦ä¸ºç©ºã€‚ expect(string).to.be.empty // éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºã€‚ èŒƒå›´æ–­è¨€ï¼ˆRange Assertionsï¼‰ expect(value).to.be.within(min, max) // éªŒè¯å€¼æ˜¯å¦åœ¨æŒ‡å®šçš„èŒƒå›´å†…ã€‚ expect(value).to.be.above(min) // éªŒè¯å€¼æ˜¯å¦å¤§äºæŒ‡å®šå€¼ã€‚ expect(value).to.be.below(max) // éªŒè¯å€¼æ˜¯å¦å°äºæŒ‡å®šå€¼ã€‚ å¼‚å¸¸æ–­è¨€ï¼ˆException Assertionsï¼‰ expect(fn).to.throw(error) // éªŒè¯å‡½æ•°æ˜¯å¦æŠ›å‡ºæŒ‡å®šç±»å‹çš„å¼‚å¸¸ã€‚ expect(fn).to.throw(message) // éªŒè¯å‡½æ•°æ˜¯å¦æŠ›å‡ºåŒ…å«æŒ‡å®šæ¶ˆæ¯çš„å¼‚å¸¸ã€‚ å­˜åœ¨æ€§æ–­è¨€ï¼ˆExistence Assertionsï¼‰ expect(object).to.have.property(key) // éªŒè¯å¯¹è±¡æ˜¯å¦åŒ…å«æŒ‡å®šå±æ€§ã€‚ expect(array).to.have.members(subset) // éªŒè¯æ•°ç»„æ˜¯å¦åŒ…å«æŒ‡å®šçš„æˆå‘˜ã€‚ æ›´å¤š chai çš„æ–­è¨€ï¼Œè¯·æŸ¥çœ‹https://www.chaijs.com/api/assert/\nJest çš„å¸¸ç”¨æ–­è¨€ ç›¸ç­‰æ€§æ–­è¨€ï¼ˆEquality Assertionsï¼‰ expect(actual).toBe(expected) // éªŒè¯å®é™…å€¼æ˜¯å¦ä¸¥æ ¼ç­‰äºæœŸæœ›å€¼ã€‚ expect(actual).toEqual(expected) // éªŒè¯å®é™…å€¼å’ŒæœŸæœ›å€¼æ˜¯å¦æ·±åº¦ç›¸ç­‰ï¼Œé€‚ç”¨äºå¯¹è±¡å’Œæ•°ç»„æ¯”è¾ƒã€‚ ä¸ç›¸ç­‰æ€§æ–­è¨€ expect(actual).not.toBe(expected) // éªŒè¯å®é™…å€¼ä¸æœŸæœ›å€¼ä¸ç›¸ç­‰ã€‚ åŒ…å«æ€§æ–­è¨€ï¼ˆInclusion Assertionsï¼‰ expect(array).toContain(value) // éªŒè¯æ•°ç»„æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼ã€‚ ç±»å‹æ–­è¨€ï¼ˆType Assertionsï¼‰ expect(actual).toBeTypeOf(expected) // éªŒè¯å®é™…å€¼çš„ç±»å‹æ˜¯å¦ç­‰äºæŒ‡å®šç±»å‹ã€‚ çœŸå‡æ€§æ–­è¨€ï¼ˆTruthiness Assertionsï¼‰ expect(value).toBeTruthy() // éªŒè¯å€¼æ˜¯å¦ä¸ºçœŸã€‚ expect(value).toBeFalsy() // éªŒè¯å€¼æ˜¯å¦ä¸ºå‡ã€‚ å¼‚æ­¥æ–­è¨€ await expect(promise).resolves.toBe(expected) // éªŒè¯å¼‚æ­¥æ“ä½œæ˜¯å¦æˆåŠŸå®Œæˆå¹¶è¿”å›ä¸æœŸæœ›å€¼åŒ¹é…çš„ç»“æœã€‚ å¼‚å¸¸æ–­è¨€ expect(fn).toThrow(error) // éªŒè¯å‡½æ•°æ˜¯å¦æŠ›å‡ºæŒ‡å®šç±»å‹çš„å¼‚å¸¸ã€‚ expect(fn).toThrow(message) // éªŒè¯å‡½æ•°æ˜¯å¦æŠ›å‡ºåŒ…å«æŒ‡å®šæ¶ˆæ¯çš„å¼‚å¸¸ã€‚ èŒƒå›´æ–­è¨€ expect(value).toBeGreaterThanOrEqual(min) // éªŒè¯å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºæŒ‡å®šçš„æœ€å°å€¼ã€‚ expect(value).toBeLessThanOrEqual(max) // éªŒè¯å€¼æ˜¯å¦å°äºæˆ–ç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼ã€‚ å¯¹è±¡å±æ€§æ–­è¨€ expect(object).toHaveProperty(key, value) // éªŒè¯å¯¹è±¡æ˜¯å¦åŒ…å«æŒ‡å®šå±æ€§ï¼Œå¹¶ä¸”è¯¥å±æ€§çš„å€¼ç­‰äºæŒ‡å®šå€¼ã€‚ æ›´å¤š Jest çš„æ–­è¨€ï¼Œè¯·æŸ¥çœ‹https://jestjs.io/docs/expect\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-common-assertions/","summary":"èšç„¦äº Supertest çš„é«˜çº§ç”¨æ³•ï¼Œç‰¹åˆ«å…³æ³¨å¸¸ç”¨æ–­è¨€ã€‚æ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›æ–­è¨€æ¥éªŒè¯ API å“åº”ï¼ŒåŒ…æ‹¬çŠ¶æ€ç ã€å“åº”å†…å®¹ã€å’Œå“åº”å¤´éƒ¨ç­‰ã€‚","title":"SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - å¸¸ç”¨æ–­è¨€"},{"content":"æŒç»­é›†æˆ æ¥å…¥ github action ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\nMocha ç‰ˆæœ¬æ¥å…¥ github action å¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Mocha-demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ mocha.ymlã€‚\nç¼–è¾‘ mocha.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­\nname: RUN SuperTest API Test CI on: push: branches: [ \u0026#34;main\u0026#34; ] pull_request: branches: [ \u0026#34;main\u0026#34; ] jobs: RUN-SuperTest-API-Test: runs-on: ubuntu-latest strategy: matrix: node-version: [ 18.x] # See supported Node.js release schedule at https://nodejs.org/en/about/releases/ steps: - uses: actions/checkout@v3 - name: Use Node.js ${{ matrix.node-version }} uses: actions/setup-node@v3 with: node-version: ${{ matrix.node-version }} cache: \u0026#39;npm\u0026#39; - name: Installation of related packages run: npm ci - name: RUN SuperTest API Testing run: npm test - name: Archive SuperTest mochawesome test report uses: actions/upload-artifact@v3 with: name: SuperTest-mochawesome-test-report path: Report - name: Upload SuperTest mochawesome report to GitHub uses: actions/upload-artifact@v3 with: name: SuperTest-mochawesome-test-report path: Report æäº¤ä»£ç ï¼šå°† mocha.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ RUN SuperTest API Test CI å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ Jest ç‰ˆæœ¬æ¥å…¥ github action å¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Jest-demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ jest.ymlã€‚\nç¼–è¾‘ jest.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­\nname: RUN SuperTest API Test CI on: push: branches: [ \u0026#34;main\u0026#34; ] pull_request: branches: [ \u0026#34;main\u0026#34; ] jobs: RUN-SuperTest-API-Test: runs-on: ubuntu-latest strategy: matrix: node-version: [ 18.x] # See supported Node.js release schedule at https://nodejs.org/en/about/releases/ steps: - uses: actions/checkout@v3 - name: Use Node.js ${{ matrix.node-version }} uses: actions/setup-node@v3 with: node-version: ${{ matrix.node-version }} cache: \u0026#39;npm\u0026#39; - name: Installation of related packages run: npm ci - name: RUN SuperTest API Testing run: npm test - name: Archive SuperTest test report uses: actions/upload-artifact@v3 with: name: SuperTest-test-report path: Report - name: Upload SuperTest report to GitHub uses: actions/upload-artifact@v3 with: name: SuperTest-test-report path: Report æäº¤ä»£ç ï¼šå°† jest.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ RUN-SuperTest-API-Test å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/supertest-tutorial-advance-usage-integration-ci-cd-and-github-action/","summary":"æ·±å…¥æ¢è®¨ Supertest çš„é«˜çº§ç”¨æ³•ï¼Œç€é‡ä»‹ç»å¦‚ä½•å°† Supertest é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ GitHub Actions å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚","title":"SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œ Github action"},{"content":"ä» 0 åˆ° 1 æ­å»º SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® ä¸‹é¢ä¼šä» 0 åˆ° 1 æ­å»ºä¸€ä¸ª SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼Œä¼šä½¿ç”¨ Jest æˆ– Mocha ä½œä¸ºæµ‹è¯•æ¡†æ¶è¿›è¡Œ demo æ¼”ç¤ºã€‚\nMocha ç‰ˆæœ¬ å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Mocha-demo\næ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ mkdir SuperTest-Mocha-demo é¡¹ç›®åˆå§‹åŒ– // è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ cd SuperTest-Mocha-demo // nodejs é¡¹ç›®åˆå§‹åŒ– npm init -y å®‰è£…ä¾èµ– // å®‰è£… supertest npm install supertest --save-dev // å®‰è£… mochaæµ‹è¯•æ¡†æ¶ npm install mocha --save-dev // å®‰è£… chaiæ–­è¨€åº“ npm install chai --save-dev æ–°å»ºæµ‹è¯•æ–‡ä»¶åŠæµ‹è¯•ç”¨ä¾‹ // æ–°å»ºæµ‹è¯•æ–‡ä»¶å¤¹ mkdir Specs // æ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ cd Specs touch test.spec.js ç¼–å†™æµ‹è¯•ç”¨ä¾‹ æµ‹è¯•æ¥å£å¯å‚è€ƒé¡¹ç›®ä¸­ demoAPI.md æ–‡ä»¶\n// Test: test.spec.js const request = require(\u0026#39;supertest\u0026#39;); // import supertest const chai = require(\u0026#39;chai\u0026#39;); // import chai const expect = require(\u0026#39;chai\u0026#39;).expect; // import expect // Test Suite describe(\u0026#39;Verify that the Get and POST API returns correctly\u0026#39;, function(){ // Test case 1 it(\u0026#39;Verify that the GET API returns correctly\u0026#39;, function(done){ request(\u0026#39;https://jsonplaceholder.typicode.com\u0026#39;) // Test endpoint .get(\u0026#39;/posts/1\u0026#39;) // API endpoint .expect(200) // expected response status code .expect(function (res) { expect(res.body.id).to.equal(1 ) expect(res.body.userId).to.equal(1) expect(res.body.title).to.equal(\u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;) expect(res.body.body). to.equal(\u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34;) }) // expected response body .end(done) // end the test case }); // Test case 2 it(\u0026#39;Verify that the POST API returns correctly\u0026#39;, function(done){ request(\u0026#39;https://jsonplaceholder.typicode.com\u0026#39;) // Test endpoint .post(\u0026#39;/posts\u0026#39;) // API endpoint .send({ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 }) // request body .expect(201) // expected response status code .expect(function (res) { expect(res.body.id).to.equal(101 ) expect(res.body.userId).to.equal(1) expect(res.body.title).to.equal(\u0026#34;foo\u0026#34;) expect(res.body.body).to.equal(\u0026#34;bar\u0026#34;) }) // expected response body .end(done) // end the test case }); }); é…ç½® mocha é…ç½®æ–‡ä»¶ æ–°å»ºé…ç½®æ–‡ä»¶ // é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶ touch .mocharc.js æ›´æ–°é…ç½®æ–‡ä»¶ // mocha config module.exports = { timeout: 5000, // è®¾ç½®æµ‹è¯•ç”¨ä¾‹çš„é»˜è®¤è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ spec: [\u0026#39;Specs/**/*.js\u0026#39;], // æŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„ä½ç½® }; è°ƒæ•´æµ‹è¯•è„šæœ¬ åœ¨ package.json æ–‡ä»¶ä¸­æ·»åŠ æµ‹è¯•è„šæœ¬\n\u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;mocha\u0026#34; }, è¿è¡Œæµ‹è¯•ç”¨ä¾‹ // è¿è¡Œæµ‹è¯•ç”¨ä¾‹ npm run test æµ‹è¯•æŠ¥å‘Š å‘½ä»¤è¡Œæµ‹è¯•æŠ¥å‘Š é›†æˆ mochawesome æµ‹è¯•æŠ¥å‘Š å®‰è£… mochawesome npm install --save-dev mochawesome æ›´æ–° mocha é…ç½®æ–‡ä»¶ å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Mocha-demo\n// mocha config module.exports = { timeout: 5000, // è®¾ç½®æµ‹è¯•ç”¨ä¾‹çš„é»˜è®¤è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ reporter: \u0026#39;mochawesome\u0026#39;, // ä½¿ç”¨ mochawesome æŠ¥å‘Šç”Ÿæˆå™¨ \u0026#39;reporter-option\u0026#39;: [ \u0026#39;reportDir=Report\u0026#39;, // æŠ¥å‘Šç”Ÿæˆè·¯å¾„ \u0026#39;reportFilename=[status]_[datetime]-[name]-report\u0026#39;, //æŠ¥å‘Šåç§° \u0026#39;html=true\u0026#39;, // ç”Ÿæˆ html æ ¼å¼æŠ¥å‘Š \u0026#39;json=false\u0026#39;, // ä¸ç”Ÿæˆ json æ ¼å¼æŠ¥å‘Š \u0026#39;overwrite=false\u0026#39;, // ä¸è¦†ç›–å·²ç»å­˜åœ¨çš„æŠ¥å‘Š \u0026#39;timestamp=longDate\u0026#39;, // ç»™æŠ¥å‘Šæ·»åŠ æ—¶é—´æˆ³ ], // ä¼ é€’ç»™æŠ¥å‘Šç”Ÿæˆå™¨çš„å‚æ•° spec: [\u0026#39;Specs/**/*.js\u0026#39;], // æŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„ä½ç½® }; è¿è¡Œæµ‹è¯•ç”¨ä¾‹ // è¿è¡Œæµ‹è¯•ç”¨ä¾‹ npm run test æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶å¤¹ï¼šReportï¼Œç‚¹å‡»ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€æœ€æ–° html æŠ¥å‘Šæ–‡ä»¶\nJest ç‰ˆæœ¬ å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Jest-demo\næ–°å»º Jest demo é¡¹ç›®æ–‡ä»¶å¤¹ mkdir SuperTest-Jest-demo Jest demo é¡¹ç›®åˆå§‹åŒ– // è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ cd SuperTest-Mocha-demo // nodejs é¡¹ç›®åˆå§‹åŒ– npm init -y Jest demo å®‰è£…ä¾èµ– // å®‰è£… supertest npm install supertest --save-dev // å®‰è£… Jestæµ‹è¯•æ¡†æ¶ npm install jest --save-dev æ–°å»º Jest demo é¡¹ç›®çš„æµ‹è¯•æ–‡ä»¶åŠæµ‹è¯•ç”¨ä¾‹ // æ–°å»ºæµ‹è¯•æ–‡ä»¶å¤¹ mkdir Specs // æ–°å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ cd Specs touch test.spec.js ç¼–å†™ Jest demo æµ‹è¯•ç”¨ä¾‹ æµ‹è¯•æ¥å£å¯å‚è€ƒé¡¹ç›®ä¸­ demoAPI.md æ–‡ä»¶\nconst request = require(\u0026#39;supertest\u0026#39;); // Test Suite describe(\u0026#39;Verify that the Get and POST API returns correctly\u0026#39;, () =\u0026gt; { // Test case 1 it(\u0026#39;Verify that the GET API returns correctly\u0026#39;, async () =\u0026gt; { const res = await request(\u0026#39;https://jsonplaceholder.typicode.com\u0026#39;) // Test endpoint .get(\u0026#39;/posts/1\u0026#39;) // API endpoint .send() // request body .expect(200); // use supertest\u0026#39;s expect to verify that the status code is 200 // user jest\u0026#39;s expect to verify the response body expect(res.status).toBe(200); // Verify that the status code is 200 expect(res.body.id).toEqual(1); // Verify that the id is 1 expect(res.body.userId).toEqual(1); // Verify that the userId is 1 expect(res.body.title) .toEqual(\u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;); expect(res.body.body) .toEqual(\u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34;); }); // Test case 2 it(\u0026#39;Verify that the POST API returns correctly\u0026#39;, async() =\u0026gt;{ const res = await request(\u0026#39;https://jsonplaceholder.typicode.com\u0026#39;) // Test endpoint .post(\u0026#39;/posts\u0026#39;) // API endpoint .send({ \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 }) // request body .expect(201); // use supertest\u0026#39;s expect to verify that the status code is 201 // user jest\u0026#39;s expect to verify the response body expect(res.statusCode).toBe(201); expect(res.body.id).toEqual(101); expect(res.body.userId).toEqual(1); expect(res.body.title).toEqual(\u0026#34;foo\u0026#34;); expect(res.body.body).toEqual(\u0026#34;bar\u0026#34;); }); }); é…ç½® Jest é…ç½®æ–‡ä»¶ æ–°å»ºé…ç½®æ–‡ä»¶ // é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶ touch jest.config.js æ›´æ–°é…ç½®æ–‡ä»¶ // Desc: Jest configuration file module.exports = { // æµ‹è¯•æ–‡ä»¶çš„åŒ¹é…è§„åˆ™ testMatch: [\u0026#39;**/Specs/*.spec.js\u0026#39;], }; è°ƒæ•´ Jest æµ‹è¯•è„šæœ¬ åœ¨ package.json æ–‡ä»¶ä¸­æ·»åŠ æµ‹è¯•è„šæœ¬\n\u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;jest\u0026#34; }, è¿è¡Œ Jest æµ‹è¯•ç”¨ä¾‹ // è¿è¡Œæµ‹è¯•ç”¨ä¾‹ npm run test Jest æµ‹è¯•æŠ¥å‘Š Jest å‘½ä»¤è¡Œæµ‹è¯•æŠ¥å‘Š é›†æˆ jest-html-reporters æµ‹è¯•æŠ¥å‘Š å®‰è£… jest-html-reporters npm install --save-dev jest-html-reporters æ›´æ–° Jest é…ç½®æ–‡ä»¶ å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/SuperTest-Jest-demo\n// Desc: Jest configuration file module.exports = { // æµ‹è¯•æ–‡ä»¶çš„åŒ¹é…è§„åˆ™ testMatch: [\u0026#39;**/Specs/*.spec.js\u0026#39;], // æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå™¨ reporters: [ \u0026#39;default\u0026#39;, [ \u0026#39;jest-html-reporters\u0026#39;, { publicPath: \u0026#39;./Report\u0026#39;, // æŠ¥å‘Šç”Ÿæˆè·¯å¾„ filename: \u0026#39;report.html\u0026#39;, // æŠ¥å‘Šåç§° pageTitle: \u0026#39;SuperTest and Jest API Test Report\u0026#39;, // æŠ¥å‘Šæ ‡é¢˜ overwrite: true, // æŠ¥å‘Šæ–‡ä»¶æ˜¯å¦è¦†ç›– expand: true, // å±•å¼€æ‰€æœ‰æµ‹è¯•å¥—ä»¶ }, ], ], }; è¿è¡Œ Jest æµ‹è¯•ç”¨ä¾‹ // è¿è¡Œæµ‹è¯•ç”¨ä¾‹ npm run test æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶å¤¹ï¼šReportï¼Œç‚¹å‡»ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€æœ€æ–° html æŠ¥å‘Šæ–‡ä»¶\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/supertest-tutorial-building-your-own-project-from-0-to-1/","summary":"ä»é›¶å¼€å§‹æ•™æ‚¨å¦‚ä½•å»ºç«‹ SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ã€‚æ‚¨å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºé¡¹ç›®çš„åŸºç¡€ç»“æ„ï¼Œè®¾ç½®ç¯å¢ƒï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥åŠæ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚","title":"SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»º Supertest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®"},{"content":"ä»‹ç» æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä½¿ç”¨ SuperTest è¿›è¡Œ API è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¿«é€Ÿå¯åŠ¨é¡¹ç›®æ•™ç¨‹ï¼Œä¼šä½¿ç”¨ Jest æˆ– Mocha ä½œä¸ºæµ‹è¯•æ¡†æ¶è¿›è¡Œ demo æ¼”ç¤ºã€‚\nä¸‹é¢ä¼šä¾æ¬¡ä»‹ç» SuperTestã€Jest å’Œ Mochaï¼Œè®©å¤§å®¶æå‰äº†è§£è¿™äº›å·¥å…·çš„åŸºæœ¬ä½¿ç”¨ã€‚\nSuperTest ä»‹ç» \u0026ldquo;Supertest\u0026rdquo; æ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯• Node.js åº”ç”¨ç¨‹åºçš„æµè¡Œ JavaScript åº“ã€‚å®ƒä¸»è¦ç”¨äºè¿›è¡Œç«¯åˆ°ç«¯ï¼ˆEnd-to-Endï¼‰æµ‹è¯•ï¼Œä¹Ÿç§°ä¸ºé›†æˆæµ‹è¯•ï¼Œä»¥ç¡®ä¿ä½ çš„åº”ç”¨ç¨‹åºåœ¨ä¸åŒç»„ä»¶ä¹‹é—´æ­£å¸¸è¿è¡Œã€‚Supertest é€šå¸¸ä¸ Mochaã€Jasmine æˆ– Jest ç­‰æµ‹è¯•æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¼–å†™å’Œè¿è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚\nä»¥ä¸‹æ˜¯ Supertest çš„ä¸€äº›å…³é”®ç‰¹ç‚¹å’Œç”¨é€”ï¼š\nå‘èµ· HTTP è¯·æ±‚ï¼šSupertest å…è®¸ä½ è½»æ¾åœ°æ¨¡æ‹Ÿ HTTP è¯·æ±‚ï¼Œä¾‹å¦‚ GETã€POSTã€PUTã€DELETE ç­‰ï¼Œä»¥æµ‹è¯•ä½ çš„åº”ç”¨ç¨‹åºçš„è·¯ç”±å’Œç«¯ç‚¹ã€‚ é“¾å¼è¯­æ³•ï¼šSupertest æä¾›äº†ä¸€ç§é“¾å¼è¯­æ³•ï¼Œä½¿ä½ èƒ½å¤Ÿåœ¨å•ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­æ„å»ºå’Œæ‰§è¡Œå¤šä¸ªè¯·æ±‚ï¼Œè¿™æœ‰åŠ©äºæ¨¡æ‹Ÿç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºä¸­çš„ä¸åŒæ“ä½œã€‚ æ–­è¨€å’ŒæœŸæœ›ï¼šä½ å¯ä»¥ä½¿ç”¨ Supertest ç»“åˆæ–­è¨€åº“ï¼ˆå¦‚ Chaiï¼‰æ¥æ£€æŸ¥å“åº”çš„å†…å®¹ã€çŠ¶æ€ç ã€å¤´ä¿¡æ¯ç­‰ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºçš„æœŸæœ›è¡Œä¸ºã€‚ èº«ä»½éªŒè¯æµ‹è¯•ï¼šSupertest å¯ä»¥ç”¨äºæµ‹è¯•éœ€è¦èº«ä»½éªŒè¯çš„ç«¯ç‚¹ï¼Œä»¥ç¡®ä¿ç”¨æˆ·ç™»å½•å’ŒæˆæƒåŠŸèƒ½æ­£å¸¸ã€‚ å¼‚æ­¥æ”¯æŒï¼šSupertest å¯ä»¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚ç­‰å¾…å“åº”è¿”å›åæ‰§è¡Œè¿›ä¸€æ­¥çš„æµ‹è¯•ä»£ç ã€‚ æ–¹ä¾¿çš„é›†æˆï¼šSupertest å¯ä»¥è½»æ¾ä¸ä¸åŒçš„ Node.js æ¡†æ¶ï¼ˆå¦‚ Expressã€Koaã€Hapi ç­‰ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤ä½ å¯ä»¥æµ‹è¯•å„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚ ä½¿ç”¨ Supertest å¯ä»¥å¸®åŠ©ä½ éªŒè¯ä½ çš„åº”ç”¨ç¨‹åºæ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼Œä»¥åŠåœ¨åº”ç”¨ç¨‹åºå‘ç”Ÿæ›´æ”¹æ—¶å¿«é€Ÿæ•è·æ½œåœ¨çš„é—®é¢˜ã€‚é€šå¸¸ï¼Œä½ éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£… Supertest å’Œæµ‹è¯•æ¡†æ¶ï¼Œç„¶åç¼–å†™æµ‹è¯•ç”¨ä¾‹æ¥æ¨¡æ‹Ÿä¸åŒçš„è¯·æ±‚å’Œæ£€æŸ¥å“åº”ã€‚è¿™æœ‰åŠ©äºæé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼Œç¡®ä¿ä½ çš„åº”ç”¨ç¨‹åºåœ¨ä¸æ–­æ¼”åŒ–çš„è¿‡ç¨‹ä¸­ä¿æŒç¨³å®šæ€§ã€‚\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/ladjs/supertest\nå¤‡æ³¨ï¼šSupertest ä¸æ­¢å¯ä»¥ç”¨æ¥åš API æµ‹è¯•ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•\nä»£ç ç¤ºä¾‹ï¼š\n// å¯¼å…¥ supertest const request = require(\u0026#39;supertest\u0026#39;); request({URL}) // è¯·æ±‚ (url) æˆ– è¯·æ±‚ (app) .get() or .put() or.post() // http method .set() // http é€‰é¡¹ .send() // è¯·æ±‚çš„ body .expect() // æ–­è¨€ .end() // ç»“æŸè¯·æ±‚ Jest ä»‹ç» Jest æ˜¯ä¸€ä¸ªæµè¡Œçš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºç¼–å†™å’Œè¿è¡Œ JavaScript åº”ç”¨ç¨‹åºçš„å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ç®€å•ã€å¿«é€Ÿå’Œæ˜“äºä½¿ç”¨çš„æµ‹è¯•å·¥å…·ï¼Œé€‚ç”¨äºå„ç§ JavaScript åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å‰ç«¯å’Œåç«¯åº”ç”¨ç¨‹åºã€‚\nä»¥ä¸‹æ˜¯ Jest çš„ä¸€äº›å…³é”®ç‰¹ç‚¹å’Œç”¨é€”ï¼š\nå†…ç½®æ–­è¨€åº“ï¼šJest åŒ…æ‹¬ä¸€ä¸ªå¼ºå¤§çš„æ–­è¨€åº“ï¼Œä½¿ä½ èƒ½å¤Ÿè½»æ¾åœ°ç¼–å†™æ–­è¨€ï¼Œä»¥éªŒè¯ä»£ç çš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ è‡ªåŠ¨æ¨¡æ‹Ÿï¼šJest è‡ªåŠ¨åˆ›å»ºæ¨¡æ‹Ÿï¼ˆmocksï¼‰ï¼Œå¸®åŠ©ä½ æ¨¡æ‹Ÿå‡½æ•°ã€æ¨¡å—å’Œå¤–éƒ¨ä¾èµ–ï¼Œä»è€Œè®©æµ‹è¯•æ›´åŠ ç®€å•å’Œå¯æ§ã€‚ å¿«é€Ÿå’Œå¹¶è¡Œï¼šJest é€šè¿‡æ™ºèƒ½åœ°é€‰æ‹©è¦è¿è¡Œçš„æµ‹è¯•ä»¥åŠå¹¶è¡Œæ‰§è¡Œæµ‹è¯•ï¼Œå¯ä»¥å¿«é€Ÿåœ°è¿è¡Œå¤§é‡æµ‹è¯•ç”¨ä¾‹ï¼Œä»è€ŒèŠ‚çœæ—¶é—´ã€‚ å…¨é¢çš„æµ‹è¯•å¥—ä»¶ï¼šJest æ”¯æŒå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ï¼Œå¹¶å¯ä»¥æµ‹è¯• JavaScriptã€TypeScriptã€Reactã€Vueã€Node.js ç­‰å„ç§åº”ç”¨ç¨‹åºç±»å‹ã€‚ å¿«ç…§æµ‹è¯•ï¼šJest å…·æœ‰å¿«ç…§æµ‹è¯•åŠŸèƒ½ï¼Œå¯ç”¨äºæ£€æŸ¥ UI ç»„ä»¶çš„æ¸²æŸ“æ˜¯å¦ä¸ä¹‹å‰çš„å¿«ç…§åŒ¹é…ï¼Œä»è€Œæ•è· UI å˜åŒ–ã€‚ è‡ªåŠ¨ç›‘è§†æ¨¡å¼ï¼šJest å…·æœ‰ä¸€ä¸ªç›‘è§†æ¨¡å¼ï¼Œå¯åœ¨ä»£ç æ›´æ”¹æ—¶è‡ªåŠ¨é‡æ–°è¿è¡Œç›¸å…³æµ‹è¯•ï¼Œä»è€Œæ”¯æŒå¼€å‘äººå‘˜è¿›è¡ŒæŒç»­æµ‹è¯•ã€‚ ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿï¼šJest æœ‰ä¸°å¯Œçš„æ’ä»¶å’Œæ‰©å±•ï¼Œå¯ç”¨äºæ‰©å±•å…¶åŠŸèƒ½ï¼Œå¦‚è¦†ç›–ç‡æŠ¥å‘Šã€æµ‹è¯•æŠ¥å‘Šå’Œå…¶ä»–å·¥å…·çš„é›†æˆã€‚ ç¤¾åŒºæ”¯æŒï¼šJest æ˜¯ä¸€ä¸ªæµè¡Œçš„æµ‹è¯•æ¡†æ¶ï¼Œæ‹¥æœ‰åºå¤§çš„ç¤¾åŒºï¼Œæä¾›äº†å¤§é‡çš„æ–‡æ¡£ã€æ•™ç¨‹å’Œæ”¯æŒèµ„æºã€‚ Jest é€šå¸¸ä¸å…¶ä»–å·¥å…·å¦‚ Babelï¼ˆç”¨äºè½¬è¯‘ JavaScriptï¼‰ã€Enzymeï¼ˆç”¨äº React ç»„ä»¶æµ‹è¯•ï¼‰ã€Supertestï¼ˆç”¨äº API æµ‹è¯•ï¼‰ç­‰ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®ç°å…¨é¢çš„æµ‹è¯•è¦†ç›–å’Œç¡®ä¿ä»£ç è´¨é‡ã€‚æ— è®ºä½ æ˜¯åœ¨ç¼–å†™å‰ç«¯ä»£ç è¿˜æ˜¯åç«¯ä»£ç ï¼ŒJest éƒ½æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ•è·æ½œåœ¨çš„é—®é¢˜ï¼Œæé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://jestjs.io/docs/zh-Hans/getting-started\nä»£ç ç¤ºä¾‹ï¼š\n// å¯¼å…¥ jest const jest = require(\u0026#39;jest\u0026#39;); describe(): // æµ‹è¯•åœºæ™¯ it(): // æµ‹è¯•ç”¨ä¾‹ï¼Œit() åœ¨ describe() é‡Œé¢ before(): // è¿™ä¸ªåŠ¨ä½œåœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œ after(): // è¿™ä¸ªåŠ¨ä½œåœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰§è¡Œ Mocha ä»‹ç» Mocha æ˜¯ä¸€ä¸ªæµè¡Œçš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºç¼–å†™å’Œè¿è¡Œ JavaScript åº”ç”¨ç¨‹åºçš„å„ç§æµ‹è¯•ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚Mocha æä¾›äº†çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°å®šåˆ¶æµ‹è¯•å¥—ä»¶ä»¥æ»¡è¶³å…¶é¡¹ç›®çš„éœ€æ±‚ã€‚\nä»¥ä¸‹æ˜¯ Mocha çš„ä¸€äº›å…³é”®ç‰¹ç‚¹å’Œç”¨é€”ï¼š\nå¤šç§æµ‹è¯•é£æ ¼ï¼šMocha æ”¯æŒå¤šç§æµ‹è¯•é£æ ¼ï¼ŒåŒ…æ‹¬ BDDï¼ˆè¡Œä¸ºé©±åŠ¨å¼€å‘ï¼‰å’Œ TDDï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰ã€‚è¿™ä½¿å¼€å‘äººå‘˜å¯ä»¥æ ¹æ®è‡ªå·±çš„åå¥½ç¼–å†™æµ‹è¯•ç”¨ä¾‹ã€‚ ä¸°å¯Œçš„æ–­è¨€åº“ï¼šMocha æœ¬èº«å¹¶ä¸åŒ…æ‹¬æ–­è¨€åº“ï¼Œä½†å®ƒå¯ä»¥ä¸å¤šç§æ–­è¨€åº“ï¼ˆå¦‚ Chaiã€Should.jsã€Expect.js ç­‰ï¼‰ç»“åˆä½¿ç”¨ï¼Œä½¿ä½ èƒ½å¤Ÿä½¿ç”¨å–œæ¬¢çš„æ–­è¨€é£æ ¼æ¥ç¼–å†™æµ‹è¯•ã€‚ å¼‚æ­¥æµ‹è¯•ï¼šMocha å†…ç½®æ”¯æŒå¼‚æ­¥æµ‹è¯•ï¼Œå…è®¸ä½ æµ‹è¯•å¼‚æ­¥ä»£ç ã€Promiseã€å›è°ƒå‡½æ•°ç­‰ï¼Œç¡®ä¿ä»£ç åœ¨å¼‚æ­¥åœºæ™¯ä¸‹çš„æ­£ç¡®æ€§ã€‚ å¹¶è¡Œæµ‹è¯•ï¼šMocha å¯ä»¥å¹¶è¡Œè¿è¡Œæµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜æµ‹è¯•æ‰§è¡Œæ•ˆç‡ã€‚ ä¸°å¯Œçš„æ’ä»¶å’Œæ‰©å±•ï¼šMocha æœ‰ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼Œå¯ä»¥ç”¨äºæ‰©å±•å…¶åŠŸèƒ½ï¼Œå¦‚æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šã€æµ‹è¯•æŠ¥å‘Šç”Ÿæˆç­‰ã€‚ æ˜“äºé›†æˆï¼šMocha å¯ä»¥ä¸å„ç§æ–­è¨€åº“ã€æµ‹è¯•è¿è¡Œå™¨ï¼ˆå¦‚ Karma å’Œ Jestï¼‰ã€æµè§ˆå™¨ï¼ˆä½¿ç”¨æµè§ˆå™¨æµ‹è¯•è¿è¡Œå™¨ï¼‰ç­‰ä¸€èµ·ä½¿ç”¨ï¼Œä»¥é€‚åº”ä¸åŒçš„é¡¹ç›®å’Œæµ‹è¯•éœ€æ±‚ã€‚ å‘½ä»¤è¡Œç•Œé¢ï¼šMocha æä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œç”¨äºè¿è¡Œæµ‹è¯•å¥—ä»¶ï¼Œç”ŸæˆæŠ¥å‘Šä»¥åŠå…¶ä»–æµ‹è¯•ç›¸å…³æ“ä½œã€‚ æŒç»­é›†æˆæ”¯æŒï¼šMocha å¯ä»¥è½»æ¾é›†æˆåˆ°æŒç»­é›†æˆï¼ˆCIï¼‰å·¥å…·ä¸­ï¼Œå¦‚ Jenkinsã€Travis CIã€CircleCI ç­‰ï¼Œä»¥ç¡®ä¿ä»£ç åœ¨æ¯æ¬¡æäº¤åéƒ½èƒ½å¾—åˆ°æµ‹è¯•ã€‚ Mocha çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ä½¿å…¶æˆä¸ºä¸€ä¸ªå—æ¬¢è¿çš„æµ‹è¯•æ¡†æ¶ï¼Œé€‚ç”¨äºå„ç§ JavaScript é¡¹ç›®ï¼ŒåŒ…æ‹¬å‰ç«¯å’Œåç«¯åº”ç”¨ç¨‹åºã€‚å¼€å‘äººå‘˜å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œå–œå¥½é€‰æ‹©æµ‹è¯•å·¥å…·ã€æ–­è¨€åº“å’Œå…¶ä»–æ‰©å±•ï¼Œä»¥æ»¡è¶³é¡¹ç›®çš„è¦æ±‚ã€‚æ— è®ºä½ æ˜¯åœ¨ç¼–å†™æµè§ˆå™¨ç«¯ä»£ç è¿˜æ˜¯æœåŠ¡å™¨ç«¯ä»£ç ï¼ŒMocha éƒ½æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æµ‹è¯•å·¥å…·ï¼Œå¯å¸®åŠ©ä½ ç¡®ä¿ä»£ç è´¨é‡å’Œå¯é æ€§ã€‚\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://mochajs.org/\nä»£ç ç¤ºä¾‹ï¼š\n// å¯¼å…¥ mocha const mocha = require(\u0026#39;mocha\u0026#39;); describe(): // æµ‹è¯•åœºæ™¯ it(): // æµ‹è¯•ç”¨ä¾‹ï¼Œit() åœ¨ describe() é‡Œé¢ before(): // è¿™ä¸ªåŠ¨ä½œåœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œ after(): // è¿™ä¸ªåŠ¨ä½œåœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰§è¡Œ CHAI ç®€ä»‹ Chai æ˜¯ä¸€ä¸ª JavaScript æ–­è¨€åº“ï¼Œç”¨äºç¼–å†™å’Œè¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶è¿›è¡Œæ–­è¨€å’ŒæœŸæœ›å€¼çš„éªŒè¯ã€‚å®ƒæ˜¯ä¸€ä¸ªæµè¡Œçš„æµ‹è¯•å·¥å…·ï¼Œé€šå¸¸ä¸æµ‹è¯•æ¡†æ¶ï¼ˆå¦‚ Mochaã€Jest ç­‰ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å¸®åŠ©å¼€å‘è€…ç¼–å†™å’Œæ‰§è¡Œå„ç§ç±»å‹çš„æµ‹è¯•ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº› Chai çš„ä¸»è¦ç‰¹ç‚¹å’Œç”¨é€”ï¼š\nå¯è¯»æ€§å¼ºçš„æ–­è¨€è¯­æ³•ï¼šChai æä¾›äº†ä¸€ä¸ªæ˜“äºé˜…è¯»å’Œç¼–å†™çš„æ–­è¨€è¯­æ³•ï¼Œä½¿æµ‹è¯•ç”¨ä¾‹æ›´æ˜“äºç†è§£ã€‚å®ƒæ”¯æŒè‡ªç„¶è¯­è¨€çš„æ–­è¨€é£æ ¼ï¼Œä¾‹å¦‚ expect(foo).to.be.a(\u0026lsquo;string\u0026rsquo;) æˆ– expect(bar).to.equal(42)ã€‚ å¤šç§æ–­è¨€é£æ ¼ï¼šChai æä¾›äº†å¤šç§ä¸åŒçš„æ–­è¨€é£æ ¼ï¼Œä»¥é€‚åº”ä¸åŒå¼€å‘è€…çš„åå¥½ã€‚ä¸»è¦çš„é£æ ¼åŒ…æ‹¬ BDDï¼ˆBehavior-Driven Developmentï¼‰é£æ ¼ã€TDDï¼ˆTest-Driven Developmentï¼‰é£æ ¼å’Œ assert é£æ ¼ã€‚ æ’ä»¶æ‰©å±•ï¼šChai å¯ä»¥é€šè¿‡æ’ä»¶è¿›è¡Œæ‰©å±•ï¼Œä»¥æ”¯æŒæ›´å¤šçš„æ–­è¨€ç±»å‹å’ŒåŠŸèƒ½ã€‚è¿™ä½¿å¾— Chai å¯ä»¥æ»¡è¶³å„ç§æµ‹è¯•éœ€æ±‚ï¼ŒåŒ…æ‹¬å¼‚æ­¥æµ‹è¯•ã€HTTP è¯·æ±‚æµ‹è¯•ç­‰ã€‚ æ˜“äºé›†æˆï¼šChai å¯ä»¥è½»æ¾é›†æˆåˆ°å„ç§æµ‹è¯•æ¡†æ¶ä¸­ï¼Œä¾‹å¦‚ Mochaã€Jestã€Jasmine ç­‰ã€‚è¿™ä½¿å¾—å®ƒæˆä¸ºç¼–å†™æµ‹è¯•ç”¨ä¾‹çš„å¼ºå¤§å·¥å…·ã€‚ æ”¯æŒé“¾å¼æ–­è¨€ï¼šChai å…è®¸ä½ å¯¹å¤šä¸ªæ–­è¨€è¿›è¡Œé“¾å¼è°ƒç”¨ï¼Œä»¥ä¾¿æ›´å®¹æ˜“è¿›è¡Œå¤æ‚çš„æµ‹è¯•å’ŒéªŒè¯ã€‚ å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.chaijs.com/\nä»£ç ç¤ºä¾‹ï¼š\n// å¯¼å…¥ chai const chai = require(\u0026#39;chai\u0026#39;); const expect = chai.expect; // demo æ–­è¨€ .expect(\u0026lt;actual result\u0026gt;).to.{assert}(\u0026lt;expected result\u0026gt;) // æ–­è¨€ç›®æ ‡ä¸¥æ ¼ç­‰äºå€¼ .expect(â€˜hello\u0026#39;).to.equal(\u0026#39;hello\u0026#39;); // æ–­è¨€ç›®æ ‡ä¸¥æ ¼ç­‰äºå€¼ .expect({ foo: \u0026#39;bar\u0026#39; }).to.not.equal({ foo: \u0026#39;bar\u0026#39; }); // æ–­è¨€ç›®æ ‡å€¼ä¸ä¸¥æ ¼ç­‰äºå€¼ã€‚ .expect(\u0026#39;foobar\u0026#39;).to.contain(\u0026#39;foo\u0026#39;); // æ–­è¨€ç›®æ ‡å­—ç¬¦ä¸²åŒ…å«ç»™å®šçš„å­å­—ç¬¦ä¸²ã€‚ .expect(foo).to.exist; // æ–­è¨€ç›®æ ‡æ—¢ä¸æ˜¯ null ä¹Ÿä¸æ˜¯æœªå®šä¹‰ã€‚ .expect(5).to.be.at.most(5); // æ–­è¨€ç›®æ ‡å€¼å°äºæˆ–ç­‰äºå€¼ã€‚ é¡¹ç›®ä¾èµ– éœ€æå‰å®‰è£…å¥½ä»¥ä¸‹ç¯å¢ƒ\nnodejs, demo ç‰ˆæœ¬ä¸º v21.1.0 é¡¹ç›®æ–‡ä»¶ç»“æ„ ä»¥ä¸‹æ˜¯ä¸€ä¸ª SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®çš„æ–‡ä»¶ç»“æ„ï¼Œå…¶ä¸­åŒ…å«äº†æµ‹è¯•é…ç½®æ–‡ä»¶ã€æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ã€æµ‹è¯•å·¥å…·æ–‡ä»¶å’Œæµ‹è¯•æŠ¥å‘Šæ–‡ä»¶ã€‚å¯è¿›è¡Œå‚è€ƒã€‚\nSuperTest-Jest-demo â”œâ”€â”€ README.md â”œâ”€â”€ package.json â”œâ”€â”€ package-lock.json â”œâ”€â”€ Config // æµ‹è¯•é…ç½®æ–‡ä»¶ â”‚ â””â”€â”€ config.js â”œâ”€â”€ Specs // æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ â”‚ â””â”€â”€ test.spec.js â”œâ”€â”€ Utils // æµ‹è¯•å·¥å…·æ–‡ä»¶ â”‚ â””â”€â”€ utils.js â”œâ”€â”€ Report // æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶ â”‚ â””â”€â”€ report.html â”œâ”€â”€ .gitignore â””â”€â”€ node_modules // é¡¹ç›®ä¾èµ– Next ä¸‹ä¸€ç¯‡æ–‡ç« å°†ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ Supertest ä» 0 åˆ° 1 æ­å»º SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼Œæ•¬è¯·æœŸå¾…ã€‚\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/supertest-tutorial-getting-started-and-own-environment-preparation/","summary":"å…³äº Supertest çš„æ•™ç¨‹ï¼Œä¸»è¦åŒ…æ‹¬å…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡ã€‚åœ¨åšå®¢ä¸­ï¼Œè¯»è€…å°†äº†è§£ä»€ä¹ˆæ˜¯ Supertest ä»¥åŠå¦‚ä½•å¼€å§‹ä½¿ç”¨å®ƒæ¥è¿›è¡Œ API æµ‹è¯•ã€‚","title":"SuperTest æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡"},{"content":"æŒç»­é›†æˆ æ¥å…¥ github action ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\nGradle ç‰ˆæœ¬æ¥å…¥ github action å¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/RestAssured-gradle-demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ gradle.ymlã€‚\nç¼–è¾‘ gradle.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­\nname: Gradle and REST Assured Tests on: push: branches: [ \u0026#34;main\u0026#34; ] pull_request: branches: [ \u0026#34;main\u0026#34; ] jobs: build: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v3 - name: Setup Java uses: actions/setup-java@v3 with: java-version: \u0026#39;11\u0026#39; distribution: \u0026#39;adopt\u0026#39; - name: Build and Run REST Assured Tests with Gradle uses: gradle/gradle-build-action@bd5760595778326ba7f1441bcf7e88b49de61a25 # v2.6.0 with: arguments: build - name: Archive REST-Assured results uses: actions/upload-artifact@v2 with: name: REST-Assured-results path: build/reports/tests/test - name: Upload REST-Assured results to GitHub uses: actions/upload-artifact@v2 with: name: REST-Assured-results path: build/reports/tests/test æäº¤ä»£ç ï¼šå°† gradle.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ Gradle and REST Assured Tests å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ Maven ç‰ˆæœ¬æ¥å…¥ github action å¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/RestAssured-maven-demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ maven.ymlã€‚\nç¼–è¾‘ maven.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­\nname: Maven and REST Assured Tests on: push: branches: [ \u0026#34;main\u0026#34; ] pull_request: branches: [ \u0026#34;main\u0026#34; ] jobs: Run-Rest-Assured-Tests: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Set up JDK 17 uses: actions/setup-java@v3 with: java-version: \u0026#39;17\u0026#39; distribution: \u0026#39;temurin\u0026#39; cache: maven - name: Build and Run REST Assured Tests with Maven run: mvn test - name: Archive REST-Assured results uses: actions/upload-artifact@v3 with: name: REST-Assured-results path: target/surefire-reports - name: Upload REST-Assured results to GitHub uses: actions/upload-artifact@v3 with: name: REST-Assured-results path: target/surefire-reports æäº¤ä»£ç ï¼šå°† maven.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ Maven and REST Assured Tests å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ é›†æˆ allure æµ‹è¯•æŠ¥å‘Š allure ç®€ä»‹ Allureæ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆæ¼‚äº®ã€äº¤äº’å¼æµ‹è¯•æŠ¥å‘Šçš„å¼€æºæµ‹è¯•æ¡†æ¶ã€‚å®ƒå¯ä»¥ä¸å¤šç§æµ‹è¯•æ¡†æ¶ï¼ˆå¦‚JUnitã€TestNGã€Cucumberç­‰ï¼‰å’Œå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Javaã€Pythonã€C#ç­‰ï¼‰ä¸€èµ·ä½¿ç”¨ã€‚\nAllure æµ‹è¯•æŠ¥å‘Šå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\nç¾è§‚å’Œäº¤äº’å¼ï¼šAllure æµ‹è¯•æŠ¥å‘Šä»¥ç¾è§‚å’Œäº¤äº’å¼çš„æ–¹å¼å‘ˆç°æµ‹è¯•ç»“æœï¼ŒåŒ…æ‹¬å›¾å½¢ã€å›¾è¡¨å’ŒåŠ¨ç”»ã€‚è¿™ä½¿å¾—æµ‹è¯•æŠ¥å‘Šæ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ã€‚ å¤šè¯­è¨€æ”¯æŒï¼šAllure æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨ä¸åŒçš„è¯­è¨€ä¸­ç¼–å†™æµ‹è¯•ï¼Œå¹¶ç”Ÿæˆç»Ÿä¸€çš„æµ‹è¯•æŠ¥å‘Šã€‚ æµ‹è¯•ç”¨ä¾‹çº§åˆ«çš„è¯¦ç»†ä¿¡æ¯ï¼šAllure å…è®¸æ‚¨ä¸ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ·»åŠ è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æè¿°ã€ç±»åˆ«ã€æ ‡ç­¾ã€é™„ä»¶ã€å†å²æ•°æ®ç­‰ã€‚è¿™äº›ä¿¡æ¯æœ‰åŠ©äºæ›´å…¨é¢åœ°äº†è§£æµ‹è¯•ç»“æœã€‚ å†å²è¶‹åŠ¿åˆ†æï¼šAllure æ”¯æŒæµ‹è¯•å†å²è¶‹åŠ¿åˆ†æï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æµ‹è¯•ç”¨ä¾‹çš„å†å²è¡¨ç°ï¼Œè¯†åˆ«é—®é¢˜å’Œæ”¹è¿›æµ‹è¯•è´¨é‡ã€‚ ç±»åˆ«å’Œæ ‡ç­¾ï¼šæ‚¨å¯ä»¥ä¸ºæµ‹è¯•ç”¨ä¾‹æ·»åŠ ç±»åˆ«å’Œæ ‡ç­¾ï¼Œä»¥æ›´å¥½åœ°ç»„ç»‡å’Œåˆ†ç±»æµ‹è¯•ç”¨ä¾‹ã€‚è¿™ä½¿å¾—æŠ¥å‘Šæ›´å…·å¯è¯»æ€§ã€‚ é™„ä»¶å’Œæˆªå›¾ï¼šAllure å…è®¸æ‚¨é™„åŠ æ–‡ä»¶ã€æˆªå›¾å’Œå…¶ä»–é™„ä»¶ï¼Œä»¥ä¾¿æ›´å¥½åœ°è®°å½•æµ‹è¯•è¿‡ç¨‹ä¸­çš„ä¿¡æ¯ã€‚ é›†æˆæ€§ï¼šAllure å¯ä»¥ä¸å„ç§æµ‹è¯•æ¡†æ¶å’Œæ„å»ºå·¥å…·ï¼ˆå¦‚ Mavenã€Gradleï¼‰æ— ç¼é›†æˆï¼Œä½¿å¾—ç”ŸæˆæŠ¥å‘Šå˜å¾—ç®€å•ã€‚ å¼€æºç¤¾åŒºæ”¯æŒï¼šAllure æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ‹¥æœ‰ä¸€ä¸ªæ´»è·ƒçš„ç¤¾åŒºï¼Œæä¾›äº†å¹¿æ³›çš„æ–‡æ¡£å’Œæ”¯æŒã€‚è¿™ä½¿å¾—å®ƒæˆä¸ºè®¸å¤šè‡ªåŠ¨åŒ–æµ‹è¯•å›¢é˜Ÿçš„é¦–é€‰å·¥å…·ã€‚ Allure æµ‹è¯•æŠ¥å‘Šçš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ¸…æ™°ã€æ˜“äºé˜…è¯»çš„æ–¹å¼æ¥å±•ç¤ºæµ‹è¯•ç»“æœï¼Œä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´å¥½åœ°ç†è§£æµ‹è¯•çš„çŠ¶æ€å’Œè´¨é‡ï¼Œå¿«é€Ÿè¯†åˆ«é—®é¢˜ï¼Œå¹¶é‡‡å–å¿…è¦çš„è¡ŒåŠ¨ã€‚æ— è®ºæ‚¨æ˜¯å¼€å‘äººå‘˜ã€æµ‹è¯•äººå‘˜è¿˜æ˜¯é¡¹ç›®ç»ç†ï¼ŒAllure æµ‹è¯•æŠ¥å‘Šéƒ½èƒ½ä¸ºæ‚¨æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä»¥æ”¹è¿›è½¯ä»¶è´¨é‡å’Œå¯é æ€§ã€‚\nå®˜æ–¹ç½‘ç«™ï¼šhttps://docs.qameta.io/allure/\né›†æˆæ­¥éª¤ Maven ç‰ˆæœ¬é›†æˆ allure åœ¨ POM.xml ä¸­æ·»åŠ  allure ä¾èµ– å¯ copy æœ¬é¡¹ç›®ä¸­çš„ pom.xml æ–‡ä»¶å†…å®¹\n\u0026lt;!-- https://mvnrepository.com/artifact/io.qameta.allure/allure-testng --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.qameta.allure\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;allure-testng\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.24.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- https://mvnrepository.com/artifact/io.qameta.allure/allure-rest-assured --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.qameta.allure\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;allure-rest-assured\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.24.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨ POM.xml ä¸­æ·»åŠ  allure æ’ä»¶ \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;io.qameta.allure\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;allure-maven\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.12.0\u0026lt;/version\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;resultsDirectory\u0026gt;../allure-results\u0026lt;/resultsDirectory\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/plugin\u0026gt; åœ¨ src/test/java ä¸‹åˆ›å»ºç”¨äºæµ‹è¯• REST API çš„æµ‹è¯•ä»£ç  ä»¥ä¸‹ä¸º demo ç¤ºä¾‹ï¼Œè¯¦ç»†éƒ¨åˆ†å¯å‚è€ƒ é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/RestAssured-maven-demo\npackage com.example; import io.qameta.allure.*; import io.qameta.allure.restassured.AllureRestAssured; import org.testng.annotations.Test; import static io.restassured.RestAssured.given; import static org.hamcrest.Matchers.equalTo; @Epic(\u0026#34;REST API Regression Testing using TestNG\u0026#34;) @Feature(\u0026#34;Verify that the Get and POST API returns correctly\u0026#34;) public class TestDemo { @Test(description = \u0026#34;To get the details of post with id 1\u0026#34;, priority = 1) @Story(\u0026#34;GET Request with Valid post id\u0026#34;) @Severity(SeverityLevel.NORMAL) @Description(\u0026#34;Test Description : Verify that the GET API returns correctly\u0026#34;) public void verifyGetAPI() { // Given given() .filter(new AllureRestAssured()) //è®¾ç½® AllureRestAssured è¿‡æ»¤å™¨ï¼Œç”¨æ¥åœ¨æµ‹è¯•æŠ¥å‘Šä¸­å±•ç¤ºè¯·æ±‚å’Œå“åº”ä¿¡æ¯ .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .get(\u0026#34;/posts/1\u0026#34;) // Then .then() .statusCode(200) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(1)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34;)); } @Test(description = \u0026#34;To create a new post\u0026#34;, priority = 2) @Story(\u0026#34;POST Request\u0026#34;) @Severity(SeverityLevel.NORMAL) @Description(\u0026#34;Test Description : Verify that the post API returns correctly\u0026#34;) public void verifyPostAPI() { // Given given() .filter(new AllureRestAssured()) //è®¾ç½® AllureRestAssured è¿‡æ»¤å™¨ï¼Œç”¨æ¥åœ¨æµ‹è¯•æŠ¥å‘Šä¸­å±•ç¤ºè¯·æ±‚å’Œå“åº”ä¿¡æ¯ .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .body(\u0026#34;{\\\u0026#34;title\\\u0026#34;: \\\u0026#34;foo\\\u0026#34;, \\\u0026#34;body\\\u0026#34;: \\\u0026#34;bar\\\u0026#34;, \\\u0026#34;userId\\\u0026#34;: 1\\n}\u0026#34;) .post(\u0026#34;/posts\u0026#34;) // Then .then() .statusCode(201) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(101)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;foo\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;bar\u0026#34;)); } } è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆ Allure æŠ¥å‘Š mvn clean test ç”Ÿæˆçš„ Allure æŠ¥å‘Šåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ allure-results æ–‡ä»¶ä¸‹\né¢„è§ˆ Allure æŠ¥å‘Š mvn allure:serve è¿è¡Œå‘½ä»¤ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œé¢„è§ˆ Allure æŠ¥å‘Š\nGradle ç‰ˆæœ¬é›†æˆ allure åœ¨ build.gradle ä¸­æ·»åŠ  allure æ’ä»¶ å¯ copy æœ¬é¡¹ç›®ä¸­çš„ build.gradle æ–‡ä»¶å†…å®¹\nid(\u0026#34;io.qameta.allure\u0026#34;) version \u0026#34;2.11.2\u0026#34; åœ¨ build.gradle ä¸­æ·»åŠ  allure ä¾èµ– å¯ copy æœ¬é¡¹ç›®ä¸­çš„ build.gradle æ–‡ä»¶å†…å®¹\nimplementation \u0026#39;io.qameta.allure:allure-testng:2.24.0\u0026#39; // Add allure report dependency implementation \u0026#39;io.qameta.allure:allure-rest-assured:2.24.0\u0026#39; // Add allure report dependency åœ¨ src/test/java ä¸‹åˆ›å»ºç”¨äºæµ‹è¯• REST API çš„æµ‹è¯•ä»£ç  ä»¥ä¸‹ä¸º demo ç¤ºä¾‹ï¼Œè¯¦ç»†éƒ¨åˆ†å¯å‚è€ƒ é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/RestAssured-gradle-demo\npackage com.example; import io.qameta.allure.*; import io.qameta.allure.restassured.AllureRestAssured; import org.testng.annotations.Test; import static io.restassured.RestAssured.given; import static org.hamcrest.Matchers.equalTo; @Epic(\u0026#34;REST API Regression Testing using TestNG\u0026#34;) @Feature(\u0026#34;Verify that the Get and POST API returns correctly\u0026#34;) public class TestDemo { @Test(description = \u0026#34;To get the details of post with id 1\u0026#34;, priority = 1) @Story(\u0026#34;GET Request with Valid post id\u0026#34;) @Severity(SeverityLevel.NORMAL) @Description(\u0026#34;Test Description : Verify that the GET API returns correctly\u0026#34;) public void verifyGetAPI() { // Given given() .filter(new AllureRestAssured()) //è®¾ç½® AllureRestAssured è¿‡æ»¤å™¨ï¼Œç”¨æ¥åœ¨æµ‹è¯•æŠ¥å‘Šä¸­å±•ç¤ºè¯·æ±‚å’Œå“åº”ä¿¡æ¯ .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .get(\u0026#34;/posts/1\u0026#34;) // Then .then() .statusCode(200) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(1)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34;)); } @Test(description = \u0026#34;To create a new post\u0026#34;, priority = 2) @Story(\u0026#34;POST Request\u0026#34;) @Severity(SeverityLevel.NORMAL) @Description(\u0026#34;Test Description : Verify that the post API returns correctly\u0026#34;) public void verifyPostAPI() { // Given given() .filter(new AllureRestAssured()) //è®¾ç½® AllureRestAssured è¿‡æ»¤å™¨ï¼Œç”¨æ¥åœ¨æµ‹è¯•æŠ¥å‘Šä¸­å±•ç¤ºè¯·æ±‚å’Œå“åº”ä¿¡æ¯ .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .body(\u0026#34;{\\\u0026#34;title\\\u0026#34;: \\\u0026#34;foo\\\u0026#34;, \\\u0026#34;body\\\u0026#34;: \\\u0026#34;bar\\\u0026#34;, \\\u0026#34;userId\\\u0026#34;: 1\\n}\u0026#34;) .post(\u0026#34;/posts\u0026#34;) // Then .then() .statusCode(201) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(101)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;foo\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;bar\u0026#34;)); } } è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆ Allure æŠ¥å‘Š gradle clean test ç”Ÿæˆçš„ Allure æŠ¥å‘Šåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ build/allure-results æ–‡ä»¶ä¸‹\né¢„è§ˆ Allure æŠ¥å‘Š gradle allureServe è¿è¡Œå‘½ä»¤ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œé¢„è§ˆ Allure æŠ¥å‘Š\nå‚è€ƒèµ„æ–™ Rest assured å®˜æ–¹æ–‡æ¡£ï¼šhttps://rest-assured.io/\nRest assured å®˜æ–¹ githubï¼šhttps://github.com/rest-assured/rest-assured\nRest assured å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç¿»è¯‘ï¼šhttps://github.com/RookieTester/rest-assured-doc\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/rest-assured-tutorial-advance-usage-integration-ci-cd-and-allure-report/","summary":"æ·±å…¥ç ”ç©¶ REST Assured çš„é«˜çº§åº”ç”¨ï¼Œä¾§é‡äºå¦‚ä½•é›†æˆ CI/CDï¼ˆæŒç»­é›†æˆ/æŒç»­äº¤ä»˜ï¼‰å·¥å…·å’Œæ•´åˆ Allure æµ‹è¯•æŠ¥å‘Šã€‚","title":"REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - é›†æˆ CI/CD å’Œé›†æˆ allure æµ‹è¯•æŠ¥å‘Š"},{"content":"è¿›é˜¶ç”¨æ³• éªŒè¯å“åº”æ•°æ® æ‚¨è¿˜å¯ä»¥éªŒè¯çŠ¶æ€ç ï¼ŒçŠ¶æ€è¡Œï¼ŒCookieï¼Œheadersï¼Œå†…å®¹ç±»å‹å’Œæ­£æ–‡ã€‚\nå“åº”ä½“æ–­è¨€ json æ ¼å¼æ–­è¨€ å‡è®¾æŸä¸ª get è¯·æ±‚ (http://localhost:8080/lotto) è¿”å› JSON å¦‚ä¸‹ï¼š\n{ \u0026#34;lotto\u0026#34;:{ \u0026#34;lottoId\u0026#34;:5, \u0026#34;winning-numbers\u0026#34;:[2,45,34,23,7,5,3], \u0026#34;winners\u0026#34;:[{ \u0026#34;winnerId\u0026#34;:23, \u0026#34;numbers\u0026#34;:[2,45,34,23,3,5] },{ \u0026#34;winnerId\u0026#34;:54, \u0026#34;numbers\u0026#34;:[52,3,12,11,18,22] }] } } REST assured å¯ä»¥å¸®æ‚¨è½»æ¾åœ°è¿›è¡Œ get è¯·æ±‚å¹¶å¯¹å“åº”ä¿¡æ¯è¿›è¡Œå¤„ç†ã€‚\næ–­è¨€ lottoId çš„å€¼æ˜¯å¦ç­‰äº 5ï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/lotto\u0026#34;).then().body(\u0026#34;lotto.lottoId\u0026#34;, equalTo(5)); æ–­è¨€ winnerId çš„å–å€¼åŒ…æ‹¬ 23 å’Œ 54ï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/lotto\u0026#34;).then().body(\u0026#34;lotto.winners.winnerId\u0026#34;, hasItems(23, 54)); æé†’ä¸€ä¸‹ï¼šequalTo å’Œ hasItemsæ˜¯ Hamcrest matchers æä¾›çš„æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦é™æ€å¯¼å…¥å…¥ org.hamcrest.Matchersã€‚\nxml æ ¼å¼æ–­è¨€ XML å¯ä»¥ä¸€ç§é€šè¿‡ç®€å•çš„æ–¹å¼è§£æã€‚å‡è®¾ä¸€ä¸ª POST è¯·æ±‚http://localhost:8080/greetXMLè¿”å›ï¼š\n\u0026lt;greeting\u0026gt; \u0026lt;firstName\u0026gt;{params(\u0026#34;firstName\u0026#34;)}\u0026lt;/firstName\u0026gt; \u0026lt;lastName\u0026gt;{params(\u0026#34;lastName\u0026#34;)}\u0026lt;/lastName\u0026gt; \u0026lt;/greeting\u0026gt; æ–­è¨€ firstName æ˜¯å¦è¿”å›æ­£ç¡®ï¼Œç¤ºä¾‹ï¼š given(). parameters(\u0026#34;firstName\u0026#34;, \u0026#34;John\u0026#34;, \u0026#34;lastName\u0026#34;, \u0026#34;Doe\u0026#34;). when(). post(\u0026#34;/greetXML\u0026#34;). then(). body(\u0026#34;greeting.firstName\u0026#34;, equalTo(\u0026#34;John\u0026#34;)). åŒæ—¶æ–­è¨€ firstname å’Œ lastname æ˜¯å¦è¿”å›æ­£ç¡®ï¼Œç¤ºä¾‹ï¼š given(). parameters(\u0026#34;firstName\u0026#34;, \u0026#34;John\u0026#34;, \u0026#34;lastName\u0026#34;, \u0026#34;Doe\u0026#34;). when(). post(\u0026#34;/greetXML\u0026#34;). then(). body(\u0026#34;greeting.firstName\u0026#34;, equalTo(\u0026#34;John\u0026#34;)). body(\u0026#34;greeting.lastName\u0026#34;, equalTo(\u0026#34;Doe\u0026#34;)); with().parameters(\u0026#34;firstName\u0026#34;, \u0026#34;John\u0026#34;, \u0026#34;lastName\u0026#34;, \u0026#34;Doe\u0026#34;) .when().post(\u0026#34;/greetXML\u0026#34;) .then().body(\u0026#34;greeting.firstName\u0026#34;, equalTo(\u0026#34;John\u0026#34;), \u0026#34;greeting.lastName\u0026#34;, equalTo(\u0026#34;Doe\u0026#34;)); Cookie æ–­è¨€ æ–­è¨€ cookie çš„å€¼æ˜¯å¦ç­‰äº cookieValueï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().assertThat().cookie(\u0026#34;cookieName\u0026#34;, \u0026#34;cookieValue\u0026#34;) åŒæ—¶æ–­è¨€ å¤šä¸ª cookie çš„å€¼æ˜¯å¦ç­‰äº cookieValueï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then() .assertThat().cookies(\u0026#34;cookieName1\u0026#34;, \u0026#34;cookieValue1\u0026#34;, \u0026#34;cookieName2\u0026#34;, \u0026#34;cookieValue2\u0026#34;) æ–­è¨€ cookie çš„å€¼æ˜¯å¦åŒ…å« cookieValueï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then() .assertThat().cookies(\u0026#34;cookieName1\u0026#34;, \u0026#34;cookieValue1\u0026#34;, \u0026#34;cookieName2\u0026#34;, containsString(\u0026#34;Value2\u0026#34;)) çŠ¶æ€ç  Status Code æ–­è¨€ æ–­è¨€ çŠ¶æ€ç æ˜¯å¦ç­‰äº 200ï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().assertThat().statusCode(200) æ–­è¨€ çŠ¶æ€è¡Œæ˜¯å¦ä¸º somethingï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().assertThat().statusLine(\u0026#34;something\u0026#34;) æ–­è¨€ çŠ¶æ€è¡Œæ˜¯å¦åŒ…å« someï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().assertThat().statusLine(containsString(\u0026#34;some\u0026#34;)) Header æ–­è¨€ æ–­è¨€ Header çš„å€¼æ˜¯å¦ç­‰äº HeaderValueï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().assertThat().header(\u0026#34;headerName\u0026#34;, \u0026#34;headerValue\u0026#34;) åŒæ—¶æ–­è¨€ å¤šä¸ª Header çš„å€¼æ˜¯å¦ç­‰äº HeaderValueï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then() .assertThat().headers(\u0026#34;headerName1\u0026#34;, \u0026#34;headerValue1\u0026#34;, \u0026#34;headerName2\u0026#34;, \u0026#34;headerValue2\u0026#34;) æ–­è¨€ Header çš„å€¼æ˜¯å¦åŒ…å« HeaderValueï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then() .assertThat().headers(\u0026#34;headerName1\u0026#34;, \u0026#34;headerValue1\u0026#34;, \u0026#34;headerName2\u0026#34;, containsString(\u0026#34;Value2\u0026#34;)) æ–­è¨€ Header çš„â€œContent-Lengthâ€å°äº 1000ï¼Œç¤ºä¾‹ï¼š å¯ä»¥å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°é¦–å…ˆå°†å¤´å€¼è½¬æ¢ä¸º intï¼Œç„¶ååœ¨ä½¿ç”¨ Hamcrest éªŒè¯å‰ä½¿ç”¨â€œæ•´æ•°â€åŒ¹é…å™¨è¿›è¡Œæ–­è¨€ï¼š\nget(\u0026#34;/something\u0026#34;).then() .assertThat().header(\u0026#34;Content-Length\u0026#34;, Integer::parseInt, lessThan(1000)); Content-Type æ–­è¨€ æ–­è¨€ Content-Type çš„å€¼æ˜¯å¦ç­‰äº application/jsonï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().assertThat().contentType(ContentType.JSON) å†…å®¹å…¨åŒ¹é…æ–­è¨€ æ–­è¨€ å“åº”ä½“æ˜¯å¦å®Œå…¨ç­‰äº somethingï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().assertThat().body(equalTo(\u0026#34;something\u0026#34;)) å“åº”æ—¶é—´æ–­è¨€ REST Assured 2.8.0 å¼€å§‹æ”¯æŒæµ‹é‡å“åº”æ—¶é—´ï¼Œä¾‹å¦‚ï¼š\nlong timeInMs = get(\u0026#34;/lotto\u0026#34;).time() æˆ–ä½¿ç”¨ç‰¹å®šæ—¶é—´å•ä½ï¼š\nlong timeInSeconds = get(\u0026#34;/lotto\u0026#34;).timeIn(SECONDS); å…¶ä¸­ SECONDS åªæ˜¯ä¸€ä¸ªæ ‡å‡†çš„ TimeUnitã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ DSL éªŒè¯ï¼š\nwhen(). get(\u0026#34;/lotto\u0026#34;). then(). time(lessThan(2000L)); // Milliseconds æˆ–\nwhen(). get(\u0026#34;/lotto\u0026#34;). then(). time(lessThan(2L), SECONDS); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‚¨åªèƒ½å‚è€ƒæ€§åœ°å°†è¿™äº›æµ‹é‡æ•°æ®ä¸æœåŠ¡å™¨è¯·æ±‚å¤„ç†æ—¶é—´ç›¸å…³è”ï¼ˆå› ä¸ºå“åº”æ—¶é—´å°†åŒ…æ‹¬ HTTP å¾€è¿”å’Œ REST Assured å¤„ç†æ—¶é—´ç­‰ï¼Œä¸èƒ½åšåˆ°ååˆ†å‡†ç¡®ï¼‰ã€‚\næ–‡ä»¶ä¸Šä¼  é€šå¸¸æˆ‘ä»¬åœ¨å‘æœåŠ¡å™¨ä¼ è¾“å¤§å®¹é‡çš„æ•°æ®æ—¶ï¼Œæ¯”å¦‚æ–‡ä»¶æ—¶ä¼šä½¿ç”¨ multipart è¡¨å•æ•°æ®æŠ€æœ¯ã€‚ rest-assured æä¾›äº†ä¸€ç§multiPartæ–¹æ³•æ¥è¾¨åˆ«è¿™ç©¶ç«Ÿæ˜¯æ–‡ä»¶ã€äºŒè¿›åˆ¶åºåˆ—ã€è¾“å…¥æµè¿˜æ˜¯ä¸Šä¼ çš„æ–‡æœ¬ã€‚\nè¡¨å•ä¸­ä¸Šåªä¼ ä¸€ä¸ªæ–‡ä»¶ï¼Œç¤ºä¾‹ï¼š given(). multiPart(new File(\u0026#34;/path/to/file\u0026#34;)). when(). post(\u0026#34;/upload\u0026#34;); å­˜åœ¨ control åçš„æƒ…å†µä¸‹ä¸Šä¼ æ–‡ä»¶ï¼Œç¤ºä¾‹ï¼š given(). multiPart(\u0026#34;controlName\u0026#34;, new File(\u0026#34;/path/to/file\u0026#34;)). when(). post(\u0026#34;/upload\u0026#34;); åŒä¸€ä¸ªè¯·æ±‚ä¸­å­˜åœ¨å¤šä¸ª\u0026quot;multi-parts\u0026quot;äº‹åŠ¡ï¼Œç¤ºä¾‹ï¼š byte[] someData = .. given(). multiPart(\u0026#34;controlName1\u0026#34;, new File(\u0026#34;/path/to/file\u0026#34;)). multiPart(\u0026#34;controlName2\u0026#34;, \u0026#34;my_file_name.txt\u0026#34;, someData). multiPart(\u0026#34;controlName3\u0026#34;, someJavaObject, \u0026#34;application/json\u0026#34;). when(). post(\u0026#34;/upload\u0026#34;); MultiPartSpecBuilder ç”¨æ³•ï¼Œç¤ºä¾‹ï¼š æ›´å¤šä½¿ç”¨æ–¹æ³•å¯ä»¥ä½¿ç”¨MultiPartSpecBuilderï¼š\nGreeting greeting = new Greeting(); greeting.setFirstName(\u0026#34;John\u0026#34;); greeting.setLastName(\u0026#34;Doe\u0026#34;); given(). multiPart(new MultiPartSpecBuilder(greeting, ObjectMapperType.JACKSON_2) .fileName(\u0026#34;greeting.json\u0026#34;) .controlName(\u0026#34;text\u0026#34;) .mimeType(\u0026#34;application/vnd.custom+json\u0026#34;).build()). when(). post(\u0026#34;/multipart/json\u0026#34;). then(). statusCode(200); MultiPartConfig ç”¨æ³•ï¼Œç¤ºä¾‹ï¼š MultiPartConfigå¯ç”¨æ¥æŒ‡å®šé»˜è®¤çš„ control åå’Œæ–‡ä»¶å\ngiven().config(config().multiPartConfig(multiPartConfig() .defaultControlName(\u0026#34;something-else\u0026#34;))) é»˜è®¤æŠŠ control åé…ç½®ä¸º\u0026quot;something-else\u0026quot;è€Œä¸æ˜¯\u0026quot;file\u0026quot;ã€‚ æ›´å¤šç”¨æ³•æŸ¥çœ‹ åšå®¢ä»‹ç»\nLogging æ—¥å¿— å½“æˆ‘ä»¬åœ¨ç¼–å†™æ¥å£æµ‹è¯•è„šæœ¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æ‰“å°ä¸€äº›æ—¥å¿—ï¼Œä»¥ä¾¿äºæˆ‘ä»¬åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æŸ¥çœ‹æ¥å£çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯ï¼Œä»¥åŠä¸€äº›å…¶ä»–çš„ä¿¡æ¯ã€‚RestAssured æä¾›äº†ä¸€äº›æ–¹æ³•æ¥æ‰“å°æ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„æ–¹æ³•æ¥æ‰“å°æ—¥å¿—ã€‚\nRestAssured æä¾›äº†ä¸€ä¸ªå…¨å±€çš„æ—¥å¿—é…ç½®æ–¹æ³•ï¼Œå¯ä»¥åœ¨æµ‹è¯•å¼€å§‹å‰é…ç½®æ—¥å¿—ï¼Œç„¶ååœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æ‰“å°æ—¥å¿—ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æ˜¯å®ƒåªèƒ½æ‰“å°è¯·æ±‚å’Œå“åº”çš„ä¿¡æ¯ï¼Œä¸èƒ½æ‰“å°å…¶ä»–çš„ä¿¡æ¯ã€‚\nRestAssured è¿˜æä¾›äº†ä¸€ä¸ªå±€éƒ¨çš„æ—¥å¿—é…ç½®æ–¹æ³•ï¼Œå¯ä»¥åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æ‰“å°æ—¥å¿—ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ‰“å°è¯·æ±‚å’Œå“åº”çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ‰“å°å…¶ä»–çš„ä¿¡æ¯ã€‚\nå…¨å±€æ—¥å¿—é…ç½® æ·»åŠ å…¨å±€æ—¥å¿—æ­¥éª¤ å¼•å…¥æ—¥å¿—ç›¸å…³çš„ä¾èµ–ç±» import io.restassured.config.LogConfig; import io.restassured.filter.log.LogDetail; import io.restassured.filter.log.RequestLoggingFilter; import io.restassured.filter.log.ResponseLoggingFilter; åœ¨ setup() æ–¹æ³•ä¸­æ·»åŠ æ—¥å¿—é…ç½® ä½¿ç”¨ LogConfig é…ç½®ï¼Œå¯ç”¨äº†è¯·æ±‚å’Œå“åº”çš„æ—¥å¿—è®°å½•ï¼Œä»¥åŠå¯ç”¨äº†æ¼‚äº®çš„è¾“å‡ºæ ¼å¼ã€‚å¯ç”¨äº†è¯·æ±‚å’Œå“åº”çš„æ—¥å¿—è®°å½•è¿‡æ»¤å™¨ï¼Œè¿™å°†è®°å½•è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯ã€‚\n// å¯ç”¨å…¨å±€è¯·æ±‚å’Œå“åº”æ—¥å¿—è®°å½• RestAssured.config = RestAssured.config() .logConfig(LogConfig.logConfig() .enableLoggingOfRequestAndResponseIfValidationFails(LogDetail.ALL) .enablePrettyPrinting(true)); åœ¨ setup() æ–¹æ³•ä¸­å¯ç”¨äº†å…¨å±€æ—¥å¿—è®°å½•è¿‡æ»¤å™¨ // å¯ç”¨å…¨å±€è¯·æ±‚å’Œå“åº”æ—¥å¿—è®°å½•è¿‡æ»¤å™¨ RestAssured.filters(new RequestLoggingFilter(), new ResponseLoggingFilter()); å…¨å±€æ—¥å¿—ä»£ç ç¤ºä¾‹ package com.example; import io.restassured.RestAssured; // å¼•å…¥æ—¥å¿—ç›¸å…³çš„ç±» import io.restassured.config.LogConfig; import io.restassured.filter.log.LogDetail; import io.restassured.filter.log.RequestLoggingFilter; import io.restassured.filter.log.ResponseLoggingFilter; import org.testng.annotations.BeforeClass; import org.testng.annotations.Test; import static io.restassured.RestAssured.given; import static org.hamcrest.Matchers.equalTo; public class TestDemo { @BeforeClass public void setup() { // å¯ç”¨å…¨å±€è¯·æ±‚å’Œå“åº”æ—¥å¿—è®°å½• RestAssured.config = RestAssured.config() .logConfig(LogConfig.logConfig() .enableLoggingOfRequestAndResponseIfValidationFails(LogDetail.ALL) .enablePrettyPrinting(true)); // å¯ç”¨å…¨å±€è¯·æ±‚å’Œå“åº”æ—¥å¿—è®°å½•è¿‡æ»¤å™¨ RestAssured.filters(new RequestLoggingFilter(), new ResponseLoggingFilter()); } @Test(description = \u0026#34;Verify that the Get Post API returns correctly\u0026#34;) public void verifyGetAPI() { // æµ‹è¯•ç”¨ä¾‹å·²çœç•¥ï¼Œå¯å‚è€ƒ demo } @Test(description = \u0026#34;Verify that the publish post API returns correctly\u0026#34;) public void verifyPostAPI() { // æµ‹è¯•ç”¨ä¾‹å·²çœç•¥ï¼Œå¯å‚è€ƒ demo } } æŸ¥çœ‹å…¨å±€æ—¥å¿—è¾“å‡º æ‰“å¼€æœ¬é¡¹ç›®çš„ Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œæµ‹è¯•è„šæœ¬ æŸ¥çœ‹æ—¥å¿—è¾“å‡º å±€éƒ¨æ—¥å¿—é…ç½® åœ¨ RestAssured ä¸­ï¼Œä½ å¯ä»¥è¿›è¡Œå±€éƒ¨æ—¥å¿—é…ç½®ï¼Œä»¥ä¾¿åœ¨ç‰¹å®šçš„æµ‹è¯•æ–¹æ³•æˆ–è¯·æ±‚ä¸­å¯ç”¨æˆ–ç¦ç”¨æ—¥å¿—è®°å½•ï¼Œè€Œä¸å½±å“å…¨å±€é…ç½®ã€‚\næ·»åŠ æ—¥å¿—æ­¥éª¤ åœ¨æƒ³è¦æ‰“å°æ—¥å¿—çš„æµ‹è¯•æ–¹æ³•ä¸­å¯ç”¨äº†æ·»åŠ æ—¥å¿—é…ç½®ï¼Œç¤ºä¾‹ï¼š @Test(description = \u0026#34;Verify that the Get Post API returns correctly\u0026#34;) public void verifyGetAPI() { // Given given() .log().everything(true) // è¾“å‡º request ç›¸å…³æ—¥å¿— .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .get(\u0026#34;/posts/1\u0026#34;) // Then .then() .log().everything(true) // è¾“å‡º response ç›¸å…³æ—¥å¿— .statusCode(200) } æŸ¥çœ‹å±€éƒ¨æ—¥å¿—è¾“å‡º æ‰“å¼€æœ¬é¡¹ç›®çš„ Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œæµ‹è¯•è„šæœ¬ æŸ¥çœ‹æ—¥å¿—è¾“å‡º LogConfig é…ç½®è¯´æ˜ åœ¨ RestAssured ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ LogConfig ç±»æ¥é…ç½®è¯·æ±‚å’Œå“åº”çš„æ—¥å¿—è®°å½•ã€‚LogConfig å…è®¸ä½ å®šä¹‰æ—¥å¿—è¯¦ç»†ç¨‹åº¦ã€è¾“å‡ºæ ¼å¼ã€è¾“å‡ºä½ç½®ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ LogConfig é…ç½®ç¤ºä¾‹ï¼š\nå¯ç”¨è¯·æ±‚å’Œå“åº”çš„æ—¥å¿—è®°å½•ï¼š\nRestAssured.config = RestAssured.config() .logConfig(LogConfig.logConfig() .enableLoggingOfRequestAndResponseIfValidationFails(LogDetail.ALL)); è¿™å°†å¯ç”¨è¯·æ±‚å’Œå“åº”çš„æ—¥å¿—è®°å½•ï¼Œåªæœ‰å½“éªŒè¯å¤±è´¥æ—¶æ‰è®°å½•ã€‚\né…ç½®è¾“å‡ºçº§åˆ«ï¼š\nRestAssured.config = RestAssured.config() .logConfig(LogConfig.logConfig() .enableLoggingOfRequestAndResponseIfValidationFails(LogDetail.HEADERS)); è¿™å°†åªè®°å½•è¯·æ±‚å’Œå“åº”çš„å¤´éƒ¨ä¿¡æ¯ã€‚\né…ç½®è¾“å‡ºä½ç½®ï¼š\nRestAssured.config = RestAssured.config() .logConfig(LogConfig.logConfig() .enableLoggingOfRequestAndResponseIfValidationFails(LogDetail.ALL) .enablePrettyPrinting(true) .defaultStream(FileOutputStream(\u0026#34;log.txt\u0026#34;))); è¿™å°†æ—¥å¿—è®°å½•è¾“å‡ºåˆ°åä¸º \u0026ldquo;log.txt\u0026rdquo; çš„æ–‡ä»¶ã€‚\né…ç½®æ¼‚äº®çš„è¾“å‡ºæ ¼å¼ï¼š\nRestAssured.config = RestAssured.config() .logConfig(LogConfig.logConfig() .enableLoggingOfRequestAndResponseIfValidationFails(LogDetail.ALL) .enablePrettyPrinting(true)); è¿™å°†å¯ç”¨æ¼‚äº®çš„è¾“å‡ºæ ¼å¼ï¼Œä½¿æ—¥å¿—æ›´æ˜“äºé˜…è¯»ã€‚\nä½ å¯ä»¥æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚ç»„åˆè¿™äº›é…ç½®é€‰é¡¹ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º RestAssured.config ä»¥é…ç½®å…¨å±€çš„è¯·æ±‚å’Œå“åº”æ—¥å¿—è®°å½•ã€‚è¿™å°†æœ‰åŠ©äºåœ¨ RestAssured ä¸­è®°å½•å’Œå®¡æŸ¥è¯·æ±‚å’Œå“åº”ï¼Œä»¥ä¾¿è°ƒè¯•å’Œåˆ†æé—®é¢˜ã€‚\nRequest Logging è¯·æ±‚æ—¥å¿—è®°å½• ä»ç‰ˆæœ¬ 1.5 å¼€å§‹ï¼ŒREST Assured æ”¯æŒåœ¨ä½¿ç”¨ RequestLoggingFilter å°†è¯·æ±‚è§„èŒƒå‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰è®°å½•è¯·æ±‚è§„èŒƒã€‚è¯·æ³¨æ„ï¼ŒHTTP Builder å’Œ HTTP Client å¯èƒ½ä¼šæ·»åŠ æ—¥å¿—ä¸­æ‰“å°çš„å†…å®¹ä¹‹å¤–çš„å…¶ä»–æ ‡å¤´ã€‚ç­›é€‰å™¨å°†ä»…è®°å½•è¯·æ±‚è§„èŒƒä¸­æŒ‡å®šçš„è¯¦ç»†ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨ä¸èƒ½å°† RequestLoggingFilter è®°å½•çš„è¯¦ç»†ä¿¡æ¯è§†ä¸ºå®é™…å‘é€åˆ°æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œåç»­ç­›é€‰å™¨å¯èƒ½ä¼šåœ¨æ—¥å¿—è®°å½•å‘ç”Ÿåæ›´æ”¹è¯·æ±‚ã€‚å¦‚æœæ‚¨éœ€è¦è®°å½•ç½‘ç»œä¸Šå®é™…å‘é€çš„å†…å®¹ï¼Œè¯·å‚é˜… HTTP å®¢æˆ·ç«¯æ—¥å¿—è®°å½•æ–‡æ¡£æˆ–ä½¿ç”¨å¤–éƒ¨å·¥å…·ï¼Œä¾‹å¦‚ Wiresharkã€‚\nç¤ºä¾‹ï¼š\ngiven().log().all() // è®°å½•æ‰€æœ‰è¯·æ±‚è§„èŒƒç»†èŠ‚ï¼ŒåŒ…æ‹¬å‚æ•°ã€æ ‡å¤´å’Œæ­£æ–‡ given().log().params() // åªè®°å½•è¯·æ±‚çš„å‚æ•° given().log().body() // åªè®°å½•è¯·æ±‚æ­£æ–‡ given().log().headers() // åªè®°å½•è¯·æ±‚å¤´ given().log().cookies() // åªè®°å½•è¯·æ±‚ cookies given().log().method() // åªè®°å½•è¯·æ±‚æ–¹æ³• given().log().path() // åªè®°å½•è¯·æ±‚è·¯å¾„ Response Logging å“åº”æ—¥å¿—è®°å½• åªæƒ³è¦æ‰“å°å“åº”æ­£æ–‡ï¼Œè€Œä¸è€ƒè™‘çŠ¶æ€ä»£ç ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œ ç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().log().body() ä¸ç®¡æ˜¯å¦å‘ç”Ÿé”™è¯¯ï¼Œéƒ½å°†æ‰“å°å“åº”æ­£æ–‡ã€‚å¦‚æœåªå¯¹åœ¨å‘ç”Ÿé”™è¯¯æ—¶æ‰“å°å“åº”æ­£æ–‡æ„Ÿå…´è¶£ï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().log().ifError() åœ¨å“åº”ä¸­è®°å½•æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬çŠ¶æ€è¡Œã€æ ‡å¤´å’Œ Cookieï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().log().all() åœ¨å“åº”ä¸­è®°å½•åªè®°å½•çŠ¶æ€è¡Œã€æ ‡é¢˜æˆ– Cookieï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().log().statusLine() // åªè®°å½•çŠ¶æ€è¡Œ get(\u0026#34;/x\u0026#34;).then().log().headers() // åªè®°å½•å“åº”å¤´ get(\u0026#34;/x\u0026#34;).then().log().cookies() // åªè®°å½•å“åº” cookies é…ç½®ä¸ºä»…å½“çŠ¶æ€ä»£ç ä¸æŸä¸ªå€¼åŒ¹é…æ—¶æ‰è®°å½•å“åº”ï¼Œç¤ºä¾‹ï¼š get(\u0026#34;/x\u0026#34;).then().log().ifStatusCodeIsEqualTo(302) // ä»…åœ¨çŠ¶æ€ä»£ç ç­‰äº 302 æ—¶è®°å½•æ—¥å¿— get(\u0026#34;/x\u0026#34;).then().log().ifStatusCodeMatches(matcher) // ä»…åœ¨çŠ¶æ€ä»£ç ä¸æä¾›çš„é…ç½®åŒ¹é…æ—¶æ‰è®°å½•æ—¥å¿— åªåœ¨éªŒè¯å¤±è´¥æ—¶è®°å½•æ—¥å¿— ä» REST Assured 2.3.1 å¼€å§‹ï¼Œåªæœ‰åœ¨éªŒè¯å¤±è´¥æ—¶æ‰èƒ½è®°å½•è¯·æ±‚æˆ–å“åº”ã€‚è¦è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œç¤ºä¾‹ï¼š given().log().ifValidationFails() è¦è®°å½•å“åº”æ—¥å¿—ï¼Œç¤ºä¾‹ï¼š then().log().ifValidationFails() å¯ä»¥ä½¿ç”¨ LogConfig åŒæ—¶ä¸ºè¯·æ±‚å’Œå“åº”å¯ç”¨æ­¤åŠŸèƒ½ï¼Œç¤ºä¾‹ï¼š given().config(RestAssured.config().logConfig(logConfig() .enableLoggingOfRequestAndResponseIfValidationFails(HEADERS))) å¦‚æœéªŒè¯å¤±è´¥ï¼Œæ—¥å¿—ä»…è®°å½•è¯·æ±‚å¤´ã€‚\nå¦å¤–ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œç”¨äºåœ¨éªŒè¯å¤±è´¥æ—¶ä¸ºæ‰€æœ‰è¯·æ±‚å¯ç”¨è¯·æ±‚å’Œå“åº”çš„æ—¥å¿—è®°å½•ï¼Œç¤ºä¾‹ï¼š RestAssured.enableLoggingOfRequestAndResponseIfValidationFails(); ä»ç‰ˆæœ¬ 4.5.0 å¼€å§‹ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ æŒ‡å®š onFailMessage æµ‹è¯•å¤±è´¥æ—¶å°†æ˜¾ç¤ºçš„æ¶ˆæ¯ï¼Œç¤ºä¾‹ï¼š when(). get(). then(). onFailMessage(\u0026#34;Some specific message\u0026#34;). statusCode(200); Header é»‘åå•é…ç½® ä» REST Assured 4.2.0 å¼€å§‹ï¼Œå¯ä»¥å°†æ ‡å¤´åˆ—å…¥é»‘åå•ï¼Œä»¥ä¾¿å®ƒä»¬ä¸ä¼šæ˜¾ç¤ºåœ¨è¯·æ±‚æˆ–å“åº”æ—¥å¿—ä¸­ã€‚ç›¸åï¼Œæ ‡å¤´å€¼å°†æ›¿æ¢ä¸º [ BLACKLISTED ] .æ‚¨å¯ä»¥ä½¿ç”¨ LogConfig å¯ç”¨æ­¤åŸºäºæ¯ä¸ªæ ‡å¤´çš„åŠŸèƒ½ï¼Œç¤ºä¾‹ï¼š\ngiven().config(config().logConfig(logConfig().blacklistHeader(\u0026#34;Accept\u0026#34;))) Filters è¿‡æ»¤å™¨ åœ¨ RestAssured ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨æ¥ä¿®æ”¹è¯·æ±‚å’Œå“åº”ã€‚è¿‡æ»¤å™¨å…è®¸ä½ åœ¨è¯·æ±‚å’Œå“åº”çš„ä¸åŒé˜¶æ®µä¿®æ”¹è¯·æ±‚å’Œå“åº”ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è¯·æ±‚ä¹‹å‰ä¿®æ”¹è¯·æ±‚ï¼Œæˆ–è€…åœ¨å“åº”ä¹‹åä¿®æ”¹å“åº”ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨æ¥æ·»åŠ è¯·æ±‚å¤´ã€è¯·æ±‚å‚æ•°ã€è¯·æ±‚ä½“ã€å“åº”å¤´ã€å“åº”ä½“ç­‰ã€‚\nè¿‡æ»¤å™¨å¯ç”¨äºå®ç°è‡ªå®šä¹‰èº«ä»½éªŒè¯æ–¹æ¡ˆã€ä¼šè¯ç®¡ç†ã€æ—¥å¿—è®°å½•ç­‰ã€‚è‹¥è¦åˆ›å»ºç­›é€‰å™¨ï¼Œéœ€è¦å®ç° io.restassured.filter.Filter æ¥å£ã€‚è¦ä½¿ç”¨è¿‡æ»¤å™¨ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\ngiven().filter(new MyFilter()) REST Assured æä¾›äº†å‡ ä¸ªå¯ä¾›ä½¿ç”¨çš„è¿‡æ»¤å™¨ï¼š\nio.restassured.filter.log.RequestLoggingFilter ï¼šå°†æ‰“å°è¯·æ±‚è§„èŒƒè¯¦ç»†ä¿¡æ¯çš„ç­›é€‰å™¨ã€‚ io.restassured.filter.log.ResponseLoggingFilter ï¼šå¦‚æœå“åº”ä¸ç»™å®šçŠ¶æ€ä»£ç åŒ¹é…ï¼Œåˆ™å°†æ‰“å°å“åº”è¯¦ç»†ä¿¡æ¯çš„ç­›é€‰å™¨ã€‚ io.restassured.filter.log.ErrorLoggingFilter ï¼šåœ¨å‘ç”Ÿé”™è¯¯æ—¶æ‰“å°å“åº”æ­£æ–‡çš„ç­›é€‰å™¨ï¼ˆçŠ¶æ€ä»£ç ä»‹äº 400 å’Œ 500 ä¹‹é—´ï¼‰ã€‚ Ordered Filters æœ‰åºè¿‡æ»¤å™¨ ä» REST Assured 3.0.2 å¼€å§‹ï¼Œå¦‚æœéœ€è¦æ§åˆ¶ç­›é€‰å™¨æ’åºï¼Œå¯ä»¥å®ç° io.restassured.filter.OrderedFilter æ¥å£ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å°†å®ç°è¿”å›ä¸€ä¸ªæ•´æ•°çš„æ–¹æ³•ï¼ŒgetOrder è¯¥æ•´æ•°è¡¨ç¤ºç­›é€‰å™¨çš„ä¼˜å…ˆçº§ã€‚å€¼è¶Šä½ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚æ‚¨å¯ä»¥å®šä¹‰çš„æœ€é«˜ä¼˜å…ˆçº§æ˜¯ Integer.MIN_VALUEï¼Œæœ€ä½ä¼˜å…ˆçº§æ˜¯ Integer.MAX_VALUEã€‚æœªå®ç° io.restassured.filter.OrderedFilter çš„è¿‡æ»¤å™¨çš„é»˜è®¤ä¼˜å…ˆçº§ä¸º 1000ã€‚\nç¤ºä¾‹\nResponse Builder å“åº”ç”Ÿæˆå™¨ å¦‚æœéœ€è¦æ›´æ”¹ç­›é€‰å™¨ä¸­çš„å“åº”å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ ResponseBuilder åŸºäºåŸå§‹å“åº”åˆ›å»ºæ–°çš„å“åº”ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦å°†åŸå§‹å“åº”çš„æ­£æ–‡æ›´æ”¹ä¸ºå…¶ä»–å†…å®¹ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\nResponse newResponse = new ResponseBuilder() .clone(originalResponse).setBody(\u0026#34;Something\u0026#34;).build(); æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/rest-assured-tutorial-advance-usage-verifying-response-and-logging/","summary":"æ·±å…¥ä»‹ç» REST Assured çš„è¿›é˜¶ç”¨æ³•ï¼Œé‡ç‚¹æ”¾åœ¨éªŒè¯ API å“åº”ã€æ—¥å¿—è®°å½•å’Œè¿‡æ»¤å™¨çš„åº”ç”¨ä¸Šã€‚","title":"REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šè¿›é˜¶ç”¨æ³• - éªŒè¯å“åº”å’Œæ—¥å¿—è®°å½•ï¼Œè¿‡æ»¤å™¨ï¼Œæ–‡ä»¶ä¸Šä¼ "},{"content":"ä» 0 åˆ° 1 æ­å»º REST Assured æ¥å£æµ‹è¯•é¡¹ç›® REST Assured æ”¯æŒ Gradle å’Œ Maven ä¸¤ç§æ„å»ºå·¥å…·ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©å…¶ä¸­ä¸€ç§ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç» Gradle å’Œ Maven ä¸¤ç§æ„å»ºå·¥å…·çš„é¡¹ç›®åˆå§‹åŒ–è¿‡ç¨‹ã€‚\næœ¬é¡¹ç›®ä½¿ç”¨ Gradle 8.44 å’Œ Maven 3.9.5 è¿›è¡Œæ„å»ºï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯å…¶ä»–ç‰ˆæœ¬ï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒã€‚\nGradle ç‰ˆæœ¬ å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/RestAssured-gradle-demo\nåˆ›å»ºä¸€ä¸ªç©ºçš„ Gradle å·¥ç¨‹ mkdir RestAssured-gradle-demo cd RestAssured-gradle-demo gradle init é…ç½®é¡¹ç›® build.gradle demo é¡¹ç›®å¼•å…¥äº† testNG æµ‹è¯•æ¡†æ¶ï¼Œä»…ä¾›å‚è€ƒ\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª build.gradle æ–‡ä»¶ï¼Œç”¨äºé…ç½®é¡¹ç›® ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒ // æ’ä»¶é…ç½® plugins { id \u0026#39;java\u0026#39; // ä½¿ç”¨ java æ’ä»¶ } // ä»“åº“èµ„æºé…ç½® repositories { mavenCentral() // ä½¿ç”¨ mavenä¸­å¤®ç‰ˆæœ¬åº“æº } // é¡¹ç›®ä¾èµ–é…ç½® dependencies { testImplementation \u0026#39;io.rest-assured:rest-assured:5.3.1\u0026#39; // æ·»åŠ rest-assuredä¾èµ– testImplementation \u0026#39;org.testng:testng:7.8.0\u0026#39; // æ·»åŠ TestNGæµ‹è¯•æ¡†æ¶ä¾èµ– implementation \u0026#39;org.uncommons:reportng:1.1.4\u0026#39; // æ·»åŠ testng æµ‹è¯•æŠ¥å‘Šä¾èµ– implementation \u0026#39;org.slf4j:slf4j-api:2.0.9\u0026#39; // æ·»åŠ æµ‹è¯•æ—¥å¿—ä¾èµ– implementation \u0026#39;org.slf4j:slf4j-simple:2.0.9\u0026#39; // æ·»åŠ æµ‹è¯•æ—¥å¿—ä¾èµ– implementation group: \u0026#39;com.google.inject\u0026#39;, name: \u0026#39;guice\u0026#39;, version: \u0026#39;7.0.0\u0026#39; } // é¡¹ç›®æµ‹è¯•é…ç½® test { reports.html.required = false // ç¦ç”¨ gradle åŸç”ŸHTML æŠ¥å‘Šç”Ÿæˆ reports.junitXml.required = false // ç¦ç”¨ gradle åŸç”Ÿ JUnit XML æŠ¥å‘Šç”Ÿæˆ // å‘Šè¯‰ Gradle ä½¿ç”¨ TestNG ä½œä¸ºæµ‹è¯•æ¡†æ¶ useTestNG() { useDefaultListeners = true suites \u0026#39;src/test/resources/testng.xml\u0026#39; // å£°æ˜ testng çš„ xml é…ç½®æ–‡ä»¶è·¯å¾„ } testLogging.showStandardStreams = true // å°†æµ‹è¯•æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å° testLogging.events \u0026#34;passed\u0026#34;, \u0026#34;skipped\u0026#34;, \u0026#34;failed\u0026#34; // å®šä¹‰æµ‹è¯•æ—¥å¿—äº‹ä»¶ç±»å‹ } å¯ copy æœ¬é¡¹ç›®ä¸­çš„ build.gradle æ–‡ä»¶å†…å®¹ï¼Œæ›´å¤šé…ç½®å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£\ntestng.xml é…ç½® åœ¨ src/testç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª resources ç›®å½•ï¼Œç”¨äºå­˜æ”¾æµ‹è¯•é…ç½®æ–‡ä»¶\nåœ¨ resources ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª testng.xml æ–‡ä»¶ï¼Œç”¨äºé…ç½® TestNG æµ‹è¯•æ¡†æ¶\nç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒ\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;!DOCTYPE suite SYSTEM \u0026#34;http://testng.org/testng-1.0.dtd\u0026#34;\u0026gt; \u0026lt;suite name=\u0026#34;restAssured-gradleTestSuite\u0026#34;\u0026gt; \u0026lt;test thread-count=\u0026#34;1\u0026#34; name=\u0026#34;Demo\u0026#34;\u0026gt; \u0026lt;classes\u0026gt; \u0026lt;class name=\u0026#34;com.example.TestDemo\u0026#34;/\u0026gt; \u0026lt;!-- æµ‹è¯•è„šæœ¬ class--\u0026gt; \u0026lt;/classes\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;!-- Test --\u0026gt; \u0026lt;/suite\u0026gt; \u0026lt;!-- Suite --\u0026gt; gradle build é¡¹ç›®å¹¶åˆå§‹åŒ– ç”¨ç¼–è¾‘å™¨æ‰“å¼€æœ¬é¡¹ç›® Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç¡®è®¤é¡¹ç›® build æˆåŠŸ gradle build åˆå§‹åŒ–å®Œæˆï¼šå®Œæˆå‘å¯¼åï¼ŒGradle å°†åœ¨é¡¹ç›®ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªåŸºæœ¬çš„ Gradle é¡¹ç›®ç»“æ„ åˆå§‹åŒ–ç›®å½• ç›®å½•ç»“æ„å¯å‚è€ƒ \u0026raquo; é¡¹ç›®ç»“æ„\nåœ¨é¡¹ç›®çš„æµ‹è¯•æºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•ç±»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGradle é€šå¸¸å°†æµ‹è¯•æºä»£ç æ”¾åœ¨ src/test/java ç›®å½•ä¸­ã€‚ä½ å¯ä»¥åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»çš„åŒ…ï¼Œå¹¶åœ¨åŒ…ä¸­åˆ›å»ºæ–°çš„æµ‹è¯•ç±»\nåˆ›å»ºä¸€ä¸ª TestDemo çš„æµ‹è¯•ç±»ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹ç»“æ„åˆ›å»ºæ–‡ä»¶\nsrc â””â”€â”€ test â””â”€â”€ java â””â”€â”€ com â””â”€â”€ example â””â”€â”€ TestDemo.java demo æµ‹è¯•æ¥å£ Get æ¥å£ HOST: https://jsonplaceholder.typicode.com æ¥å£åœ°å€ï¼š/posts/1 è¯·æ±‚æ–¹å¼ï¼šGET è¯·æ±‚å‚æ•°ï¼šæ—  è¯·æ±‚å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¯·æ±‚ä½“ï¼šæ—  è¿”å›çŠ¶æ€ç ï¼š200 è¿”å›å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¿”å› bodyï¼š { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; } Post æ¥å£ HOST: https://jsonplaceholder.typicode.com æ¥å£åœ°å€ï¼š/posts è¯·æ±‚æ–¹å¼ï¼šPOST è¯·æ±‚å‚æ•°ï¼šæ—  è¯·æ±‚å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¯·æ±‚ä½“ï¼šraw json æ ¼å¼ body å†…å®¹å¦‚ä¸‹ï¼š { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } è¿”å›çŠ¶æ€ç ï¼š201 è¿”å›å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¿”å› bodyï¼š { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 } ç¼–å†™è„šæœ¬ æ‰“å¼€ TestDemo.java æ–‡ä»¶ï¼Œå¼€å§‹ç¼–å†™æµ‹è¯•è„šæœ¬\nç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒ\npackage com.example; import org.testng.annotations.Test; import static io.restassured.RestAssured.given; import static org.hamcrest.Matchers.equalTo; public class TestDemo { @Test(description = \u0026#34;Verify that the Get Post API returns correctly\u0026#34;) public void verifyGetAPI() { // Given given() .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .get(\u0026#34;/posts/1\u0026#34;) // Then .then() .statusCode(200) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(1)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34;)); } @Test(description = \u0026#34;Verify that the publish post API returns correctly\u0026#34;) public void verifyPostAPI() { // Given given() .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .body(\u0026#34;{\\\u0026#34;title\\\u0026#34;: \\\u0026#34;foo\\\u0026#34;, \\\u0026#34;body\\\u0026#34;: \\\u0026#34;bar\\\u0026#34;, \\\u0026#34;userId\\\u0026#34;: 1\\n}\u0026#34;) .post(\u0026#34;/posts\u0026#34;) // Then .then() .statusCode(201) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(101)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;foo\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;bar\u0026#34;)); } } è°ƒè¯•è„šæœ¬ æ‰“å¼€æœ¬é¡¹ç›®çš„ Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œæµ‹è¯•è„šæœ¬ gradle test æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š å‘½ä»¤è¡ŒæŠ¥å‘Š testng html æŠ¥å‘Š æ‰“å¼€é¡¹ç›® build/reports/tests/test ç›®å½• ç‚¹å‡» index.html æ–‡ä»¶ï¼ŒæŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š Maven ç‰ˆæœ¬ å¯å‚è€ƒ demo é¡¹ç›®ï¼šhttps://github.com/Automation-Test-Starter/RestAssured-maven-demo\nåˆ›å»ºä¸€ä¸ªç©ºçš„ Maven å·¥ç¨‹ mvn archetype:generate -DgroupId=com.example -DartifactId=RestAssured-maven-demo -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false åˆå§‹åŒ–å®Œæˆï¼šå®Œæˆå‘å¯¼åï¼ŒMaven å°†åœ¨æ–°å»ºé¡¹ç›®ç›®å½•å¹¶ç”Ÿæˆä¸€ä¸ªåŸºæœ¬çš„ Maven é¡¹ç›®ç»“æ„\né…ç½®é¡¹ç›® pom.xml åœ¨ é¡¹ç›®ä¸­ pom.xml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹\nå¯ copy æœ¬é¡¹ç›®ä¸­çš„ pom.xml æ–‡ä»¶å†…å®¹ï¼Œæ›´å¤šé…ç½®å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£\n\u0026lt;!-- ä¾èµ–é…ç½® --\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.rest-assured\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;rest-assured\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.1\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- https://mvnrepository.com/artifact/org.testng/testng --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.testng\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;testng\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;7.8.0\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; \u0026lt;!-- æ’ä»¶é…ç½® --\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.apache.maven.plugins\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;maven-surefire-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.2.1\u0026lt;/version\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;suiteXmlFiles\u0026gt; \u0026lt;suiteXmlFile\u0026gt;src/test/resources/testng.xml\u0026lt;/suiteXmlFile\u0026gt; \u0026lt;/suiteXmlFiles\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/plugin\u0026gt; testng.xml é…ç½® åœ¨ src/testç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª resources ç›®å½•ï¼Œç”¨äºå­˜æ”¾æµ‹è¯•é…ç½®æ–‡ä»¶\nåœ¨ resources ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª testng.xml æ–‡ä»¶ï¼Œç”¨äºé…ç½® TestNG æµ‹è¯•æ¡†æ¶\nç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒ\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;!DOCTYPE suite SYSTEM \u0026#34;http://testng.org/testng-1.0.dtd\u0026#34;\u0026gt; \u0026lt;suite name=\u0026#34;restAssured-gradleTestSuite\u0026#34;\u0026gt; \u0026lt;test thread-count=\u0026#34;1\u0026#34; name=\u0026#34;Demo\u0026#34;\u0026gt; \u0026lt;classes\u0026gt; \u0026lt;class name=\u0026#34;com.example.TestDemo\u0026#34;/\u0026gt; \u0026lt;!-- æµ‹è¯•è„šæœ¬ class--\u0026gt; \u0026lt;/classes\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;!-- Test --\u0026gt; \u0026lt;/suite\u0026gt; \u0026lt;!-- Suite --\u0026gt; åˆå§‹åŒ–ç›®å½• ç›®å½•ç»“æ„å¯å‚è€ƒ \u0026raquo; é¡¹ç›®ç»“æ„\nåœ¨é¡¹ç›®çš„æµ‹è¯•æºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•ç±»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGradle é€šå¸¸å°†æµ‹è¯•æºä»£ç æ”¾åœ¨ src/test/java ç›®å½•ä¸­ã€‚ä½ å¯ä»¥åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»çš„åŒ…ï¼Œå¹¶åœ¨åŒ…ä¸­åˆ›å»ºæ–°çš„æµ‹è¯•ç±»\nåˆ›å»ºä¸€ä¸ª TestDemo çš„æµ‹è¯•ç±»ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹ç»“æ„åˆ›å»ºæ–‡ä»¶\nsrc â””â”€â”€ test â””â”€â”€ java â””â”€â”€ com â””â”€â”€ example â””â”€â”€ TestDemo.java demo æµ‹è¯•æ¥å£ Get æ¥å£ HOST: https://jsonplaceholder.typicode.com æ¥å£åœ°å€ï¼š/posts/1 è¯·æ±‚æ–¹å¼ï¼šGET è¯·æ±‚å‚æ•°ï¼šæ—  è¯·æ±‚å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¯·æ±‚ä½“ï¼šæ—  è¿”å›çŠ¶æ€ç ï¼š200 è¿”å›å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¿”å› bodyï¼š { \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 1, \u0026#34;title\u0026#34;: \u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34; } Post æ¥å£ HOST: https://jsonplaceholder.typicode.com æ¥å£åœ°å€ï¼š/posts è¯·æ±‚æ–¹å¼ï¼šPOST è¯·æ±‚å‚æ•°ï¼šæ—  è¯·æ±‚å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¯·æ±‚ä½“ï¼šraw json æ ¼å¼ body å†…å®¹å¦‚ä¸‹ï¼š { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1 } è¿”å›çŠ¶æ€ç ï¼š201 è¿”å›å¤´ï¼š\u0026ldquo;Content-Type\u0026rdquo;: \u0026ldquo;application/json; charset=utf-8\u0026rdquo; è¿”å› bodyï¼š { \u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;userId\u0026#34;: 1, \u0026#34;id\u0026#34;: 101 } ç¼–å†™è„šæœ¬ æ‰“å¼€ TestDemo.java æ–‡ä»¶ï¼Œå¼€å§‹ç¼–å†™æµ‹è¯•è„šæœ¬\nç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒ\npackage com.example; import org.testng.annotations.Test; import static io.restassured.RestAssured.given; import static org.hamcrest.Matchers.equalTo; public class TestDemo { @Test(description = \u0026#34;Verify that the Get Post API returns correctly\u0026#34;) public void verifyGetAPI() { // Given given() .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .get(\u0026#34;/posts/1\u0026#34;) // Then .then() .statusCode(200) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(1)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34;)); } @Test(description = \u0026#34;Verify that the publish post API returns correctly\u0026#34;) public void verifyPostAPI() { // Given given() .baseUri(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) .header(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) // When .when() .body(\u0026#34;{\\\u0026#34;title\\\u0026#34;: \\\u0026#34;foo\\\u0026#34;, \\\u0026#34;body\\\u0026#34;: \\\u0026#34;bar\\\u0026#34;, \\\u0026#34;userId\\\u0026#34;: 1\\n}\u0026#34;) .post(\u0026#34;/posts\u0026#34;) // Then .then() .statusCode(201) // To verify correct value .body(\u0026#34;userId\u0026#34;, equalTo(1)) .body(\u0026#34;id\u0026#34;, equalTo(101)) .body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;foo\u0026#34;)) .body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;bar\u0026#34;)); } } è°ƒè¯•è„šæœ¬ æ‰“å¼€æœ¬é¡¹ç›®çš„ Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œæµ‹è¯•è„šæœ¬ mvn test æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š å‘½ä»¤è¡ŒæŠ¥å‘Š testng html æŠ¥å‘Š æ‰“å¼€é¡¹ç›® target/surefire-reports ç›®å½• ç‚¹å‡» index.html æ–‡ä»¶ï¼ŒæŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š æ›´å¤šä¿¡æ¯ è®¿é—®æˆ‘çš„ä¸ªäººåšå®¢ï¼šhttps://naodeng.tech/ æˆ‘çš„ QA è‡ªåŠ¨åŒ–å¿«é€Ÿå¯åŠ¨é¡¹ç›®é¡µé¢ï¼šhttps://github.com/Automation-Test-Starter æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/rest-assured-tutorial-building-your-own-project-from-0-to-1/","summary":"æ·±å…¥æ¢è®¨å¦‚ä½•ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ª REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ã€‚","title":"REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»º REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®"},{"content":"RestAssured ä»‹ç» REST Assured æ˜¯ä¸€ç§ç”¨äºæµ‹è¯• RESTful API çš„ Java æµ‹è¯•æ¡†æ¶ï¼Œå®ƒä½¿å¼€å‘äººå‘˜/æµ‹è¯•äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°ç¼–å†™å’Œæ‰§è¡Œ API æµ‹è¯•ã€‚å®ƒçš„è®¾è®¡æ—¨åœ¨ä½¿ API æµ‹è¯•å˜å¾—ç®€å•å’Œç›´è§‚ï¼ŒåŒæ—¶æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œçµæ´»æ€§ã€‚ä»¥ä¸‹æ˜¯ REST Assured çš„ä¸€äº›é‡è¦ç‰¹ç‚¹å’Œç”¨æ³•ï¼š\nå‘èµ· HTTP è¯·æ±‚ï¼šREST Assured å…è®¸ä½ è½»æ¾åœ°æ„å»ºå’Œå‘èµ· HTTP GETã€POSTã€PUTã€DELETE ç­‰ç±»å‹çš„è¯·æ±‚ã€‚ä½ å¯ä»¥æŒ‡å®šè¯·æ±‚çš„ URLã€å¤´éƒ¨ã€å‚æ•°ã€ä½“ç­‰ä¿¡æ¯ã€‚\né“¾å¼è¯­æ³•ï¼šREST Assured ä½¿ç”¨é“¾å¼è¯­æ³•ï¼Œä½¿æµ‹è¯•ä»£ç æ›´åŠ å¯è¯»å’Œæ˜“äºç¼–å†™ã€‚ä½ å¯ä»¥æŒ‰ç…§ä¸€ç§è‡ªç„¶çš„æ–¹å¼æè¿°ä½ çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè€Œä¸éœ€è¦ç¼–å†™å¤§é‡çš„ä»£ç ã€‚\næ–­è¨€å’Œæ ¡éªŒï¼šREST Assured æä¾›äº†ä¸°å¯Œçš„æ ¡éªŒæ–¹æ³•ï¼Œå¯ä»¥ç”¨äºéªŒè¯ API å“åº”çš„çŠ¶æ€ç ã€å“åº”ä½“ã€å“åº”å¤´ç­‰ã€‚ä½ å¯ä»¥æ ¹æ®ä½ çš„æµ‹è¯•éœ€æ±‚æ·»åŠ å¤šä¸ªæ–­è¨€ã€‚\næ”¯æŒå¤šç§æ•°æ®æ ¼å¼ï¼šREST Assured æ”¯æŒå¤šç§æ•°æ®æ ¼å¼ï¼ŒåŒ…æ‹¬ JSONã€XMLã€HTMLã€Text ç­‰ã€‚ä½ å¯ä»¥ä½¿ç”¨é€‚å½“çš„æ–¹æ³•æ¥å¤„ç†ä¸åŒæ ¼å¼çš„å“åº”æ•°æ®ã€‚\né›†æˆ BDDï¼ˆè¡Œä¸ºé©±åŠ¨å¼€å‘ï¼‰ï¼šREST Assured å¯ä»¥ä¸ BDD æ¡†æ¶ï¼ˆå¦‚ Cucumberï¼‰ç»“åˆä½¿ç”¨ï¼Œä½¿ä½ å¯ä»¥æ›´å¥½åœ°æè¿°å’Œç®¡ç†æµ‹è¯•ç”¨ä¾‹ã€‚\næ¨¡æ‹Ÿ HTTP æœåŠ¡å™¨ï¼šREST Assured è¿˜åŒ…æ‹¬ä¸€ä¸ªæ¨¡æ‹Ÿ HTTP æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œå…è®¸ä½ æ¨¡æ‹Ÿ API çš„è¡Œä¸ºä»¥è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚\nå¯æ‰©å±•æ€§ï¼šREST Assured å¯ä»¥é€šè¿‡æ’ä»¶å’Œæ‰©å±•è¿›è¡Œå®šåˆ¶ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„æµ‹è¯•éœ€æ±‚ã€‚\næ€»çš„æ¥è¯´ï¼ŒREST Assured æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„ API æµ‹è¯•æ¡†æ¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ è½»æ¾åœ°è¿›è¡Œ RESTful API æµ‹è¯•ï¼Œå¹¶æä¾›äº†è®¸å¤šå·¥å…·æ¥éªŒè¯ API çš„æ­£ç¡®æ€§å’Œæ€§èƒ½ã€‚æ— è®ºæ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘äººå‘˜/æµ‹è¯•äººå‘˜ï¼ŒREST Assured éƒ½æ˜¯ä¸€ä¸ªéå¸¸æœ‰ä»·å€¼çš„å·¥å…·ï¼Œå¯ç”¨äºå¿«é€Ÿçš„ä¸Šæ‰‹ API è‡ªåŠ¨åŒ– æµ‹è¯•ã€‚\né¡¹ç›®ç»“æ„ Gradle æ„å»ºçš„ç‰ˆæœ¬ - src - main - java - (åº”ç”¨çš„ä¸»è¦æºä»£ç ) - test - java - api - (REST Assured æµ‹è¯•ä»£ç ) - UsersAPITest.java - ProductsAPITest.java - util - TestConfig.java - resources - (é…ç½®æ–‡ä»¶ã€æµ‹è¯•æ•°æ®ç­‰) - (å…¶ä»–é¡¹ç›®æ–‡ä»¶å’Œèµ„æº) - build.gradle (Gradle é¡¹ç›®é…ç½®æ–‡ä»¶) åœ¨è¿™ä¸ªç¤ºä¾‹ç›®å½•ç»“æ„ä¸­ï¼š\nsrc/test/java/api ç›®å½•ç”¨äºå­˜æ”¾ REST Assured çš„æµ‹è¯•ç±»ï¼Œæ¯ä¸ªæµ‹è¯•ç±»é€šå¸¸æ¶‰åŠåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç›¸å…³çš„ API ç«¯ç‚¹çš„æµ‹è¯•ã€‚ä¾‹å¦‚ï¼ŒUsersAPITest.java å’Œ ProductsAPITest.java å¯ä»¥åŒ…å«ç”¨æˆ·ç®¡ç†å’Œäº§å“ç®¡ç†çš„æµ‹è¯•ã€‚ src/test/java/util ç›®å½•å¯ç”¨äºå­˜æ”¾æµ‹è¯•ä¸­å…±äº«çš„å·¥å…·ç±»ï¼Œä¾‹å¦‚ç”¨äºé…ç½® REST Assured çš„ TestConfig.javaã€‚ src/test/resources ç›®å½•å¯ä»¥åŒ…å«æµ‹è¯•æ•°æ®æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ç­‰èµ„æºï¼Œè¿™äº›èµ„æºå¯ä»¥åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ã€‚ build.gradle æ˜¯ gradle é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒç”¨äºå®šä¹‰é¡¹ç›®çš„ä¾èµ–é¡¹ã€æ„å»ºé…ç½®ä»¥åŠå…¶ä»–é¡¹ç›®è®¾ç½®ã€‚ Maven æ„å»ºçš„ç‰ˆæœ¬ - src - main - java - (åº”ç”¨çš„ä¸»è¦æºä»£ç ) - test - java - api - (REST Assured æµ‹è¯•ä»£ç ) - UsersAPITest.java - ProductsAPITest.java - util - TestConfig.java - resources - (é…ç½®æ–‡ä»¶ã€æµ‹è¯•æ•°æ®ç­‰) - (å…¶ä»–é¡¹ç›®æ–‡ä»¶å’Œèµ„æº) - pom.xml (Maven é¡¹ç›®é…ç½®æ–‡ä»¶) åœ¨è¿™ä¸ªç¤ºä¾‹ç›®å½•ç»“æ„ä¸­ï¼š\nsrc/test/java/api ç›®å½•ç”¨äºå­˜æ”¾ REST Assured çš„æµ‹è¯•ç±»ï¼Œæ¯ä¸ªæµ‹è¯•ç±»é€šå¸¸æ¶‰åŠåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç›¸å…³çš„ API ç«¯ç‚¹çš„æµ‹è¯•ã€‚ä¾‹å¦‚ï¼ŒUsersAPITest.java å’Œ ProductsAPITest.java å¯ä»¥åŒ…å«ç”¨æˆ·ç®¡ç†å’Œäº§å“ç®¡ç†çš„æµ‹è¯•ã€‚ src/test/java/util ç›®å½•å¯ç”¨äºå­˜æ”¾æµ‹è¯•ä¸­å…±äº«çš„å·¥å…·ç±»ï¼Œä¾‹å¦‚ç”¨äºé…ç½® REST Assured çš„ TestConfig.javaã€‚ src/test/resources ç›®å½•å¯ä»¥åŒ…å«æµ‹è¯•æ•°æ®æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ç­‰èµ„æºï¼Œè¿™äº›èµ„æºå¯ä»¥åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ã€‚ pom.xml æ˜¯ Maven é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒç”¨äºå®šä¹‰é¡¹ç›®çš„ä¾èµ–é¡¹ã€æ„å»ºé…ç½®ä»¥åŠå…¶ä»–é¡¹ç›®è®¾ç½®ã€‚ é¡¹ç›®ä¾èµ– JDK 1.8+ ï¼Œæˆ‘ä½¿ç”¨çš„ JDK 19 Gradle 6.0+ æˆ– Maven 3.0+ï¼Œæˆ‘ä½¿ç”¨çš„ Gradle 8.44 å’Œ Maven 3.9.5 RestAssured 4.3.3+ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯æœ€æ–°çš„ 5.3.1 ç‰ˆæœ¬ è¯­æ³•ç¤ºä¾‹ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ RestAssured è¯­æ³•ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•æ‰§è¡Œä¸€ä¸ª GET è¯·æ±‚å¹¶éªŒè¯å“åº”ï¼š\né¦–å…ˆï¼Œç¡®ä¿ä½ çš„ Gradle æˆ– Maven é¡¹ç›®ä¸­å·²æ·»åŠ äº† RestAssured ä¾èµ–ã€‚\nGradle ä¾èµ–ï¼š\ndependencies { implementation \u0026#39;io.rest-assured:rest-assured:5.3.1\u0026#39; } Maven ä¾èµ–ï¼š\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.rest-assured\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;rest-assured\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼Œç¼–å†™ä»¥ä¸‹ä»£ç ï¼š\nimport io.restassured.RestAssured; import io.restassured.response.Response; import org.testng.annotations.Test; import static io.restassured.RestAssured.given; import static org.hamcrest.Matchers.equalTo; public class RestAssuredDemo { @Test public void testGetRequest() { // è®¾ç½®åŸºæœ¬ URIï¼Œè¿™é‡Œä»¥ JSONPlaceholder ä¸ºä¾‹ RestAssured.baseURI = \u0026#34;https://jsonplaceholder.typicode.com\u0026#34;; // å‘é€ GET è¯·æ±‚ï¼Œå¹¶ä¿å­˜å“åº” Response response = given() .when() .get(\u0026#34;/posts/1\u0026#34;) .then() .extract() .response(); // æ‰“å°å“åº”çš„ JSON å†…å®¹ System.out.println(\u0026#34;Response JSON: \u0026#34; + response.asString()); // éªŒè¯çŠ¶æ€ç ä¸º 200 response.then().statusCode(200); // éªŒè¯å“åº”ä¸­çš„ç‰¹å®šå­—æ®µå€¼ response.then().body(\u0026#34;userId\u0026#34;, equalTo(1)); response.then().body(\u0026#34;id\u0026#34;, equalTo(1)); response.then().body(\u0026#34;title\u0026#34;, equalTo(\u0026#34;sunt aut facere repellat provident occaecati excepturi optio reprehenderit\u0026#34;)); response.then().body(\u0026#34;body\u0026#34;, equalTo(\u0026#34;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto\u0026#34;)); } } ä¸Šè¿°ä»£ç æ‰§è¡Œäº†ä¸€ä¸ª GET è¯·æ±‚åˆ° JSONPlaceholder çš„ /posts/1 ç«¯ç‚¹ï¼Œå¹¶éªŒè¯äº†å“åº”çš„çŠ¶æ€ç å’Œç‰¹å®šå­—æ®µçš„å€¼ã€‚ä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚ä¿®æ”¹åŸºæœ¬ URI å’ŒéªŒè¯æ¡ä»¶ã€‚\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† TestNG æµ‹è¯•æ¡†æ¶ï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æµ‹è¯•æ¡†æ¶ï¼Œä¾‹å¦‚ JUnitã€‚ç¡®ä¿ä½ çš„æµ‹è¯•ç±»ä¸­åŒ…å«äº†åˆé€‚çš„å¯¼å…¥è¯­å¥ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œé€‚å½“çš„é…ç½®ã€‚\nè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ RestAssured è¯­æ³•ç¤ºä¾‹ï¼Œç”¨äºæ‰§è¡Œ GET è¯·æ±‚å’ŒéªŒè¯å“åº”ã€‚ä½ å¯ä»¥æ ¹æ®é¡¹ç›®çš„éœ€æ±‚å’Œæ¥å£çš„å¤æ‚æ€§æ¥æ„å»ºæ›´å¤æ‚çš„æµ‹è¯•ç”¨ä¾‹ã€‚\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/rest-assured-tutorial-and-environment-preparation/","summary":"åŒ…æ‹¬å…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡ã€‚åœ¨åšå®¢ä¸­ï¼Œè¯»è€…å°†äº†è§£ä»€ä¹ˆæ˜¯ REST Assured ä»¥åŠå¦‚ä½•å¼€å§‹ä½¿ç”¨å®ƒæ¥è¿›è¡Œ API æµ‹è¯•ã€‚æ•™ç¨‹å°†æ¶µç›– REST Assured çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬å¦‚ä½•è®¾ç½®æµ‹è¯•ç¯å¢ƒï¼Œå‡†å¤‡æ‰€éœ€çš„å·¥å…·å’Œèµ„æºï¼Œä»¥ä¾¿è¯»è€…å¯ä»¥å¼€å§‹ç¼–å†™å’Œæ‰§è¡Œä»–ä»¬è‡ªå·±çš„ API æµ‹è¯•ã€‚","title":"REST Assured æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»å’Œç¯å¢ƒæ­å»ºå‡†å¤‡"},{"content":"æŒç»­é›†æˆ æ¥å…¥ github action ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\nGradle + Scala ç‰ˆæœ¬ å¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/gatling-gradle-scala-demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ gatling.ymlã€‚\nç¼–è¾‘ gatling.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­ã€‚\nname: Gatling Performance Test on: push: branches: - main jobs: performance-test: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v2 - name: Set up Java uses: actions/setup-java@v2 with: java-version: 11 distribution: \u0026#39;adopt\u0026#39; - name: Run Gatling tests run: | ./gradlew gatlingRun env: GATLING_SIMULATIONS_FOLDER: src/gatling/scala - name: Archive Gatling results uses: actions/upload-artifact@v2 with: name: gatling-results path: build/reports/gatling - name: Upload Gatling results to GitHub uses: actions/upload-artifact@v2 with: name: gatling-results path: build/reports/gatling æäº¤ä»£ç ï¼šå°† gatling.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ Performance Test å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ Maven + Scala ç‰ˆæœ¬ å¯å‚è€ƒ demoï¼šhttps://github.com/Automation-Test-Starter/gatling-maven-scala-demo\nåˆ›å»º.github/workflows ç›®å½•ï¼šåœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º .github/workflows çš„ç›®å½•ã€‚è¿™å°†æ˜¯å­˜æ”¾ GitHub Actions å·¥ä½œæµç¨‹æ–‡ä»¶çš„åœ°æ–¹ã€‚\nåˆ›å»ºå·¥ä½œæµç¨‹æ–‡ä»¶ï¼šåœ¨.github/workflows ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª YAML æ ¼å¼çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼Œä¾‹å¦‚ gatling.ymlã€‚\nç¼–è¾‘ gatling.yml æ–‡ä»¶ï¼šå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ä¸­ã€‚\nname: Gatling Performance Test on: push: branches: - main jobs: performance-test: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v2 - name: Set up Java uses: actions/setup-java@v2 with: java-version: 11 distribution: \u0026#39;adopt\u0026#39; - name: Run Gatling tests run: | mvn gatling:test env: GATLING_SIMULATIONS_FOLDER: src/test/scala - name: Archive Gatling results uses: actions/upload-artifact@v2 with: name: gatling-results path: target/gatling - name: Upload Gatling results to GitHub uses: actions/upload-artifact@v2 with: name: gatling-results path: target/gatling æäº¤ä»£ç ï¼šå°† gatling.yml æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ä¸­å¹¶æäº¤ã€‚ æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨ GitHub ä¸­ï¼Œå¯¼èˆªåˆ°ä½ çš„ä»“åº“ã€‚å•å‡»ä¸Šæ–¹çš„ Actions é€‰é¡¹å¡ï¼Œç„¶åå•å‡»å·¦ä¾§çš„ Performance Test å·¥ä½œæµã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œå°±å¯ä»¥æŸ¥çœ‹ç»“æœã€‚ å‚è€ƒ galting å®˜ç½‘ï¼šhttps://gatling.io/ galting å®˜æ–¹æ–‡æ¡£ï¼šhttps://gatling.io/docs/gatling/ galting å®˜æ–¹ github: https://github.com/gatling/ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/gatling-tool-intro-ci-cd-integration/","summary":"æ–‡ç« ä»‹ç»æ€§èƒ½æµ‹è¯•å·¥å…· gatling çš„è¿›é˜¶ç”¨æ³•ï¼šCI/CD é›†æˆï¼Œä»¥ github action ä¸ºä¾‹æ¥ä»‹ç»å¦‚ä½•é›†æˆ gatling åˆ° CI/CD æµç¨‹ä¸­","title":"gatling æ€§èƒ½æµ‹è¯•æ•™ç¨‹ - è¿›é˜¶ç”¨æ³•ï¼šCI/CD é›†æˆ"},{"content":"æµ‹è¯•æŠ¥å‘Šè§£æ æ€»è§ˆ æ€»è§ˆå›¾ æ€§èƒ½æµ‹è¯•æ‰§è¡Œç»“æŸåæ‰“å¼€è¯¦ç»†çš„ html æŠ¥å‘Šï¼Œå¯ä»¥çœ‹åˆ°è¯¦ç»†çš„æ€§èƒ½æµ‹è¯•æŠ¥å‘Šï¼› å¯é€šè¿‡æŒ‡æ ‡ã€æ´»è·ƒç”¨æˆ·å’Œéšæ—¶é—´å˜åŒ–çš„è¯·æ±‚/å“åº”ä»¥åŠåˆ†å¸ƒæ¥åˆ†ææ‚¨çš„æŠ¥å‘Š\né¡µé¢ä¸­é—´æ ‡é¢˜å¤„æ˜¾ç¤º Simulation çš„åå­— å·¦ä¾§çš„åˆ—è¡¨å±•ç¤ºä¸åŒç±»å‹çš„æŠ¥å‘Šèœå•ï¼Œå¯ç‚¹å‡»åˆ‡æ¢ é¡µé¢ä¸­éƒ¨å±•ç¤ºæ€§èƒ½æµ‹è¯•æŠ¥å‘Šçš„æ€»è§ˆä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šè¯·æ±‚æ€»æ•°ã€æˆåŠŸè¯·æ±‚æ€»æ•°ã€å¤±è´¥è¯·æ±‚æ€»æ•°ã€æœ€çŸ­å“åº”æ—¶é—´ã€æœ€é•¿å“åº”æ—¶é—´ã€å¹³å‡å“åº”æ—¶é—´ã€ååé‡ã€æ ‡å‡†å·®ã€ç™¾åˆ†æ¯”åˆ†å¸ƒç­‰ã€‚ä¹Ÿä¼šå±•ç¤º gatling çš„ç‰ˆæœ¬åŠæœ¬æ¬¡æŠ¥å‘Šè¿è¡Œçš„æ—¶é—´å’Œæ—¶é•¿ å…¨å±€èœå•æŒ‡å‘ç»¼åˆç»Ÿè®¡æ•°æ®ã€‚ è¯¦ç»†ä¿¡æ¯èœå•æŒ‡å‘æ¯ä¸ªè¯·æ±‚ç±»å‹çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ è¯·æ±‚æ•°\u0026amp;å“åº”æ—¶é—´åˆ†å¸ƒå›¾ æ­¤å›¾è¡¨å±•ç¤ºäº†å“åº”æ—¶é—´åœ¨æ ‡å‡†èŒƒå›´å†…çš„åˆ†å¸ƒæƒ…å†µ å·¦ä¾§çš„åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰çš„è¯·æ±‚ä»¥åŠè¯·æ±‚å“åº”çš„æ—¶é—´åˆ†å¸ƒï¼Œçº¢è‰²ä»£è¡¨å¤±è´¥çš„è¯·æ±‚ å³è¾¹ Number of request ä»£è¡¨ç”¨æˆ·å¹¶å‘æ•°é‡ï¼Œä»¥åŠå„ä¸ªè¯·æ±‚çš„è¯·æ±‚æ•°é‡åŠå…¶æˆåŠŸå¤±è´¥çŠ¶æ€\nè¿™äº›èŒƒå›´å¯ä»¥åœ¨ gatling.conf æ–‡ä»¶ä¸­é…ç½®\nè¯·æ±‚æ ‡å‡†ç»Ÿè®¡åˆ†æå›¾ æ­¤å›¾è¡¨æ˜¾ç¤ºäº†ä¸€äº›æ ‡å‡†ç»Ÿè®¡æ•°æ®ï¼Œä¾‹å¦‚å…¨å±€å’Œæ¯ä¸ªè¯·æ±‚çš„æœ€å°å€¼ã€æœ€å¤§å€¼ã€å¹³å‡å€¼ã€æ ‡å‡†å·®å’Œç™¾åˆ†ä½æ•°ã€‚ stats æ˜¾ç¤ºäº†æ‰€æœ‰è¯·æ±‚å…·ä½“çš„æˆåŠŸå¤±è´¥æƒ…å†µ OK ä»£è¡¨æˆåŠŸï¼ŒKO ä»£è¡¨å¤±è´¥ï¼Œç™¾åˆ†æ¯” 99th pct ä»£è¡¨å¯¹äºè¿™ä¸€ä¸ª API æ€»çš„è¯·æ±‚ä¸­æœ‰ç™¾åˆ†ä¹‹ 99 çš„è¯·æ±‚ response time æ˜¯è¿™ä¸ªæ•°å€¼\nè¿™äº›ç™¾åˆ†ä½æ•°å¯ä»¥åœ¨ gatling.conf æ–‡ä»¶ä¸­é…ç½®ã€‚\næ´»è·ƒç”¨æˆ·æ•°ç»Ÿè®¡å›¾ æ­¤å›¾è¡¨å±•ç¤ºäº†æ´»è·ƒç”¨æˆ·æ•°æŒ‡çš„æ˜¯åœ¨æµ‹è¯•æ—¶é—´æ®µå†…ï¼Œæ­£åœ¨è¿›è¡Œè¯·æ±‚çš„ç”¨æˆ·æ•°ã€‚åœ¨æµ‹è¯•å¼€å§‹æ—¶ï¼Œæ´»è·ƒç”¨æˆ·æ•°ä¸º 0ã€‚å½“ç”¨æˆ·å¼€å§‹å‘é€è¯·æ±‚æ—¶ï¼Œæ´»è·ƒç”¨æˆ·æ•°å¼€å§‹å¢åŠ ã€‚å½“ç”¨æˆ·å®Œæˆè¯·æ±‚æ—¶ï¼Œæ´»è·ƒç”¨æˆ·æ•°å¼€å§‹å‡å°‘ã€‚æ´»è·ƒç”¨æˆ·æ•°çš„æœ€å¤§å€¼æ˜¯åœ¨æµ‹è¯•æœŸé—´åŒæ—¶å‘é€è¯·æ±‚çš„ç”¨æˆ·æ•°ã€‚\nå“åº”æ—¶é—´åˆ†å¸ƒå›¾ æ­¤å›¾è¡¨æ˜¾ç¤ºäº†å“åº”æ—¶é—´çš„åˆ†å¸ƒï¼ŒåŒ…æ‹¬è¯·æ±‚æˆåŠŸçš„å“åº”æ—¶é—´å’Œè¯·æ±‚å¤±è´¥çš„å“åº”æ—¶é—´ã€‚\nå“åº”æ—¶é—´ç™¾åˆ†ä½å¯¹æ¯”å›¾ æ­¤å›¾è¡¨æ˜¾ç¤ºä¸€æ®µæ—¶é—´å†…çš„å„ç§å“åº”æ—¶é—´ç™¾åˆ†ä½æ•°ï¼Œä½†ä»…é€‚ç”¨äºæˆåŠŸçš„è¯·æ±‚ã€‚ç”±äºå¤±è´¥çš„è¯·æ±‚å¯èƒ½ä¼šæå‰ç»“æŸæˆ–ç”±è¶…æ—¶å¼•èµ·ï¼Œå› æ­¤å®ƒä»¬ä¼šå¯¹ç™¾åˆ†ä½æ•°çš„è®¡ç®—äº§ç”Ÿå·¨å¤§å½±å“ã€‚\næ¯ç§’è¯·æ±‚æ•°å›¾ æ­¤å›¾è¡¨å±•ç¤ºäº†æ¯ç§’çš„è¯·æ±‚æ•°ï¼ŒåŒ…æ‹¬æˆåŠŸçš„è¯·æ±‚æ•°å’Œå¤±è´¥çš„è¯·æ±‚æ•°ã€‚\næ¯ç§’å“åº”æ•°å›¾ æ­¤å›¾è¡¨å±•ç¤ºäº†æ¯ç§’çš„å“åº”æ•°ï¼ŒåŒ…æ‹¬æˆåŠŸçš„å“åº”æ•°å’Œå¤±è´¥çš„å“åº”æ•°ã€‚\nå•ä¸ªè¯·æ±‚åˆ†ææŠ¥å‘Š å¯ç‚¹å‡»æŠ¥å‘Šé¡µé¢ä¸Šçš„ details èœå•åˆ‡æ¢åˆ° details tab é¡µé¢ï¼ŒæŸ¥çœ‹å•ä¸ªè¯·æ±‚çš„è¯¦ç»†æŠ¥å‘Š\nDetails é¡µé¢ä¸»è¦å±•ç¤ºäº†æ¯ä¸ªè¯·æ±‚çš„ç»Ÿè®¡æ•°æ®ï¼Œä¸å…¨å±€æŠ¥å‘Šç›¸ä¼¼åœ°åŒ…æ‹¬äº†å“åº”æ—¶é—´åˆ†å¸ƒå›¾ï¼Œå“åº”æ—¶é—´ç™¾åˆ†ä½å›¾ï¼Œæ¯ç§’è¯·æ±‚æ•°å›¾ï¼Œæ¯ç§’å“åº”æ•°å›¾ã€‚ä¸åŒçš„æ˜¯æœ€åº•ä¸‹æœ‰ä¸€å¼ å›¾æ˜¯æè¿°å•ä¸ªè¯·æ±‚ç›¸å¯¹äºå…¨å±€æ‰€æœ‰è¯·æ±‚çš„å“åº”æ—¶é—´ã€‚è¯¥å›¾æ¨ªåæ ‡æ˜¯æ¯ç§’å…¨å±€æ‰€æœ‰è¯·æ±‚æ•°ï¼Œçºµåæ ‡æ˜¯å•ä¸ªè¯·æ±‚çš„å“åº”æ—¶é—´ã€‚\næ€§èƒ½åœºæ™¯è®¾ç½® Injection æ³¨å…¥ ä»€ä¹ˆæ˜¯ Injection åœ¨ Gatling æ€§èƒ½æµ‹è¯•ä¸­ï¼Œ\u0026ldquo;Injection\u0026quot;æ˜¯æŒ‡å°†è™šæ‹Ÿç”¨æˆ·ï¼ˆæˆ–è´Ÿè½½ï¼‰å¼•å…¥ç³»ç»Ÿçš„ä¸€ç§æ–¹å¼ã€‚å®ƒå®šä¹‰äº†æ¨¡æ‹Ÿç”¨æˆ·å¦‚ä½•è¢«å¼•å…¥æµ‹è¯•åœºæ™¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„æ•°é‡ã€é€Ÿç‡å’Œæ–¹å¼ã€‚Injection æ˜¯ Gatling ä¸­ç”¨äºæ§åˆ¶è´Ÿè½½å’Œå¹¶å‘åº¦çš„å…³é”®æ¦‚å¿µï¼Œå…è®¸ä½ æ¨¡æ‹Ÿä¸åŒçš„ç”¨æˆ·è¡Œä¸ºå’Œè´Ÿè½½æ¨¡å‹ã€‚\nç”¨æˆ·æ³¨å…¥é…ç½®æ–‡ä»¶çš„å®šä¹‰æ˜¯é€šè¿‡ injectOpen å’Œ injectClosed æ–¹æ³•ï¼ˆScala ä¸­çš„ injectï¼‰å®Œæˆçš„ã€‚æ­¤æ–¹æ³•å°†æŒ‰é¡ºåºå¤„ç†çš„æ³¨å…¥æ­¥éª¤åºåˆ—ä½œä¸ºå‚æ•°ã€‚æ¯ä¸ªæ­¥éª¤éƒ½å®šä¹‰äº†ä¸€ç»„ç”¨æˆ·ï¼Œä»¥åŠå¦‚ä½•å°†è¿™äº›ç”¨æˆ·æ³¨å…¥åˆ°åœºæ™¯ä¸­ã€‚\nå®˜ç½‘æ›´å¤šä»‹ç»ï¼šhttps://gatling.io/docs/gatling/reference/current/core/injection/\nå¸¸ç”¨ Injection åœºæ™¯ Open Model å¼€æ”¾æ¨¡å‹åœºæ™¯ setUp( scn.inject( nothingFor(4), // 1 atOnceUsers(10), // 2 rampUsers(10).during(5), // 3 constantUsersPerSec(20).during(15), // 4 constantUsersPerSec(20).during(15).randomized, // 5 rampUsersPerSec(10).to(20).during(10.minutes), // 6 rampUsersPerSec(10).to(20).during(10.minutes).randomized, // 7 stressPeakUsers(1000).during(20) // 8 ).protocols(httpProtocol) ) nothingFor(duration)ï¼šè®¾ç½®ä¸€æ®µåœæ­¢çš„æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´ä»€ä¹ˆéƒ½ä¸åš atOnceUsers(nbUsers)ï¼šç«‹å³æ³¨å…¥ä¸€å®šæ•°é‡çš„è™šæ‹Ÿç”¨æˆ· rampUsers(nbUsers) during(duration)ï¼šåœ¨æŒ‡å®šæ—¶é—´å†…ï¼Œè®¾ç½®ä¸€å®šæ•°é‡é€æ­¥æ³¨å…¥çš„è™šæ‹Ÿç”¨æˆ· constantUsersPerSec(rate) during(duration)ï¼šå®šä¹‰ä¸€ä¸ªåœ¨æ¯ç§’é’Ÿæ’å®šçš„å¹¶å‘ç”¨æˆ·æ•°ï¼ŒæŒç»­æŒ‡å®šçš„æ—¶é—´ constantUsersPerSec(rate) during(duration) randomizedï¼šå®šä¹‰ä¸€ä¸ªåœ¨æ¯ç§’é’Ÿå›´ç»•æŒ‡å®šå¹¶å‘æ•°éšæœºå¢å‡çš„å¹¶å‘ï¼ŒæŒç»­æŒ‡å®šæ—¶é—´ rampUsersPerSec(rate1) to (rate2) during(duration)ï¼šå®šä¹‰ä¸€ä¸ªå¹¶å‘æ•°åŒºé—´ï¼Œè¿è¡ŒæŒ‡å®šæ—¶é—´ï¼Œå¹¶å‘å¢é•¿çš„å‘¨æœŸæ˜¯ä¸€ä¸ªè§„å¾‹çš„å€¼ rampUsersPerSec(rate1) to(rate2) during(duration) randomizedï¼šå®šä¹‰ä¸€ä¸ªå¹¶å‘æ•°åŒºé—´ï¼Œè¿è¡ŒæŒ‡å®šæ—¶é—´ï¼Œå¹¶å‘å¢é•¿çš„å‘¨æœŸæ˜¯ä¸€ä¸ªéšæœºçš„å€¼ stressPeakUsers(nbUsers).during(duration) ï¼šæŒ‰ç…§æ‹‰ä¼¸åˆ°ç»™å®šæŒç»­æ—¶é—´çš„é˜¶è·ƒå‡½æ•°çš„å¹³æ»‘è¿‘ä¼¼æ³¨å…¥ç»™å®šæ•°é‡çš„ç”¨æˆ·ã€‚ Closed Model é—­åˆæ¨¡å‹åœºæ™¯ setUp( scn.inject( constantConcurrentUsers(10).during(10), // 1 rampConcurrentUsers(10).to(20).during(10) // 2 ) ) constantConcurrentUsers(nbUsers).during(duration) ï¼šæ³¨å…¥ä»¥ä½¿ç³»ç»Ÿä¸­çš„å¹¶å‘ç”¨æˆ·æ•°æ’å®š rampConcurrentUsers(fromNbUsers).to(toNbUsers).during(duration) ï¼šæ³¨å…¥ï¼Œä½¿ç³»ç»Ÿä¸­çš„å¹¶å‘ç”¨æˆ·æ•°ä»ä¸€ä¸ªæ•°å­—çº¿æ€§å¢åŠ åˆ°å¦ä¸€ä¸ªæ•°å­— Meta DSL åœºæ™¯ \u0026ldquo;Meta DSL\u0026quot;æ˜¯ä¸€ç§ç‰¹æ®Šçš„é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰ï¼Œç”¨äºæè¿°æ€§èƒ½æµ‹è¯•åœºæ™¯çš„å…ƒæ•°æ®ï¼ˆmetadataï¼‰å’Œå…¨å±€é…ç½®ã€‚Meta DSL å…è®¸ä½ å®šä¹‰æ€§èƒ½æµ‹è¯•ä¸­çš„ä¸€äº›å…¨å±€è®¾ç½®å’Œå‚æ•°ï¼Œä»¥å½±å“æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ç‰¹å®šäºæŸä¸ªåœºæ™¯ã€‚\nå¯ä»¥ä½¿ç”¨ Meta DSL çš„å…ƒç´ ä»¥æ›´ç®€å•çš„æ–¹å¼ç¼–å†™æµ‹è¯•ã€‚å¦‚æœæ‚¨æƒ³è¦é“¾æ¥çº§åˆ«å’Œæ–œå¡ä»¥è¾¾åˆ°åº”ç”¨ç¨‹åºçš„æé™ï¼ˆæœ‰æ—¶ç§°ä¸ºå®¹é‡è´Ÿè½½æµ‹è¯•çš„æµ‹è¯•ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¸¸è§„ DSL æ‰‹åŠ¨å®Œæˆï¼Œå¹¶ä½¿ç”¨ map å’Œ flatMap è¿›è¡Œå¾ªç¯ã€‚\nincrementUsersPerSec setUp( // ç”Ÿæˆä¸€ä¸ªå¼€æ”¾çš„å·¥ä½œé‡æ³¨å…¥é…ç½®æ–‡ä»¶ // æ¯ç§’åˆ†åˆ«æœ‰ 10ã€15ã€20ã€25 å’Œ 30 ä¸ªç”¨æˆ·åˆ°è¾¾ // æ¯ä¸ªçº§åˆ«æŒç»­ 10 ç§’ // æ¯çº§æŒç»­ 10 ç§’ scn.inject( incrementUsersPerSec(5.0) .times(5) .eachLevelLasting(10) .separatedByRampsLasting(10) .startingFrom(10) // Double ) incrementConcurrentUsers setUp( // ç”Ÿæˆä¸€ä¸ªå°é—­çš„å·¥ä½œè´Ÿè½½æ³¨å…¥é…ç½®æ–‡ä»¶ // å¹¶å‘ç”¨æˆ·åˆ†åˆ«ä¸º 10ã€15ã€20ã€25 å’Œ 30 çº§ // æ¯ä¸ªçº§åˆ«æŒç»­ 10 ç§’ // æ¯çº§æŒç»­ 10 ç§’ scn.inject( incrementConcurrentUsers(5) .times(5) .eachLevelLasting(10) .separatedByRampsLasting(10) .startingFrom(10) // Int ) ) incrementUsersPerSec ç”¨äºå¼€æ”¾å¼å·¥ä½œè´Ÿè½½ï¼ŒincrementConcurrentUsers ç”¨äºå°é—­å¼å·¥ä½œè´Ÿè½½ï¼ˆç”¨æˆ·æ•°/ç§’ä¸å¹¶å‘ç”¨æˆ·æ•°ï¼‰ã€‚\nseparatedByRampsLasting å’Œ startingFrom éƒ½æ˜¯å¯é€‰çš„ã€‚å¦‚æœæ‚¨ä¸æŒ‡å®šæ–œå¡ï¼Œæµ‹è¯•å®Œæˆåå°±ä¼šç«‹å³ä»ä¸€ä¸ªçº§åˆ«è·³åˆ°å¦ä¸€ä¸ªçº§åˆ«ã€‚å¦‚æœæ‚¨ä¸æŒ‡å®šå¯åŠ¨ç”¨æˆ·æ•°ï¼Œæµ‹è¯•å°†ä» 0 ä¸ªå¹¶å‘ç”¨æˆ·æˆ–æ¯ç§’ 0 ä¸ªç”¨æˆ·å¼€å§‹ï¼Œå¹¶ç«‹å³è¿›å…¥ä¸‹ä¸€æ­¥ã€‚\nConcurrent Scenarios å¹¶å‘åœºæ™¯ setUp( scenario1.inject(injectionProfile1), scenario2.inject(injectionProfile2) ) æ‚¨å¯ä»¥åœ¨åŒä¸€ä¸ª setUp å—ä¸­é…ç½®å¤šä¸ªåœºæ™¯åŒæ—¶å¯åŠ¨å¹¶å¹¶å‘æ‰§è¡Œã€‚\nå…¶ä»–åœºæ™¯ æŸ¥çœ‹å®˜ç½‘ä»‹ç»ï¼šhttps://gatling.io/docs/gatling/reference/current/core/injection/\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/gatling-tool-intro-advanced-usage/","summary":"æ–‡ç« ä»‹ç»æ€§èƒ½æµ‹è¯•å·¥å…· gatling çš„è¿›é˜¶ç”¨æ³•ï¼šæ€§èƒ½æµ‹è¯•æŠ¥å‘Šçš„è§£æï¼Œä¸åŒç±»å‹çš„æµ‹è¯•æŠ¥å‘ŠæŠ¥è¡¨ä»‹ç»ï¼Œä¸åŒä¸šåŠ¡ç±»å‹ä¸‹çš„æ€§èƒ½æµ‹è¯•åœºæ™¯é…ç½®","title":"gatling æ€§èƒ½æµ‹è¯•æ•™ç¨‹ - è¿›é˜¶ç”¨æ³•ï¼šæŠ¥å‘Šè§£æå’Œåœºæ™¯è®¾ç½®"},{"content":"ä» 0 åˆ° 1 æ­å»ºè‡ªå·±çš„ Gatling å·¥ç¨‹ Gradle + Scala ç‰ˆæœ¬ åˆ›å»ºä¸€ä¸ªç©ºçš„ Gradle å·¥ç¨‹ mkdir gatling-gradle-demo cd gatling-gradle-demo gradle init é…ç½®é¡¹ç›® build.gradle åœ¨ é¡¹ç›®ä¸­ build.gradle æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹\nå¯ copy æœ¬é¡¹ç›®ä¸­çš„ build.gradle æ–‡ä»¶å†…å®¹ï¼Œæ›´å¤šé…ç½®å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£\n// æ’ä»¶é…ç½® plugins { id \u0026#39;scala\u0026#39; // scalaæ’ä»¶å£°æ˜ï¼ˆåŸºäºå¼€å‘å·¥å…·æ’ä»¶ï¼‰ id \u0026#39;io.gatling.gradle\u0026#39; version \u0026#39;3.9.5.6\u0026#39; // åŸºäºgradleçš„gatlingæ¡†æ¶æ’ä»¶ç‰ˆæœ¬å£°æ˜ } //ä»“åº“æºé…ç½® repositories { // ä½¿ç”¨ maven ä¸­å¿ƒä»“åº“æº mavenCentral() } // gatling é…ç½® gatling { // logback root levelï¼Œå¦‚æœé…ç½®æ–‡ä»¶å¤¹ä¸­ä¸å­˜åœ¨ logback.xmlï¼Œåˆ™é»˜è®¤ Gatling æ§åˆ¶å°æ—¥å¿—çº§åˆ« logLevel = \u0026#39;WARN\u0026#39; // æ‰§è¡Œè®°å½• HTTP è¯·æ±‚çš„è¯¦ç»†ç¨‹åº¦ // set to \u0026#39;ALL\u0026#39; for all HTTP traffic in TRACE, \u0026#39;FAILURES\u0026#39; for failed HTTP traffic in DEBUG logHttp = \u0026#39;FAILURES\u0026#39; // Simulations è¿‡æ»¤å™¨ simulations = { include \u0026#34;**/simulation/*.scala\u0026#34; } } // ä¾èµ–é…ç½® dependencies { // å›¾è¡¨åº“ï¼Œç”¨äºç”ŸæˆæŠ¥å‘Šå›¾è¡¨ gatling \u0026#39;io.gatling.highcharts:gatling-charts-highcharts:3.8.3\u0026#39; } gradle build é¡¹ç›®å¹¶åˆå§‹åŒ– ç”¨ç¼–è¾‘å™¨æ‰“å¼€æœ¬é¡¹ç›® Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç¡®è®¤é¡¹ç›® build æˆåŠŸ gradle build åˆå§‹åŒ–å®Œæˆï¼šå®Œæˆå‘å¯¼åï¼ŒGradle å°†åœ¨é¡¹ç›®ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªåŸºæœ¬çš„ Gradle é¡¹ç›®ç»“æ„ åˆå§‹åŒ–ç›®å½• åœ¨ src/gatling/scala ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª simulation ç›®å½•ï¼Œç”¨äºå­˜æ”¾æµ‹è¯•è„šæœ¬\nGatling æµ‹è¯•é€šå¸¸ä½äº src/gatling ç›®å½•ä¸­ã€‚ä½ éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰‹åŠ¨åˆ›å»º src ç›®å½•ï¼Œç„¶ååœ¨ src ç›®å½•ä¸‹åˆ›å»º gatling ç›®å½•ã€‚åœ¨ gatling ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥åˆ›å»ºä½ çš„æµ‹è¯•æ¨¡æ‹Ÿæ–‡ä»¶å¤¹ simulationï¼Œä»¥åŠå…¶ä»–æ–‡ä»¶å¤¹ï¼Œå¦‚ dataã€bodiesã€resources ç­‰ã€‚\nç¼–å†™è„šæœ¬ åœ¨ simulation ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª demo.scala æ–‡ä»¶ï¼Œç”¨äºç¼–å†™æµ‹è¯•è„šæœ¬\nç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒ\nè„šæœ¬åŒ…å«äº†ä¸¤ä¸ªåœºæ™¯ï¼Œä¸€ä¸ªæ˜¯ get è¯·æ±‚ï¼Œä¸€ä¸ªæ˜¯ post è¯·æ±‚ get æ¥å£éªŒè¯æ¥å£è¿”å›çŠ¶æ€ç ä¸º 200ï¼Œpost æ¥å£éªŒè¯æ¥å£è¿”å›çŠ¶æ€ç ä¸º 201 get æ¥å£ä½¿ç”¨äº† rampUsersï¼Œpost æ¥å£ä½¿ç”¨äº† constantConcurrentUsers rampUsersï¼šåœ¨æŒ‡å®šæ—¶é—´å†…é€æ¸å¢åŠ å¹¶å‘ç”¨æˆ·æ•°ï¼ŒconstantConcurrentUsersï¼šåœ¨æŒ‡å®šæ—¶é—´å†…ä¿æŒå¹¶å‘ç”¨æˆ·æ•°ä¸å˜ ä¸¤ä¸ªæ¥å£çš„å¹¶å‘ç”¨æˆ·æ•°éƒ½æ˜¯ 10 ä¸ªï¼ŒæŒç»­æ—¶é—´éƒ½æ˜¯ 10 ç§’ ä¸¤ä¸ªæ¥å£çš„è¯·æ±‚é—´éš”éƒ½æ˜¯ 2 ç§’\npackage simulation import scala.concurrent.duration._ import io.gatling.core.Predef._ import io.gatling.http.Predef._ class demo extends Simulation { val httpProtocol = http .baseUrl(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) // 5 val scn = scenario(\u0026#34;GetSimulation\u0026#34;) .exec(http(\u0026#34;get_demo\u0026#34;) .get(\u0026#34;/posts/1\u0026#34;) .check(status.is(200))) .pause(2) val scn1 = scenario(\u0026#34;PostSimulation\u0026#34;) .exec(http(\u0026#34;post_demo\u0026#34;) .post(\u0026#34;/posts\u0026#34;) .body(StringBody(\u0026#34;\u0026#34;\u0026#34;{\u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;,\u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;,\u0026#34;userId\u0026#34;: 1}\u0026#34;\u0026#34;\u0026#34;)).asJson .check(status.is(201))) .pause(2) setUp( scn.inject(rampUsers(10) during(10 seconds)), scn1.inject(constantConcurrentUsers(10) during(10 seconds)) ).protocols(httpProtocol) } è°ƒè¯•è„šæœ¬ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿è¡Œæµ‹è¯•è„šæœ¬å¹¶æŸ¥çœ‹æŠ¥å‘Š\ngradle gatlingRun Maven + Scala ç‰ˆæœ¬ åˆ›å»ºä¸€ä¸ªç©ºçš„ Maven å·¥ç¨‹ mvn archetype:generate -DgroupId=demo.gatlin.maven -DartifactId=gatling-maven-demo åˆå§‹åŒ–å®Œæˆï¼šå®Œæˆå‘å¯¼åï¼ŒMaven å°†åœ¨æ–°å»ºé¡¹ç›®ç›®å½•å¹¶ç”Ÿæˆä¸€ä¸ªåŸºæœ¬çš„ Maven é¡¹ç›®ç»“æ„\né…ç½®é¡¹ç›® pom.xml åœ¨ é¡¹ç›®ä¸­ pom.xml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹\nå¯ copy æœ¬é¡¹ç›®ä¸­çš„ pom.xml æ–‡ä»¶å†…å®¹ï¼Œæ›´å¤šé…ç½®å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£\n\u0026lt;!-- ä¾èµ–é…ç½® --\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.gatling.highcharts\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;gatling-charts-highcharts\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.9.5\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; \u0026lt;!-- æ’ä»¶é…ç½® --\u0026gt; \u0026lt;build\u0026gt; \u0026lt;plugins\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;io.gatling\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;gatling-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.6.0\u0026lt;/version\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;net.alchim31.maven\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;scala-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.8.1\u0026lt;/version\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;scalaVersion\u0026gt;2.13.12\u0026lt;/scalaVersion\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;executions\u0026gt; \u0026lt;execution\u0026gt; \u0026lt;goals\u0026gt; \u0026lt;goal\u0026gt;testCompile\u0026lt;/goal\u0026gt; \u0026lt;/goals\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;jvmArgs\u0026gt; \u0026lt;jvmArg\u0026gt;-Xss100M\u0026lt;/jvmArg\u0026gt; \u0026lt;/jvmArgs\u0026gt; \u0026lt;args\u0026gt; \u0026lt;arg\u0026gt;-deprecation\u0026lt;/arg\u0026gt; \u0026lt;arg\u0026gt;-feature\u0026lt;/arg\u0026gt; \u0026lt;arg\u0026gt;-unchecked\u0026lt;/arg\u0026gt; \u0026lt;arg\u0026gt;-language:implicitConversions\u0026lt;/arg\u0026gt; \u0026lt;arg\u0026gt;-language:postfixOps\u0026lt;/arg\u0026gt; \u0026lt;/args\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/execution\u0026gt; \u0026lt;/executions\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;/plugins\u0026gt; \u0026lt;/build\u0026gt; åˆå§‹åŒ–ç›®å½• åœ¨ src/test/scala ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª simulation ç›®å½•ï¼Œç”¨äºå­˜æ”¾æµ‹è¯•è„šæœ¬\nscala æµ‹è¯•é€šå¸¸ä½äº src/test ç›®å½•ä¸­ã€‚ä½ éœ€è¦åœ¨é¡¹ç›® test ç›®å½•ä¸‹åˆ›å»º scala ç›®å½•ã€‚åœ¨ scala ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥åˆ›å»ºä½ çš„æµ‹è¯•æ¨¡æ‹Ÿæ–‡ä»¶å¤¹ simulationï¼Œä»¥åŠå…¶ä»–æ–‡ä»¶å¤¹ï¼Œå¦‚ dataã€bodiesã€resources ç­‰ã€‚\nç¼–å†™è„šæœ¬ åœ¨ simulation ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª demo.scala æ–‡ä»¶ï¼Œç”¨äºç¼–å†™æµ‹è¯•è„šæœ¬\nç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼Œå¯ä¾›å‚è€ƒ\nè„šæœ¬åŒ…å«äº†ä¸¤ä¸ªåœºæ™¯ï¼Œä¸€ä¸ªæ˜¯ get è¯·æ±‚ï¼Œä¸€ä¸ªæ˜¯ post è¯·æ±‚ get æ¥å£éªŒè¯æ¥å£è¿”å›çŠ¶æ€ç ä¸º 200ï¼Œpost æ¥å£éªŒè¯æ¥å£è¿”å›çŠ¶æ€ç ä¸º 201 get æ¥å£ä½¿ç”¨äº† rampUsersï¼Œpost æ¥å£ä½¿ç”¨äº† constantConcurrentUsers rampUsersï¼šåœ¨æŒ‡å®šæ—¶é—´å†…é€æ¸å¢åŠ å¹¶å‘ç”¨æˆ·æ•°ï¼ŒconstantConcurrentUsersï¼šåœ¨æŒ‡å®šæ—¶é—´å†…ä¿æŒå¹¶å‘ç”¨æˆ·æ•°ä¸å˜ ä¸¤ä¸ªæ¥å£çš„å¹¶å‘ç”¨æˆ·æ•°éƒ½æ˜¯ 10 ä¸ªï¼ŒæŒç»­æ—¶é—´éƒ½æ˜¯ 10 ç§’ ä¸¤ä¸ªæ¥å£çš„è¯·æ±‚é—´éš”éƒ½æ˜¯ 2 ç§’\npackage simulation import scala.concurrent.duration._ import io.gatling.core.Predef._ import io.gatling.http.Predef._ class demo extends Simulation { val httpProtocol = http .baseUrl(\u0026#34;https://jsonplaceholder.typicode.com\u0026#34;) // 5 val scn = scenario(\u0026#34;GetSimulation\u0026#34;) .exec(http(\u0026#34;get_demo\u0026#34;) .get(\u0026#34;/posts/1\u0026#34;) .check(status.is(200))) .pause(2) val scn1 = scenario(\u0026#34;PostSimulation\u0026#34;) .exec(http(\u0026#34;post_demo\u0026#34;) .post(\u0026#34;/posts\u0026#34;) .body(StringBody(\u0026#34;\u0026#34;\u0026#34;{\u0026#34;title\u0026#34;: \u0026#34;foo\u0026#34;,\u0026#34;body\u0026#34;: \u0026#34;bar\u0026#34;,\u0026#34;userId\u0026#34;: 1}\u0026#34;\u0026#34;\u0026#34;)).asJson .check(status.is(201))) .pause(2) setUp( scn.inject(rampUsers(10) during(10 seconds)), scn1.inject(constantConcurrentUsers(10) during(10 seconds)) ).protocols(httpProtocol) } è°ƒè¯•è„šæœ¬ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿è¡Œæµ‹è¯•è„šæœ¬å¹¶æŸ¥çœ‹æŠ¥å‘Š\nmvn gatling:test æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/gatling-tool-intro2/","summary":"æ–‡ç« ä»‹ç»æ€§èƒ½æµ‹è¯•å·¥å…· gatling çš„è¿›é˜¶ä»‹ç»ï¼šä» 0 åˆ° 1 æ­å»ºè‡ªå·±çš„ Gatling å·¥ç¨‹ï¼Œä»‹ç»äº† Gatling çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•æ­å»ºè‡ªå·±çš„ Gatling å·¥ç¨‹ï¼Œç¼–å†™æ€§èƒ½æµ‹è¯•è„šæœ¬ï¼ŒæŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šç­‰","title":"gatling æ€§èƒ½æµ‹è¯•æ•™ç¨‹ï¼šä» 0 åˆ° 1 æ­å»ºè‡ªå·±çš„ Gatling å·¥ç¨‹"},{"content":"Gatling ä»‹ç» Gatling æ˜¯ä¸€ä¸ªç”¨äºæ€§èƒ½æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•çš„å¼€æºå·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºæµ‹è¯• Web åº”ç”¨ç¨‹åºã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäº Scala ç¼–ç¨‹è¯­è¨€çš„é«˜æ€§èƒ½å·¥å…·ï¼Œç”¨äºæ¨¡æ‹Ÿå¹¶æµ‹é‡åº”ç”¨ç¨‹åºåœ¨ä¸åŒè´Ÿè½½ä¸‹çš„æ€§èƒ½ã€‚\nä»¥ä¸‹æ˜¯ Gatling çš„ä¸€äº›é‡è¦ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼š\nåŸºäº Scala ç¼–ç¨‹è¯­è¨€ï¼šGatling çš„æµ‹è¯•è„šæœ¬ä½¿ç”¨ Scala ç¼–å†™ï¼Œè¿™ä½¿å¾—å®ƒå…·æœ‰å¼ºå¤§çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œå…è®¸ç”¨æˆ·ç¼–å†™å¤æ‚çš„æµ‹è¯•åœºæ™¯å’Œé€»è¾‘ã€‚ é«˜æ€§èƒ½ï¼šGatling è¢«è®¾è®¡ä¸ºé«˜æ€§èƒ½çš„è´Ÿè½½æµ‹è¯•å·¥å…·ã€‚å®ƒä½¿ç”¨äº†éé˜»å¡çš„ I/O å’Œå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿå¤§é‡å¹¶å‘ç”¨æˆ·ï¼Œä»è€Œæ›´å¥½åœ°æ¨¡æ‹ŸçœŸå®ä¸–ç•Œä¸­çš„è´Ÿè½½æƒ…å†µã€‚ æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ï¼šå°½ç®¡ Gatling çš„æµ‹è¯•è„šæœ¬æ˜¯ä½¿ç”¨ Scala ç¼–å†™çš„ï¼Œä½†å®ƒçš„ DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰éå¸¸ç®€å•ï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚å³ä½¿ä½ ä¸ç†Ÿæ‚‰ Scalaï¼Œä¹Ÿå¯ä»¥å¿«é€Ÿå­¦ä¼šå¦‚ä½•åˆ›å»ºæµ‹è¯•è„šæœ¬ã€‚ ä¸°å¯Œçš„åŠŸèƒ½ï¼šGatling æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¯·æ±‚å’Œå“åº”å¤„ç†ã€æ•°æ®æå–ã€æ¡ä»¶æ–­è¨€ã€æ€§èƒ½æŠ¥å‘Šç”Ÿæˆç­‰ã€‚è¿™äº›åŠŸèƒ½ä½¿ä½ èƒ½å¤Ÿåˆ›å»ºå¤æ‚çš„æµ‹è¯•åœºæ™¯ï¼Œå¹¶å¯¹åº”ç”¨ç¨‹åºçš„æ€§èƒ½è¿›è¡Œå…¨é¢çš„è¯„ä¼°ã€‚ å¤šåè®®æ”¯æŒï¼šé™¤äº† HTTP å’Œ HTTPSï¼ŒGatling è¿˜æ”¯æŒå…¶ä»–åè®®ï¼Œå¦‚ WebSocketï¼ŒJMSï¼Œå’Œ SMTPã€‚è¿™ä½¿å¾—å®ƒé€‚ç”¨äºæµ‹è¯•å„ç§ä¸åŒç±»å‹çš„åº”ç”¨ç¨‹åºã€‚ å®æ—¶ç»“æœåˆ†æï¼šGatling å¯ä»¥åœ¨æµ‹è¯•è¿è¡ŒæœŸé—´æä¾›å®æ—¶çš„æ€§èƒ½æ•°æ®å’Œå›¾å½¢åŒ–æŠ¥å‘Šï¼Œå¸®åŠ©ä½ å¿«é€Ÿå‘ç°æ€§èƒ½é—®é¢˜ã€‚ å¼€æºå’Œæ´»è·ƒçš„ç¤¾åŒºï¼šGatling æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ‹¥æœ‰ä¸€ä¸ªæ´»è·ƒçš„ç¤¾åŒºï¼Œä¸æ–­æ›´æ–°å’Œæ”¹è¿›å·¥å…·ã€‚ æ”¯æŒ CI/CD é›†æˆï¼šGatling å¯ä»¥ä¸ CI/CD å·¥å…·ï¼ˆå¦‚ Jenkinsï¼‰é›†æˆï¼Œä»¥ä¾¿åœ¨æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜æµç¨‹ä¸­æ‰§è¡Œæ€§èƒ½æµ‹è¯•ã€‚ æ€»çš„æ¥è¯´ï¼ŒGatling æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œé€‚ç”¨äºæµ‹è¯•å„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼Œå¸®åŠ©å¼€å‘å›¢é˜Ÿè¯†åˆ«å’Œè§£å†³æ€§èƒ½é—®é¢˜ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å…·æœ‰ç¨³å®šçš„æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ã€‚\nç¯å¢ƒæ­å»º ç”±äºæˆ‘æ˜¯ macbookï¼Œåé¢çš„ä»‹ç»å‡ æœ¬ä¼šä»¥ macbook demo ä¸ºä¾‹ï¼Œwindows çš„åŒå­¦å¯ä»¥è‡ªè¡Œå‚è€ƒ\nVSCode + Gradle + Scala ç‰ˆæœ¬ å‡†å¤‡å·¥ä½œ å¼€å‘å·¥å…·ï¼šVSCode å®‰è£… Gradle ç‰ˆæœ¬\u0026gt;=6.0ï¼Œæˆ‘ä½¿ç”¨çš„ Gradle 8.44 å®‰è£… JDK ç‰ˆæœ¬\u0026gt;=8ï¼Œæˆ‘ä½¿ç”¨çš„ JDK 19 å®‰è£…æ’ä»¶ VSCode æœç´¢ Scala (Metals) æ’ä»¶è¿›è¡Œå®‰è£… VSCode æœç´¢ Gradle for Java æ’ä»¶è¿›è¡Œå®‰è£… å®˜æ–¹ demo åˆå§‹åŒ–\u0026amp;è°ƒè¯• å‰é¢å…ˆä¼šç”¨å®˜æ–¹ demo å·¥ç¨‹æ¥åšåˆå§‹åŒ–å’Œè°ƒè¯•ï¼Œåé¢å†ä»‹ç»å¦‚ä½•è‡ªå·±åˆ›å»ºå·¥ç¨‹\nå…‹éš†å®˜æ–¹ demo å·¥ç¨‹ git clone git@github.com:gatling/gatling-gradle-plugin-demo-scala.git ä½¿ç”¨ VSCode æ‰“å¼€å…‹éš†ä¸‹æ¥çš„å®˜æ–¹ demo å·¥ç¨‹\nç”¨ VSCode æ‰“å¼€æœ¬é¡¹ç›® Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\ngradle build è¿è¡Œå·¥ç¨‹ä¸­çš„ demo gradle gatlingRun æŸ¥çœ‹å‘½ä»¤è¡Œè¿è¡Œç»“æœ ç‚¹å‡»å‘½ä»¤è¡ŒæŠ¥å‘Šä¸­çš„ html æŠ¥å‘Šé“¾æ¥ï¼Œå¹¶ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œå³å¯æŸ¥çœ‹è¯¦ç»†çš„æŠ¥å‘Šä¿¡æ¯ VSCode + Maven + Scala ç‰ˆæœ¬ å‡†å¤‡å·¥ä½œ å¼€å‘å·¥å…·ï¼šVSCode å®‰è£… Mavenï¼Œæˆ‘ä½¿ç”¨çš„ Maven 3.9.5 JDK ç‰ˆæœ¬\u0026gt;=8ï¼Œæˆ‘ä½¿ç”¨çš„ JDK 19 å®‰è£…æ’ä»¶ VSCode æœç´¢ Scala (Metals) æ’ä»¶è¿›è¡Œå®‰è£… VSCode æœç´¢ Maven for Java æ’ä»¶è¿›è¡Œå®‰è£… å®˜æ–¹ demo åˆå§‹åŒ–\u0026amp;è°ƒè¯• å‰é¢å…ˆä¼šç”¨å®˜æ–¹ demo å·¥ç¨‹æ¥åšåˆå§‹åŒ–å’Œè°ƒè¯•ï¼Œåé¢å†ä»‹ç»å¦‚ä½•è‡ªå·±åˆ›å»ºå·¥ç¨‹\nå…‹éš†å®˜æ–¹ demo å·¥ç¨‹ git clone git@github.com:gatling/gatling-maven-plugin-demo-scala.git ä½¿ç”¨ VSCode æ‰“å¼€å…‹éš†ä¸‹æ¥çš„å®˜æ–¹ demo å·¥ç¨‹\nç”¨ VSCode æ‰“å¼€æœ¬é¡¹ç›® Terminal çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œå·¥ç¨‹ä¸­çš„ demo\nmvn gatling:test æŸ¥çœ‹å‘½ä»¤è¡Œè¿è¡Œç»“æœ ç‚¹å‡»å‘½ä»¤è¡ŒæŠ¥å‘Šä¸­çš„ html æŠ¥å‘Šé“¾æ¥ï¼Œå¹¶ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œå³å¯æŸ¥çœ‹è¯¦ç»†çš„æŠ¥å‘Šä¿¡æ¯ IDEA + Gradle + Scala ç‰ˆæœ¬ ä¸ VSCode ä¸‹åŸºæœ¬ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†\nå·®å¼‚ç‚¹å¦‚ä¸‹ï¼š\nIDEA æœç´¢ Scala æ’ä»¶è¿›è¡Œå®‰è£… æ–°çš„è¿è¡Œæ–¹å¼ï¼šå³é”®é€‰æ‹©é¡¹ç›®ç›®å½•ä¸‹çš„ Engine.scala æ–‡ä»¶ï¼Œé€‰æ‹© Run \u0026lsquo;Engine\u0026rsquo;ä¹Ÿå¯ä»¥è¿è¡Œ demoï¼ˆè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦æŒ‰å›è½¦é”®ç¡®è®¤å“¦ï¼‰ IDEA + Maven + Scala ç‰ˆæœ¬ ä¸ VSCode ä¸‹åŸºæœ¬ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†\nå·®å¼‚ç‚¹å¦‚ä¸‹ï¼š\nIDEA æœç´¢ Scala æ’ä»¶è¿›è¡Œå®‰è£… æ–°çš„è¿è¡Œæ–¹å¼ï¼šå³é”®é€‰æ‹©é¡¹ç›®ç›®å½•ä¸‹çš„ Engine.scala æ–‡ä»¶ï¼Œé€‰æ‹© Run \u0026lsquo;Engine\u0026rsquo;ä¹Ÿå¯ä»¥è¿è¡Œ demoï¼ˆè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦æŒ‰å›è½¦é”®ç¡®è®¤å“¦ï¼‰ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/performance-testing/gatling-tool-intro1/","summary":"æ–‡ç« ä»‹ç»æ€§èƒ½æµ‹è¯•å·¥å…· gatling çš„æ–°æ‰‹å…¥é—¨ä»‹ç»ï¼Œç¯å¢ƒæ­å»ºï¼Œå¦‚ä½•å°†å®˜æ–¹ demo è·‘èµ·æ¥","title":"gatling æ€§èƒ½æµ‹è¯•æ•™ç¨‹ï¼šå…¥é—¨ä»‹ç»"},{"content":"ä¸ºä»€ä¹ˆé€‰æ‹© bruno å®˜æ–¹è¯´æ˜ï¼šhttps://github.com/usebruno/bruno/discussions/269\nä¸ postman çš„å¯¹æ¯”ï¼šhttps://www.usebruno.com/compare/bruno-vs-postman\nå¼€æºï¼ŒMIT License\nå®¢æˆ·ç«¯å…¨å¹³å°æ”¯æŒ (Mac/linux/Windows)\nç¦»çº¿å®¢æˆ·ç«¯ï¼Œæ— äº‘åŒæ­¥åŠŸèƒ½è®¡åˆ’\næ”¯æŒ Postman/insomina è„šæœ¬å¯¼å…¥ï¼ˆåªèƒ½å¯¼å…¥ API è¯·æ±‚è„šæœ¬ï¼Œæ— æ³•å¯¼å…¥æµ‹è¯•è„šæœ¬ï¼‰\nç¤¾åŒºç›¸å¯¹æ´»è·ƒï¼Œäº§å“å¼€å‘è·¯çº¿å›¾æ¸…æ™°\nå®‰è£… bruno Download link: https://www.usebruno.com/downloads\nMac ç”µè„‘æ¨è brew å‘½ä»¤ä¸‹è½½\nâ€‹ brew install Bruno\nå®¢æˆ·ç«¯ä½¿ç”¨å…¥é—¨ é»˜è®¤ä¸»ç•Œé¢ API è¯·æ±‚é›† åˆ›å»º API è¯·æ±‚é›† é¦–é¡µç‚¹å‡»â€˜Create Collectionâ€™é“¾æ¥ï¼Œæ‰“å¼€åˆ›å»º API è¯·æ±‚é›†çš„å¼¹çª—\nå¼¹çª—ä¸Šä¾æ¬¡è¾“å…¥\nName: è¾“å…¥ API è¯·æ±‚é›†çš„åå­—\nLocationï¼šè¾“å…¥æƒ³è¦ä¿å­˜ API è¯·æ±‚é›†æ–‡ä»¶çš„æ–‡ä»¶å¤¹è·¯å¾„ (å»ºè®®é€‰æ‹©æ­¤é¡¹ç›®æ‰€åœ¨è·¯å¾„)\nFolder Nameï¼šå¯è¾“å…¥ API è¯·æ±‚é›†åå­—ï¼ˆä¼šåœ¨åˆšæ‰é€‰æ‹©çš„è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªå¯¹åº”åå­—çš„æ–‡ä»¶å¤¹ï¼‰\nç‚¹å‡» Create æŒ‰é’®å³å¯å®Œæˆ API è¯·æ±‚é›†çš„åˆ›å»ºï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å·¦ä¾§ è¯·æ±‚é›†åˆ—è¡¨ä¼šå±•ç¤ºæ–°å»ºçš„ API è¯·æ±‚é›†çš„ä¿¡æ¯)\næ‰“å¼€ API è¯·æ±‚é›† é¦–é¡µç‚¹å‡»â€˜Open Collectionâ€™é“¾æ¥ï¼Œæ‰“å¼€é€‰æ‹©å·²æœ‰çš„ bruno æ ¼å¼çš„ API è¯·æ±‚é›†æ–‡ä»¶å¤¹ ç‚¹å‡» open å³å¯å®Œæˆé€‰æ‹©ï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å·¦ä¾§ collection åˆ—è¡¨ä¼šå±•ç¤ºé€‰æ‹©çš„ API è¯·æ±‚é›†ä¿¡æ¯) å¯¼å…¥ API collection é¦–é¡µç‚¹å‡»â€˜Import Collectionâ€™é“¾æ¥ï¼Œæ‰“å¼€å¯¼å…¥ API collection çš„å¼¹çª— (æ”¯æŒ Bruno/Postman/Insomnia çš„å¯¼å…¥) å¼¹çª—ä¸Šé€‰æ‹©å¯¹åº”æ ¼å¼çš„çš„é“¾æ¥ï¼Œå†é€‰åœ¨å·²å­˜åœ¨çš„å¯¹åº”æ ¼å¼çš„æ–‡ä»¶è·¯å¾„ ç‚¹å‡» open å³å¯å®Œæˆé€‰æ‹©ï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å·¦ä¾§ collection åˆ—è¡¨ä¼šå±•ç¤ºé€‰æ‹©çš„ API collection ä¿¡æ¯) æœ¬åœ°è¿è¡Œ API collection åœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦è¿è¡Œçš„ API è¯·æ±‚é›† åœ¨èœå•ä¸Šé€‰æ‹© Runï¼Œå³ä¾§ç•Œé¢ä¼šæ‰“å¼€ Runner tabï¼Œä¼šå±•ç¤ºæ‰€é€‰æ‹© API è¯·æ±‚é›†é‡Œé¢ requests çš„ä¸€äº›ä¿¡æ¯ ç‚¹å‡» Run Collection æŒ‰é’®å³å¯æœ¬åœ°è¿è¡Œ (è¿è¡Œå®Œç•Œé¢ä¸Šä¼šå±•ç¤ºå…è®¸ç»“æœ) å¯¼å‡º API è¯·æ±‚é›† åœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦è¿è¡Œçš„ API è¯·æ±‚é›†ï¼Œå³é”®æ‰“å¼€èœå• åœ¨èœå•ä¸Šé€‰æ‹© Exportï¼Œå†é€‰æ‹©æƒ³è¦å¯¼å‡ºæ–‡ä»¶çš„è·¯å¾„å³å¯å®Œæˆå¯¼å‡º (å¯¼å‡ºæ–‡ä»¶ä¹Ÿæ˜¯ä¸º json æ ¼å¼) API è¯·æ±‚ æ–°å»º API è¯·æ±‚ å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›† (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†) åœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦æ–°å»º API è¯·æ±‚çš„ API è¯·æ±‚é›† åœ¨èœå•ä¸Šé€‰æ‹© New Requestï¼Œå³ä¾§ç•Œé¢ä¼šæ‰“å¼€ Request tabï¼Œä¼šå±•ç¤ºæ‰€é€‰æ‹© API è¯·æ±‚é›†é‡Œé¢ requests çš„ä¸€äº›ä¿¡æ¯ åœ¨ new Request çª—å£ä¸Šå…ˆé€‰æ‹©è¯·æ±‚ç±»å‹ï¼šHTTP/GraphQL ä¾æ¬¡è¾“å…¥ Name: è¾“å…¥ API è¯·æ±‚çš„åå­— URLï¼šè¾“å…¥ API è¯·æ±‚çš„ URL Methodï¼šé€‰æ‹© API è¯·æ±‚çš„ Method ç‚¹å‡» Create æŒ‰é’®å³å¯å®Œæˆ API è¯·æ±‚çš„åˆ›å»ºï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å·¦ä¾§ è¯·æ±‚é›†åˆ—è¡¨ä¼šå±•ç¤ºæ–°å»ºçš„ API è¯·æ±‚çš„ä¿¡æ¯) ç¼–è¾‘ API è¯·æ±‚ å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›†å’Œ API è¯·æ±‚ (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†å’Œæ–°å»º API è¯·æ±‚)\nåœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦ç¼–è¾‘ API è¯·æ±‚çš„ API è¯·æ±‚é›†ï¼Œå†é€‰ä¸­æƒ³è¦ç¼–è¾‘çš„ API è¯·æ±‚\nç„¶åå¯ä»¥æ ¹æ® API è¯·æ±‚ç±»å‹å†æ¥ç¼–è¾‘è¯·æ±‚çš„ä¸åŒå­—æ®µ Bodyï¼šè¾“å…¥ API è¯·æ±‚çš„ Body\nHeadersï¼šè¾“å…¥ API è¯·æ±‚çš„ Headers\nParamsï¼šè¾“å…¥ API è¯·æ±‚çš„ Params\nAuthï¼šè¾“å…¥ API è¯·æ±‚çš„ Auth\nVarsï¼šè¾“å…¥ API è¯·æ±‚çš„ Vars\nScriptï¼šè¾“å…¥ API è¯·æ±‚çš„ Script\nAssertï¼šè¾“å…¥ API è¯·æ±‚çš„ Assert\nTestsï¼šè¾“å…¥ API è¯·æ±‚çš„ Tests\nç‚¹å‡» Save æŒ‰é’®å³å¯å®Œæˆ API è¯·æ±‚çš„ç¼–è¾‘ï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å·¦ä¾§ è¯·æ±‚é›†åˆ—è¡¨ä¼šå±•ç¤ºç¼–è¾‘çš„ API è¯·æ±‚çš„ä¿¡æ¯)\nè¿è¡Œ API è¯·æ±‚ å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›†å’Œ API è¯·æ±‚ (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†å’Œæ–°å»º API è¯·æ±‚) åœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦ç¼–è¾‘ API è¯·æ±‚çš„ API è¯·æ±‚é›†ï¼Œå†é€‰ä¸­æƒ³è¦ç¼–è¾‘çš„ API è¯·æ±‚ ç‚¹å‡» API url ç¼–è¾‘æ¡†åçš„å‘å³æŒ‰é’®å³å¯å®Œæˆ API è¯·æ±‚çš„è¿è¡Œï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å³ä¾§ Request tab ä¼šå±•ç¤ºè¿è¡Œçš„ API è¯·æ±‚çš„ä¿¡æ¯) API è¯·æ±‚ç”Ÿæˆä»£ç  å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›†å’Œ API è¯·æ±‚ (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†å’Œæ–°å»º API è¯·æ±‚) åœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦ç¼–è¾‘ API è¯·æ±‚çš„ API è¯·æ±‚é›†ï¼Œå†é€‰ä¸­æƒ³è¦ç¼–è¾‘çš„ API è¯·æ±‚ èœå•å³é”®é€‰æ‹© Generate Codeï¼Œå†é€‰æ‹©æƒ³è¦ç”Ÿæˆä»£ç çš„è¯­è¨€ Generate Code çª—å£å³å¯å±•ç¤ºä¸åŒè¯­è¨€çš„è¯·æ±‚ä»£ç  ç¼–å†™ API è¯·æ±‚æµ‹è¯•è„šæœ¬ API è¯·æ±‚ Assert Assert ä»‹ç» æ‰“å¼€ä»»æ„çš„ API è¯·æ±‚ï¼Œåˆ‡æ¢åˆ° Assert tab\nAssert tab ä¼šå±•ç¤º API è¯·æ±‚çš„ Assert ä¿¡æ¯\nAssert ç”¨æ¥åˆ¤æ–­ API è¯·æ±‚çš„è¿”å›ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ\nExprï¼šè¾“å…¥é¢„æœŸç»“æœçš„è¡¨è¾¾å¼ï¼Œå¯ä»¥æ˜¯ API è¯·æ±‚çš„è¿”å›ç»“æœçš„æŸä¸ªå­—æ®µçš„å€¼ï¼Œå¯è¾“å…¥ä¸¤ç§ç±»å‹ï¼šStatus Code å’Œ Response Body Status Codeï¼šåˆ¤æ–­ API è¯·æ±‚çš„è¿”å›çŠ¶æ€ç æ˜¯å¦ç¬¦åˆé¢„æœŸ (é»˜è®¤ä¸º 200) Response Bodyï¼šåˆ¤æ–­ API è¯·æ±‚çš„è¿”å›ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ (é»˜è®¤ä¸º true)\nOperatorï¼šè¾“å…¥é¢„æœŸç»“æœçš„éªŒè¯æ–¹å¼ã€‚æ”¯æŒå¤šç§åˆ¤æ–­æ–¹å¼ï¼šEqual å’Œ Not Equal ç­‰ Equalï¼šåˆ¤æ–­ API è¯·æ±‚çš„è¿”å›ç»“æœæ˜¯å¦ç­‰äºé¢„æœŸç»“æœ Not Equalï¼šåˆ¤æ–­ API è¯·æ±‚çš„è¿”å›ç»“æœæ˜¯å¦ä¸ç­‰äºé¢„æœŸç»“æœ\nValueï¼šè¾“å…¥é¢„æœŸç»“æœçš„å€¼ï¼Œæ”¯æŒä¸¤ç§é¢„æœŸç»“æœçš„è¾“å…¥æ–¹å¼ï¼šStatic å’Œ Dynamic Staticï¼šè¾“å…¥é¢„æœŸç»“æœçš„é™æ€å€¼ Dynamicï¼šè¾“å…¥é¢„æœŸç»“æœçš„åŠ¨æ€å€¼ï¼Œå¯ä»¥æ˜¯ API è¯·æ±‚çš„è¿”å›ç»“æœçš„æŸä¸ªå­—æ®µçš„å€¼\nAssert ç¤ºä¾‹ Assert status code ä¸º 200 ä»¥ https://jsonplaceholder.typicode.com/posts/1 ä¸ºä¾‹ (è¯¥ API è¯·æ±‚è¿”å›çš„ç»“æœä¸ºï¼šhttps://jsonplaceholder.typicode.com/posts/1) æˆ‘æƒ³éªŒè¯è¯¥ API è¯·æ±‚çš„è¿”å›ç»“æœçš„ status æ˜¯å¦ä¸º 200ï¼Œ æ‰“å¼€è¯¥ API è¯·æ±‚ï¼Œåˆ‡æ¢åˆ° Assert tab ä¾æ¬¡è¾“å…¥å¦‚ä¸‹ä¿¡æ¯ Expr: res.status Operatorï¼šEqual Valueï¼š200 Assert repsponse body ç¬¦åˆé¢„æœŸ ä»¥ https://jsonplaceholder.typicode.com/posts/1 ä¸ºä¾‹ (è¯¥ API è¯·æ±‚è¿”å›çš„ç»“æœä¸ºï¼šhttps://jsonplaceholder.typicode.com/posts/1) æˆ‘æƒ³éªŒè¯è¯¥ API è¯·æ±‚çš„è¿”å›ç»“æœçš„ repsponse body æ˜¯å¦ç¬¦åˆé¢„æœŸ æ‰“å¼€è¯¥ API è¯·æ±‚ï¼Œåˆ‡æ¢åˆ° Assert tab Assert1 ä¾æ¬¡è¾“å…¥å¦‚ä¸‹ä¿¡æ¯ Expr: res.body.id Operatorï¼šEqual Valueï¼š1 Assert2 ä¾æ¬¡è¾“å…¥å¦‚ä¸‹ä¿¡æ¯ Expr: res.body.title Operatorï¼šcontains Valueï¼šprovident è°ƒè¯• Assert å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›†å’Œ API è¯·æ±‚ (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†å’Œæ–°å»º API è¯·æ±‚)ï¼Œä¹ŸæŒ‰ç…§ demo ç¼–å†™äº†å¯¹åº”çš„ Assert åœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦ç¼–è¾‘ API è¯·æ±‚çš„ API è¯·æ±‚é›†ï¼Œå†é€‰ä¸­æƒ³è¦ç¼–è¾‘çš„ API è¯·æ±‚ ç‚¹å‡» API url ç¼–è¾‘æ¡†åçš„å‘å³æŒ‰é’®å³å¯å®Œæˆ API è¯·æ±‚çš„è¿è¡Œï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å³ä¾§ Request tab ä¼šå±•ç¤ºè¿è¡Œçš„ API è¯·æ±‚çš„ä¿¡æ¯) åˆ‡æ¢åˆ° Tests tabï¼Œä¼šå±•ç¤º API è¯·æ±‚çš„ Tests ä¿¡æ¯ï¼Œé‡Œé¢ä¹Ÿä¼šåŒ…æ‹¬è¯·æ±‚çš„ Assert ä¿¡æ¯ API è¯·æ±‚ Tests Tests ä»‹ç» æ‰“å¼€ä»»æ„çš„ API è¯·æ±‚ï¼Œåˆ‡æ¢åˆ° Tests tab Tests tab ä¼šå±•ç¤º API è¯·æ±‚çš„ Tests ä¿¡æ¯ Tests ç”¨æ¥ç¼–å†™ API è¯·æ±‚çš„æµ‹è¯•è„šæœ¬ï¼Œç›®å‰è¾ƒå¥½æ”¯æŒ javascript è¯­è¨€ Tests é‡Œé¢å¯ä»¥ç¼–å†™å¤šä¸ªæµ‹è¯•è„šæœ¬ï¼Œæ¯ä¸ªæµ‹è¯•è„šæœ¬éƒ½å¯ä»¥å•ç‹¬è¿è¡Œ Tests ç¤ºä¾‹ éªŒè¯ status code ä¸º 200 ä»¥ https://jsonplaceholder.typicode.com/posts/1 ä¸ºä¾‹ (è¯¥ API è¯·æ±‚è¿”å›çš„ç»“æœä¸ºï¼šhttps://jsonplaceholder.typicode.com/posts/1) æˆ‘æƒ³éªŒè¯è¯¥ API è¯·æ±‚çš„è¿”å›ç»“æœçš„ status æ˜¯å¦ä¸º 200ï¼Œ æ‰“å¼€è¯¥ API è¯·æ±‚ï¼Œåˆ‡æ¢åˆ° Tests tab è¾“å…¥å¦‚ä¸‹è„šæœ¬ test(\u0026#34;res.status should be 200\u0026#34;, function() { const data = res.getBody(); expect(res.getStatus()).to.equal(200); }); Assert repsponse body ç¬¦åˆé¢„æœŸ ä»¥ https://jsonplaceholder.typicode.com/posts/1 ä¸ºä¾‹ (è¯¥ API è¯·æ±‚è¿”å›çš„ç»“æœä¸ºï¼šhttps://jsonplaceholder.typicode.com/posts/1) æˆ‘æƒ³éªŒè¯è¯¥ API è¯·æ±‚çš„è¿”å›ç»“æœçš„ repsponse body æ˜¯å¦ç¬¦åˆé¢„æœŸ æ‰“å¼€è¯¥ API è¯·æ±‚ï¼Œåˆ‡æ¢åˆ° Tests tab è¾“å…¥å¦‚ä¸‹è„šæœ¬ test(\u0026#34;res.body should be correct\u0026#34;, function() { const data = res.getBody(); expect(data.id).to.equal(1); expect(data.title).to.contains(\u0026#39;provident\u0026#39;); }); è°ƒè¯• Tests å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›†å’Œ API è¯·æ±‚ (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†å’Œæ–°å»º API è¯·æ±‚)ï¼Œä¹ŸæŒ‰ç…§ demo ç¼–å†™äº†å¯¹åº”çš„ Tests åœ¨ä¸»ç•Œé¢å·¦ä¾§ collection åˆ—è¡¨é€‰æ‹©æƒ³è¦ç¼–è¾‘ API è¯·æ±‚çš„ API è¯·æ±‚é›†ï¼Œå†é€‰ä¸­æƒ³è¦ç¼–è¾‘çš„ API è¯·æ±‚ ç‚¹å‡» API url ç¼–è¾‘æ¡†åçš„å‘å³æŒ‰é’®å³å¯å®Œæˆ API è¯·æ±‚çš„è¿è¡Œï¼Œå¹¶å±•ç¤ºåœ¨ç•Œé¢ä¸Š (å³ä¾§ Request tab ä¼šå±•ç¤ºè¿è¡Œçš„ API è¯·æ±‚çš„ä¿¡æ¯) åˆ‡æ¢åˆ° Tests tabï¼Œä¼šå±•ç¤º API è¯·æ±‚çš„ Tests ä¿¡æ¯ï¼Œé‡Œé¢ä¹Ÿä¼šåŒ…æ‹¬è¯·æ±‚çš„ Tests ä¿¡æ¯ ç¯å¢ƒå˜é‡ åˆ›å»ºç¯å¢ƒå˜é‡ å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›†å’Œ API è¯·æ±‚ (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†å’Œæ–°å»º API è¯·æ±‚) é€‰æ‹©æƒ³è¦åˆ›å»ºç¯å¢ƒå˜é‡çš„ API è¯·æ±‚ ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„â€˜No Environmentâ€™é“¾æ¥ï¼ˆé»˜è®¤ä¸º No Environmentï¼‰ï¼Œé€‰æ‹©èœå•ä¸­çš„ configure æŒ‰é’®å³å¯æ‰“å¼€ç¯å¢ƒå˜é‡ç®¡ç†å¼¹çª—ï¼ˆæ”¯æŒåˆ›å»ºæ–°çš„ç¯å¢ƒå˜é‡å’Œå¯¼å…¥å·²æœ‰çš„ç¯å¢ƒå˜é‡ï¼‰ å¼¹çª—ä¸Šç‚¹å‡» Create Environment æŒ‰é’®ï¼Œè¾“å…¥ç¯å¢ƒå˜é‡çš„åå­—ï¼Œç‚¹å‡» create æŒ‰é’®å³å¯åˆ›å»ºç¯å¢ƒå˜é‡ ç„¶ååœ¨å¼¹çª—ä¸Šç‚¹å‡» Add Variable æŒ‰é’®ï¼Œè¾“å…¥ç¯å¢ƒå˜é‡çš„ key å’Œ valueï¼Œç‚¹å‡» Save æŒ‰é’®å³å¯æ·»åŠ ç¯å¢ƒå˜é‡ ç¯å¢ƒå˜é‡ demo éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ª demo ç¯å¢ƒå˜é‡ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ª key ä¸º hostï¼Œvalue ä¸º https://jsonplaceholder.typicode.com çš„ç¯å¢ƒå˜é‡\né€‰æ‹©æƒ³è¦åˆ›å»ºç¯å¢ƒå˜é‡çš„ API è¯·æ±‚ ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„â€˜No Environmentâ€™é“¾æ¥ï¼ˆé»˜è®¤ä¸º No Environmentï¼‰ï¼Œé€‰æ‹©èœå•ä¸­çš„ configure æŒ‰é’®å³å¯æ‰“å¼€ç¯å¢ƒå˜é‡ç®¡ç†å¼¹çª— å¼¹çª—ä¸Šç‚¹å‡» Create Environment æŒ‰é’®ï¼Œè¾“å…¥ç¯å¢ƒå˜é‡çš„åå­— demoï¼Œç‚¹å‡» create æŒ‰é’®å³å¯åˆ›å»ºç¯å¢ƒå˜é‡ demo é€‰æ‹© demo ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨é¡µé¢ä¸Šç‚¹å‡» Add Variable æŒ‰é’®ï¼Œè¾“å…¥ç¯å¢ƒå˜é‡çš„ key ä¸º hostï¼Œvalue ä¸º https://jsonplaceholder.typicode.com ï¼Œç‚¹å‡» Save æŒ‰é’®å³å¯æ·»åŠ ç¯å¢ƒå˜é‡ å¦‚ä¸‹å›¾æ‰€ç¤º ä½¿ç”¨ç¯å¢ƒå˜é‡ å‰ç½®æ¡ä»¶ï¼šå·²ç»åˆ›å»ºäº† API è¯·æ±‚é›†å’Œ API è¯·æ±‚ (å‚è€ƒä¸Šé¢çš„åˆ›å»º API è¯·æ±‚é›†å’Œæ–°å»º API è¯·æ±‚)ï¼Œä¹Ÿåˆ›å»ºäº† demo ç¯å¢ƒå˜é‡ é€‰æ‹©æƒ³è¦ä½¿ç”¨ç¯å¢ƒå˜é‡çš„ API è¯·æ±‚ ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„â€˜No Environmentâ€™é“¾æ¥ï¼ˆé»˜è®¤ä¸º No Environmentï¼‰ï¼Œé€‰æ‹©èœå•ä¸­çš„ demo æŒ‰é’®å³å¯ä½¿ç”¨ demo ç¯å¢ƒå˜é‡ ç„¶ååœ¨ API è¯·æ±‚çš„ URL å˜æ›´ä¸ºè¾“å…¥ {{host}}/posts/1 å³å¯ä½¿ç”¨ç¯å¢ƒå˜é‡ æµ‹è¯•è„šæœ¬æ¥å£è‡ªåŠ¨åŒ– å‰ç½®æ¡ä»¶ å·²åˆ›å»ºäº† API è¯·æ±‚é›†ï¼ˆç¤ºä¾‹åä¸º:api-collectsï¼‰ å·²åˆ›å»ºäº† API è¯·æ±‚ï¼ˆç¤ºä¾‹åä¸º:api request1ï¼‰ å·²åˆ›å»ºäº†ç¯å¢ƒå˜é‡ï¼ˆç¤ºä¾‹åä¸º:demoï¼‰ ä¹Ÿä¸º API è¯·æ±‚ç¼–å†™äº† assert æˆ–è€… tests è„šæœ¬ æ¥å£è‡ªåŠ¨åŒ–é¡¹ç›® demo å®‰è£… node.js å®‰è£… npm æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆç¤ºä¾‹åä¸º:bruno-testï¼‰ é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ npm init å°†é¡¹ç›®åˆå§‹åŒ–ä¸º npm é¡¹ç›® å®‰è£… @usebruno/cli ä¾èµ– (è„šæœ¬ä¸ºï¼šnpm install @usebruno/cli) æ‰“å¼€ä¿å­˜ API è¯·æ±‚é›†çš„æ–‡ä»¶å¤¹ç›®å½•ï¼Œå°† api-collects ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¤åˆ¶åˆ° bruno-test é¡¹ç›®ç›®å½•ä¸‹ä¸‹ é¡¹ç›®ç›®å½•å¦‚ä¸‹æ‰€ç¤º bruno-test //é¡¹ç›®ä¸»æ–‡ä»¶å¤¹ api request1.bru //api è¯·æ±‚ enviroments //ç¯å¢ƒå˜é‡ demo.bru bruno.json node_modules //node åŒ…ä¾èµ– package-lock.json package.json //npm é¡¹ç›®é…ç½®æ–‡ä»¶ è¿è¡Œæ¥å£è‡ªåŠ¨åŒ–è„šæœ¬ bruno run --env demo è¿è¡Œç»“æœå¦‚ä¸‹ æ¥å…¥ CI æ¥å…¥ github action ä»¥ github action ä¸ºä¾‹ï¼Œå…¶ä»– CI å·¥å…·ç±»ä¼¼\nå‰ç½®å‡†å¤‡ï¼šåœ¨é¡¹ç›® package.json æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹è„šæœ¬ \u0026#34;test\u0026#34;: \u0026#34;bru run --env demo\u0026#34; åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .github/workflows æ–‡ä»¶å¤¹ åœ¨ .github/workflows æ–‡ä»¶å¤¹ä¸‹åˆ›å»º main.yml æ–‡ä»¶ main.yml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ name: bruno cli CI on: push: branches: [ main ] pull_request: branches: [ main ] jobs: run_bruno_api_test: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - run: npm install - name: run tests run: npm run test æäº¤ä»£ç åˆ° githubï¼Œä¼šè‡ªåŠ¨è§¦å‘ github action æŸ¥çœ‹ github action è¿è¡Œç»“æœï¼Œå¦‚å›¾ç¤ºä¾‹ï¼š å¯æ‹‰å–æœ¬é¡¹ç›®ä»£ç è¿›è¡Œå‚è€ƒï¼šhttps://github.com/dengnao-tw/Bruno-API-Test-Starter\næµ‹è¯•æŠ¥å‘Š\u0026mdash;TODO bruno æ›´å¤šç”¨æ³•\u0026mdash;TODO Postman è„šæœ¬è¿ç§» API è¯·æ±‚é›†è¿ç§» åœ¨é¦–é¡µç‚¹å‡»â€˜Import Collectionâ€™é“¾æ¥ï¼Œæ‰“å¼€å¯¼å…¥ API collection çš„å¼¹çª— ç‚¹å‡»é€‰æ‹© Postman Collection çš„é“¾æ¥ï¼Œå†é€‰åœ¨å·²å­˜åœ¨çš„ Postman è¯·æ±‚é›†æ–‡ä»¶è·¯å¾„ å³å¯å¯¼å…¥ Postman çš„è¯·æ±‚é›† ä½†æ˜¯ç›®å‰åªæ”¯æŒå¯¼å…¥ API è¯·æ±‚ï¼Œæ— æ³•å¯¼å…¥æµ‹è¯•è„šæœ¬ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆä½†ä¸å½±å“è¯·æ±‚è°ƒç”¨ï¼‰ ç¯å¢ƒå˜é‡è¿ç§» åœ¨é¦–é¡µé€‰æ‹©åˆšæ‰å¯¼å…¥çš„ Postman è¯·æ±‚ ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„â€˜No Environmentâ€™é“¾æ¥ï¼ˆé»˜è®¤ä¸º No Environmentï¼‰ï¼Œé€‰æ‹©èœå•ä¸­çš„ configure æŒ‰é’®å³å¯æ‰“å¼€ç¯å¢ƒå˜é‡ç®¡ç†å¼¹çª— ç‚¹å‡»â€˜Import Environmentâ€™é“¾æ¥ï¼Œæ‰“å¼€å¯¼å…¥ Environment çš„å¼¹çª— ç‚¹å‡»é€‰æ‹© Postman Environment çš„é“¾æ¥ï¼Œå†é€‰åœ¨å·²å­˜åœ¨çš„ Postman ç¯å¢ƒå˜é‡æ–‡ä»¶è·¯å¾„ å³å¯å¯¼å…¥ Postman çš„ç¯å¢ƒå˜é‡ æµ‹è¯•è„šæœ¬è¿ç§»å‚è€ƒ ä¸¤ä¸ªå·¥å…·æµ‹è¯•è„šæœ¬çš„è¯­æ³•å­˜åœ¨ä¸€éƒ¨åˆ†å·®å¼‚ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹\nPostman æµ‹è¯•è„šæœ¬è¯­æ³•å‚è€ƒï¼šhttps://learning.postman.com/docs/writing-scripts/test-scripts/ Postman æµ‹è¯•è„šæœ¬ç¤ºä¾‹ pm.test(\u0026#34;res.status should be 200\u0026#34;, function () { pm.response.to.have.status(200); }); pm.test(\u0026#34;res.body should be correct\u0026#34;, function() { var data = pm.response.json(); pm.expect(data.id).to.equal(1); pm.expect(data.title).to.contains(\u0026#39;provident\u0026#39;); }); Bruno æµ‹è¯•è„šæœ¬è¯­æ³•å‚è€ƒï¼šhttps://docs.usebruno.com/testing/introduction.html Bruno æµ‹è¯•è„šæœ¬ç¤ºä¾‹ test(\u0026#34;res.status should be 200\u0026#34;, function() { const data = res.getBody(); expect(res.getStatus()).to.equal(200); }); test(\u0026#34;res.body should be correct\u0026#34;, function() { const data = res.getBody(); expect(data.id).to.equal(1); expect(data.title).to.contains(\u0026#39;provident\u0026#39;); }); æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/introduction_of_bruno/","summary":"æ–‡ç« ä»‹ç» postman æ›¿æ¢å·¥å…· Bruno çš„æ–°æ‰‹å…¥é—¨ä»‹ç»ï¼Œå¦‚ä½•è¿ç§» postman è„šæœ¬åˆ° Bruno","title":"postman æ›¿æ¢å·¥å…· bruno ä½¿ç”¨ä»‹ç»"},{"content":"ä»€ä¹ˆæ˜¯äºŒå…«æ³•åˆ™ äºŒå…«æ³•åˆ™ï¼Œä¹Ÿè¢«ç§°ä¸ºå¸•ç´¯æ‰˜æ³•åˆ™ï¼ˆPareto principleï¼‰ï¼Œæ˜¯ä¸€ç§ç»æµå­¦åŸç†å’Œç®¡ç†å­¦ç†è®ºï¼Œæè¿°äº†ä¸€ç§è§‚å¯Ÿç»“æœï¼š80% çš„ç»“æœå¾€å¾€æ¥è‡ªäº 20% çš„åŸå› ã€‚è¿™ä¸ªæ³•åˆ™æœ€åˆç”±æ„å¤§åˆ©ç»æµå­¦å®¶ç»´å°”å¼—é›·å¤šÂ·å¸•ç´¯æ‰˜ï¼ˆVilfredo Paretoï¼‰æå‡ºã€‚\näºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºå„ä¸ªé¢†åŸŸï¼ŒåŒ…æ‹¬ç»æµã€ç”Ÿäº§ã€é”€å”®ã€æ—¶é—´ç®¡ç†ç­‰ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæ„å‘³ç€ä¸€ä¸ªç³»ç»Ÿæˆ–è€…ç¾¤ä½“ä¸­ï¼Œå°‘æ•°é‡è¦çš„å› ç´ å¾€å¾€å¯¹äºå¤§éƒ¨åˆ†ç»“æœäº§ç”Ÿäº†ä¸»è¦çš„å½±å“ï¼Œè€Œå…¶ä½™çš„å› ç´ åªèµ·åˆ°äº†æ¬¡è¦çš„ä½œç”¨ã€‚æ¢å¥è¯è¯´ï¼Œå¤§éƒ¨åˆ†çš„äº§å‡ºã€æ”¶ç›Šæˆ–è€…ç»“æœæ¥è‡ªäºå°‘æ•°å…³é”®çš„å› ç´ æˆ–è€…éƒ¨åˆ†ã€‚\nä¸¾ä¸ªä¾‹å­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºé”€å”®é¢†åŸŸã€‚80% çš„é”€å”®é¢å¾€å¾€æ¥è‡ªäº 20% çš„é¡¾å®¢ï¼Œæˆ–è€…è¯´ 80% çš„é—®é¢˜å¾€å¾€æ¥è‡ªäº 20% çš„äº§å“ã€‚è¿™æ„å‘³ç€ç»è¥è€…å¯ä»¥é€šè¿‡ä¸“æ³¨äºé‚£äº›æœ€é‡è¦çš„ 20% é¡¾å®¢æˆ–äº§å“ï¼Œè·å¾—æœ€å¤§çš„æ”¶ç›Šã€‚\näºŒå…«æ³•åˆ™çš„åº”ç”¨è¿˜å¯ä»¥å¸®åŠ©äººä»¬æ›´æœ‰æ•ˆåœ°ç®¡ç†æ—¶é—´ã€‚æ ¹æ®è¿™ä¸ªåŸç†ï¼Œ80% çš„æˆæœå¾€å¾€æ¥è‡ªäº 20% çš„æ—¶é—´å’Œç²¾åŠ›æŠ•å…¥ã€‚å› æ­¤ï¼Œäººä»¬å¯ä»¥é€šè¿‡è¯†åˆ«é‚£äº›æœ€é‡è¦çš„ä»»åŠ¡å’Œæ´»åŠ¨ï¼Œå¹¶ä¼˜å…ˆå¤„ç†å®ƒä»¬ï¼Œæ¥æé«˜å·¥ä½œæ•ˆç‡å’Œæˆæœã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒå…«æ³•åˆ™çš„å…·ä½“æ•°å­—å¹¶ä¸ä¸€å®šæ˜¯ä¸¥æ ¼çš„ 80-20 æ¯”ä¾‹ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ¯”ä¾‹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†åŸºæœ¬æ€æƒ³ä¿æŒä¸€è‡´ï¼šå°‘æ•°é‡è¦çš„å› ç´ æˆ–è€…éƒ¨åˆ†å¯¹äºæ•´ä½“ç»“æœèµ·åˆ°äº†å…³é”®ä½œç”¨ã€‚\nè½¯ä»¶ç ”å‘è¿‡ç¨‹ä¸­çš„äºŒå…«æ³•åˆ™ åœ¨è½¯ä»¶ç ”å‘ä¸­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºå¤šä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬åŠŸèƒ½å¼€å‘ã€ç¼ºé™·ä¿®å¤ã€éœ€æ±‚ç®¡ç†å’Œå›¢é˜Ÿæ•ˆç‡ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š\nåŠŸèƒ½å¼€å‘ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç”¨æˆ·ä½¿ç”¨ç‡é€šå¸¸æ¥è‡ªäº 20% çš„æ ¸å¿ƒåŠŸèƒ½ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿå¯ä»¥ä¼˜å…ˆå¼€å‘å’Œå®Œå–„è¿™äº›æ ¸å¿ƒåŠŸèƒ½ï¼Œä»¥æ»¡è¶³å¤§éƒ¨åˆ†ç”¨æˆ·çš„éœ€æ±‚ã€‚è¿™æœ‰åŠ©äºæé«˜äº§å“çš„å¯ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚ ç¼ºé™·ä¿®å¤ï¼šç±»ä¼¼åœ°ï¼Œ80% çš„è½¯ä»¶ç¼ºé™·å¾€å¾€ç”± 20% çš„æ ¸å¿ƒåŠŸèƒ½å¼•èµ·ã€‚å› æ­¤ï¼Œåœ¨ç¼ºé™·ä¿®å¤è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›æœ€å¸¸è§ã€æœ€ä¸¥é‡æˆ–è€…å½±å“æœ€å¹¿æ³›çš„ç¼ºé™·ã€‚è¿™æœ‰åŠ©äºå¿«é€Ÿæ”¹å–„è½¯ä»¶çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚ éœ€æ±‚ç®¡ç†ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç”¨æˆ·éœ€æ±‚é€šå¸¸æ¥è‡ªäº 20% çš„å…³é”®éœ€æ±‚ã€‚åœ¨éœ€æ±‚ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥ä¸“æ³¨äºæ¢³ç†å’Œç®¡ç†é‚£äº›æœ€é‡è¦ã€æœ€ç´§æ€¥çš„éœ€æ±‚ï¼Œç¡®ä¿å…¶ä¼˜å…ˆçº§å¾—åˆ°åˆç†çš„å®‰æ’ã€‚è¿™æœ‰åŠ©äºæé«˜é¡¹ç›®çš„äº¤ä»˜ä»·å€¼å’Œæ»¡è¶³ç”¨æˆ·æœŸæœ›ã€‚ å›¢é˜Ÿæ•ˆç‡ï¼šäºŒå…«æ³•åˆ™ä¹Ÿå¯ä»¥åº”ç”¨äºå›¢é˜Ÿæ•ˆç‡çš„ç®¡ç†ã€‚æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œ80% çš„å·¥ä½œæˆæœå¾€å¾€æ¥è‡ªäº 20% çš„é«˜æ•ˆå·¥ä½œæ—¶é—´ã€‚å›¢é˜Ÿå¯ä»¥é€šè¿‡ä¼˜åŒ–å·¥ä½œæµç¨‹ã€å‡å°‘ä½ä»·å€¼çš„ä»»åŠ¡å’Œé™ä½å·¥ä½œè´Ÿè·ï¼Œæ¥æé«˜å›¢é˜Ÿçš„æ•´ä½“æ•ˆç‡å’Œç”Ÿäº§åŠ›ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒå…«æ³•åˆ™åœ¨è½¯ä»¶ç ”å‘ä¸­çš„å…·ä½“åº”ç”¨å¯èƒ½ä¼šå› é¡¹ç›®çš„ç‰¹ç‚¹ã€å¤æ‚æ€§å’Œä¸šåŠ¡éœ€æ±‚è€Œæœ‰æ‰€ä¸åŒã€‚å›¢é˜Ÿåº”è¯¥æ ¹æ®å…·ä½“æƒ…å†µçµæ´»è¿ç”¨è¿™ä¸ªåŸåˆ™ï¼Œä»¥è¾¾åˆ°æœ€ä½³çš„å¼€å‘æ•ˆæœå’Œèµ„æºåˆ©ç”¨ã€‚åŒæ—¶ï¼Œç»¼åˆè€ƒè™‘å…¶ä»–å› ç´ ï¼Œå¦‚ç”¨æˆ·åé¦ˆã€å¸‚åœºéœ€æ±‚å’Œå›¢é˜Ÿèƒ½åŠ›ç­‰ï¼Œä»¥å®ç°æ•´ä½“çš„é¡¹ç›®æˆåŠŸã€‚\nè½¯ä»¶ç ”å‘è´¨é‡ä¸­çš„äºŒå…«æ³•åˆ™ åœ¨è½¯ä»¶è´¨é‡ç®¡ç†ä¸­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºç¼ºé™·ç®¡ç†ã€æµ‹è¯•ç­–ç•¥å’ŒæŒç»­æ”¹è¿›ç­‰æ–¹é¢ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š\nç¼ºé™·ç®¡ç†ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç¼ºé™·é€šå¸¸æ¥è‡ªäº 20% çš„åŠŸèƒ½æ¨¡å—æˆ–è€…ä»£ç åŒºåŸŸã€‚åœ¨è½¯ä»¶è´¨é‡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›æœ€å®¹æ˜“å¼•å‘ç¼ºé™·çš„æ ¸å¿ƒåŠŸèƒ½æˆ–è€…ä»£ç éƒ¨åˆ†ã€‚è¿™æœ‰åŠ©äºæé«˜ç¼ºé™·å‘ç°å’Œä¿®å¤çš„æ•ˆç‡ï¼Œç¡®ä¿å…³é”®åŠŸèƒ½çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚ æµ‹è¯•ç­–ç•¥ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„è½¯ä»¶ç¼ºé™·å¾€å¾€ç”± 20% çš„æ ¸å¿ƒåŠŸèƒ½æˆ–è€…æµ‹è¯•ç”¨ä¾‹å¼•èµ·ã€‚åœ¨æµ‹è¯•ç­–ç•¥åˆ¶å®šè¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿå¯ä»¥ä¼˜å…ˆé€‰æ‹©é‚£äº›æœ€å…³é”®ã€æœ€å…·ä»£è¡¨æ€§çš„åŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚åŒæ—¶ï¼Œé‡ç‚¹å…³æ³¨é‚£äº›æœ€æœ‰å¯èƒ½å¼•å‘ç¼ºé™·çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥æé«˜æµ‹è¯•è¦†ç›–å’Œæ•ˆæœã€‚ æŒç»­æ”¹è¿›ï¼šäºŒå…«æ³•åˆ™ä¹Ÿå¯ä»¥åº”ç”¨äºæŒç»­æ”¹è¿›çš„è¿‡ç¨‹ä¸­ã€‚æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œ80% çš„æ”¹è¿›æ•ˆæœé€šå¸¸æ¥è‡ªäº 20% çš„å…³é”®æ”¹è¿›æªæ–½ã€‚å›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›æœ€é‡è¦ã€æœ€æœ‰å½±å“åŠ›çš„æ”¹è¿›é¡¹ç›®ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°æå‡è½¯ä»¶è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚ ç”¨æˆ·åé¦ˆå’Œéœ€æ±‚ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç”¨æˆ·æ»¡æ„åº¦é€šå¸¸æ¥è‡ªäº 20% çš„å…³é”®åŠŸèƒ½æˆ–è€…éœ€æ±‚ã€‚åœ¨è½¯ä»¶è´¨é‡ç®¡ç†ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›å¯¹ç”¨æˆ·æœ€é‡è¦ã€æœ€æœ‰ä»·å€¼çš„åŠŸèƒ½å’Œéœ€æ±‚ã€‚é€šè¿‡ç§¯ææ”¶é›†ç”¨æˆ·åé¦ˆå’Œéœ€æ±‚ï¼Œå›¢é˜Ÿå¯ä»¥é’ˆå¯¹æ€§åœ°æ”¹è¿›å’Œä¼˜åŒ–è¿™äº›å…³é”®é¢†åŸŸï¼Œæå‡è½¯ä»¶çš„è´¨é‡å’Œç”¨æˆ·æ»¡æ„åº¦ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒå…«æ³•åˆ™åœ¨è½¯ä»¶è´¨é‡ç®¡ç†ä¸­çš„å…·ä½“åº”ç”¨å¯èƒ½ä¼šå› é¡¹ç›®çš„ç‰¹ç‚¹ã€å¤æ‚æ€§å’Œä¸šåŠ¡éœ€æ±‚è€Œæœ‰æ‰€ä¸åŒã€‚å›¢é˜Ÿåº”è¯¥æ ¹æ®å…·ä½“æƒ…å†µçµæ´»è¿ç”¨è¿™ä¸ªåŸåˆ™ï¼Œå¹¶ç»“åˆå…¶ä»–è´¨é‡ç®¡ç†æ–¹æ³•å’Œå·¥å…·ï¼Œä»¥å®ç°æœ€ä½³çš„è½¯ä»¶è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚\nè½¯ä»¶æµ‹è¯•ä¸­çš„äºŒå…«æ³•åˆ™ åœ¨è½¯ä»¶æµ‹è¯•ä¸­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥è¢«åº”ç”¨äºç¼ºé™·å®šä½å’Œä¼˜å…ˆçº§ç®¡ç†ã€‚æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œå¤§çº¦ 80% çš„ç¼ºé™·é€šå¸¸æ¥è‡ªäº 20% çš„åŠŸèƒ½æ¨¡å—æˆ–æµ‹è¯•ç”¨ä¾‹ã€‚è¿™æ„å‘³ç€æµ‹è¯•å›¢é˜Ÿå¯ä»¥é€šè¿‡é‡ç‚¹å…³æ³¨é‚£äº›æœ€æœ‰å¯èƒ½å¼•å‘ç¼ºé™·çš„å…³é”®åŠŸèƒ½ï¼Œä»¥åŠé‚£äº›è¦†ç›–æœ€å¹¿æ³›ã€æœ€é‡è¦çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¥è·å¾—æœ€ä½³çš„æµ‹è¯•è¦†ç›–å’Œç¼ºé™·å‘ç°æ•ˆæœã€‚\nå…·ä½“åº”ç”¨äºŒå…«æ³•åˆ™çš„æ–¹æ³•åŒ…æ‹¬ï¼š\né‡ç‚¹æµ‹è¯•å…³é”®åŠŸèƒ½ï¼šæ ¹æ®ç³»ç»Ÿçš„å¤æ‚æ€§å’Œä¸šåŠ¡é‡è¦æ€§ï¼Œç¡®å®šå…³é”®çš„åŠŸèƒ½æ¨¡å—æˆ–è€…ä¸šåŠ¡æµç¨‹ã€‚å°†æ›´å¤šçš„æµ‹è¯•èµ„æºå’Œæ—¶é—´åˆ†é…ç»™è¿™äº›å…³é”®åŠŸèƒ½ï¼Œä»¥ç¡®ä¿å…¶è´¨é‡å’Œç¨³å®šæ€§ã€‚ ä¼˜å…ˆå¤„ç†é«˜é£é™©åŒºåŸŸï¼šé€šè¿‡åˆ†æè¿‡å¾€çš„ç¼ºé™·æ•°æ®ã€ç”¨æˆ·åé¦ˆå’Œä¸šåŠ¡éœ€æ±‚ï¼Œç¡®å®šç³»ç»Ÿä¸­æœ€å®¹æ˜“å‡ºç°é—®é¢˜çš„åŒºåŸŸã€‚å°†æ›´å¤šçš„æµ‹è¯•æ´»åŠ¨æ”¾åœ¨è¿™äº›é«˜é£é™©åŒºåŸŸï¼Œä»¥æå‰å‘ç°å’Œä¿®å¤æ½œåœ¨çš„é—®é¢˜ã€‚ é€‰æ‹©å…³é”®æµ‹è¯•ç”¨ä¾‹ï¼šåœ¨æµ‹è¯•ç”¨ä¾‹è®¾è®¡å’Œæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä¸šåŠ¡ä»·å€¼ã€åŠŸèƒ½å¤æ‚åº¦å’Œå½±å“èŒƒå›´ç­‰å› ç´ ï¼Œé€‰æ‹©é‚£äº›æœ€å…·ä»£è¡¨æ€§å’Œæœ€é‡è¦çš„æµ‹è¯•ç”¨ä¾‹è¿›è¡Œæ‰§è¡Œã€‚ç¡®ä¿è¿™äº›å…³é”®æµ‹è¯•ç”¨ä¾‹çš„è¦†ç›–ç‡å’Œæµ‹è¯•æ·±åº¦ï¼Œä»¥æœ‰æ•ˆæ£€æµ‹æ½œåœ¨çš„ç¼ºé™·ã€‚ ç²¾ç»†åŒ–ç¼ºé™·ç®¡ç†ï¼šå°†æµ‹è¯•å›¢é˜Ÿçš„ç²¾åŠ›é›†ä¸­åœ¨é‚£äº›æœ€å…³é”®ã€æœ€ä¸¥é‡çš„ç¼ºé™·ä¸Šï¼Œç¡®ä¿è¿™äº›ç¼ºé™·å¾—åˆ°åŠæ—¶çš„å¤„ç†å’Œä¿®å¤ã€‚åŒæ—¶ï¼Œå¯¹äºä¸€äº›æ¬¡è¦çš„æˆ–å½±å“è¾ƒå°çš„ç¼ºé™·ï¼Œå¯ä»¥åœ¨èµ„æºå…è®¸çš„æƒ…å†µä¸‹è¿›è¡Œé€‚å½“çš„å»¶åå¤„ç†ï¼Œä»¥ä¿è¯æµ‹è¯•å›¢é˜Ÿçš„æ•ˆç‡å’Œä¼˜å…ˆçº§çš„åˆç†åˆ†é…ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒå…«æ³•åˆ™åœ¨è½¯ä»¶æµ‹è¯•ä¸­çš„åº”ç”¨å¹¶éä¸¥æ ¼çš„æ•°å€¼æ¯”ä¾‹ï¼Œå…·ä½“çš„æ¯”ä¾‹å¯èƒ½ä¼šå› é¡¹ç›®çš„ç‰¹ç‚¹ã€å¤æ‚æ€§å’Œé£é™©ç­‰å› ç´ è€Œæœ‰æ‰€ä¸åŒã€‚æµ‹è¯•å›¢é˜Ÿåº”æ ¹æ®å…·ä½“æƒ…å†µçµæ´»è¿ç”¨è¿™ä¸ªåŸåˆ™ï¼Œä»¥å®ç°æœ€ä½³çš„æµ‹è¯•æ•ˆæœå’Œèµ„æºåˆ©ç”¨ã€‚\nå¦‚ä½•ä¼˜åŒ–è½¯ä»¶ç ”å‘è´¨é‡ä¸­çš„äºŒå…«æ³•åˆ™ è¦ä¼˜åŒ–è½¯ä»¶è´¨é‡ç®¡ç†ä¸­çš„äºŒå…«æ³•åˆ™åº”ç”¨ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š\næ•°æ®é©±åŠ¨å†³ç­–ï¼šæ”¶é›†å’Œåˆ†æå‡†ç¡®ã€å…¨é¢çš„æ•°æ®æ˜¯ä¼˜åŒ–çš„åŸºç¡€ã€‚é€šè¿‡ä½¿ç”¨æµ‹è¯•ç®¡ç†å·¥å…·ã€ç¼ºé™·è·Ÿè¸ªç³»ç»Ÿå’Œç”¨æˆ·åé¦ˆæ¸ é“ç­‰ï¼Œè·å–æœ‰å…³ç¼ºé™·ã€åŠŸèƒ½ä½¿ç”¨ç‡ã€ç”¨æˆ·éœ€æ±‚ç­‰æ–¹é¢çš„æ•°æ®ã€‚è¿™æ ·å¯ä»¥æ›´å‡†ç¡®åœ°ç¡®å®šå“ªäº›åŠŸèƒ½æ¨¡å—æˆ–ä»£ç åŒºåŸŸæ˜¯å…³é”®çš„ï¼Œä»è€Œæ›´æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œæµ‹è¯•å’Œæ”¹è¿›ã€‚ é‡ç‚¹å…³æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼šæ ¹æ®æ•°æ®åˆ†æçš„ç»“æœï¼Œé‡ç‚¹å…³æ³¨é‚£äº›æœ€å…³é”®ã€æœ€å¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—æˆ–ä»£ç åŒºåŸŸã€‚åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œä¸ºè¿™äº›æ ¸å¿ƒåŠŸèƒ½åˆ†é…æ›´å¤šçš„èµ„æºå’Œæµ‹è¯•è¦†ç›–ï¼Œä»¥ç¡®ä¿å…¶è´¨é‡å’Œç¨³å®šæ€§ã€‚ ç»†åŒ–æµ‹è¯•ç­–ç•¥ï¼šæ ¹æ®æ•°æ®åˆ†æå’Œé£é™©è¯„ä¼°ï¼Œåˆ¶å®šç»†åŒ–çš„æµ‹è¯•ç­–ç•¥ã€‚è€ƒè™‘åˆ°åŠŸèƒ½çš„é‡è¦æ€§ã€å¤æ‚æ€§å’Œç”¨æˆ·å½±å“ï¼Œç¡®å®šå…³é”®æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶ç¡®ä¿å…¶å……åˆ†è¦†ç›–æ ¸å¿ƒåŠŸèƒ½ã€‚åŒæ—¶ï¼Œå¯ä»¥åˆ©ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·å’ŒæŠ€æœ¯ï¼Œæé«˜æµ‹è¯•æ•ˆç‡å’Œè¦†ç›–ç‡ã€‚ é«˜æ•ˆç¼ºé™·ç®¡ç†ï¼šå»ºç«‹æœ‰æ•ˆçš„ç¼ºé™·ç®¡ç†æµç¨‹ï¼Œç¡®ä¿ç¼ºé™·èƒ½å¤ŸåŠæ—¶è¢«è·Ÿè¸ªã€åˆ†æå’Œä¿®å¤ã€‚ä¼˜å…ˆå¤„ç†é‚£äº›æœ€ä¸¥é‡ã€æœ€å½±å“ç”¨æˆ·ä½“éªŒçš„ç¼ºé™·ï¼Œå¹¶è·Ÿè¸ªç¼ºé™·ä¿®å¤çš„è¿›åº¦å’Œæ•ˆæœã€‚åŒæ—¶ï¼Œè¿›è¡Œç¼ºé™·åˆ†æï¼Œæ‰¾å‡ºå¸¸è§çš„ç¼ºé™·æ¨¡å¼å’Œæ ¹æœ¬åŸå› ï¼Œä»¥ä¾¿æ”¹è¿›å¼€å‘è¿‡ç¨‹å’Œå‡å°‘ç±»ä¼¼ç¼ºé™·çš„å†æ¬¡å‘ç”Ÿã€‚ ç”¨æˆ·å‚ä¸å’Œåé¦ˆï¼šç§¯æä¸ç”¨æˆ·è¿›è¡Œäº’åŠ¨ï¼Œäº†è§£ä»–ä»¬çš„éœ€æ±‚ã€é—®é¢˜å’Œæ„è§ã€‚é€šè¿‡ç”¨æˆ·è°ƒç ”ã€ç”¨æˆ·ä½“éªŒæµ‹è¯•å’Œç”¨æˆ·åé¦ˆæ¸ é“ï¼Œè·å–ç”¨æˆ·çš„åé¦ˆå’Œå»ºè®®ã€‚å°†ç”¨æˆ·éœ€æ±‚å’Œåé¦ˆä½œä¸ºä¼˜åŒ–è½¯ä»¶è´¨é‡ç®¡ç†çš„é‡è¦ä¾æ®ï¼Œå¹¶å°†å…¶çº³å…¥å¼€å‘å’Œæ”¹è¿›çš„å†³ç­–è¿‡ç¨‹ä¸­ã€‚ æŒç»­æ”¹è¿›å’Œå­¦ä¹ ï¼šè½¯ä»¶è´¨é‡ç®¡ç†æ˜¯ä¸€ä¸ªæŒç»­æ”¹è¿›çš„è¿‡ç¨‹ã€‚å›¢é˜Ÿåº”è¯¥å®šæœŸè¯„ä¼°å’Œåæ€å½“å‰çš„è´¨é‡ç®¡ç†å®è·µï¼Œå¯»æ‰¾æ”¹è¿›çš„æœºä¼šã€‚å€Ÿé‰´è¡Œä¸šçš„æœ€ä½³å®è·µï¼Œå…³æ³¨æ–°æŠ€æœ¯å’Œå·¥å…·çš„å‘å±•ï¼Œä¸æ–­å­¦ä¹ å’Œæå‡å›¢é˜Ÿçš„èƒ½åŠ›å’Œæ°´å¹³ã€‚ ç»¼åˆè¿ç”¨ä»¥ä¸Šç­–ç•¥ï¼Œå¯ä»¥ä¼˜åŒ–è½¯ä»¶è´¨é‡ç®¡ç†ä¸­çš„äºŒå…«æ³•åˆ™åº”ç”¨ï¼Œæé«˜è½¯ä»¶çš„è´¨é‡å’Œç”¨æˆ·æ»¡æ„åº¦ã€‚\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/80-20-rule/","summary":"ä»€ä¹ˆæ˜¯äºŒå…«æ³•åˆ™ äºŒå…«æ³•åˆ™ï¼Œä¹Ÿè¢«ç§°ä¸ºå¸•ç´¯æ‰˜æ³•åˆ™ï¼ˆPareto principleï¼‰ï¼Œæ˜¯ä¸€ç§ç»æµå­¦åŸç†å’Œç®¡ç†å­¦ç†è®ºï¼Œæè¿°äº†ä¸€ç§è§‚å¯Ÿç»“æœï¼š80% çš„ç»“æœå¾€å¾€æ¥è‡ªäº 20% çš„åŸå› ã€‚è¿™ä¸ªæ³•åˆ™æœ€åˆç”±æ„å¤§åˆ©ç»æµå­¦å®¶ç»´å°”å¼—é›·å¤šÂ·å¸•ç´¯æ‰˜ï¼ˆVilfredo Paretoï¼‰æå‡ºã€‚\näºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºå„ä¸ªé¢†åŸŸï¼ŒåŒ…æ‹¬ç»æµã€ç”Ÿäº§ã€é”€å”®ã€æ—¶é—´ç®¡ç†ç­‰ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæ„å‘³ç€ä¸€ä¸ªç³»ç»Ÿæˆ–è€…ç¾¤ä½“ä¸­ï¼Œå°‘æ•°é‡è¦çš„å› ç´ å¾€å¾€å¯¹äºå¤§éƒ¨åˆ†ç»“æœäº§ç”Ÿäº†ä¸»è¦çš„å½±å“ï¼Œè€Œå…¶ä½™çš„å› ç´ åªèµ·åˆ°äº†æ¬¡è¦çš„ä½œç”¨ã€‚æ¢å¥è¯è¯´ï¼Œå¤§éƒ¨åˆ†çš„äº§å‡ºã€æ”¶ç›Šæˆ–è€…ç»“æœæ¥è‡ªäºå°‘æ•°å…³é”®çš„å› ç´ æˆ–è€…éƒ¨åˆ†ã€‚\nä¸¾ä¸ªä¾‹å­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºé”€å”®é¢†åŸŸã€‚80% çš„é”€å”®é¢å¾€å¾€æ¥è‡ªäº 20% çš„é¡¾å®¢ï¼Œæˆ–è€…è¯´ 80% çš„é—®é¢˜å¾€å¾€æ¥è‡ªäº 20% çš„äº§å“ã€‚è¿™æ„å‘³ç€ç»è¥è€…å¯ä»¥é€šè¿‡ä¸“æ³¨äºé‚£äº›æœ€é‡è¦çš„ 20% é¡¾å®¢æˆ–äº§å“ï¼Œè·å¾—æœ€å¤§çš„æ”¶ç›Šã€‚\näºŒå…«æ³•åˆ™çš„åº”ç”¨è¿˜å¯ä»¥å¸®åŠ©äººä»¬æ›´æœ‰æ•ˆåœ°ç®¡ç†æ—¶é—´ã€‚æ ¹æ®è¿™ä¸ªåŸç†ï¼Œ80% çš„æˆæœå¾€å¾€æ¥è‡ªäº 20% çš„æ—¶é—´å’Œç²¾åŠ›æŠ•å…¥ã€‚å› æ­¤ï¼Œäººä»¬å¯ä»¥é€šè¿‡è¯†åˆ«é‚£äº›æœ€é‡è¦çš„ä»»åŠ¡å’Œæ´»åŠ¨ï¼Œå¹¶ä¼˜å…ˆå¤„ç†å®ƒä»¬ï¼Œæ¥æé«˜å·¥ä½œæ•ˆç‡å’Œæˆæœã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒå…«æ³•åˆ™çš„å…·ä½“æ•°å­—å¹¶ä¸ä¸€å®šæ˜¯ä¸¥æ ¼çš„ 80-20 æ¯”ä¾‹ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ¯”ä¾‹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†åŸºæœ¬æ€æƒ³ä¿æŒä¸€è‡´ï¼šå°‘æ•°é‡è¦çš„å› ç´ æˆ–è€…éƒ¨åˆ†å¯¹äºæ•´ä½“ç»“æœèµ·åˆ°äº†å…³é”®ä½œç”¨ã€‚\nè½¯ä»¶ç ”å‘è¿‡ç¨‹ä¸­çš„äºŒå…«æ³•åˆ™ åœ¨è½¯ä»¶ç ”å‘ä¸­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºå¤šä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬åŠŸèƒ½å¼€å‘ã€ç¼ºé™·ä¿®å¤ã€éœ€æ±‚ç®¡ç†å’Œå›¢é˜Ÿæ•ˆç‡ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š\nåŠŸèƒ½å¼€å‘ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç”¨æˆ·ä½¿ç”¨ç‡é€šå¸¸æ¥è‡ªäº 20% çš„æ ¸å¿ƒåŠŸèƒ½ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿå¯ä»¥ä¼˜å…ˆå¼€å‘å’Œå®Œå–„è¿™äº›æ ¸å¿ƒåŠŸèƒ½ï¼Œä»¥æ»¡è¶³å¤§éƒ¨åˆ†ç”¨æˆ·çš„éœ€æ±‚ã€‚è¿™æœ‰åŠ©äºæé«˜äº§å“çš„å¯ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚ ç¼ºé™·ä¿®å¤ï¼šç±»ä¼¼åœ°ï¼Œ80% çš„è½¯ä»¶ç¼ºé™·å¾€å¾€ç”± 20% çš„æ ¸å¿ƒåŠŸèƒ½å¼•èµ·ã€‚å› æ­¤ï¼Œåœ¨ç¼ºé™·ä¿®å¤è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›æœ€å¸¸è§ã€æœ€ä¸¥é‡æˆ–è€…å½±å“æœ€å¹¿æ³›çš„ç¼ºé™·ã€‚è¿™æœ‰åŠ©äºå¿«é€Ÿæ”¹å–„è½¯ä»¶çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚ éœ€æ±‚ç®¡ç†ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç”¨æˆ·éœ€æ±‚é€šå¸¸æ¥è‡ªäº 20% çš„å…³é”®éœ€æ±‚ã€‚åœ¨éœ€æ±‚ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥ä¸“æ³¨äºæ¢³ç†å’Œç®¡ç†é‚£äº›æœ€é‡è¦ã€æœ€ç´§æ€¥çš„éœ€æ±‚ï¼Œç¡®ä¿å…¶ä¼˜å…ˆçº§å¾—åˆ°åˆç†çš„å®‰æ’ã€‚è¿™æœ‰åŠ©äºæé«˜é¡¹ç›®çš„äº¤ä»˜ä»·å€¼å’Œæ»¡è¶³ç”¨æˆ·æœŸæœ›ã€‚ å›¢é˜Ÿæ•ˆç‡ï¼šäºŒå…«æ³•åˆ™ä¹Ÿå¯ä»¥åº”ç”¨äºå›¢é˜Ÿæ•ˆç‡çš„ç®¡ç†ã€‚æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œ80% çš„å·¥ä½œæˆæœå¾€å¾€æ¥è‡ªäº 20% çš„é«˜æ•ˆå·¥ä½œæ—¶é—´ã€‚å›¢é˜Ÿå¯ä»¥é€šè¿‡ä¼˜åŒ–å·¥ä½œæµç¨‹ã€å‡å°‘ä½ä»·å€¼çš„ä»»åŠ¡å’Œé™ä½å·¥ä½œè´Ÿè·ï¼Œæ¥æé«˜å›¢é˜Ÿçš„æ•´ä½“æ•ˆç‡å’Œç”Ÿäº§åŠ›ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒå…«æ³•åˆ™åœ¨è½¯ä»¶ç ”å‘ä¸­çš„å…·ä½“åº”ç”¨å¯èƒ½ä¼šå› é¡¹ç›®çš„ç‰¹ç‚¹ã€å¤æ‚æ€§å’Œä¸šåŠ¡éœ€æ±‚è€Œæœ‰æ‰€ä¸åŒã€‚å›¢é˜Ÿåº”è¯¥æ ¹æ®å…·ä½“æƒ…å†µçµæ´»è¿ç”¨è¿™ä¸ªåŸåˆ™ï¼Œä»¥è¾¾åˆ°æœ€ä½³çš„å¼€å‘æ•ˆæœå’Œèµ„æºåˆ©ç”¨ã€‚åŒæ—¶ï¼Œç»¼åˆè€ƒè™‘å…¶ä»–å› ç´ ï¼Œå¦‚ç”¨æˆ·åé¦ˆã€å¸‚åœºéœ€æ±‚å’Œå›¢é˜Ÿèƒ½åŠ›ç­‰ï¼Œä»¥å®ç°æ•´ä½“çš„é¡¹ç›®æˆåŠŸã€‚\nè½¯ä»¶ç ”å‘è´¨é‡ä¸­çš„äºŒå…«æ³•åˆ™ åœ¨è½¯ä»¶è´¨é‡ç®¡ç†ä¸­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥åº”ç”¨äºç¼ºé™·ç®¡ç†ã€æµ‹è¯•ç­–ç•¥å’ŒæŒç»­æ”¹è¿›ç­‰æ–¹é¢ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š\nç¼ºé™·ç®¡ç†ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç¼ºé™·é€šå¸¸æ¥è‡ªäº 20% çš„åŠŸèƒ½æ¨¡å—æˆ–è€…ä»£ç åŒºåŸŸã€‚åœ¨è½¯ä»¶è´¨é‡ç®¡ç†è¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›æœ€å®¹æ˜“å¼•å‘ç¼ºé™·çš„æ ¸å¿ƒåŠŸèƒ½æˆ–è€…ä»£ç éƒ¨åˆ†ã€‚è¿™æœ‰åŠ©äºæé«˜ç¼ºé™·å‘ç°å’Œä¿®å¤çš„æ•ˆç‡ï¼Œç¡®ä¿å…³é”®åŠŸèƒ½çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚ æµ‹è¯•ç­–ç•¥ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„è½¯ä»¶ç¼ºé™·å¾€å¾€ç”± 20% çš„æ ¸å¿ƒåŠŸèƒ½æˆ–è€…æµ‹è¯•ç”¨ä¾‹å¼•èµ·ã€‚åœ¨æµ‹è¯•ç­–ç•¥åˆ¶å®šè¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿå¯ä»¥ä¼˜å…ˆé€‰æ‹©é‚£äº›æœ€å…³é”®ã€æœ€å…·ä»£è¡¨æ€§çš„åŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚åŒæ—¶ï¼Œé‡ç‚¹å…³æ³¨é‚£äº›æœ€æœ‰å¯èƒ½å¼•å‘ç¼ºé™·çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥æé«˜æµ‹è¯•è¦†ç›–å’Œæ•ˆæœã€‚ æŒç»­æ”¹è¿›ï¼šäºŒå…«æ³•åˆ™ä¹Ÿå¯ä»¥åº”ç”¨äºæŒç»­æ”¹è¿›çš„è¿‡ç¨‹ä¸­ã€‚æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œ80% çš„æ”¹è¿›æ•ˆæœé€šå¸¸æ¥è‡ªäº 20% çš„å…³é”®æ”¹è¿›æªæ–½ã€‚å›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›æœ€é‡è¦ã€æœ€æœ‰å½±å“åŠ›çš„æ”¹è¿›é¡¹ç›®ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°æå‡è½¯ä»¶è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚ ç”¨æˆ·åé¦ˆå’Œéœ€æ±‚ï¼šæ ¹æ®äºŒå…«æ³•åˆ™ï¼Œ80% çš„ç”¨æˆ·æ»¡æ„åº¦é€šå¸¸æ¥è‡ªäº 20% çš„å…³é”®åŠŸèƒ½æˆ–è€…éœ€æ±‚ã€‚åœ¨è½¯ä»¶è´¨é‡ç®¡ç†ä¸­ï¼Œå›¢é˜Ÿåº”è¯¥é‡ç‚¹å…³æ³¨é‚£äº›å¯¹ç”¨æˆ·æœ€é‡è¦ã€æœ€æœ‰ä»·å€¼çš„åŠŸèƒ½å’Œéœ€æ±‚ã€‚é€šè¿‡ç§¯ææ”¶é›†ç”¨æˆ·åé¦ˆå’Œéœ€æ±‚ï¼Œå›¢é˜Ÿå¯ä»¥é’ˆå¯¹æ€§åœ°æ”¹è¿›å’Œä¼˜åŒ–è¿™äº›å…³é”®é¢†åŸŸï¼Œæå‡è½¯ä»¶çš„è´¨é‡å’Œç”¨æˆ·æ»¡æ„åº¦ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒå…«æ³•åˆ™åœ¨è½¯ä»¶è´¨é‡ç®¡ç†ä¸­çš„å…·ä½“åº”ç”¨å¯èƒ½ä¼šå› é¡¹ç›®çš„ç‰¹ç‚¹ã€å¤æ‚æ€§å’Œä¸šåŠ¡éœ€æ±‚è€Œæœ‰æ‰€ä¸åŒã€‚å›¢é˜Ÿåº”è¯¥æ ¹æ®å…·ä½“æƒ…å†µçµæ´»è¿ç”¨è¿™ä¸ªåŸåˆ™ï¼Œå¹¶ç»“åˆå…¶ä»–è´¨é‡ç®¡ç†æ–¹æ³•å’Œå·¥å…·ï¼Œä»¥å®ç°æœ€ä½³çš„è½¯ä»¶è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚\nè½¯ä»¶æµ‹è¯•ä¸­çš„äºŒå…«æ³•åˆ™ åœ¨è½¯ä»¶æµ‹è¯•ä¸­ï¼ŒäºŒå…«æ³•åˆ™å¯ä»¥è¢«åº”ç”¨äºç¼ºé™·å®šä½å’Œä¼˜å…ˆçº§ç®¡ç†ã€‚æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œå¤§çº¦ 80% çš„ç¼ºé™·é€šå¸¸æ¥è‡ªäº 20% çš„åŠŸèƒ½æ¨¡å—æˆ–æµ‹è¯•ç”¨ä¾‹ã€‚è¿™æ„å‘³ç€æµ‹è¯•å›¢é˜Ÿå¯ä»¥é€šè¿‡é‡ç‚¹å…³æ³¨é‚£äº›æœ€æœ‰å¯èƒ½å¼•å‘ç¼ºé™·çš„å…³é”®åŠŸèƒ½ï¼Œä»¥åŠé‚£äº›è¦†ç›–æœ€å¹¿æ³›ã€æœ€é‡è¦çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¥è·å¾—æœ€ä½³çš„æµ‹è¯•è¦†ç›–å’Œç¼ºé™·å‘ç°æ•ˆæœã€‚\nå…·ä½“åº”ç”¨äºŒå…«æ³•åˆ™çš„æ–¹æ³•åŒ…æ‹¬ï¼š","title":"è½¯ä»¶ç ”å‘è´¨é‡ä¸­çš„äºŒå…«æ³•åˆ™"},{"content":"ä»€ä¹ˆæ˜¯ API? API:åº”ç”¨ç¨‹åºæ¥å£ï¼ˆå…¨ç§°ï¼šapplication programming interfaceï¼‰ï¼Œç¼©å†™ä¸º APIï¼Œæ˜¯ä¸€ç§è®¡ç®—æ¥å£ï¼Œå®ƒå®šä¹‰å¤šä¸ªè½¯ä»¶ä¸­ä»‹ä¹‹é—´çš„äº¤äº’ï¼Œä»¥åŠå¯ä»¥è¿›è¡Œçš„è°ƒç”¨ï¼ˆcallï¼‰æˆ–è¯·æ±‚ï¼ˆrequestï¼‰çš„ç§ç±»ï¼Œå¦‚ä½•è¿›è¡Œè°ƒç”¨æˆ–å‘å‡ºè¯·æ±‚ï¼Œåº”ä½¿ç”¨çš„æ•°æ®æ ¼å¼ï¼Œåº”éµå¾ªçš„æƒ¯ä¾‹ç­‰ã€‚å®ƒè¿˜å¯ä»¥æä¾›æ‰©å±•æœºåˆ¶ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥é€šè¿‡å„ç§æ–¹å¼å¯¹ç°æœ‰åŠŸèƒ½è¿›è¡Œä¸åŒç¨‹åº¦çš„æ‰©å±•ã€‚ä¸€ä¸ª API å¯ä»¥æ˜¯å®Œå…¨å®šåˆ¶çš„ï¼Œé’ˆå¯¹æŸä¸ªç»„ä»¶çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºè¡Œä¸šæ ‡å‡†è®¾è®¡çš„ä»¥ç¡®ä¿äº’æ“ä½œæ€§ã€‚é€šè¿‡ä¿¡æ¯éšè—ï¼ŒAPI å®ç°äº†æ¨¡å—åŒ–ç¼–ç¨‹ï¼Œä»è€Œå…è®¸ç”¨æˆ·å®ç°ç‹¬ç«‹åœ°ä½¿ç”¨æ¥å£ã€‚\nä»€ä¹ˆæ˜¯ API æµ‹è¯•ï¼Ÿ æ¥å£æµ‹è¯•æ˜¯è½¯ä»¶æµ‹è¯•çš„ä¸€ç§ï¼Œå®ƒåŒ…æ‹¬ä¸¤ç§æµ‹è¯•ç±»å‹ï¼šç‹­ä¹‰ä¸ŠæŒ‡çš„æ˜¯ç›´æ¥é’ˆå¯¹åº”ç”¨ç¨‹åºæ¥å£ï¼ˆä¸‹é¢ä½¿ç”¨ç¼©å†™ API æŒ‡ä»£ï¼Œå…¶ä¸­æ–‡ç®€ç§°ä¸ºæ¥å£ï¼‰çš„åŠŸèƒ½è¿›è¡Œçš„æµ‹è¯•ï¼›å¹¿ä¹‰ä¸ŠæŒ‡é›†æˆæµ‹è¯•ä¸­ï¼Œé€šè¿‡è°ƒç”¨ API æµ‹è¯•æ•´ä½“çš„åŠŸèƒ½å®Œæˆåº¦ã€å¯é æ€§ã€å®‰å…¨æ€§ä¸æ€§èƒ½ç­‰æŒ‡æ ‡ã€‚\nAPI Best Practice:\nAPI å®šä¹‰éµå¾ª RESTFUL API é£æ ¼ï¼Œè¯­æ„åŒ–çš„ URI å®šä¹‰ï¼Œå‡†ç¡®çš„ HTTP çŠ¶æ€ç ï¼Œé€šè¿‡ API çš„å®šä¹‰å°±å¯ä»¥çŸ¥é“èµ„æºé—´çš„å…³ç³» é…æœ‰è¯¦ç»†ä¸”å‡†ç¡®çš„ API æ–‡æ¡£ï¼ˆå¦‚ Swagger æ–‡æ¡£ï¼‰ å¯¹å¤–çš„ API å¯ä»¥åŒ…å«ç‰ˆæœ¬å·ä»¥å¿«é€Ÿè¿­ä»£ï¼ˆå¦‚ https://thoughtworks.com/v1/users/ï¼‰ API æµ‹è¯•ä¸æµ‹è¯•å››è±¡é™ æµ‹è¯•å››è±¡é™ä¸­ä¸åŒè±¡é™çš„æµ‹è¯•ï¼Œå…¶æµ‹è¯•ç›®çš„è·Ÿæµ‹è¯•ç­–ç•¥ä¹Ÿä¸åŒï¼ŒAPI æµ‹è¯•ä¸»è¦ä½äºç¬¬äºŒã€ç¬¬å››è±¡é™\nAPI æµ‹è¯•ä¸æµ‹è¯•é‡‘å­—å¡” API æµ‹è¯•åœ¨æµ‹è¯•é‡‘å­å¡”ä¸­å¤„äºä¸€ä¸ªç›¸å¯¹é ä¸Šçš„ä½ç½®ï¼Œä¸»è¦ç«™åœ¨ç³»ç»Ÿã€æœåŠ¡è¾¹ç•Œæ¥æµ‹è¯•åŠŸèƒ½å’Œä¸šåŠ¡é€»è¾‘ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨æœåŠ¡å®Œæˆæ„å»ºã€éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒä¹‹åå†æ‰§è¡Œã€éªŒè¯ã€‚\nAPI æµ‹è¯•ç±»å‹ åŠŸèƒ½æµ‹è¯•\næ­£ç¡®æ€§æµ‹è¯• å¼‚å¸¸å¤„ç† å†…éƒ¨é€»è¾‘ â€¦â€¦ éåŠŸèƒ½æµ‹è¯•\næ€§èƒ½ å®‰å…¨ â€¦â€¦ API æµ‹è¯•æ­¥éª¤ å‘é€è¯·æ±‚ å¾—åˆ°å“åº” éªŒè¯å“åº”ç»“æœ API åŠŸèƒ½æµ‹è¯•è®¾è®¡ è®¾è®¡ç†è®º\næ­£é¢ è´Ÿé¢ å¼‚å¸¸å¤„ç† å†…éƒ¨é€»è¾‘ â€¦â€¦ æµ‹è¯•æ–¹æ³•\nç­‰ä»·ç±»åˆ’åˆ† è¾¹ç•Œå€¼ é”™è¯¯æ¨æ–­ â€¦â€¦ API éåŠŸèƒ½æµ‹è¯•è®¾è®¡ å®‰å…¨æµ‹è¯•\néšæœºæµ‹è¯• SQL æ³¨å…¥ XSS â€¦â€¦ æ€§èƒ½æµ‹è¯•\næ€§èƒ½ç“¶é¢ˆ ç¨³å®šæ€§æµ‹è¯• â€¦â€¦ API æµ‹è¯•å·¥å…· API è¯·æ±‚å·¥å…·\nCURL Soap UI Postman Swagger UI â€¦â€¦ Http proxy å·¥å…·\nFiddler Charles â€¦â€¦ API æ€§èƒ½æµ‹è¯•å·¥å…·\nab(apache bench) Jmeter â€¦â€¦ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/api-automation-testing/introduction_of_api_test/","summary":"æ–‡ç« ä»‹ç»æ¥å£æµ‹è¯•çš„ç®€ä»‹ï¼Œç±»å‹å’Œå·¥å…·","title":"æ¥å£æµ‹è¯•ç®€ä»‹"},{"content":"Google Bard Google Bard è¿›å…¥å…¬å¼€æµ‹è¯•ç‰ˆã€‚æµ‹è¯•ç”³è¯·ä¸­~~~\nç”³è¯·é“¾æ¥ï¼šhttps://bard.google.com/\nè°·æ­Œå‘å¸ƒ Bardï¼Œè¿™æ˜¯å…¶åœ¨åˆ›å»ºäººå·¥æ™ºèƒ½ç«èµ›ä¸­çš„ç«äº‰å¯¹æ‰‹æ¨å‡º ChatGPT ä¹‹åçš„æ”¾çš„å¤§æ‹›ã€‚\nç»è¿‡å¤šå¹´çš„è°¨æ…å¼€å‘ï¼Œè¿™å®¶äº’è”ç½‘å·¨å¤´å°†æˆäºˆç”¨æˆ·è®¿é—®èŠå¤©æœºå™¨äººçš„æƒé™ï¼Œä»¥è¿½é€ç«äº‰å¯¹æ‰‹ OpenAI å’Œå¾®è½¯çš„å¼•äººæ³¨ç›®çš„é¦–æ¬¡äº®ç›¸ä¹‹åçš„æƒŠè‰³è¡¨ç°ã€‚\nç™¾åº¦æ–‡å¿ƒä¸€è¨€ ç™¾åº¦äº 3 æœˆ 16 æ—¥æ­£å¼å…¬å¸ƒå¤§è¯­è¨€æ¨¡å‹â€œæ–‡å¿ƒä¸€è¨€â€ï¼Œè¿™æ˜¯ä¸€æ¬¾åŸºäºäººå·¥æ™ºèƒ½æŠ€æœ¯çš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿï¼Œå¯è¿›è¡Œè¯­ä¹‰ç†è§£ã€æ™ºèƒ½é—®ç­”å’Œæƒ…æ„Ÿäº¤æµç­‰å¤šç§å½¢å¼çš„å¯¹è¯ã€‚\n3 æœˆ 16 æ—¥èµ·ï¼Œé¦–æ‰¹ç”¨æˆ·å³å¯é€šè¿‡é‚€è¯·æµ‹è¯•ç åœ¨æ–‡å¿ƒä¸€è¨€å®˜ç½‘ä½“éªŒäº§å“ï¼Œåç»­å°†é™†ç»­å¼€æ”¾ç»™æ›´å¤šç”¨æˆ·ã€‚ æ­¤å¤–ï¼Œç™¾åº¦æ™ºèƒ½äº‘å³å°†é¢å‘ä¼ä¸šå®¢æˆ·å¼€æ”¾æ–‡å¿ƒä¸€è¨€ API æ¥å£è°ƒç”¨æœåŠ¡ã€‚\n3 æœˆ 16 æ—¥èµ·æ­£å¼å¼€æ”¾é¢„çº¦ï¼Œæœç´¢â€œç™¾åº¦æ™ºèƒ½äº‘â€è¿›å…¥å®˜ç½‘ï¼Œå¯ç”³è¯·åŠ å…¥æ–‡å¿ƒä¸€è¨€äº‘æœåŠ¡æµ‹è¯•ã€‚\nç”³è¯·é“¾æ¥ï¼šhttps://yiyan.baidu.com/welcome\nåˆä½œç”³è¯·é“¾æ¥ï¼šhttps://cloud.baidu.com/survey_summit/wenxin.html?track=C856571\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/different-types-of-ai-join-waiting-list/","summary":"Google Bard Google Bard è¿›å…¥å…¬å¼€æµ‹è¯•ç‰ˆã€‚æµ‹è¯•ç”³è¯·ä¸­~~~\nç”³è¯·é“¾æ¥ï¼šhttps://bard.google.com/\nè°·æ­Œå‘å¸ƒ Bardï¼Œè¿™æ˜¯å…¶åœ¨åˆ›å»ºäººå·¥æ™ºèƒ½ç«èµ›ä¸­çš„ç«äº‰å¯¹æ‰‹æ¨å‡º ChatGPT ä¹‹åçš„æ”¾çš„å¤§æ‹›ã€‚\nç»è¿‡å¤šå¹´çš„è°¨æ…å¼€å‘ï¼Œè¿™å®¶äº’è”ç½‘å·¨å¤´å°†æˆäºˆç”¨æˆ·è®¿é—®èŠå¤©æœºå™¨äººçš„æƒé™ï¼Œä»¥è¿½é€ç«äº‰å¯¹æ‰‹ OpenAI å’Œå¾®è½¯çš„å¼•äººæ³¨ç›®çš„é¦–æ¬¡äº®ç›¸ä¹‹åçš„æƒŠè‰³è¡¨ç°ã€‚\nç™¾åº¦æ–‡å¿ƒä¸€è¨€ ç™¾åº¦äº 3 æœˆ 16 æ—¥æ­£å¼å…¬å¸ƒå¤§è¯­è¨€æ¨¡å‹â€œæ–‡å¿ƒä¸€è¨€â€ï¼Œè¿™æ˜¯ä¸€æ¬¾åŸºäºäººå·¥æ™ºèƒ½æŠ€æœ¯çš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿï¼Œå¯è¿›è¡Œè¯­ä¹‰ç†è§£ã€æ™ºèƒ½é—®ç­”å’Œæƒ…æ„Ÿäº¤æµç­‰å¤šç§å½¢å¼çš„å¯¹è¯ã€‚\n3 æœˆ 16 æ—¥èµ·ï¼Œé¦–æ‰¹ç”¨æˆ·å³å¯é€šè¿‡é‚€è¯·æµ‹è¯•ç åœ¨æ–‡å¿ƒä¸€è¨€å®˜ç½‘ä½“éªŒäº§å“ï¼Œåç»­å°†é™†ç»­å¼€æ”¾ç»™æ›´å¤šç”¨æˆ·ã€‚ æ­¤å¤–ï¼Œç™¾åº¦æ™ºèƒ½äº‘å³å°†é¢å‘ä¼ä¸šå®¢æˆ·å¼€æ”¾æ–‡å¿ƒä¸€è¨€ API æ¥å£è°ƒç”¨æœåŠ¡ã€‚\n3 æœˆ 16 æ—¥èµ·æ­£å¼å¼€æ”¾é¢„çº¦ï¼Œæœç´¢â€œç™¾åº¦æ™ºèƒ½äº‘â€è¿›å…¥å®˜ç½‘ï¼Œå¯ç”³è¯·åŠ å…¥æ–‡å¿ƒä¸€è¨€äº‘æœåŠ¡æµ‹è¯•ã€‚\nç”³è¯·é“¾æ¥ï¼šhttps://yiyan.baidu.com/welcome\nåˆä½œç”³è¯·é“¾æ¥ï¼šhttps://cloud.baidu.com/survey_summit/wenxin.html?track=C856571\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚","title":"ä¸åŒç±»å‹ AI ç”³è¯·åŠ å…¥ç­‰å¾…åˆ—è¡¨å…¥å£"},{"content":" æ‰“å¼€ edge æµè§ˆå™¨ åœ¨åœ°å€æ è¾“å…¥å‘½ä»¤ edge://flags/ åœ¨ flags çš„é¡µé¢è¾“å…¥ 11 è¿›è¡Œæœç´¢ åœ¨æœç´¢ç»“æœä¸‹é€‰æ‹©â€œShow WindowsÂ 11Â visual effects in title bar and toolbarâ€å°†çŠ¶æ€å˜æ›´ä¸ºå¯ç”¨ é‡å¯æµè§ˆå™¨ï¼Œå³å¯çœ‹åˆ°æ–°çš„ edge æµè§ˆå™¨ UI æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/edge-enablenew-ui/","summary":"æ‰“å¼€ edge æµè§ˆå™¨ åœ¨åœ°å€æ è¾“å…¥å‘½ä»¤ edge://flags/ åœ¨ flags çš„é¡µé¢è¾“å…¥ 11 è¿›è¡Œæœç´¢ åœ¨æœç´¢ç»“æœä¸‹é€‰æ‹©â€œShow WindowsÂ 11Â visual effects in title bar and toolbarâ€å°†çŠ¶æ€å˜æ›´ä¸ºå¯ç”¨ é‡å¯æµè§ˆå™¨ï¼Œå³å¯çœ‹åˆ°æ–°çš„ edge æµè§ˆå™¨ UI æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚","title":"æ–°æŠ€æœ¯åˆ†äº«ï¼šMac OS ä¸‹ edge æµè§ˆå™¨å¼€å¯æ–° UI"},{"content":"å¦‚æœä½ çš„é¡¹ç›®æ˜¯é‡‡ç”¨æ•æ·æµ‹è¯•ï¼Œé‚£ä¹ˆæ¬¢è¿åŠ å…¥å¾ˆæ£’çš„ 30 å¤©æ•æ·æµ‹è¯•æŒ‘æˆ˜ã€‚\nä»¥ä¸‹æ˜¯ 30 ä¸ªæŒ‘æˆ˜çš„åˆ—è¡¨ï¼Œæ¯æœˆæ¯å¤©ä¸€ä¸ªï¼Œæ‰“å°ä¸‹é¢çš„åˆ—è¡¨ï¼ŒæŠŠå®ƒä¿å­˜åœ¨æŸä¸ªåœ°æ–¹ã€‚æ‰“å°å‡ºæ¥ã€‚æŠŠå®ƒè´´åœ¨å¢™ä¸Šã€‚è®©æˆ‘ä»¬è¿™æ ·åšå§ï¼\nè§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ ç›®æ ‡æ˜¯å°½å¯èƒ½å¤šåœ°çš„å®ŒæˆæŒ‘æˆ˜ã€‚æ‚¨å¯ä»¥åœ¨è‡ªå·±çš„æ—¶é—´èŒƒå›´å’Œèƒ½åŠ›èŒƒå›´å†…åšåˆ°è¿™ä¸€ç‚¹ã€‚\næ‚¨å¯èƒ½æœ‰å›¾åƒå¯ä»¥åˆ†äº«ï¼Œåšå®¢æ–‡ç« ï¼Œè§†é¢‘ï¼ŒçŠ¶æ€æ›´æ–°ï¼Œæ— è®ºå®ƒæ˜¯ä»€ä¹ˆï¼æ¥å‚åŠ å§ï¼\nä»¥ä¸‹æ˜¯åˆ†äº«è¿›åº¦çš„æ–¹æ³•ï¼š\nåœ¨å¾®åšå’Œæœ‹å‹åœˆä¸Š - ä½¿ç”¨**#30DaysOfTesting**æ ‡ç­¾ 30 å¤©æ•æ·æµ‹è¯•åˆ—è¡¨ Day 1 Buy an agile testing related book and share something you\u0026rsquo;ve learnt by day 30 ä¹°ä¸€æœ¬æ•æ·æµ‹è¯•ç›¸å…³çš„ä¹¦ï¼Œå¹¶åœ¨ç¬¬ 30 å¤©ç»“æŸæ—¶åˆ†äº«ä½ çš„æ‰€å­¦ Day 2 Create a mindmap, document, diagram or sketchnote about what you think agile testing is\nç”¨å›¾è¡¨æˆ–æ–‡æ¡£çš„æ–¹å¼åˆ—å‡ºä½ ç†è§£çš„æ•æ·æµ‹è¯• Day 3 Find a video on YouTuBe about agile testing, then watch it!\nçœ‹ä¸€ä¸ªæ•æ·æµ‹è¯•çš„è§†é¢‘ Day 4 Read the agile manifesto and reflect on the implications for your role\nè¯»æ•æ·å®£è¨€ï¼Œå¹¶åæ€å¯¹ä½ è§’è‰²çš„å½±å“ Day 5 Pair with a developer on a feature\nè·Ÿ Dev pair Day 6 Map out what your exploratory testing looks like, compare it to what other testers do\nåˆ—å‡ºä½ ç†è§£çš„æ¢ç´¢å¼æµ‹è¯•ï¼Œå¹¶ä¸å…¶ä»–äººå‘˜çš„è¿›è¡Œæ¯”è¾ƒ Day 7 Find a visual way of representing your tests - e.g. A mind map, diagram, model, etc\næ‰¾ä¸€ä¸ªå¯è§†åŒ–çš„æ–¹å¼å±•ç¤ºä½ çš„æµ‹è¯• Day 8 Speak to a developer about a bug you found instead of loging it in the tracking system\nè·Ÿ dev ç›´æ¥è¯´ä½ å‘ç°çš„ bugï¼Œè€Œä¸æ˜¯åœ¨ bug ç®¡ç†ç³»ç»Ÿé‡Œè®°å½• Day 9 Pair whth a developer on a code review. Can you identify any risks?\nå‚åŠ  dev çš„ code reviewã€‚ä½ èƒ½å®šä½ä»»ä½•çš„é£é™©å—ï¼Ÿ Day 10 Learn where the application logs are and how to read them.\näº†è§£åº”ç”¨ç¨‹åºçš„ log è®°å½•åœ¨å“ªé‡Œï¼Œå¹¶å­¦ä¹ çœ‹ logã€‚ Day 11 Find out what customers are saying about your product. What did you learn?\näº†è§£å®¢æˆ·å¯¹ä½ çš„äº§å“çš„è¯„ä»·ã€‚ä»ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ Day 12 What test documentation does your team have? How can you improve it?\nä½ çš„å›¢é˜Ÿæœ‰ä»€ä¹ˆæ ·çš„æµ‹è¯•æ–‡æ¡£ï¼Ÿä½ è§‰å¾—å¯ä»¥æ€ä¹ˆæ”¹è¿›ä¸€ä¸‹ï¼Ÿ Day 13 Learn to use a tool that your developers use - e.g. an IDE\nå­¦ä¹ ä½¿ç”¨ Dev åœ¨ç”¨çš„å·¥å…· Day 14 How can you deliver greater value to your customer?\nå¦‚ä½•èƒ½å¤Ÿäº¤ä»˜æ›´å¤šçš„ä»·å€¼ç»™å®¢æˆ·ï¼Ÿ Day 15 How can you make your testing processes (more) lean?\nå¦‚ä½•èƒ½è®©ä½ çš„æµ‹è¯•æµç¨‹æ›´åŠ ç²¾ç›Šï¼Ÿ Day 16 What barriers do you feel exist in testing in agile?\nä½ æ„Ÿè§‰æ•æ·æµ‹è¯•ä¸­å­˜åœ¨ä»€ä¹ˆéšœç¢ï¼Ÿ Day 17 Map out your current team structure. How does it compare to other teams?\nç»˜åˆ¶å‡ºæ‚¨å½“å‰çš„å›¢é˜Ÿç»“æ„ã€‚å®ƒä¸å…¶ä»–å›¢é˜Ÿç›¸æ¯”å¦‚ä½•ï¼Ÿ Day 18 How can you make testing jobs easier?\nå¦‚ä½•è®©æµ‹è¯•å·¥ä½œå˜å¾—æ›´è½»æ¾ï¼Ÿ Day 19 How can you make jobs for your team easier?\nå¦‚ä½•è®©ä½ çš„å›¢é˜Ÿå·¥ä½œæ›´è½»æ¾ï¼Ÿ Day 20 Investigate what is in your and your team\u0026rsquo;s tool kit\nè°ƒæŸ¥ä½ å’Œä½ å›¢é˜Ÿä½¿ç”¨çš„å·¥å…·æœ‰å“ªäº› Day 21 How are you managing your testing, is it really agile?\nä½ å¦‚ä½•ç®¡ç†ä½ çš„æµ‹è¯•ï¼ŒçœŸçš„æ•æ·å—ï¼Ÿ Day 22 Find out what testing is being done by other team members.\näº†è§£å…¶ä»–å›¢é˜Ÿæˆå‘˜æ­£åœ¨è¿›è¡Œçš„æµ‹è¯• Day 23 What agile strategies are there for managing tests?\næœ‰å“ªäº›ç®¡ç†æµ‹è¯•çš„æ•æ·ç­–ç•¥ï¼Ÿ Day 24 Look for a task that can be automated.\næ‰¾ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨åŒ–çš„ task. Day 25 What can\u0026rsquo;t you automate? Communicate that to your team\nä»€ä¹ˆæ˜¯ä½ ä¸èƒ½è‡ªåŠ¨åŒ–çš„ï¼Ÿè·Ÿå›¢é˜Ÿæ²Ÿé€šä¸€ä¸‹ Day 26 What does your Test Plan look like, what format do you use?\nä½ çš„æµ‹è¯•è®¡åˆ’ä»€ä¹ˆæ ·çš„ï¼Œä½¿ç”¨çš„ä»€ä¹ˆæ ¼å¼ï¼Ÿ Day 27 Look into zero bug tolerance, is this something your team could do?\näº†è§£ bug é›¶å®¹å¿ï¼Œè¿™æ˜¯ä½ çš„å›¢é˜Ÿå¯ä»¥åšçš„å—ï¼Ÿ Day 28 What learning culture exist in your company? How can you contribute to it?\nå…¬å¸çš„å­¦ä¹ æ–‡åŒ–æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿä½ å¦‚ä½•ä¸ºæ­¤è´¡çŒ®ï¼Ÿ Day 29 What columns do you have on your work tracker or kanban board?\nä½ ä»¬çš„çœ‹æ¿ä¸Šæœ‰å“ªäº› columnï¼Ÿ Day 30 What action does your team take on a red build?\nbuild çº¢äº†å›¢é˜Ÿä¼šé‡‡å–ä»€ä¹ˆ actionï¼Ÿ Day 31 BONUS: Debrief your whole team on your last session of testing\nè·Ÿæ•´ä¸ªå›¢é˜Ÿæ±‡æŠ¥ä½ çš„æµ‹è¯• æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n| ","permalink":"https://naodeng.com.cn/zh/posts/others/30-days-of-agile-testing/","summary":"å¦‚æœä½ çš„é¡¹ç›®æ˜¯é‡‡ç”¨æ•æ·æµ‹è¯•ï¼Œé‚£ä¹ˆæ¬¢è¿åŠ å…¥å¾ˆæ£’çš„ 30 å¤©æ•æ·æµ‹è¯•æŒ‘æˆ˜ã€‚\nä»¥ä¸‹æ˜¯ 30 ä¸ªæŒ‘æˆ˜çš„åˆ—è¡¨ï¼Œæ¯æœˆæ¯å¤©ä¸€ä¸ªï¼Œæ‰“å°ä¸‹é¢çš„åˆ—è¡¨ï¼ŒæŠŠå®ƒä¿å­˜åœ¨æŸä¸ªåœ°æ–¹ã€‚æ‰“å°å‡ºæ¥ã€‚æŠŠå®ƒè´´åœ¨å¢™ä¸Šã€‚è®©æˆ‘ä»¬è¿™æ ·åšå§ï¼\nè§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ ç›®æ ‡æ˜¯å°½å¯èƒ½å¤šåœ°çš„å®ŒæˆæŒ‘æˆ˜ã€‚æ‚¨å¯ä»¥åœ¨è‡ªå·±çš„æ—¶é—´èŒƒå›´å’Œèƒ½åŠ›èŒƒå›´å†…åšåˆ°è¿™ä¸€ç‚¹ã€‚\næ‚¨å¯èƒ½æœ‰å›¾åƒå¯ä»¥åˆ†äº«ï¼Œåšå®¢æ–‡ç« ï¼Œè§†é¢‘ï¼ŒçŠ¶æ€æ›´æ–°ï¼Œæ— è®ºå®ƒæ˜¯ä»€ä¹ˆï¼æ¥å‚åŠ å§ï¼\nä»¥ä¸‹æ˜¯åˆ†äº«è¿›åº¦çš„æ–¹æ³•ï¼š\nåœ¨å¾®åšå’Œæœ‹å‹åœˆä¸Š - ä½¿ç”¨**#30DaysOfTesting**æ ‡ç­¾ 30 å¤©æ•æ·æµ‹è¯•åˆ—è¡¨ Day 1 Buy an agile testing related book and share something you\u0026rsquo;ve learnt by day 30 ä¹°ä¸€æœ¬æ•æ·æµ‹è¯•ç›¸å…³çš„ä¹¦ï¼Œå¹¶åœ¨ç¬¬ 30 å¤©ç»“æŸæ—¶åˆ†äº«ä½ çš„æ‰€å­¦ Day 2 Create a mindmap, document, diagram or sketchnote about what you think agile testing is\nç”¨å›¾è¡¨æˆ–æ–‡æ¡£çš„æ–¹å¼åˆ—å‡ºä½ ç†è§£çš„æ•æ·æµ‹è¯• Day 3 Find a video on YouTuBe about agile testing, then watch it!\nçœ‹ä¸€ä¸ªæ•æ·æµ‹è¯•çš„è§†é¢‘ Day 4 Read the agile manifesto and reflect on the implications for your role","title":"æ•æ·æµ‹è¯•çš„ 30 å¤©æŒ‘æˆ˜"},{"content":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯å¯¹ playwright è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„æ–°æ‰‹å…¥é—¨ä»‹ç»ã€‚å¦‚æœä½ æƒ³è¦å­¦ä¹ æ›´å¤šå…³äº playwright è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…å®ƒçš„æ–‡æ¡£ã€‚è¿è¡Œæµ‹è¯•ï¼šæ‰“å¼€æµ‹è¯•ç•Œé¢ï¼Œé€‰æ‹©\u0026quot;è¿è¡Œæµ‹è¯•\u0026quot;ã€‚ä¸‹é¢ä¼šæ˜¾ç¤ºä¸€ä¸ªéå¸¸ç®€å•çš„æµ‹è¯•ç”»é¢ã€‚ä½ å¯ä»¥é€‰æ‹©ä»»ä½•ä¸€ä¸ªæµ‹è¯•é¡¹ç›®ã€‚ä½ å¯ä»¥é€šè¿‡é”®ç›˜æˆ–è€…é¼ æ ‡æ¥è°ƒè¯•æµ‹è¯•ã€‚æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨æµ‹è¯•ç»“æŸåï¼Œå•å‡»\u0026quot;æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š\u0026quot;æŒ‰é’®ã€‚æµ‹è¯•æŠ¥å‘Šä¼šæ˜¾ç¤ºåœ¨æµ‹è¯•ç»“æŸåçš„æµè§ˆå™¨ä¸­ã€‚\nå®‰è£… Install é VS Code ç¼–è¾‘å™¨å®‰è£… æ–°å»ºé¡¹ç›®æ–‡ä»¶ ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·è¿›å…¥æ–°å»ºçš„é¡¹ç›®æ–‡ä»¶å¤¹ è¾“å…¥å‘½ä»¤è¿›è¡Œé¡¹ç›®åˆå§‹åŒ– npm init playwright@latest æŒ‰ç…§æç¤ºè¿›è¡Œé¡¹ç›®åˆå§‹åŒ– å®‰è£…å®Œæˆåçš„ç›®å½•ç»“æ„ä¸º playwright.config.ts //playwright.config.tsçš„é…ç½®æ–‡ä»¶ package.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ package-lock.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ tests/ example.spec.ts //æµ‹è¯•demo tests-examples/ demo-todo-app.spec.ts //todo appçš„æµ‹è¯•demo VS Code ç¼–è¾‘å™¨å®‰è£… æ–°å»ºé¡¹ç›®æ–‡ä»¶ ä½¿ç”¨ VS Code ç¼–è¾‘å™¨æ‰“å¼€æ–°å»ºçš„é¡¹ç›®æ–‡ä»¶å¤¹ åœ¨ VS Code ç¼–è¾‘å™¨å®‰è£… Playwright Test for VSCode æ’ä»¶ ç„¶ååœ¨ VS Code ç¼–è¾‘å™¨çš„å‘½ä»¤é¢æ¿ä¸Šè¾“å…¥ Install Playwright æŒ‰ç…§æç¤ºè¿›è¡Œé¡¹ç›®åˆå§‹åŒ– å®‰è£…å®Œæˆåçš„ç›®å½•ç»“æ„ä¸º playwright.config.ts //playwright.config.tsçš„é…ç½®æ–‡ä»¶ package.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ package-lock.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ tests/ example.spec.ts //æµ‹è¯•demo tests-examples/ demo-todo-app.spec.ts //todo appçš„æµ‹è¯•demo è¿è¡Œæµ‹è¯• Run test VS Code è¿è¡Œ é€šè¿‡ Playwright Test for VSCode æ’ä»¶è¿è¡Œ é€šè¿‡ VS Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶å ç‚¹å‡» VS Code å·¦ä¾§çš„ Testing(æ¼æ–—) æŒ‰é’® Testing é¡µé¢ä¸‹ä¼šå±•ç¤ºæ‰€æœ‰çš„ demo æµ‹è¯•ç”¨ä¾‹ ç‚¹å‡»ç»¿è‰²ä¸‰è§’å½¢å°±å¯ä»¥è¿è¡Œ demo æµ‹è¯•ç”¨ä¾‹äº† å¯ä»¥ç‚¹å‡»æ˜¯å¦é€‰ä¸­'show browser'æ¥æ§åˆ¶æ˜¯å¦æ— å¤´æµè§ˆå™¨è¿è¡Œç”¨ä¾‹å’Œæ‰“å¼€æµè§ˆå™¨è¿è¡Œç”¨ä¾‹ æµ‹è¯•æ–‡ä»¶è¿è¡Œ é€šè¿‡ VS Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶å ç‚¹å‡»æ‰“å¼€ demo æµ‹è¯•æ–‡ä»¶ ç‚¹å‡»æµ‹è¯•å—æ—è¾¹çš„ç»¿è‰²ä¸‰è§’å½¢ å°±å¯ä»¥è¿è¡Œæµ‹è¯•æ¥è¿è¡Œå•ä¸ªæµ‹è¯• å‘½ä»¤è¡Œè¿è¡Œ è¿è¡Œæ‰€æœ‰æµ‹è¯•\nnpx playwright test è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶\nnpx playwright test landing-page.spec.ts è¿è¡Œä¸€ç»„æµ‹è¯•æ–‡ä»¶\nnpx playwright test tests/todo-page/ tests/landing-page/ è¿è¡Œæ–‡ä»¶åä¸­æœ‰landingæˆ–loginçš„æ–‡ä»¶\nnpx playwright test landing login è¿è¡Œå¸¦æœ‰æ ‡é¢˜çš„æµ‹è¯•\nnpx playwright test -g \u0026#34;add a todo item\u0026#34; åœ¨å¼•å¯¼æ¨¡å¼ (æ‰“å¼€æµè§ˆå™¨) ä¸‹è¿è¡Œæµ‹è¯•\nnpx playwright test landing-page.spec.ts --headed åœ¨ç‰¹å®šé¡¹ç›®ä¸Šè¿è¡Œæµ‹è¯•\nnpx playwright test landing-page.ts --project=chromium è°ƒè¯• Debug ç”±äº Playwright åœ¨ Node.js ä¸­è¿è¡Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‚¨é€‰æ‹©çš„è°ƒè¯•å™¨å¯¹å…¶è¿›è¡Œè°ƒè¯•ï¼Œä¾‹å¦‚ä½¿ç”¨console.logæˆ–åœ¨æ‚¨çš„ IDE å†…éƒ¨æˆ–ç›´æ¥åœ¨ VS ä»£ç ä¸­ä½¿ç”¨[VS ä»£ç æ‰©å±•](https://playwright.dev/docs/getting-started-vscode)ã€‚Playwright å¸¦æœ‰[Playwright Inspector](https://playwright.dev/docs/debug#playwright-inspector)ï¼Œå®ƒå…è®¸æ‚¨å•æ­¥æ‰§è¡Œ Playwright API è°ƒç”¨ï¼ŒæŸ¥çœ‹ä»–ä»¬çš„è°ƒè¯•æ—¥å¿—å¹¶æ¢ç´¢[é€‰æ‹©å™¨](https://playwright.dev/docs/selectors)ã€‚\nå‘½ä»¤è¡Œè°ƒè¯• è°ƒè¯•æ‰€æœ‰æµ‹è¯•ï¼š\nnpx playwright test --debug è°ƒè¯•ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼š\nnpx playwright test example.spec.ts --debug ä»test(..å®šä¹‰çš„è¡Œå·è°ƒè¯•æµ‹è¯•ï¼š\nnpx playwright test example.spec.ts:42 --debug VS code è°ƒè¯• é€šè¿‡ Playwright Test for VSCode æ’ä»¶è°ƒè¯• é€šè¿‡ VS Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶å ç‚¹å‡» VS Code å·¦ä¾§çš„ Testing(æ¼æ–—) æŒ‰é’® Testing é¡µé¢ä¸‹ä¼šå±•ç¤ºæ‰€æœ‰çš„ demo æµ‹è¯•ç”¨ä¾‹ ç‚¹å‡»ç¬¬äºŒä¸ªè¿è¡ŒæŒ‰é’®å°±å¯ä»¥è°ƒè¯• demo æµ‹è¯•ç”¨ä¾‹äº† å¯ä»¥ä¹‹å‰åœ¨æƒ³è¦è°ƒè¯•çš„æµ‹è¯•è„šæœ¬æ–‡ä»¶ä¸­æå‰æ‰“ä¸€äº›æ–­ç‚¹ æµ‹è¯•æ–‡ä»¶è¿è¡Œ é€šè¿‡ VS Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶å ç‚¹å‡»æ‰“å¼€ demo æµ‹è¯•æ–‡ä»¶ é€‰ä¸­æµ‹è¯•ä»£ç å—ï¼Œç„¶åå³é”®é€‰æ‹© debug test å°±å¯ä»¥è°ƒè¯•æµ‹è¯•ç”¨ä¾‹äº† æµ‹è¯•æŠ¥å‘Š Test report å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥æ‰“å¼€ html ç‰ˆæœ¬çš„æµ‹è¯•æŠ¥å‘Š npx playwright show-report æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/playwright-get-started/","summary":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯å¯¹ playwright è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„æ–°æ‰‹å…¥é—¨ä»‹ç»ã€‚å¦‚æœä½ æƒ³è¦å­¦ä¹ æ›´å¤šå…³äº playwright è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…å®ƒçš„æ–‡æ¡£ã€‚è¿è¡Œæµ‹è¯•ï¼šæ‰“å¼€æµ‹è¯•ç•Œé¢ï¼Œé€‰æ‹©\u0026quot;è¿è¡Œæµ‹è¯•\u0026quot;ã€‚ä¸‹é¢ä¼šæ˜¾ç¤ºä¸€ä¸ªéå¸¸ç®€å•çš„æµ‹è¯•ç”»é¢ã€‚ä½ å¯ä»¥é€‰æ‹©ä»»ä½•ä¸€ä¸ªæµ‹è¯•é¡¹ç›®ã€‚ä½ å¯ä»¥é€šè¿‡é”®ç›˜æˆ–è€…é¼ æ ‡æ¥è°ƒè¯•æµ‹è¯•ã€‚æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨æµ‹è¯•ç»“æŸåï¼Œå•å‡»\u0026quot;æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š\u0026quot;æŒ‰é’®ã€‚æµ‹è¯•æŠ¥å‘Šä¼šæ˜¾ç¤ºåœ¨æµ‹è¯•ç»“æŸåçš„æµè§ˆå™¨ä¸­ã€‚\nå®‰è£… Install é VS Code ç¼–è¾‘å™¨å®‰è£… æ–°å»ºé¡¹ç›®æ–‡ä»¶ ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·è¿›å…¥æ–°å»ºçš„é¡¹ç›®æ–‡ä»¶å¤¹ è¾“å…¥å‘½ä»¤è¿›è¡Œé¡¹ç›®åˆå§‹åŒ– npm init playwright@latest æŒ‰ç…§æç¤ºè¿›è¡Œé¡¹ç›®åˆå§‹åŒ– å®‰è£…å®Œæˆåçš„ç›®å½•ç»“æ„ä¸º playwright.config.ts //playwright.config.tsçš„é…ç½®æ–‡ä»¶ package.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ package-lock.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ tests/ example.spec.ts //æµ‹è¯•demo tests-examples/ demo-todo-app.spec.ts //todo appçš„æµ‹è¯•demo VS Code ç¼–è¾‘å™¨å®‰è£… æ–°å»ºé¡¹ç›®æ–‡ä»¶ ä½¿ç”¨ VS Code ç¼–è¾‘å™¨æ‰“å¼€æ–°å»ºçš„é¡¹ç›®æ–‡ä»¶å¤¹ åœ¨ VS Code ç¼–è¾‘å™¨å®‰è£… Playwright Test for VSCode æ’ä»¶ ç„¶ååœ¨ VS Code ç¼–è¾‘å™¨çš„å‘½ä»¤é¢æ¿ä¸Šè¾“å…¥ Install Playwright æŒ‰ç…§æç¤ºè¿›è¡Œé¡¹ç›®åˆå§‹åŒ– å®‰è£…å®Œæˆåçš„ç›®å½•ç»“æ„ä¸º playwright.config.ts //playwright.config.tsçš„é…ç½®æ–‡ä»¶ package.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ package-lock.json //nodeé¡¹ç›®çš„é…ç½®æ–‡ä»¶ tests/ example.spec.ts //æµ‹è¯•demo tests-examples/ demo-todo-app.spec.ts //todo appçš„æµ‹è¯•demo è¿è¡Œæµ‹è¯• Run test VS Code è¿è¡Œ é€šè¿‡ Playwright Test for VSCode æ’ä»¶è¿è¡Œ é€šè¿‡ VS Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶å ç‚¹å‡» VS Code å·¦ä¾§çš„ Testing(æ¼æ–—) æŒ‰é’® Testing é¡µé¢ä¸‹ä¼šå±•ç¤ºæ‰€æœ‰çš„ demo æµ‹è¯•ç”¨ä¾‹ ç‚¹å‡»ç»¿è‰²ä¸‰è§’å½¢å°±å¯ä»¥è¿è¡Œ demo æµ‹è¯•ç”¨ä¾‹äº† å¯ä»¥ç‚¹å‡»æ˜¯å¦é€‰ä¸­'show browser'æ¥æ§åˆ¶æ˜¯å¦æ— å¤´æµè§ˆå™¨è¿è¡Œç”¨ä¾‹å’Œæ‰“å¼€æµè§ˆå™¨è¿è¡Œç”¨ä¾‹ æµ‹è¯•æ–‡ä»¶è¿è¡Œ é€šè¿‡ VS Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶å ç‚¹å‡»æ‰“å¼€ demo æµ‹è¯•æ–‡ä»¶ ç‚¹å‡»æµ‹è¯•å—æ—è¾¹çš„ç»¿è‰²ä¸‰è§’å½¢ å°±å¯ä»¥è¿è¡Œæµ‹è¯•æ¥è¿è¡Œå•ä¸ªæµ‹è¯• å‘½ä»¤è¡Œè¿è¡Œ è¿è¡Œæ‰€æœ‰æµ‹è¯•","title":"Playwright è‡ªåŠ¨åŒ–æ¡†æ¶å…¥é—¨"},{"content":"Cypress Studio æä¾›äº†ä¸€ç§åœ¨æµ‹è¯•è¿è¡Œç¨‹åºä¸­ç”Ÿæˆæµ‹è¯•çš„å¯è§†åŒ–æ–¹æ³•ï¼Œé€šè¿‡è®°å½•ä¸è¢«æµ‹åº”ç”¨ç¨‹åºçš„äº¤äº’ã€‚æ”¯æŒ.clickï¼ˆï¼‰ã€.typeï¼ˆï¼‰ã€.checkï¼ˆï¼‰ã€.uncheckï¼ˆï¼‰å’Œ.selectï¼ˆï¼‰Cypress å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å°†åœ¨ä¸ Cypress Studio å†…éƒ¨çš„ DOM äº¤äº’æ—¶ç”Ÿæˆæµ‹è¯•ä»£ç \né€šè¿‡é˜…è¯»æ–‡ç« ä½ ä¼šå­¦åˆ°ä»€ä¹ˆï¼š\nå¦‚ä½•ä½¿ç”¨ Cypress Studio ä»¥äº¤äº’æ–¹å¼æ‰©å±•æµ‹è¯•\nå¦‚ä½•ä½¿ç”¨ Cypress Studio ä»¥äº¤äº’æ–¹å¼æ·»åŠ æ–°æµ‹è¯•\næ¦‚è¿° Cypress Studio é€šè¿‡è®°å½•ä¸ è¢«æµ‹åº”ç”¨ç¨‹åºçš„äº¤äº’ï¼Œæä¾›äº†ä¸€ç§åœ¨ Test Runner ä¸­ç”Ÿæˆæµ‹è¯•çš„å¯è§†åŒ–æ–¹å¼ã€‚\næ”¯æŒã€.click()ã€.type()ã€å’Œ Cypress å‘½ä»¤ .check() ï¼Œå¹¶åœ¨ä¸ Cypress Studio å†…éƒ¨çš„ DOM äº¤äº’æ—¶ç”Ÿæˆæµ‹è¯•ä»£ç ã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡å³é”®å•å‡»è¦æ–­è¨€çš„å…ƒç´ æ¥ç”Ÿæˆæ–­è¨€ã€‚ .uncheck() .select()\nä½¿ç”¨ Cypress Studio Cypress Studio æ˜¯ä¸€é¡¹å®éªŒæ€§åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å°† experimentalStudio å±æ€§æ·»åŠ åˆ°æ‚¨çš„é…ç½®æ–‡ä»¶æ¥å¯ç”¨ï¼ˆ cypress.json é»˜è®¤æƒ…å†µä¸‹ï¼‰ã€‚\n{ \u0026#34;experimentalStudio\u0026#34;: true} Cypress Real World App (RWA) æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒå®ç°äº†ä¸€ä¸ªæ”¯ä»˜åº”ç”¨ç¨‹åºï¼Œä»¥å±•ç¤º Cypress æµ‹è¯•æ–¹æ³•ã€æ¨¡å¼å’Œå·¥ä½œæµç¨‹çš„å®é™…ä½¿ç”¨æƒ…å†µã€‚ä¸‹é¢å°†ä½¿ç”¨å®ƒæ¥æ¼”ç¤º Cypress Studio çš„åŠŸèƒ½ã€‚\næ‰©å±•æµ‹è¯• æ‚¨å¯ä»¥æ‰©å±•ä»»ä½•é¢„å…ˆå­˜åœ¨çš„æµ‹è¯•ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•è„šæ‰‹æ¶åœ¨æ‚¨çš„ integrationFolderï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ä¸­åˆ›å»ºä¸€ä¸ªæ–°æµ‹è¯•æ¥å¼€å§‹ã€‚\nç¬¬ 1 æ­¥ - è¿è¡Œç”¨ä¾‹ æˆ‘ä»¬å°†ä½¿ç”¨ Cypress Studio æ‰§è¡Œâ€œæ–°äº¤æ˜“â€ç”¨æˆ·æµç¨‹ã€‚é¦–å…ˆï¼Œå¯åŠ¨ Test Runner å¹¶è¿è¡Œåœ¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºçš„ç”¨ä¾‹ã€‚\n[image:F5CF37A4-27C0-4A6A-82DA-52C19191EB41-665-000000B8AF4F75E1/640.jpeg]\nç¬¬ 2 æ­¥ - å¯åŠ¨ Cypress Studio æµ‹è¯•å®Œæˆè¿è¡Œåï¼Œå°†é¼ æ ‡æ‚¬åœåœ¨å‘½ä»¤æ—¥å¿—ä¸­çš„æµ‹è¯•ä¸Šä»¥æ˜¾ç¤ºâ€œAdd commands to Testâ€æŒ‰é’®ã€‚\nå•å‡»â€œAdd Commands to Testâ€å°†å¯åŠ¨ Cypress Studioã€‚\nCypress Studio ç›´æ¥ä¸ å‘½ä»¤æ—¥å¿—é›†æˆã€‚\n[image:7C04963F-638B-492C-B6D1-0C2C6FD31021-665-000000B8AF4F2B69/_640.jpeg]\nCypress å°†è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æŒ‚é’©å’Œå½“å‰å­˜åœ¨çš„æµ‹è¯•ä»£ç ï¼Œç„¶åå¯ä»¥ä»è¯¥ç‚¹å¼€å§‹æ‰©å±•æµ‹è¯•ï¼ˆä¾‹å¦‚ï¼Œæˆ‘ä»¬ç™»å½•åˆ° beforeEach å—å†…çš„åº”ç”¨ç¨‹åºï¼‰ã€‚\næ¥ä¸‹æ¥ï¼ŒTest Runner å°†å•ç‹¬æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶åœ¨æµ‹è¯•ä¸­çš„æœ€åä¸€æ¡å‘½ä»¤åæš‚åœã€‚\n[image:E57D4269-75B6-49C2-9EC7-CB2BA527070D-665-000000B8AF4ECFAF/__640.jpeg]\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ›´æ–°æµ‹è¯•ä»¥åœ¨ç”¨æˆ·ä¹‹é—´åˆ›å»ºæ–°äº‹åŠ¡ã€‚\nç¬¬ 3 æ­¥ - ä¸åº”ç”¨ç¨‹åºäº¤äº’ è¦è®°å½•æ“ä½œï¼Œè¯·å¼€å§‹ä¸åº”ç”¨ç¨‹åºäº¤äº’ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†å•å‡»æ ‡é¢˜å³ä¾§çš„â€œæ–°å»ºâ€æŒ‰é’®ï¼Œç»“æœæˆ‘ä»¬å°†çœ‹åˆ°æˆ‘ä»¬çš„å•å‡»è®°å½•åœ¨å‘½ä»¤æ—¥å¿—ä¸­ã€‚\n[image:B55CC01A-E8EF-4B70-9687-CC8A6423AD9A-665-000000B8AF4E893E/___640.jpeg]\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è¾“å…¥æˆ‘ä»¬æƒ³è¦æ”¯ä»˜çš„ç”¨æˆ·åã€‚\n[image:F647E6CB-2456-4602-84CB-B37B2B313DCF-665-000000B8AF4E4B07/____640.jpeg]\nä¸€æ—¦æˆ‘ä»¬çœ‹åˆ°åå­—å‡ºç°åœ¨ç»“æœä¸­ï¼Œæˆ‘ä»¬æƒ³è¦æ·»åŠ ä¸€ä¸ªæ–­è¨€æ¥ç¡®ä¿æˆ‘ä»¬çš„æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚å³é”®å•å‡»ç”¨æˆ·åå°†å¼¹å‡ºä¸€ä¸ªèœå•ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­æ·»åŠ æ–­è¨€ä»¥æ£€æŸ¥å…ƒç´ æ˜¯å¦åŒ…å«æ­£ç¡®çš„æ–‡æœ¬ï¼ˆç”¨æˆ·åï¼‰ã€‚\n[image:F347B11C-142A-4EFC-821F-9B3F36B68119-665-000000B8AF4E15D4/_____640.jpeg] ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å•å‡»è¯¥ç”¨æˆ·ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªå±å¹•ã€‚æˆ‘ä»¬å°†é€šè¿‡å•å‡»å¹¶è¾“å…¥é‡‘é¢å’Œæè¿°è¾“å…¥æ¥å®Œæˆäº¤æ˜“è¡¨æ ¼ã€‚\n[image:1A5CFBED-CD31-4912-90A1-960E05992DC7-665-000000B8AF4DE240/______640.jpeg]\næ³¨æ„å‘½ä»¤æ—¥å¿—ä¸­ç”Ÿæˆçš„å‘½ä»¤ã€‚\nç°åœ¨æ˜¯æ—¶å€™å®Œæˆäº¤æ˜“äº†ã€‚æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåœ¨æˆ‘ä»¬è¾“å…¥è¾“å…¥ä¹‹å‰ï¼Œâ€œæ”¯ä»˜â€æŒ‰é’®å·²è¢«ç¦ç”¨ã€‚ä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„è¡¨å•éªŒè¯æ­£å¸¸å·¥ä½œï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–­è¨€ä»¥ç¡®ä¿å¯ç”¨â€œæ”¯ä»˜â€æŒ‰é’®ã€‚\n[image:F3E5EBF7-FB37-4A50-AF65-607939F664F0-665-000000B8AF4DAF00/_______640.jpeg]\næœ€åï¼Œæˆ‘ä»¬å°†å•å‡»â€œæ”¯ä»˜â€æŒ‰é’®ï¼Œå¹¶æ˜¾ç¤ºæˆ‘ä»¬æ–°äº¤æ˜“çš„ç¡®è®¤é¡µé¢ã€‚\n[image:AFF8F1D8-4FDC-42DF-BEEA-EDB769B0588A-665-000000B8AF4D783F/________640.jpeg]\nè¦æ”¾å¼ƒäº¤äº’ï¼Œè¯·å•å‡»â€œå–æ¶ˆâ€æŒ‰é’®é€€å‡º Cypress Studioã€‚å¦‚æœå¯¹ä¸åº”ç”¨ç¨‹åºçš„äº¤äº’æ„Ÿåˆ°æ»¡æ„ï¼Œè¯·å•å‡»â€œä¿å­˜å‘½ä»¤â€ï¼Œæµ‹è¯•ä»£ç å°†ä¿å­˜åˆ°æ‚¨çš„è§„èŒƒæ–‡ä»¶ä¸­ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€‰æ‹©â€œå¤åˆ¶â€æŒ‰é’®ä»¥å°†ç”Ÿæˆçš„å‘½ä»¤å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚\nç”Ÿæˆçš„æµ‹è¯•ä»£ç  æŸ¥çœ‹æˆ‘ä»¬çš„æµ‹è¯•ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ç‚¹å‡»â€œSave Commandsâ€åæµ‹è¯•æ›´æ–°äº†æˆ‘ä»¬åœ¨ Cypress Studio ä¸­è®°å½•çš„æ“ä½œã€‚\næ·»åŠ æ–°æµ‹è¯• æ‚¨å¯ä»¥é€šè¿‡å•å‡»æˆ‘ä»¬å®šä¹‰çš„å—ä¸Šçš„â€œAdd New Testâ€æ¥å‘ä»»ä½•ç°æœ‰ describe æˆ–å—æ·»åŠ æ–°æµ‹è¯•ã€‚ context describe\n[image:0A8CA77E-9AEF-45B9-9B70-F15C01983DFF-665-000000B8AF4D4166/_________640.jpeg]\næˆ‘ä»¬è¢«å¯åŠ¨åˆ° Cypress Studio å¹¶å¯ä»¥å¼€å§‹ä¸æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº¤äº’ä»¥ç”Ÿæˆæµ‹è¯•ã€‚\nå¯¹äºæ­¤æµ‹è¯•ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªæ–°çš„é“¶è¡Œå¸æˆ·ã€‚æˆ‘ä»¬çš„äº’åŠ¨å¦‚ä¸‹ï¼š\nç‚¹å‡»å·¦ä¾§å¯¼èˆªä¸­çš„â€œé“¶è¡Œè´¦æˆ·â€ [image:02219635-D587-4A52-BD45-738DA52F08E2-665-000000B8AF4D0E28/__________640.jpeg]\nç‚¹å‡»é“¶è¡Œè´¦æˆ·é¡µé¢ä¸Šçš„â€œåˆ›å»ºâ€æŒ‰é’® [image:42C66725-A8B3-4ED6-9472-C0A0FF5AB64A-665-000000B8AF4CD946/___________640.jpeg]\nå¡«å†™é“¶è¡Œè´¦æˆ·ä¿¡æ¯ [image:2E4443DE-C9A6-4D7A-84BB-6E6A5AA3F476-665-000000B8AF4CA262/____________640.jpeg]\nç‚¹å‡»â€œä¿å­˜â€æŒ‰é’® [image:655AAC92-065E-438E-B62C-145A771AD889-665-000000B8AF4C6D6F/_____________640.jpeg]\nè¦æ”¾å¼ƒäº¤äº’ï¼Œè¯·å•å‡»â€œå–æ¶ˆâ€æŒ‰é’®é€€å‡º Cypress Studioã€‚\nå¦‚æœå¯¹ä¸åº”ç”¨ç¨‹åºçš„äº¤äº’æ„Ÿåˆ°æ»¡æ„ï¼Œè¯·å•å‡»â€œä¿å­˜å‘½ä»¤â€ï¼Œæç¤ºå°†è¯¢é—®æµ‹è¯•åç§°ã€‚å•å‡»â€œä¿å­˜æµ‹è¯•â€ï¼Œæµ‹è¯•å°†ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚\n[image:A9CFD28A-A32C-42B5-97D7-7BD34A46D85F-665-000000B8AF4C390B/______________640.jpeg]\nä¿å­˜åï¼Œè¯¥æ–‡ä»¶å°†åœ¨ Cypress ä¸­å†æ¬¡è¿è¡Œã€‚\n[image:560BE965-9C4C-4E9A-A17F-4992200B053B-665-000000B8AF4BF3D8/_______________640.jpeg]\næœ€åï¼ŒæŸ¥çœ‹æˆ‘ä»¬çš„æµ‹è¯•ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç‚¹å‡»â€œSave Commandsâ€åæµ‹è¯•æ›´æ–°äº†æˆ‘ä»¬åœ¨ Cypress Studio ä¸­è®°å½•çš„æ“ä½œã€‚\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/cypress-demo6/","summary":"Cypress Studio æä¾›äº†ä¸€ç§åœ¨æµ‹è¯•è¿è¡Œç¨‹åºä¸­ç”Ÿæˆæµ‹è¯•çš„å¯è§†åŒ–æ–¹æ³•ï¼Œé€šè¿‡è®°å½•ä¸è¢«æµ‹åº”ç”¨ç¨‹åºçš„äº¤äº’ã€‚æ”¯æŒ.clickï¼ˆï¼‰ã€.typeï¼ˆï¼‰ã€.checkï¼ˆï¼‰ã€.uncheckï¼ˆï¼‰å’Œ.selectï¼ˆï¼‰Cypress å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å°†åœ¨ä¸ Cypress Studio å†…éƒ¨çš„ DOM äº¤äº’æ—¶ç”Ÿæˆæµ‹è¯•ä»£ç \né€šè¿‡é˜…è¯»æ–‡ç« ä½ ä¼šå­¦åˆ°ä»€ä¹ˆï¼š\nå¦‚ä½•ä½¿ç”¨ Cypress Studio ä»¥äº¤äº’æ–¹å¼æ‰©å±•æµ‹è¯•\nå¦‚ä½•ä½¿ç”¨ Cypress Studio ä»¥äº¤äº’æ–¹å¼æ·»åŠ æ–°æµ‹è¯•\næ¦‚è¿° Cypress Studio é€šè¿‡è®°å½•ä¸ è¢«æµ‹åº”ç”¨ç¨‹åºçš„äº¤äº’ï¼Œæä¾›äº†ä¸€ç§åœ¨ Test Runner ä¸­ç”Ÿæˆæµ‹è¯•çš„å¯è§†åŒ–æ–¹å¼ã€‚\næ”¯æŒã€.click()ã€.type()ã€å’Œ Cypress å‘½ä»¤ .check() ï¼Œå¹¶åœ¨ä¸ Cypress Studio å†…éƒ¨çš„ DOM äº¤äº’æ—¶ç”Ÿæˆæµ‹è¯•ä»£ç ã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡å³é”®å•å‡»è¦æ–­è¨€çš„å…ƒç´ æ¥ç”Ÿæˆæ–­è¨€ã€‚ .uncheck() .select()\nä½¿ç”¨ Cypress Studio Cypress Studio æ˜¯ä¸€é¡¹å®éªŒæ€§åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å°† experimentalStudio å±æ€§æ·»åŠ åˆ°æ‚¨çš„é…ç½®æ–‡ä»¶æ¥å¯ç”¨ï¼ˆ cypress.json é»˜è®¤æƒ…å†µä¸‹ï¼‰ã€‚\n{ \u0026#34;experimentalStudio\u0026#34;: true} Cypress Real World App (RWA) æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒå®ç°äº†ä¸€ä¸ªæ”¯ä»˜åº”ç”¨ç¨‹åºï¼Œä»¥å±•ç¤º Cypress æµ‹è¯•æ–¹æ³•ã€æ¨¡å¼å’Œå·¥ä½œæµç¨‹çš„å®é™…ä½¿ç”¨æƒ…å†µã€‚ä¸‹é¢å°†ä½¿ç”¨å®ƒæ¥æ¼”ç¤º Cypress Studio çš„åŠŸèƒ½ã€‚\næ‰©å±•æµ‹è¯• æ‚¨å¯ä»¥æ‰©å±•ä»»ä½•é¢„å…ˆå­˜åœ¨çš„æµ‹è¯•ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•è„šæ‰‹æ¶åœ¨æ‚¨çš„ integrationFolderï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ä¸­åˆ›å»ºä¸€ä¸ªæ–°æµ‹è¯•æ¥å¼€å§‹ã€‚\nç¬¬ 1 æ­¥ - è¿è¡Œç”¨ä¾‹ æˆ‘ä»¬å°†ä½¿ç”¨ Cypress Studio æ‰§è¡Œâ€œæ–°äº¤æ˜“â€ç”¨æˆ·æµç¨‹ã€‚é¦–å…ˆï¼Œå¯åŠ¨ Test Runner å¹¶è¿è¡Œåœ¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºçš„ç”¨ä¾‹ã€‚","title":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ6ï¼‰- ç”¨ä¾‹ç¼–è¾‘å’Œè„šæœ¬å½•åˆ¶å·¥å…· Cypress Studio ä»‹ç»"},{"content":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ5ï¼‰- å‘½ä»¤å¤§å…¨ å‘½ä»¤å¤§å…¨ andï¼šåˆ›å»ºæ–­è¨€ asï¼šåˆ›å»ºåˆ«å blurï¼šå¤±å»ç„¦ç‚¹ checkï¼šé€‰ä¸­ check æˆ–è€… radio childrenï¼šè·å–ä¸€ç»„ DOM å…ƒç´ ä¸­æ¯ä¸ªå…ƒç´ çš„å­å…ƒç´  clearï¼šæ¸…é™¤ input æˆ–è€… textarea çš„å€¼ clearCookieï¼šæ¸…é™¤ç‰¹å®šçš„æµè§ˆå™¨ cookie clearCookiesï¼šæ¸…é™¤æµè§ˆå™¨çš„æ‰€æœ‰ cookie clearLocalStorageï¼šæ¸…é™¤ localstorage çš„æ•°æ® clickï¼šç‚¹å‡» DOM å…ƒç´  clockï¼šè¦†ç›–å…¨å±€ä¸æ—¶é—´ç›¸å…³çš„å‡½æ•° closestï¼šè·å–ä¸é€‰æ‹©å™¨åŒ¹é…çš„ç¬¬ä¸€ä¸ª DOM å…ƒç´  containsï¼šè·å–åŒ…å«æ–‡æœ¬çš„ DOM å…ƒç´  dblclickï¼šåŒå‡» DOM å…ƒç´  debugï¼šè®¾ç½®è°ƒè¯•å™¨å¹¶è®°å½•ä¸Šä¸€ä¸ªå‘½ä»¤äº§ç”Ÿçš„å†…å®¹ documentï¼šè·å– window.document å¯¹è±¡ eachï¼šè¿­ä»£æ•°ç»„ç»“æ„ endï¼šç»“æŸä¸€ç³»åˆ—å‘½ä»¤ eqï¼šåœ¨å…ƒç´ æ•°ç»„ä¸­è·å–ç‰¹å®šç´¢å¼•çš„ DOM å…ƒç´  execï¼šæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ filterï¼šè·å–ç‰¹å®šé€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´  findï¼šæŸ¥æ‰¾ç‰¹å®šé€‰æ‹©å™¨çš„ç‰¹å®šåä»£å…ƒç´  firstï¼šè·å–ä¸€ç»„ DOM å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ª DOM å…ƒç´  fixtureï¼šåŠ è½½æ–‡ä»¶ä¸­çš„æ•°æ®é›† focusï¼šä½¿ä¸€ä¸ª DOM å…ƒç´ è·å–ç„¦ç‚¹ focusedï¼šè·å–å½“å‰è·å–ç„¦ç‚¹çš„ DOM å…ƒç´  getï¼šé€šè¿‡é€‰æ‹©å™¨æˆ–è€…åˆ«åè·å–ä¸€ä¸ªæˆ–è€…å¤šä¸ª DOM å…ƒç´  getCookieï¼šè·å–æµè§ˆå™¨çš„ç‰¹å®š cookie getCookiesï¼šè·å–æµè§ˆå™¨çš„æ‰€æœ‰ cookie goï¼šå‰è¿›æˆ–è€…åé€€ hashï¼šè·å–å½“å‰é¡µé¢åœ°å€çš„å“ˆå¸Œå€¼ hoverï¼šä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤ invokeï¼šåœ¨å‰è¾¹ç”Ÿæˆçš„ä¸»é¢˜ä¸Šè°ƒç”¨å‡½æ•° itsï¼šè·å–å‰è¾¹ç”Ÿæˆçš„ä¸»é¢˜çš„å±æ€§å€¼ lastï¼šè·å–ä¸€ç»„ DOM å…ƒç´ çš„æœ€åä¸€ä¸ª DOM å…ƒç´  locationï¼šè·å–æ´»åŠ¨é¡µé¢çš„ window.location å¯¹è±¡ logï¼šæ‰“å° cypress æ—¥å¿—ä¿¡æ¯ nextï¼šè·å–ç´§æ¥çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿ DOM å…ƒç´  nextAllï¼šè·å–æ‰€æœ‰å…„å¼Ÿ DOM å…ƒç´  nextUntilï¼šè·å–ä¸€ç»„åŒ¹é…çš„ DOM å…ƒç´ ä¸­çš„æ¯ä¸ªåç»­å…„å¼Ÿå…ƒç´ ï¼Œä¸åŒ…æ‹¬æä¾›çš„å…ƒç´  notï¼šè¿‡æ»¤ DOM å…ƒç´  parentï¼šè·å–çˆ¶å…ƒç´  parentsï¼šè·å–æ‰€æœ‰çš„çˆ¶å…ƒç´  parentsUntilï¼šè·å–æ‰€æœ‰çš„çˆ¶å…ƒç´ ï¼Œä¸åŒ…æ‹¬æä¾›çš„å…ƒç´  pauseï¼šæš‚åœæ‰§è¡Œ cypress å‘½ä»¤ prevï¼šè·å–å‰ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ prevAllï¼šè·å–å‰è¾¹çš„æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹ prevUntilï¼šè·å–å‰è¾¹æ‰€æœ‰çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œä¸åŒ…æ‹¬æä¾›çš„å…ƒç´  readFileï¼šè¯»å–æ–‡ä»¶å†…å®¹ reloadï¼šé‡æ–°åŠ è½½é¡µé¢ requestï¼šå‘é€ HTTP è¯·æ±‚ rootï¼šè·å–é¡µé¢æ ¹èŠ‚ç‚¹ routeï¼šç®¡ç†ç½‘ç»œè¯·æ±‚çš„è¡Œä¸º screenshotï¼šç”Ÿæˆæˆªå›¾ scrollIntoViewï¼šå°†å…ƒç´ æ»šåŠ¨åˆ°è§†å›¾ä¸­ scrollToï¼šæ»šåŠ¨åˆ°ç‰¹å®šä½ç½® selectï¼šé€‰æ‹© select ä¸­çš„ option serverï¼šå¯åŠ¨æœåŠ¡å™¨å¼€å§‹è®²å“åº”è·¯ç”±åˆ° cy.route() å’Œ cy.request() setCookieï¼šè®¾ç½®æµè§ˆå™¨ cookie shouldï¼šåˆ›å»ºæ–­è¨€ï¼ŒåŒ and() siblingsï¼šè·å–å…„å¼Ÿ DOM å…ƒç´  spreadï¼šå°†æ•°ç»„æ‰©å±•ä¸ºå¤šä¸ªå‚æ•° spyï¼šåŒ…è£…æ–¹æ³•ï¼Œè®°å½•å‡½æ•°çš„è°ƒç”¨å’Œå‚æ•° stubï¼šæ›¿æ¢å‡½æ•°ï¼Œè®°å½•å…¶ç”¨æ³•å¹¶æ§åˆ¶å…¶è¡Œä¸º submitï¼šæäº¤ä¸€ä¸ªè¡¨å• taskï¼šé€šè¿‡ task æ’ä»¶ï¼Œåœ¨ Node.js ä¸­æ‰§è¡Œä»£ç  thenï¼šä½¿ç”¨ä¸Šä¸€ä¸ªå‘½ä»¤äº§ç”Ÿçš„ç»“æœ tickï¼šç§»åŠ¨æ—¶é—´ titleï¼šè·å–æ´»åŠ¨é¡µé¢çš„ document.title triggerï¼šè§¦å‘ DOM å…ƒç´ ä¸Šçš„äº‹ä»¶ typeï¼šç»™ DOM å…ƒç´ è¾“å…¥å†…å®¹ uncheckï¼šå–æ¶ˆé€‰ä¸­å¤é€‰æ¡† urlï¼šè·å–å½“å‰æ´»åŠ¨é¡µé¢çš„ URL viewportï¼šæ§åˆ¶åº”ç”¨ç¨‹åºçš„å±å¹•å¤§å°å’Œæ–¹å‘ visitï¼šè®¿é—®è¿œç¨‹ URL waitï¼šç­‰å¾…æ–¹æ³• windowï¼šè·å–å½“å‰æ´»åŠ¨çª—å£çš„ window å¯¹è±¡ withinï¼šå°†åç»­å‘½ä»¤é™åˆ¶åœ¨æ­¤å…ƒç´ å†… wrapï¼šäº§ç”Ÿä¼ é€’ç»™ .wrap() çš„å¯¹è±¡ writeFileï¼šå†™å…¥æŒ‡å®šå†…å®¹åˆ°æ–‡ä»¶ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/cypress-demo5/","summary":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ5ï¼‰- å‘½ä»¤å¤§å…¨ å‘½ä»¤å¤§å…¨ andï¼šåˆ›å»ºæ–­è¨€ asï¼šåˆ›å»ºåˆ«å blurï¼šå¤±å»ç„¦ç‚¹ checkï¼šé€‰ä¸­ check æˆ–è€… radio childrenï¼šè·å–ä¸€ç»„ DOM å…ƒç´ ä¸­æ¯ä¸ªå…ƒç´ çš„å­å…ƒç´  clearï¼šæ¸…é™¤ input æˆ–è€… textarea çš„å€¼ clearCookieï¼šæ¸…é™¤ç‰¹å®šçš„æµè§ˆå™¨ cookie clearCookiesï¼šæ¸…é™¤æµè§ˆå™¨çš„æ‰€æœ‰ cookie clearLocalStorageï¼šæ¸…é™¤ localstorage çš„æ•°æ® clickï¼šç‚¹å‡» DOM å…ƒç´  clockï¼šè¦†ç›–å…¨å±€ä¸æ—¶é—´ç›¸å…³çš„å‡½æ•° closestï¼šè·å–ä¸é€‰æ‹©å™¨åŒ¹é…çš„ç¬¬ä¸€ä¸ª DOM å…ƒç´  containsï¼šè·å–åŒ…å«æ–‡æœ¬çš„ DOM å…ƒç´  dblclickï¼šåŒå‡» DOM å…ƒç´  debugï¼šè®¾ç½®è°ƒè¯•å™¨å¹¶è®°å½•ä¸Šä¸€ä¸ªå‘½ä»¤äº§ç”Ÿçš„å†…å®¹ documentï¼šè·å– window.document å¯¹è±¡ eachï¼šè¿­ä»£æ•°ç»„ç»“æ„ endï¼šç»“æŸä¸€ç³»åˆ—å‘½ä»¤ eqï¼šåœ¨å…ƒç´ æ•°ç»„ä¸­è·å–ç‰¹å®šç´¢å¼•çš„ DOM å…ƒç´  execï¼šæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ filterï¼šè·å–ç‰¹å®šé€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´  findï¼šæŸ¥æ‰¾ç‰¹å®šé€‰æ‹©å™¨çš„ç‰¹å®šåä»£å…ƒç´  firstï¼šè·å–ä¸€ç»„ DOM å…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ª DOM å…ƒç´  fixtureï¼šåŠ è½½æ–‡ä»¶ä¸­çš„æ•°æ®é›† focusï¼šä½¿ä¸€ä¸ª DOM å…ƒç´ è·å–ç„¦ç‚¹ focusedï¼šè·å–å½“å‰è·å–ç„¦ç‚¹çš„ DOM å…ƒç´  getï¼šé€šè¿‡é€‰æ‹©å™¨æˆ–è€…åˆ«åè·å–ä¸€ä¸ªæˆ–è€…å¤šä¸ª DOM å…ƒç´  getCookieï¼šè·å–æµè§ˆå™¨çš„ç‰¹å®š cookie getCookiesï¼šè·å–æµè§ˆå™¨çš„æ‰€æœ‰ cookie goï¼šå‰è¿›æˆ–è€…åé€€ hashï¼šè·å–å½“å‰é¡µé¢åœ°å€çš„å“ˆå¸Œå€¼ hoverï¼šä¸å­˜åœ¨è¿™ä¸ªå‘½ä»¤ invokeï¼šåœ¨å‰è¾¹ç”Ÿæˆçš„ä¸»é¢˜ä¸Šè°ƒç”¨å‡½æ•° itsï¼šè·å–å‰è¾¹ç”Ÿæˆçš„ä¸»é¢˜çš„å±æ€§å€¼ lastï¼šè·å–ä¸€ç»„ DOM å…ƒç´ çš„æœ€åä¸€ä¸ª DOM å…ƒç´  locationï¼šè·å–æ´»åŠ¨é¡µé¢çš„ window.","title":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ5ï¼‰- å‘½ä»¤å¤§å…¨"},{"content":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ç¬¬å››ç¯‡æ•°æ®é©±åŠ¨æ–¹æ³•å°è£…å‚æ•°åŒ–å’Œæµ‹è¯•æ¡†æ¶çš„ä»‹ç»ã€‚ åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ä¸­ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ç”¨æ¥é©±åŠ¨æµ‹è¯•æ¡†æ¶ã€‚ä¾‹å¦‚ï¼Œæ•°æ®é©±åŠ¨æ–¹æ³•å°è£…å‚æ•°åŒ–å’Œæµ‹è¯•æ¡†æ¶ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å°†æµ‹è¯•æ¡†æ¶çš„æ•°æ®å¤„ç†å’Œé¢„è®¾ç¯å¢ƒç­‰ç°æœ‰æ¨¡å‹ç»“åˆèµ·æ¥ã€‚è¿™æ ·å°±å¯ä»¥æ–¹ä¾¿åœ°å¼€å‘ã€æµ‹è¯•å’Œè¿è¡Œæ–°çš„æµ‹è¯•æ¡†æ¶ã€‚\næµ‹è¯•æ•°æ®é©±åŠ¨ js æ ¼å¼æµ‹è¯•æ•°æ®é©±åŠ¨ ç®€ä»‹ æ•°æ®ä»¥ js æ ¼å¼å­˜å‚¨ï¼Œä½¿ç”¨ js çš„ import æ–¹æ³•å¯¼å…¥ä½¿ç”¨\nä½¿ç”¨æ–¹æ³• æ–°å»ºæµ‹è¯•æ•°æ® js æ–‡ä»¶ ç¤ºä¾‹ï¼šåœ¨é¡¹ç›®çš„ cypress/integration æ–‡ä»¶å¤¹ä¸‹æ–°å»º testData ç›®å½•ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª js æ–‡ä»¶ï¼Œç¤ºä¾‹æ–‡ä»¶åä¸ºï¼štestLogin.data.js\ntestLogin.data.js ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nexport const testLoginUserEmail = [ { summary: \u0026#34;æ­£ç¡®é‚®ç®±è´¦å·ç™»å½•éªŒè¯\u0026#34;, username:\u0026#34;dengnao.123@163.com\u0026#34;, password:\u0026#34;xxxx\u0026#34; } ] export const testLoginUserId = [ { summary: \u0026#34;æ­£ç¡®idè´¦å·ç™»å½•éªŒè¯\u0026#34;, username:\u0026#34;waitnoww\u0026#34;, password:\u0026#34;xxxx\u0026#34; } ] export const testLoginUserMobilephone = [ { summary: \u0026#34;æ­£ç¡®æ‰‹æœºå·è´¦å·ç™»å½•éªŒè¯\u0026#34;, username:\u0026#34;18888139031\u0026#34;, password:\u0026#34;xxxx\u0026#34; } ] ç¼–å†™æµ‹è¯•ç”¨ä¾‹ åœ¨é¡¹ç›® cypress/integration æ–‡ä»¶å¤¹ä¸‹æ–°å»º js æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œç¤ºä¾‹æ–‡ä»¶åä¸ºï¼štestLogin_guanggoo_data_by_js.js\nç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nimport { testLoginUserEmail, testLoginUserId, testLoginUserMobilephone } from \u0026#34;./testData/testLogin.data\u0026#34;; // æµ‹è¯•ç”¨ä¾‹ describe(\u0026#34;å…‰è°·ç¤¾åŒºç™»å½•éªŒè¯\u0026#34;, function () { // æ‰§è¡Œç”¨ä¾‹æ‰§è¡Œç”¨ä¾‹ä¹‹å‰å…ˆè¿›å…¥é¦–é¡µ beforeEach(function () { // è®¿é—®å¹¶ç™»å½•å…‰è°·ç¤¾åŒº cy.visit(\u0026#39;http://www.guanggoo.com/\u0026#39;) //è®¿é—®url cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;www.guanggoo.com\u0026#39;) //éªŒè¯ç›®æ ‡url æ˜¯å¦æ­£ç¡®åŒ…å«å…‰è°·ç¤¾åŒºæ­£ç¡®åŸŸå éªŒè¯æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å…‰è°·ç¤¾åŒºé¡µé¢ cy.title().should(\u0026#39;contain\u0026#39;, \u0026#39;å…‰è°·ç¤¾åŒº\u0026#39;) //éªŒè¯é¡µé¢ title æ˜¯å¦æ­£ç¡® }) //æ­£ç¡®é‚®ç®±è´¦å·ç™»å½• it(testLoginUserEmail[0].summary, function () { cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(testLoginUserEmail[0].username) //è¾“å…¥é‚®ç®±ç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(testLoginUserEmail[0].password) //è¾“å…¥å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.get(\u0026#39;.ui-header \u0026gt; .username\u0026#39;) .should(\u0026#39;have.text\u0026#39;, \u0026#39;waitnoww\u0026#39;) //éªŒè¯ç™»å½•æ­£ç¡®è¿”å›åˆ°é¦–é¡µï¼Œç™»å½•ä¿¡æ¯è¿”å›æ­£ç¡® }), //æ­£ç¡®IDè´¦å·ç™»å½• it(testLoginUserId[0].summary, function () { cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(testLoginUserId[0].username) //è¾“å…¥IDç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(testLoginUserId[0].password) //è¾“å…¥å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.get(\u0026#39;.ui-header \u0026gt; .username\u0026#39;) .should(\u0026#39;have.text\u0026#39;, \u0026#39;waitnoww\u0026#39;) //éªŒè¯ç™»å½•æ­£ç¡®è¿”å›åˆ°é¦–é¡µï¼Œç™»å½•ä¿¡æ¯è¿”å›æ­£ç¡® }), //æ­£ç¡®æ‰‹æœºè´¦å·ç™»å½• it(testLoginUserMobilephone[0].summary, function () { cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(testLoginUserMobilephone[0].username) //è¾“å…¥æ‰‹æœºå·ç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(testLoginUserMobilephone[0].password) //è¾“å…¥å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.get(\u0026#39;.ui-header \u0026gt; .username\u0026#39;) .should(\u0026#39;have.text\u0026#39;, \u0026#39;waitnoww\u0026#39;) //éªŒè¯ç™»å½•æ­£ç¡®è¿”å›åˆ°é¦–é¡µï¼Œç™»å½•ä¿¡æ¯è¿”å›æ­£ç¡® }) // æ‰§è¡Œç”¨ä¾‹æ‰§è¡Œç”¨ä¾‹ä¹‹åæ¸…é™¤ç™»å½•ä¿¡æ¯ afterEach(function () { // æ¸…é™¤cookies cy.clearCookies() }) }) è¿è¡Œæµ‹è¯•ç”¨ä¾‹ è¿è¡Œè„šæœ¬ï¼šnpm run cypress:open ç‚¹å‡»è¿è¡Œ testLogin_guanggoo_data_by_js.js ç”¨ä¾‹ æŸ¥çœ‹è¿è¡Œç»“æœ (æµ‹è¯•æ•°æ®èƒ½æ­£å¸¸è·å–åˆ°) fixture æµ‹è¯•æ•°æ®é©±åŠ¨ä»‹ç» fixture æ•°æ®é©±åŠ¨æ–¹å¼æ˜¯ cypress æ¡†æ¶æ¨èçš„æ–¹æ³•ï¼Œæ”¯æŒçš„æ ¼å¼ä¹Ÿå¾ˆå¤šï¼Œå¦‚.json/txt/html/jpg/gif/mp3/zip ç­‰ï¼Œå…·ä½“å¯å‚è€ƒï¼šhttps://docs.cypress.io/api/commands/fixture\nç®€ä»‹ Cypress ä½¿ç”¨ cypress/fixture ç›®å½•å­˜æ”¾ json æ–‡ä»¶æ•°æ®ï¼Œcy.fixture() åŠ è½½æµ‹è¯•æ•°æ®ï¼Œå¦‚æœä¸æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤ä» cypress/fixtures æ–‡ä»¶ä¸‹å»æŸ¥æ‰¾ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®æ–‡ä»¶è·¯å¾„\nä½¿ç”¨æ–¹æ³• ä»¥ json æ ¼å¼è¯»å–ä¸¾ä¾‹ä»‹ç»\næ–°å»ºæµ‹è¯•æ•°æ® json æ–‡ä»¶ ç¤ºä¾‹ï¼šåœ¨é¡¹ç›®çš„ cypress/fixtures æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª json æ–‡ä»¶ï¼Œç¤ºä¾‹æ–‡ä»¶åä¸ºï¼štestLoginData.json\ntestLoginData.json ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ˆè´¦å·å¯†ç è®°å¾—æ¢æˆè‡ªå·±çš„ï¼‰ï¼š\n\u0026#34;testLoginUserEmail\u0026#34;: { \u0026#34;summary\u0026#34;: \u0026#34;æ­£ç¡®é‚®ç®±è´¦å·ç™»å½•éªŒè¯\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;dengnao.123@163.com\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;xxxx\u0026#34; }, \u0026#34;testLoginUserId\u0026#34;: { \u0026#34;summary\u0026#34;: \u0026#34;æ­£ç¡® id è´¦å·ç™»å½•éªŒè¯\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;waitnoww\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;xxxx\u0026#34; }, \u0026#34;testLoginUserMobilephone\u0026#34;: { \u0026#34;summary\u0026#34;: \u0026#34;æ­£ç¡®æ‰‹æœºå·è´¦å·ç™»å½•éªŒè¯\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;18888889031\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;xxxx\u0026#34; } } ç¼–å†™æµ‹è¯•ç”¨ä¾‹ åœ¨é¡¹ç›® cypress/integration æ–‡ä»¶å¤¹ä¸‹æ–°å»º js æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œç¤ºä¾‹æ–‡ä»¶åä¸ºï¼štestLogin_guanggoo_data_by_fixture.js\nç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\ndescribe(\u0026#34;å…‰è°·ç¤¾åŒºç™»å½•éªŒè¯\u0026#34;, function () { // æ‰§è¡Œç”¨ä¾‹æ‰§è¡Œç”¨ä¾‹ä¹‹å‰å…ˆè¿›å…¥é¦–é¡µ beforeEach(function () { // è®¿é—®å¹¶ç™»å½•å…‰è°·ç¤¾åŒº cy.visit(\u0026#39;http://www.guanggoo.com/\u0026#39;) //è®¿é—®url cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;www.guanggoo.com\u0026#39;) //éªŒè¯ç›®æ ‡url æ˜¯å¦æ­£ç¡®åŒ…å«å…‰è°·ç¤¾åŒºæ­£ç¡®åŸŸå éªŒè¯æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å…‰è°·ç¤¾åŒºé¡µé¢ cy.title().should(\u0026#39;contain\u0026#39;, \u0026#39;å…‰è°·ç¤¾åŒº\u0026#39;) //éªŒè¯é¡µé¢ title æ˜¯å¦æ­£ç¡® // è·å–æµ‹è¯•æ•°æ® cy.fixture(\u0026#39;testLoginData.json\u0026#39;).as(\u0026#39;loginData\u0026#39;) }) //æ­£ç¡®é‚®ç®±è´¦å·ç™»å½• it(\u0026#34;æ­£ç¡®é‚®ç®±è´¦å·ç™»å½•éªŒè¯\u0026#34;, function () { cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(this.loginData.testLoginUserEmail.username) //è¾“å…¥é‚®ç®±ç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(this.loginData.testLoginUserEmail.password) //è¾“å…¥å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.get(\u0026#39;.ui-header \u0026gt; .username\u0026#39;) .should(\u0026#39;have.text\u0026#39;, \u0026#39;waitnoww\u0026#39;) //éªŒè¯ç™»å½•æ­£ç¡®è¿”å›åˆ°é¦–é¡µï¼Œç™»å½•ä¿¡æ¯è¿”å›æ­£ç¡® }), //æ­£ç¡®IDè´¦å·ç™»å½• it(\u0026#34;æ­£ç¡®idè´¦å·ç™»å½•éªŒè¯\u0026#34;, function () { cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(this.loginData.testLoginUserId.username) //è¾“å…¥IDç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(this.loginData.testLoginUserId.password) //è¾“å…¥å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.get(\u0026#39;.ui-header \u0026gt; .username\u0026#39;) .should(\u0026#39;have.text\u0026#39;, \u0026#39;waitnoww\u0026#39;) //éªŒè¯ç™»å½•æ­£ç¡®è¿”å›åˆ°é¦–é¡µï¼Œç™»å½•ä¿¡æ¯è¿”å›æ­£ç¡® }), //æ­£ç¡®æ‰‹æœºè´¦å·ç™»å½• it(\u0026#34;æ­£ç¡®æ‰‹æœºå·è´¦å·ç™»å½•éªŒè¯\u0026#34;, function () { cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(this.loginData.testLoginUserMobilephone.username) //è¾“å…¥æ‰‹æœºå·ç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(this.loginData.testLoginUserMobilephone.password) //è¾“å…¥å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.get(\u0026#39;.ui-header \u0026gt; .username\u0026#39;) .should(\u0026#39;have.text\u0026#39;, \u0026#39;waitnoww\u0026#39;) //éªŒè¯ç™»å½•æ­£ç¡®è¿”å›åˆ°é¦–é¡µï¼Œç™»å½•ä¿¡æ¯è¿”å›æ­£ç¡® }) // æ‰§è¡Œç”¨ä¾‹æ‰§è¡Œç”¨ä¾‹ä¹‹åæ¸…é™¤ç™»å½•ä¿¡æ¯ afterEach(function () { // æ¸…é™¤cookies cy.clearCookies() }) }) è¿è¡Œæµ‹è¯•ç”¨ä¾‹ è¿è¡Œè„šæœ¬ï¼šnpm run cypress:open ç‚¹å‡»è¿è¡Œ testLogin_guanggoo_data_by_fixture.js ç”¨ä¾‹ æŸ¥çœ‹è¿è¡Œç»“æœ (æµ‹è¯•æ•°æ®èƒ½æ­£å¸¸è·å–åˆ°) æ–¹æ³•å°è£…å‚æ•°åŒ– ç®€ä»‹ cypress æ¡†æ¶æä¾›äº†ä¸€ä¸ª commands.js å¯ä»¥è‡ªå®šä¹‰å„ç§å‘½ä»¤ï¼Œç”¨æ¥å°è£…å„ç§é€šç”¨æ–¹æ³•ï¼Œå‚æ•°åŒ–æ–¹æ³•ï¼Œå¸¸ç”¨è„šæœ¬ç­‰ï¼›\nå°†å¸¸ç”¨çš„é€šç”¨æ–¹æ³•å¦‚ç™»å½•æ–¹æ³•åœ¨ cypress/support/commands.js ä¸­ç¼–å†™å®Œæˆä¹‹åï¼Œä¸ cy.get()/cy.visit() ä¸€æ ·ï¼Œå¯ä»¥ç›´æ¥ç”¨ cy.xxx() å½¢å¼è°ƒç”¨ï¼Œéå¸¸æ–¹ä¾¿ï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬\nä½¿ç”¨ä»‹ç» ç¤ºä¾‹ä¼šä»‹ç»å¸¸ç”¨çš„å‚æ•°åŒ–ç™»å½•å‘½ä»¤å’Œè¿›å…¥é¦–é¡µå‘½ä»¤\nç™»å½•å‚æ•°åŒ–ç™»å½•å°è£… ä»£ç ç¼–å†™ æ‰“å¼€ cypress/support/commands.js æ–‡ä»¶ è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š Cypress.Commands.add(\u0026#34;login\u0026#34;,(username,password) =\u0026gt; { cy.clearCookies() //æ¸…é™¤ cookies,ä¿è¯é¡µé¢ä¸ºæœªç™»å½•çŠ¶æ€ cy.visit(\u0026#39;http://www.guanggoo.com/\u0026#39;) //è®¿é—® url cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;www.guanggoo.com\u0026#39;) //éªŒè¯ç›®æ ‡ url æ˜¯å¦æ­£ç¡®åŒ…å«å…‰è°·ç¤¾åŒºæ­£ç¡®åŸŸå éªŒè¯æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å…‰è°·ç¤¾åŒºé¡µé¢ cy.title().should(\u0026#39;contain\u0026#39;, \u0026#39;å…‰è°·ç¤¾åŒº\u0026#39;) //éªŒè¯é¡µé¢ title æ˜¯å¦æ­£ç¡® cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(username) //è¾“å…¥å‚æ•°åŒ–çš„ç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(password) //è¾“å…¥å‚æ•°åŒ–çš„å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.get(\u0026#39;:nth-child(2) \u0026gt; .nav-collapse\u0026#39;).should(\u0026#39;contain\u0026#39;, \u0026#39;è®¾ç½®\u0026#39;) //éªŒè¯ç™»å½•æˆåŠŸå›åˆ°é¦–é¡µï¼Œè®¾ç½®æŒ‰é’®å±•ç¤ºæ­£ç¡® }) ä»£ç ä½¿ç”¨ åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å¯ç›´æ¥è¿›è¡Œæ–¹æ³•è°ƒç”¨ cy.login(username,password) æ¢æˆè‡ªå·±çš„è´¦å·å¯†ç è¿›è¡Œç™»å½•æ“ä½œäº† cy.login(\u0026#34;dengnao.123@163.com\u0026#34;,\u0026#34;xxxx\u0026#34;) è¿›å…¥é¦–é¡µæ–¹æ³•å°è£… ä»£ç ç¼–å†™ æ‰“å¼€ cypress/support/commands.js æ–‡ä»¶ è¾“å…¥å¦‚ä¸‹ä»£ç ï¼š Cypress.Commands.add(\u0026#34;initHomePage\u0026#34;,() =\u0026gt; { cy.visit(\u0026#39;http://www.guanggoo.com/\u0026#39;) //è®¿é—® url cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;www.guanggoo.com\u0026#39;) //éªŒè¯ç›®æ ‡ url æ˜¯å¦æ­£ç¡®åŒ…å«å…‰è°·ç¤¾åŒºæ­£ç¡®åŸŸå éªŒè¯æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å…‰è°·ç¤¾åŒºé¡µé¢ cy.title().should(\u0026#39;contain\u0026#39;, \u0026#39;å…‰è°·ç¤¾åŒº\u0026#39;) //éªŒè¯é¡µé¢ title æ˜¯å¦æ­£ç¡® }) ä»£ç ä½¿ç”¨ åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å¯ç›´æ¥è¿›è¡Œæ–¹æ³•è°ƒç”¨ cy.initHomePage() å³å¯è¿›å…¥é¦–é¡µ cy.initHomePage() æµ‹è¯•æ¡†æ¶ä»‹ç» ç®€ä»‹ Cypress æ¡†æ¶é‡‡ç”¨äº† Mocha æ¡†æ¶çš„è¯­æ³•ï¼Œæ•… Mocha æ¡†æ¶çš„æµ‹è¯•è¯­æ³•å¯åœ¨ cypress ä¸Šç›´æ¥ä½¿ç”¨\nè¯­æ³•ä»‹ç» describe() å®šä¹‰æµ‹è¯•å¥—ä»¶ï¼Œé‡Œé¢è¿˜å¯ä»¥å®šä¹‰å¤šä¸ª context æˆ– it\ncontext() å®šä¹‰æµ‹è¯•å¥—ä»¶ï¼Œæ˜¯ describe() çš„åˆ«åï¼Œå¯ä»¥æ›¿ä»£ describe\nit() å®šä¹‰æµ‹è¯•ç”¨ä¾‹\nbefore() åœ¨ä¸€ä¸ªæµ‹è¯•å¥—ä»¶ä¸­çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œï¼Œè®¾ç½®ä¸€äº›è¿è¡Œ testcase çš„å‰ç½®æ¡ä»¶\n// runs once before the first test in this block }); beforeEach() åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹å‰æ‰§è¡Œ\n// è®¿é—®å¹¶ç™»å½•å…‰è°·ç¤¾åŒº cy.visit(\u0026#39;http://www.guanggoo.com/\u0026#39;) //è®¿é—®url cy.url().should(\u0026#39;include\u0026#39;, \u0026#39;www.guanggoo.com\u0026#39;) //éªŒè¯ç›®æ ‡url æ˜¯å¦æ­£ç¡®åŒ…å«å…‰è°·ç¤¾åŒºæ­£ç¡®åŸŸå éªŒè¯æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å…‰è°·ç¤¾åŒºé¡µé¢ cy.title().should(\u0026#39;contain\u0026#39;, \u0026#39;å…‰è°·ç¤¾åŒº\u0026#39;) //éªŒè¯é¡µé¢ title æ˜¯å¦æ­£ç¡® }) afterEach() åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰§è¡Œï¼Œå¯ä»¥æ‰§è¡Œæ¸…é™¤æ•°æ®ç­‰æ“ä½œ\n// æ¸…é™¤ cookies cy.clearCookies() }) after() åœ¨ä¸€ä¸ªæµ‹è¯•å¥—ä»¶ä¸­çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰§è¡Œ\n// runs once after the last test in this block }); .only() è®¾ç½®åªæ‰§è¡ŒæŸä¸ª testcase/testsuite\ndescribe.only(\u0026#39;#indexOf()\u0026#39;, function() { // ... }); }); .skip() è®¾ç½®è·³è¿‡æ‰§è¡ŒæŸä¸ª testcase/testsuite\ndescribe(\u0026#39;#indexOf()\u0026#39;, function() { it.skip(\u0026#39;should return -1 unless present\u0026#39;, function() { // this test will not be run }); it(\u0026#39;should return the index when present\u0026#39;, function() { // this test will be run }); }); }); å‚è€ƒç½‘å€ https://docs.cypress.io/guides/references/bundled-tools#Mocha æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/cypress-demo4/","summary":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ç¬¬å››ç¯‡æ•°æ®é©±åŠ¨æ–¹æ³•å°è£…å‚æ•°åŒ–å’Œæµ‹è¯•æ¡†æ¶çš„ä»‹ç»ã€‚ åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ä¸­ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ç”¨æ¥é©±åŠ¨æµ‹è¯•æ¡†æ¶ã€‚ä¾‹å¦‚ï¼Œæ•°æ®é©±åŠ¨æ–¹æ³•å°è£…å‚æ•°åŒ–å’Œæµ‹è¯•æ¡†æ¶ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å°†æµ‹è¯•æ¡†æ¶çš„æ•°æ®å¤„ç†å’Œé¢„è®¾ç¯å¢ƒç­‰ç°æœ‰æ¨¡å‹ç»“åˆèµ·æ¥ã€‚è¿™æ ·å°±å¯ä»¥æ–¹ä¾¿åœ°å¼€å‘ã€æµ‹è¯•å’Œè¿è¡Œæ–°çš„æµ‹è¯•æ¡†æ¶ã€‚\næµ‹è¯•æ•°æ®é©±åŠ¨ js æ ¼å¼æµ‹è¯•æ•°æ®é©±åŠ¨ ç®€ä»‹ æ•°æ®ä»¥ js æ ¼å¼å­˜å‚¨ï¼Œä½¿ç”¨ js çš„ import æ–¹æ³•å¯¼å…¥ä½¿ç”¨\nä½¿ç”¨æ–¹æ³• æ–°å»ºæµ‹è¯•æ•°æ® js æ–‡ä»¶ ç¤ºä¾‹ï¼šåœ¨é¡¹ç›®çš„ cypress/integration æ–‡ä»¶å¤¹ä¸‹æ–°å»º testData ç›®å½•ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª js æ–‡ä»¶ï¼Œç¤ºä¾‹æ–‡ä»¶åä¸ºï¼štestLogin.data.js\ntestLogin.data.js ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nexport const testLoginUserEmail = [ { summary: \u0026#34;æ­£ç¡®é‚®ç®±è´¦å·ç™»å½•éªŒè¯\u0026#34;, username:\u0026#34;dengnao.123@163.com\u0026#34;, password:\u0026#34;xxxx\u0026#34; } ] export const testLoginUserId = [ { summary: \u0026#34;æ­£ç¡®idè´¦å·ç™»å½•éªŒè¯\u0026#34;, username:\u0026#34;waitnoww\u0026#34;, password:\u0026#34;xxxx\u0026#34; } ] export const testLoginUserMobilephone = [ { summary: \u0026#34;æ­£ç¡®æ‰‹æœºå·è´¦å·ç™»å½•éªŒè¯\u0026#34;, username:\u0026#34;18888139031\u0026#34;, password:\u0026#34;xxxx\u0026#34; } ] ç¼–å†™æµ‹è¯•ç”¨ä¾‹ åœ¨é¡¹ç›® cypress/integration æ–‡ä»¶å¤¹ä¸‹æ–°å»º js æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼Œç¤ºä¾‹æ–‡ä»¶åä¸ºï¼štestLogin_guanggoo_data_by_js.js\nç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nimport { testLoginUserEmail, testLoginUserId, testLoginUserMobilephone } from \u0026#34;.","title":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ4ï¼‰- æ•°æ®é©±åŠ¨ï¼Œæ–¹æ³•å°è£…å‚æ•°åŒ–å’Œæµ‹è¯•æ¡†æ¶"},{"content":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯å¯¹äºæ¡†æ¶å­¦ä¹ ç¬¬ 3 ç¯‡çš„ä»‹ç»ã€‚åœ¨è¯¥ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨å…ƒç´ å®šä½ã€æ“ä½œå’Œæ–­è¨€ã€‚è¯¥æ¡†æ¶å¯ä»¥å¸®åŠ©ç”¨æˆ·å®šä½ç›¸å…³çš„å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥å¸®åŠ©ç”¨æˆ·è¿›è¡Œæ“ä½œã€‚è¿™äº›æ“ä½œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ–­è¨€äº‹ä»¶ã€‚\nå…ƒç´ å®šä½ è°ˆåˆ° UI è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¸ç®¡æ˜¯ web ç«¯è¿˜æ˜¯ç§»åŠ¨ç«¯ï¼Œé¡µé¢å…ƒç´ çš„å„ç§æ“ä½œåœ¨ç¼–å†™æµ‹è¯•è„šæœ¬æ—¶éƒ½ä¼šæ¶‰åŠï¼Œå¦‚æœæƒ³å†™å‡ºé«˜é€šè¿‡ç‡å’Œé«˜å¥å£®æ€§çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œå¿…é¡»è¦ç¡®ä¿æ­£ç¡®é«˜æ•ˆçš„é¡µé¢å…ƒç´ è¯†åˆ«å’Œä½¿ç”¨ã€‚\ncypress æ¡†æ¶é™¤äº†æ”¯æŒå¸¸ç”¨çš„å…ƒç´ å®šä½ï¼Œè¿˜æä¾›äº†å¥½ç”¨çš„ JQuery css é€‰æ‹©å™¨ã€‚\nä¸‹é¢ä¼šä»‹ç»å¸¸ç”¨çš„å…ƒç´ å®šä½æ–¹æ³•ï¼Œå¸¸ç”¨çš„å®šä½æ–¹å¼ï¼Œä»¥åŠæ¡†æ¶è‡ªå¸¦å¯è§†åŒ–è‡ªåŠ©å…ƒç´ å®šä½æ–¹æ³•\nå¸¸ç”¨å…ƒç´ å®šä½ #id å®šä½ æè¿°ï¼šé€šè¿‡å…ƒç´ çš„ id å±æ€§æ¥å®šä½\nå‰æï¼šå®šä½çš„å…ƒç´  css æ ·å¼é¡»å­˜åœ¨ id å±æ€§ä¸”å”¯ä¸€\n//å…ƒç´ å‰ç«¯ä»£ç ç¤ºä¾‹ \u0026lt;input type=\u0026quot;text\u0026quot; id=\u0026quot;email\u0026quot; name=\u0026quot;email\u0026quot; placeholder=\u0026quot;\u0026quot; class=\u0026quot;form-control\u0026quot;\u0026gt;\nç¤ºä¾‹ä»£ç  cy.get('#email') .class å®šä½ æè¿°ï¼šé€šè¿‡å…ƒç´ çš„ class å±æ€§æ¥å®šä½\nå‰æï¼šå®šä½çš„å…ƒç´  css æ ·å¼å­˜åœ¨ class å±æ€§ä¸”å”¯ä¸€\n//å…ƒç´ å‰ç«¯ä»£ç ç¤ºä¾‹ \u0026lt;a class=\u0026quot;navbar-brand\u0026quot; href=\u0026quot;/\u0026quot;\u0026gt;\u0026lt;img width=\u0026quot;150\u0026quot; height=\u0026quot;28\u0026quot; border=\u0026quot;0\u0026quot; align=\u0026quot;default\u0026quot; alt=\u0026quot;å…‰è°·ç¤¾åŒº\u0026quot; src=\u0026quot;http://cdn.guanggoo.com//static/images/guanggoonew.png\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\nç¤ºä¾‹ä»£ç  cy.get('.navbar-brand')\nname å®šä½ æè¿°ï¼šé€šè¿‡å…ƒç´  name å®šä½\nå‰æï¼šå®šä½çš„å…ƒç´  css æ ·å¼å­˜åœ¨ name å±æ€§ä¸”å”¯ä¸€ //å…ƒç´ å‰ç«¯ä»£ç ç¤ºä¾‹ \u0026lt;input type=\u0026quot;text\u0026quot; id=\u0026quot;email\u0026quot; name=\u0026quot;email\u0026quot; placeholder=\u0026quot;\u0026quot; class=\u0026quot;form-control\u0026quot;\u0026gt;\nç¤ºä¾‹ä»£ç \ncy.get('input[name=\u0026quot;email\u0026quot;]')\nå¸¸ç”¨å®šä½æ–¹å¼ .get() æè¿°ï¼šä½¿ç”¨ get() å®šä½å…ƒç´ ï¼Œå®šä½å…ƒç´ ç”¨ CSS selectorsï¼Œè·Ÿ jQuery ä¸€æ · ç¤ºä¾‹ä»£ç  cy.get('#email')\n.contains() æè¿°ï¼šå¯ä»¥ä½¿ç”¨ cy.containsï¼ˆï¼‰æ ¹æ®å…ƒç´ çš„å†…å®¹æ‰¾åˆ°å…ƒç´ \nç¤ºä¾‹ä»£ç \ncy.contains(â€˜valueâ€™) cy.get(â€˜div[name=â€œdiv_nameâ€]â€™).contains(â€˜valueâ€™)\n.within() æè¿°ï¼šå¯ä»¥åœ¨ç‰¹å®šçš„ DOM å…ƒç´ ä¸­æ‰¾åˆ°å…ƒç´ \nç¤ºä¾‹ä»£ç \ncy.get('.query-form').within(() =\u0026gt; { cy.get('input:first').should('have.attr', 'placeholder', 'Email') cy.get('input:last').should('have.attr', 'placeholder', 'Password') })\nCypress.$ æè¿°ï¼šCypress ä¹Ÿæä¾›äº† JQuery é€‰æ‹©å™¨ï¼Œè°ƒç”¨ Cypress.$(\u0026lsquo;button\u0026rsquo;ï¼‰ä¼šè‡ªåŠ¨åœ¨æ‚¨çš„çª—å£ä¸­æŸ¥è¯¢å…ƒç´ ã€‚æ¢å¥è¯è¯´ï¼ŒCypress ä¼šè‡ªåŠ¨å°†æ–‡æ¡£è®¾ç½®ä¸ºæ‚¨å½“å‰é€šè¿‡ cy.visit() å¯¼èˆªåˆ°çš„ä»»ä½•å†…å®¹ï¼Œè¿™æ˜¯ä»å¼€å‘äººå‘˜å·¥å…·è°ƒè¯•æ—¶åŒæ­¥æŸ¥è¯¢å…ƒç´ çš„å¥½æ–¹æ³•ã€‚\nç¤ºä¾‹ä»£ç \nCypress.$(selector) // other proxied jQuery methods Cypress.$.Event Cypress.$.Deferred Cypress.$.ajax Cypress.$.get Cypress.$.getJSON Cypress.$.getScript Cypress.$.post\næ¡†æ¶è‡ªå¸¦å¯è§†åŒ–è‡ªåŠ©å…ƒç´ å®šä½ 1.å‰æï¼šdemo ä»£ç å·²ç»è·‘èµ·æ¥ (è¿è¡Œè„šæœ¬ï¼šnpm run cypress:open) 2.ç‚¹å‡»è¿è¡Œè°ƒè¯•ç”¨ä¾‹ï¼Œè¿›å…¥å®šä½å…ƒç´ å¯¹åº”çš„é¡µé¢ 3.åœ¨é¡µé¢ä¸Šé€‰æ‹©ç„å‡†é•œæ ‡è¯†ï¼ˆopen selector playgroundï¼‰\n4.é€‰æ‹©é¡µé¢ä¸Šçš„å…ƒç´ åŒºåŸŸï¼Œå…ƒç´ çš„å®šä½ä¿¡æ¯å°±ä¼šå±•ç¤ºåœ¨å®šä½ä¿¡æ¯å±•ç¤ºåŒºåŸŸï¼Œç‚¹å‡»å¤åˆ¶å°±å¯ä½¿ç”¨\nå…ƒç´ å¸¸ç”¨æ“ä½œ .click() æè¿°ï¼šå•å‡»\nç¤ºä¾‹ä»£ç \ncy.get('.btn-success').click()\n.type(value) æè¿°ï¼šè¾“å…¥å†…å®¹\nç¤ºä¾‹ä»£ç  cy.get(â€˜input[name=â€œusernameâ€]â€™).type(\u0026lsquo;dengnao.123@163.com\u0026rsquo;)``\n.clear() æè¿°ï¼šæ¸…ç©ºè¾“å…¥å†…å®¹\nç¤ºä¾‹ä»£ç \ncy.get(â€˜[type=â€œtextâ€]â€™).clear()\n.submit() æè¿°ï¼šæäº¤è¡¨å•\nç¤ºä¾‹ä»£ç \ncy.get(â€˜.ant-inputâ€™).submit()\n.dbclick()/.rightclick() æè¿°ï¼šé¼ æ ‡åŒå‡»æ“ä½œ/é¼ æ ‡å³å‡»æ“ä½œ\nç¤ºä¾‹ä»£ç \ncy.get('.menu').rightclick() // é¼ æ ‡å³å‡» .menu èœå•å…ƒç´ \n.select() æè¿°ï¼šé’ˆå¯¹å…ƒç´ é€‰æ‹©ä¸€ä¸ªé€‰é¡¹\nç¤ºä¾‹ä»£ç \ncy.get('color').select('red') // é¢œè‰²é€‰é¡¹ä¸­é€‰æ‹©çº¢è‰²\n.check()/.uncheck() æè¿°ï¼šå•é€‰æˆ–å¤šé€‰è¿›è¡Œå‹¾é€‰/å–æ¶ˆé€‰ä¸­ (åé€‰)\nç¤ºä¾‹ä»£ç \ncy.get('[type=\u0026quot;checkbox\u0026quot;]').check() // å¯¹ checkbox è¿›è¡Œé€‰ä¸­æ“ä½œ cy.get('[type=\u0026quot;checkbox\u0026quot;]').uncheck() // å¯¹ checkbox è¿›è¡Œå–æ¶ˆé€‰ä¸­æ“ä½œ\n.focus()/.blur() æè¿°ï¼šå¯¹é€‰é¡¹è¿›è¡Œèšç„¦/å¤±ç„¦æ“ä½œ\nç¤ºä¾‹ä»£ç \ncy.get(â€˜input[name=â€œusernameâ€]â€™).focus() //å¯¹äºç”¨æˆ·åè¾“å…¥æ¡†è¿›è¡Œèšç„¦æ“ä½œ\næ–­è¨€ BDD æ–­è¨€ æ–­è¨€ç±»å‹ .should()ï¼š æè¿°ï¼šåˆ›å»ºæ–­è¨€ï¼Œæ–­è¨€ä¼šè‡ªåŠ¨é‡è¯•ï¼Œç›´åˆ°å®ƒä»¬é€šè¿‡æˆ–è¶…æ—¶ã€‚\nç¤ºä¾‹ä»£ç \ncy.get(â€˜.ant-checkbox).should(â€˜be.checkedâ€™)\n.expect()ï¼š æè¿°ï¼šé¢„æœŸç»“æœ\nç¤ºä¾‹ä»£ç \nexpect(name).to.not.equal(â€˜dengnao.123@163.comâ€™)\nå¸¸ç”¨æ–­è¨€ å¯å‚è€ƒå®˜ç½‘æ–‡æ¡£:https://docs.cypress.io/guides/references/assertions#BDD-Assertions\nTDD æ–­è¨€ æ–­è¨€ç±»å‹ .assert()ï¼š æè¿°ï¼šæ–­è¨€\nç¤ºä¾‹ä»£ç \nassert.equal(3,3,â€™vals equalâ€™)\nå¸¸ç”¨æ–­è¨€ å¯å‚è€ƒå®˜ç½‘æ–‡æ¡£:https://docs.cypress.io/guides/references/assertions#TDD-Assertions\nå¸¸ç”¨æ–­è¨€ é’ˆå¯¹é•¿åº¦ï¼ˆlengthï¼‰çš„æ–­è¨€ `//é‡è¯•ï¼Œç›´åˆ°æ‰¾åˆ° 3 ä¸ªåŒ¹é…çš„\u0026lt;li.selected\u0026gt; cy.get('li.selected').should('have.length',3)` é’ˆå¯¹ç±»ï¼ˆClassï¼‰çš„æ–­è¨€ `//é‡è¯•ï¼Œç›´åˆ° input å…ƒç´ æ²¡æœ‰ç±»è¢« disabled ä¸ºæ­¢ï¼ˆæˆ–è€…è¶…æ—¶ä¸ºæ­¢ï¼‰ cy.get('from').fijd('input').should('not.have.class','disabled')` é’ˆå¯¹å€¼ï¼ˆValueï¼‰æ–­è¨€ `//é‡è¯•ï¼Œç›´åˆ° textarea çš„å€¼ä¸ºâ€˜iTestingâ€™ cy.get('textarea').should('have.value','iTesting')` é’ˆå¯¹æ–‡æœ¬å†…å®¹ï¼ˆText Contentï¼‰çš„æ–­è¨€ //é‡è¯•ï¼Œç›´åˆ°è¿™ä¸ª span ä¸åŒ…å«â€œclick meâ€å­—æ · cy.get('a').parent('span.help').should('not.contain','click me') //é‡è¯•ï¼Œç›´åˆ°è¿™ä¸ª span åŒ…å«â€œclick meâ€å­—æ · cy.get('a').parent('span.help').should('contain','click me')\né’ˆå¯¹å…ƒç´ å¯è§ä¸å¦ï¼ˆVisibilityï¼‰çš„æ–­è¨€ //é‡è¯•ï¼Œç›´åˆ°è¿™ä¸ª button æ˜¯å¯ä¸ºæ­¢ cy.get('button').should('be.visible')\né’ˆå¯¹å…ƒç´ å­˜åœ¨ä¸å¦ï¼ˆExistenceï¼‰çš„æ–­è¨€ //é‡è¯•ï¼Œç›´åˆ° id ä¸º loading çš„ spinner ä¸åœ¨å­˜åœ¨ cy.get('#loading').should('not.exist')\né’ˆå¯¹å…ƒç´ çŠ¶æ€çš„ï¼ˆstatusï¼‰çš„æ–­è¨€ `//é‡è¯•ï¼Œç›´åˆ°è¿™ä¸ª radio button æ˜¯é€‰ä¸­çŠ¶æ€ cy.get('ï¼šradio').should('be.checked')` é’ˆå¯¹ CSS çš„æ–­è¨€ `//é‡è¯•ï¼Œç›´åˆ° completed è¿™ä¸ªç±»æœ‰åŒ¹é…çš„ css ä¸ºæ­¢ cy.get('.completed').should('have.css','text-decoration','line-through')` è¿è¡Œå‡ºé”™é—®é¢˜è®°å½• è¿è¡Œ npm run cypress:open æŠ¥é”™ï¼Œæç¤º No version of Cypress is installed æŠ¥é”™æˆªå›¾å¦‚ä¸‹ï¼š ä¿®å¤æ–¹å¼ //é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯è§£å†³ ./node_modules/.bin/cypress install\nåŸå›  ç”µè„‘ä½¿ç”¨è¿‡æ¸…ç†è½¯ä»¶ï¼Œå®‰è£…çš„ cypress ç¼“å­˜ä¿¡æ¯è¢«åˆ é™¤äº†ï¼Œé‡æ–°å®‰è£…å°±å¥½\nè¿è¡Œ npm run cypress:open æŠ¥é”™ï¼Œæç¤º Cypress verification timed out æŠ¥é”™æˆªå›¾å¦‚ä¸‹ï¼š ä¿®å¤æ–¹å¼ é‡æ–°è¿è¡Œ npm run cypress:open å°è¯•å³å¯\nåŸå›  ç”µè„‘ cypress éªŒè¯è¶…æ—¶äº†ï¼Œä¸€èˆ¬é‡æ–°æ“ä½œå³å¯æ¢å¤\næ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/cypress-demo3/","summary":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯å¯¹äºæ¡†æ¶å­¦ä¹ ç¬¬ 3 ç¯‡çš„ä»‹ç»ã€‚åœ¨è¯¥ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨å…ƒç´ å®šä½ã€æ“ä½œå’Œæ–­è¨€ã€‚è¯¥æ¡†æ¶å¯ä»¥å¸®åŠ©ç”¨æˆ·å®šä½ç›¸å…³çš„å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥å¸®åŠ©ç”¨æˆ·è¿›è¡Œæ“ä½œã€‚è¿™äº›æ“ä½œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ–­è¨€äº‹ä»¶ã€‚\nå…ƒç´ å®šä½ è°ˆåˆ° UI è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¸ç®¡æ˜¯ web ç«¯è¿˜æ˜¯ç§»åŠ¨ç«¯ï¼Œé¡µé¢å…ƒç´ çš„å„ç§æ“ä½œåœ¨ç¼–å†™æµ‹è¯•è„šæœ¬æ—¶éƒ½ä¼šæ¶‰åŠï¼Œå¦‚æœæƒ³å†™å‡ºé«˜é€šè¿‡ç‡å’Œé«˜å¥å£®æ€§çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œå¿…é¡»è¦ç¡®ä¿æ­£ç¡®é«˜æ•ˆçš„é¡µé¢å…ƒç´ è¯†åˆ«å’Œä½¿ç”¨ã€‚\ncypress æ¡†æ¶é™¤äº†æ”¯æŒå¸¸ç”¨çš„å…ƒç´ å®šä½ï¼Œè¿˜æä¾›äº†å¥½ç”¨çš„ JQuery css é€‰æ‹©å™¨ã€‚\nä¸‹é¢ä¼šä»‹ç»å¸¸ç”¨çš„å…ƒç´ å®šä½æ–¹æ³•ï¼Œå¸¸ç”¨çš„å®šä½æ–¹å¼ï¼Œä»¥åŠæ¡†æ¶è‡ªå¸¦å¯è§†åŒ–è‡ªåŠ©å…ƒç´ å®šä½æ–¹æ³•\nå¸¸ç”¨å…ƒç´ å®šä½ #id å®šä½ æè¿°ï¼šé€šè¿‡å…ƒç´ çš„ id å±æ€§æ¥å®šä½\nå‰æï¼šå®šä½çš„å…ƒç´  css æ ·å¼é¡»å­˜åœ¨ id å±æ€§ä¸”å”¯ä¸€\n//å…ƒç´ å‰ç«¯ä»£ç ç¤ºä¾‹ \u0026lt;input type=\u0026quot;text\u0026quot; id=\u0026quot;email\u0026quot; name=\u0026quot;email\u0026quot; placeholder=\u0026quot;\u0026quot; class=\u0026quot;form-control\u0026quot;\u0026gt;\nç¤ºä¾‹ä»£ç  cy.get('#email') .class å®šä½ æè¿°ï¼šé€šè¿‡å…ƒç´ çš„ class å±æ€§æ¥å®šä½\nå‰æï¼šå®šä½çš„å…ƒç´  css æ ·å¼å­˜åœ¨ class å±æ€§ä¸”å”¯ä¸€\n//å…ƒç´ å‰ç«¯ä»£ç ç¤ºä¾‹ \u0026lt;a class=\u0026quot;navbar-brand\u0026quot; href=\u0026quot;/\u0026quot;\u0026gt;\u0026lt;img width=\u0026quot;150\u0026quot; height=\u0026quot;28\u0026quot; border=\u0026quot;0\u0026quot; align=\u0026quot;default\u0026quot; alt=\u0026quot;å…‰è°·ç¤¾åŒº\u0026quot; src=\u0026quot;http://cdn.guanggoo.com//static/images/guanggoonew.png\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\nç¤ºä¾‹ä»£ç  cy.get('.navbar-brand')\nname å®šä½ æè¿°ï¼šé€šè¿‡å…ƒç´  name å®šä½\nå‰æï¼šå®šä½çš„å…ƒç´  css æ ·å¼å­˜åœ¨ name å±æ€§ä¸”å”¯ä¸€ //å…ƒç´ å‰ç«¯ä»£ç ç¤ºä¾‹ \u0026lt;input type=\u0026quot;text\u0026quot; id=\u0026quot;email\u0026quot; name=\u0026quot;email\u0026quot; placeholder=\u0026quot;\u0026quot; class=\u0026quot;form-control\u0026quot;\u0026gt;","title":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ3ï¼‰- å…ƒç´ å®šä½ï¼Œæ“ä½œå’Œæ–­è¨€"},{"content":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯ä»‹ç» cypress è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ç¬¬ 3 ç¯‡çš„æµ‹è¯•æŠ¥å‘Šçš„å†…å®¹ ä¸»è¦ä»‹ç»ä¸€ä¸‹å¦‚ä½•å»ä½¿ç”¨ä¸åŒæ ¼å¼çš„ cypress è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Šæ¨¡ç‰ˆ\nå†™åœ¨å‰é¢ ç”±äº Cypress æµ‹è¯•æŠ¥å‘Šæ˜¯å»ºç«‹åœ¨ Mocha æµ‹è¯•æŠ¥å‘Šä¹‹ä¸Šçš„ï¼Œè¿™æ„å‘³ç€ä»»ä½•ä¸º Mocha æ„å»ºçš„æŠ¥å‘Šç¨‹åºéƒ½å¯ä»¥ä¸ Cypress ä¸€èµ·ä½¿ç”¨ã€‚\nä»¥ä¸‹æ˜¯å†…ç½®çš„ Mocha æµ‹è¯•ç±»å‹åˆ—è¡¨ï¼ˆCypress ä¹ŸåŒæ ·æ”¯æŒï¼‰ï¼šhttps://mochajs.org/#reporters\nå‰ç½®å‡†å¤‡å·¥ä½œ åœ¨ package.json æ–‡ä»¶çš„ scripts æ¨¡å—åŠ å…¥äº†å¦‚ä¸‹è„šæœ¬ï¼š\u0026ldquo;cypress:run\u0026rdquo;:\u0026ldquo;cypress run\u0026rdquo;ï¼Œä¾¿äºåé¢ç”ŸæˆæŠ¥å‘Š\nä¸åŒè¿è¡Œè„šæœ¬çš„åŒºåˆ«ï¼š\ncypress runï¼šæ˜¯ä»¥æ— å¤´æµè§ˆå™¨æ¨¡å¼è·‘æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ cypress openï¼šä¼šæ‰“å¼€æµ‹è¯•ç”¨ä¾‹é›†çš„ç•Œé¢ï¼Œéœ€è¦æ‰‹åŠ¨è¿è¡Œ å¸¸ç”¨æŠ¥å‘Šç±»å‹ spec æ ¼å¼æŠ¥å‘Š è¿è¡Œå‘½ä»¤ $ npm run cypress:run --reporter=spec æŠ¥å‘Šæˆªå›¾ Dot æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šåœ¨ cypress.json æ–‡ä»¶æ–°å¢\u0026quot;reporter\u0026quot;: \u0026ldquo;dot\u0026quot;ä¿¡æ¯\nè¿è¡Œæ–¹å¼ï¼š\n$ npm run cypress:run æŠ¥å‘Šæˆªå›¾ json æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šåœ¨ cypress.json æ–‡ä»¶æ–°å¢\u0026quot;reporter\u0026rdquo;: \u0026ldquo;json\u0026quot;ä¿¡æ¯\nè¿è¡Œæ–¹å¼ï¼š\n$ npm run cypress:run æŠ¥å‘Šæˆªå›¾ List æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šåœ¨ cypress.json æ–‡ä»¶æ–°å¢\u0026quot;reporter\u0026rdquo;: \u0026ldquo;list\u0026quot;ä¿¡æ¯\nè¿è¡Œæ–¹å¼ï¼š\n$ npm run cypress:run æŠ¥å‘Šæˆªå›¾ NYAN æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šåœ¨ cypress.json æ–‡ä»¶æ–°å¢\u0026quot;reporter\u0026rdquo;: \u0026ldquo;nyan\u0026quot;ä¿¡æ¯\nè¿è¡Œæ–¹å¼ï¼š\n$ npm run cypress:run æŠ¥å‘Šæˆªå›¾ é«˜å¤§ä¸ŠæŠ¥å‘Šç±»å‹ Mochawesome æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šå®‰è£… Mochaã€Mochawesome è‡³é¡¹ç›®ä¸­ npm install --save-dev mocha npm install --save-dev mochawesome åœ¨ cypress.json æ–‡ä»¶æ–°å¢\u0026quot;reporter\u0026rdquo;: \u0026ldquo;mochawesome\u0026quot;ä¿¡æ¯\nè¿è¡Œå‘½ä»¤\n$ npm run cypress:run æŠ¥å‘Šæˆªå›¾ allure æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šå®‰è£… allureï¼ˆæ¨èä½¿ç”¨ brew å®‰è£…ï¼‰ $ brew install allure åœ¨ cypress.json æ–‡ä»¶æ–°å¢å¦‚ä¸‹ä¿¡æ¯ \u0026#34;reporter\u0026#34;: \u0026#34;junit\u0026#34;, \u0026#34;reporterOptions\u0026#34;: { \u0026#34;mochaFile\u0026#34;: \u0026#34;results/test_report_[hash].xml\u0026#34;, \u0026#34;toConsole\u0026#34;: true } è¿è¡Œå‘½ä»¤ $ npm run cypress:run ç”ŸæˆæŠ¥å‘Š $ allure serve results æŠ¥å‘Šæˆªå›¾ Dashboard æ ¼å¼æŠ¥å‘Š å¾…å®Œå–„ï¼Œå‚è€ƒèµ„æ–™ï¼šhttps://docs.cypress.io/guides/dashboard/introduction#Features\nè¿è¡Œå‘½ä»¤ npx cypress run --record --key 7aaee33b-f67b-4993-8d6c-2c392a1bd1c8 æŠ¥å‘Šæˆªå›¾ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/cypress-demo2/","summary":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯ä»‹ç» cypress è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ç¬¬ 3 ç¯‡çš„æµ‹è¯•æŠ¥å‘Šçš„å†…å®¹ ä¸»è¦ä»‹ç»ä¸€ä¸‹å¦‚ä½•å»ä½¿ç”¨ä¸åŒæ ¼å¼çš„ cypress è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Šæ¨¡ç‰ˆ\nå†™åœ¨å‰é¢ ç”±äº Cypress æµ‹è¯•æŠ¥å‘Šæ˜¯å»ºç«‹åœ¨ Mocha æµ‹è¯•æŠ¥å‘Šä¹‹ä¸Šçš„ï¼Œè¿™æ„å‘³ç€ä»»ä½•ä¸º Mocha æ„å»ºçš„æŠ¥å‘Šç¨‹åºéƒ½å¯ä»¥ä¸ Cypress ä¸€èµ·ä½¿ç”¨ã€‚\nä»¥ä¸‹æ˜¯å†…ç½®çš„ Mocha æµ‹è¯•ç±»å‹åˆ—è¡¨ï¼ˆCypress ä¹ŸåŒæ ·æ”¯æŒï¼‰ï¼šhttps://mochajs.org/#reporters\nå‰ç½®å‡†å¤‡å·¥ä½œ åœ¨ package.json æ–‡ä»¶çš„ scripts æ¨¡å—åŠ å…¥äº†å¦‚ä¸‹è„šæœ¬ï¼š\u0026ldquo;cypress:run\u0026rdquo;:\u0026ldquo;cypress run\u0026rdquo;ï¼Œä¾¿äºåé¢ç”ŸæˆæŠ¥å‘Š\nä¸åŒè¿è¡Œè„šæœ¬çš„åŒºåˆ«ï¼š\ncypress runï¼šæ˜¯ä»¥æ— å¤´æµè§ˆå™¨æ¨¡å¼è·‘æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ cypress openï¼šä¼šæ‰“å¼€æµ‹è¯•ç”¨ä¾‹é›†çš„ç•Œé¢ï¼Œéœ€è¦æ‰‹åŠ¨è¿è¡Œ å¸¸ç”¨æŠ¥å‘Šç±»å‹ spec æ ¼å¼æŠ¥å‘Š è¿è¡Œå‘½ä»¤ $ npm run cypress:run --reporter=spec æŠ¥å‘Šæˆªå›¾ Dot æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šåœ¨ cypress.json æ–‡ä»¶æ–°å¢\u0026quot;reporter\u0026quot;: \u0026ldquo;dot\u0026quot;ä¿¡æ¯\nè¿è¡Œæ–¹å¼ï¼š\n$ npm run cypress:run æŠ¥å‘Šæˆªå›¾ json æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šåœ¨ cypress.json æ–‡ä»¶æ–°å¢\u0026quot;reporter\u0026rdquo;: \u0026ldquo;json\u0026quot;ä¿¡æ¯\nè¿è¡Œæ–¹å¼ï¼š\n$ npm run cypress:run æŠ¥å‘Šæˆªå›¾ List æ ¼å¼æŠ¥å‘Š å‰ç½®ï¼šåœ¨ cypress.","title":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ2ï¼‰- æµ‹è¯•æŠ¥å‘Š"},{"content":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯å¯¹ Cypress è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„æ–°æ‰‹å…¥é—¨ä»‹ç»ã€‚å¦‚æœä½ æƒ³è¦å­¦ä¹ æ›´å¤šå…³äº playwright è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…å®ƒçš„æ–‡æ¡£ã€‚è¿è¡Œæµ‹è¯•ï¼šæ‰“å¼€æµ‹è¯•ç•Œé¢ï¼Œé€‰æ‹©\u0026quot;è¿è¡Œæµ‹è¯•\u0026quot;ã€‚ä¸‹é¢ä¼šæ˜¾ç¤ºä¸€ä¸ªéå¸¸ç®€å•çš„æµ‹è¯•ç”»é¢ã€‚ä½ å¯ä»¥é€‰æ‹©ä»»ä½•ä¸€ä¸ªæµ‹è¯•é¡¹ç›®ã€‚ä½ å¯ä»¥é€šè¿‡é”®ç›˜æˆ–è€…é¼ æ ‡æ¥è°ƒè¯•æµ‹è¯•ã€‚æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨æµ‹è¯•ç»“æŸåï¼Œå•å‡»\u0026quot;æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š\u0026quot;æŒ‰é’®ã€‚æµ‹è¯•æŠ¥å‘Šä¼šæ˜¾ç¤ºåœ¨æµ‹è¯•ç»“æŸåçš„æµè§ˆå™¨ä¸­ã€‚\nIntroduction åŸºäº JavaScript çš„å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥å¯¹æµè§ˆå™¨ä¸­è¿è¡Œçš„ä»»ä½•å†…å®¹è¿›è¡Œå¿«é€Ÿã€ç®€å•ã€å¯é çš„æµ‹è¯•\nCypress æ˜¯è‡ªé›†æˆçš„ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œæ— é¡»å€ŸåŠ©å…¶ä»–å¤–éƒ¨å·¥å…·ï¼Œå®‰è£…åå³å¯å¿«é€Ÿåœ°åˆ›å»ºã€ç¼–å†™ã€è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¸”å¯¹æ¯ä¸€æ­¥æ“ä½œéƒ½æ”¯æŒå›çœ‹\nä¸åŒäºå…¶ä»–åªèƒ½æµ‹è¯• UI å±‚çš„å‰ç«¯æµ‹è¯•å·¥å…·ï¼ŒCypress å…è®¸ç¼–å†™æ‰€æœ‰ç±»å‹çš„æµ‹è¯•ï¼Œè¦†ç›–äº†æµ‹è¯•é‡‘å­—å¡”æ¨¡å‹çš„æ‰€æœ‰æµ‹è¯•ç±»å‹ã€ç•Œé¢æµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ã€‘\nCypress å®˜ç½‘ï¼šhttps://www.cypress.io/\nGetting Started ä¸‹é¢ä»¥ MacOS æ¥è¿›è¡Œä»‹ç»ï¼Œå…¶ä»–ç³»ç»Ÿå¯å‚è€ƒå®˜ç½‘ä¿¡æ¯\nOperating System macOS 10.9 and above (64-bit only) Node.js 12 or 14 and above Before Started å·²å®‰è£…å¥½ node.js å’Œ npm å·²å®‰è£…å¥½ vs code æˆ–è€…å…¶ä»–ä»£ç ç¼–è¾‘å™¨ Started and Run Step1ï¼šé€šè¿‡ npm æ–°å»ºé¡¹ç›® # æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ $ mkdir cypress-demo # è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ $ cd cypress-demo # npmé¡¹ç›®ç¯å¢ƒå‡†å¤‡ $ npm init Step2ï¼šå®‰è£… cypress # é¡¹ç›®å®‰è£…cypressåŒ… $ npm install cypress --save-dev Step3ï¼šè¿è¡Œ cypress ç¨‹åº è‹¥æç¤ºï¼šnpm ERR! missing script: cypress:openï¼Œå¯åœ¨é¡¹ç›®æ ¹ç›®å½• package.json æ–‡ä»¶çš„ scripts ä¸‹æ–°å¢\u0026quot;cypress:open\u0026quot;: \u0026ldquo;cypress open\u0026rdquo;ï¼Œä¿å­˜åå†æ¬¡è¿è¡Œå‘½ä»¤å³å¯\n# å¯åŠ¨demo $ npm run cypress:open Started Screenshot è¿è¡Œæˆªå›¾ demo ç”¨ä¾‹æ‰§è¡Œæˆªå›¾ Try First Testscript Testcase 1.è®¿é—®å…‰è°·ç¤¾åŒºä¸»é¡µhttp://www.guanggoo.com/ 2.éªŒè¯æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å…‰è°·ç¤¾åŒºé¡µé¢ 3.éªŒè¯ç½‘é¡µæ ‡é¢˜æ˜¯å¦æ­£ç¡® 4.ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼ŒéªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ 5.åœ¨ç™»å½•é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œè¾“å…¥å¯†ç  6.ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼ŒéªŒè¯ç™»å½•æˆåŠŸ Testscript åœ¨é¡¹ç›® cypress/integration ä¸‹æ–°å»º demo æ–‡ä»¶å¤¹\nåœ¨ demo æ–‡ä»¶å¤¹ä¸‹æ–°å»º demo-guanggoo.js\ndemo-guanggoo.js ç¼–å†™æµ‹è¯•è„šæœ¬\nè„šæœ¬ä¸­è´¦å·å¯†ç éœ€æ¢æˆè‡ªå·±çš„è´¦å·å¯†ç \ndescribe(\u0026#39;first testcase for cypress\u0026#39;,function(){ it(\u0026#39;visit guanggoo homepage and login for guanggoo:\u0026#39;,function(){ // è®¿é—®å¹¶ç™»å½•å…‰è°·ç¤¾åŒº cy.visit(\u0026#39;http://www.guanggoo.com/\u0026#39;) //è®¿é—®url cy.url().should(\u0026#39;include\u0026#39;,\u0026#39;www.guanggoo.com\u0026#39;) //éªŒè¯ç›®æ ‡url æ˜¯å¦æ­£ç¡®åŒ…å«å…‰è°·ç¤¾åŒºæ­£ç¡®åŸŸå éªŒè¯æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å…‰è°·ç¤¾åŒºé¡µé¢ cy.title().should(\u0026#39;contain\u0026#39;,\u0026#39;å…‰è°·ç¤¾åŒº\u0026#39;) //éªŒè¯é¡µé¢ title æ˜¯å¦æ­£ç¡® cy.get(\u0026#39;:nth-child(1) \u0026gt; .nav-collapse\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® cy.url().should(\u0026#39;include\u0026#39;,\u0026#39;login\u0026#39;) //éªŒè¯æ­£ç¡®è·³è½¬åˆ°ç™»å½•é¡µé¢ cy.get(\u0026#39;#email\u0026#39;) //æ ¹æ® css å®šä½ç”¨æˆ·åè¾“å…¥æ¡† .type(\u0026#39;dengnao.123@163.com\u0026#39;) //è¾“å…¥ç”¨æˆ·å cy.get(\u0026#39;#password\u0026#39;) //æ ¹æ® css å®šä½å¯†ç è¾“å…¥æ¡† .type(\u0026#39;xxxxxxx\u0026#39;) //è¾“å…¥å¯†ç  cy.get(\u0026#39;.btn-success\u0026#39;).click() //ç‚¹å‡»ç™»å½•æŒ‰é’® }) }) Run Screenshot è¿è¡Œ cypress ç¨‹åº # å¯åŠ¨ $ npm run cypress:open é¡µé¢ä¸Šé€‰æ‹©ç‚¹å‡»è¿è¡Œ demo-guanggoo.js å³å¯ è¿è¡Œé€šè¿‡æ— æŠ¥é”™ï¼Œä»£è¡¨ç”¨ä¾‹ç¼–å†™æˆåŠŸ æ¬¢è¿å…³æ³¨è½¯ä»¶æµ‹è¯•åŒå­¦çš„å…¬ä¼—å·â€œè½¯ä»¶æµ‹è¯•åŒå­¦â€ï¼ŒåŸåˆ› QA æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨é€ã€‚\n","permalink":"https://naodeng.com.cn/zh/posts/others/cypress-demo1/","summary":"ä¸‹é¢çš„ä¿¡æ¯æ˜¯å¯¹ Cypress è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„æ–°æ‰‹å…¥é—¨ä»‹ç»ã€‚å¦‚æœä½ æƒ³è¦å­¦ä¹ æ›´å¤šå…³äº playwright è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…å®ƒçš„æ–‡æ¡£ã€‚è¿è¡Œæµ‹è¯•ï¼šæ‰“å¼€æµ‹è¯•ç•Œé¢ï¼Œé€‰æ‹©\u0026quot;è¿è¡Œæµ‹è¯•\u0026quot;ã€‚ä¸‹é¢ä¼šæ˜¾ç¤ºä¸€ä¸ªéå¸¸ç®€å•çš„æµ‹è¯•ç”»é¢ã€‚ä½ å¯ä»¥é€‰æ‹©ä»»ä½•ä¸€ä¸ªæµ‹è¯•é¡¹ç›®ã€‚ä½ å¯ä»¥é€šè¿‡é”®ç›˜æˆ–è€…é¼ æ ‡æ¥è°ƒè¯•æµ‹è¯•ã€‚æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šï¼šåœ¨æµ‹è¯•ç»“æŸåï¼Œå•å‡»\u0026quot;æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š\u0026quot;æŒ‰é’®ã€‚æµ‹è¯•æŠ¥å‘Šä¼šæ˜¾ç¤ºåœ¨æµ‹è¯•ç»“æŸåçš„æµè§ˆå™¨ä¸­ã€‚\nIntroduction åŸºäº JavaScript çš„å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥å¯¹æµè§ˆå™¨ä¸­è¿è¡Œçš„ä»»ä½•å†…å®¹è¿›è¡Œå¿«é€Ÿã€ç®€å•ã€å¯é çš„æµ‹è¯•\nCypress æ˜¯è‡ªé›†æˆçš„ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œæ— é¡»å€ŸåŠ©å…¶ä»–å¤–éƒ¨å·¥å…·ï¼Œå®‰è£…åå³å¯å¿«é€Ÿåœ°åˆ›å»ºã€ç¼–å†™ã€è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¸”å¯¹æ¯ä¸€æ­¥æ“ä½œéƒ½æ”¯æŒå›çœ‹\nä¸åŒäºå…¶ä»–åªèƒ½æµ‹è¯• UI å±‚çš„å‰ç«¯æµ‹è¯•å·¥å…·ï¼ŒCypress å…è®¸ç¼–å†™æ‰€æœ‰ç±»å‹çš„æµ‹è¯•ï¼Œè¦†ç›–äº†æµ‹è¯•é‡‘å­—å¡”æ¨¡å‹çš„æ‰€æœ‰æµ‹è¯•ç±»å‹ã€ç•Œé¢æµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ã€‘\nCypress å®˜ç½‘ï¼šhttps://www.cypress.io/\nGetting Started ä¸‹é¢ä»¥ MacOS æ¥è¿›è¡Œä»‹ç»ï¼Œå…¶ä»–ç³»ç»Ÿå¯å‚è€ƒå®˜ç½‘ä¿¡æ¯\nOperating System macOS 10.9 and above (64-bit only) Node.js 12 or 14 and above Before Started å·²å®‰è£…å¥½ node.js å’Œ npm å·²å®‰è£…å¥½ vs code æˆ–è€…å…¶ä»–ä»£ç ç¼–è¾‘å™¨ Started and Run Step1ï¼šé€šè¿‡ npm æ–°å»ºé¡¹ç›® # æ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ $ mkdir cypress-demo # è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ $ cd cypress-demo # npmé¡¹ç›®ç¯å¢ƒå‡†å¤‡ $ npm init Step2ï¼šå®‰è£… cypress # é¡¹ç›®å®‰è£…cypressåŒ… $ npm install cypress --save-dev Step3ï¼šè¿è¡Œ cypress ç¨‹åº è‹¥æç¤ºï¼šnpm ERR!","title":"Cypress UI è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ï¼ˆ1ï¼‰- ä¸Šæ‰‹"}]