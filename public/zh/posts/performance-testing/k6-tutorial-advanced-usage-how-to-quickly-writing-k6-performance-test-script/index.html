<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 | 软件测试同学</title>
<meta name="keywords" content="">
<meta name="description" content="这篇博文深入介绍了在进行 K6 性能测试时，除了传统的 JavaScript 编写脚本方式外，还介绍了 K6 提供的多种快捷方式。首先，通过 K6 提供的 Test Builder 测试生成器工具，读者能够轻松快捷地生成性能测试脚本，简化了脚本编写过程。其次，博文介绍了使用 K6 Recorder 录制器的方法，通过录制操作生成脚本，省去手动编写的步骤。最后，读者还能了解到使用浏览器开发者工具获取 HAR 文件，并通过 har-to-k6 工具将其转换为 K6 脚本的技巧。通过本文，读者将更全面地了解 K6 性能测试工具的灵活性和多样化的脚本编写方式。">
<meta name="author" content="nao.deng">
<link rel="canonical" href="http://localhost:1313/zh/posts/performance-testing/k6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script/">
<meta name="google-site-verification" content="google5e9a7c9479924ed2">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/zh/posts/performance-testing/k6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<meta name="baidu-site-verification" content="codeva-2siuZUJUWf" />

<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "56f727a52e3349f6947d888452fecc8a"}'>
</script>

<script defer data-website-id="b3b285c9-3c35-4398-9252-91bb70560b84" src="https://analytics.naodeng.com.cn/hugo"></script>
<meta http-equiv="Content-Type" content="text/html;charset=gb2312" />
<meta name="sogou_site_verification" content="iwkYDJrzfK" />
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-JBX883ZDJJ"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-JBX883ZDJJ');
        }
      </script><meta property="og:title" content="K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本" />
<meta property="og:description" content="这篇博文深入介绍了在进行 K6 性能测试时，除了传统的 JavaScript 编写脚本方式外，还介绍了 K6 提供的多种快捷方式。首先，通过 K6 提供的 Test Builder 测试生成器工具，读者能够轻松快捷地生成性能测试脚本，简化了脚本编写过程。其次，博文介绍了使用 K6 Recorder 录制器的方法，通过录制操作生成脚本，省去手动编写的步骤。最后，读者还能了解到使用浏览器开发者工具获取 HAR 文件，并通过 har-to-k6 工具将其转换为 K6 脚本的技巧。通过本文，读者将更全面地了解 K6 性能测试工具的灵活性和多样化的脚本编写方式。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/zh/posts/performance-testing/k6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script/" />
<meta property="og:image" content="http://localhost:1313/papermod-cover.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T13:10:00+08:00" />
<meta property="article:modified_time" content="2024-01-19T13:10:00+08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/papermod-cover.png" />
<meta name="twitter:title" content="K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本"/>
<meta name="twitter:description" content="这篇博文深入介绍了在进行 K6 性能测试时，除了传统的 JavaScript 编写脚本方式外，还介绍了 K6 提供的多种快捷方式。首先，通过 K6 提供的 Test Builder 测试生成器工具，读者能够轻松快捷地生成性能测试脚本，简化了脚本编写过程。其次，博文介绍了使用 K6 Recorder 录制器的方法，通过录制操作生成脚本，省去手动编写的步骤。最后，读者还能了解到使用浏览器开发者工具获取 HAR 文件，并通过 har-to-k6 工具将其转换为 K6 脚本的技巧。通过本文，读者将更全面地了解 K6 性能测试工具的灵活性和多样化的脚本编写方式。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/zh/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本",
      "item": "http://localhost:1313/zh/posts/performance-testing/k6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本",
  "name": "K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本",
  "description": "这篇博文深入介绍了在进行 K6 性能测试时，除了传统的 JavaScript 编写脚本方式外，还介绍了 K6 提供的多种快捷方式。首先，通过 K6 提供的 Test Builder 测试生成器工具，读者能够轻松快捷地生成性能测试脚本，简化了脚本编写过程。其次，博文介绍了使用 K6 Recorder 录制器的方法，通过录制操作生成脚本，省去手动编写的步骤。最后，读者还能了解到使用浏览器开发者工具获取 HAR 文件，并通过 har-to-k6 工具将其转换为 K6 脚本的技巧。通过本文，读者将更全面地了解 K6 性能测试工具的灵活性和多样化的脚本编写方式。",
  "keywords": [
    
  ],
  "articleBody": "如何快速编写 K6 性能测试脚本 我们除了可以使用 JavaScript 编写 K6 性能测试脚本外，K6 还提供了多种快捷的方式来编写性能测试脚本。\n1.使用 K6 提供的 Test builder 测试生成器工具来编写脚本 2.使用 K6 Recorder 录制器录制脚本 3.使用 浏览器开发者工具获取 HAR 文件后使用 har-to-k6 工具将 HAR 文件转换为 K6 脚本 下面将分别介绍这三种方式。\n使用 K6 提供的 Test builder 测试生成器工具来编写脚本 k6 的 Test builder 测试生成器提供了一个图形界面，可根据您的输入生成 k6 测试脚本。然后，您可以复制测试脚本并从 CLI 运行测试。\nTest builder 测试生成器目前还是一个实验性的功能，可能会在未来的版本中发生变化。大家可以查看官方文档：https://k6.io/docs/using-k6/test-builder/获取更多信息\n安装 Test builder 测试生成器 Test builder 不需要安装，它是 Grafana Cloud k6 提供的一个功能，可以在浏览器中使用。\n需要注册一个 Grafana Cloud k6 账号，然后登录 Grafana Cloud。\n如何进入 Test builder 测试生成器界面：\n登录进入 Grafana Cloud 首页 依次点击左侧菜单栏上的 Testing \u0026 synthetics—\u003ePerformance—\u003eProjects 然后选择 default project 或者新建一个 project，进入到项目的详情页面 点击页面上的 Start testing 按钮，然后再选择页面下的 Test builder，进入到 Test builder 测试生成器界面 提醒：由于 Test builder 测试生成器是 Grafana Cloud 上登录进行使用，可能 Grafana Cloud 存储一些敏感数据，所以建议大家不要在生产环境中使用 Test builder 测试生成器。\n如何使用 Test builder 测试生成器 1.在 Test builder 测试生成器界面，点击 Scenario_1 下的 Options 按钮进入到配置页面，配置测试场景的基本信息，如下图所示： 可以看到场景配置页面提供了多种配置选项，可以根据自己的需求进行配置场景名称，执行器类型和不同的 UV 配置。\n2.在 Test builder 测试生成器界面，点击 Scenario_1 下的 Requests 按钮进入到 Requests 管理页面，如下图所示： 3.点击页面下的 Request 按钮进入添加请求页面，如下图所示： 4.在添加请求页面，输入请求的 URL 地址，再根据实际情况添加请求的 headers 或请求的 body 或检查点等参数，然后点击页面上的 Create 按钮，完成性能场景的配置，如下图所示： 获取 Test builder 测试生成器生成的脚本 在 Test builder 测试生成器界面，点击页面上的 Script 按钮，页面就会展示出 Test builder 测试生成器生成的脚本，如下图所示：\n可以看到 Test builder 测试生成器生成的脚本，是一个完整的 K6 测试脚本，可以直接复制到本地，然后使用 k6 运行该脚本。\n运行 Test builder 测试生成器生成的脚本 在 Test builder 测试生成器界面，点击页面上的 Run Test 按钮，页面就会展示出 Test builder 测试生成器生成的脚本的运行结果，如下图所示：\n可以看到 Test builder 测试生成器生成的脚本运行的很详细的测试结果信息。\n其他 Test builder 测试生成器的功能 也支持导入 HAR 文件生成测试脚本 也支持多个 scenario 场景的配置和一个 scenario 场景的多个请求的配置 更多关于 Test builder 测试生成器的内容，请参考官方文档：https://grafana.com/docs/grafana-cloud/k6/author-run/test-builder/\n使用 K6 Recorder 录制器录制脚本 K6 Recorder 录制器是 K6 提供的一个浏览器扩展程序，可以在浏览器中录制用户与 Web 应用程序的交互，并将其转换为 k6 测试脚本。\n安装 K6 Recorder 录制器 K6 Recorder 录制器是一个浏览器扩展程序，可以在 Chrome 或 Firefox 中使用。您可以从 Chrome Web Store 或 Firefox Add-ons 页面安装它。\nChrome Web Store 安装地址：https://chrome.google.com/webstore/detail/grafana-k6-browser-record/fbanjfonbcedhifbgikmjelkkckhhidl\nFirefox Add-ons 安装地址：https://addons.mozilla.org/en-US/firefox/addon/grafana-k6-browser-recorder/\n安装完成后，就可以在浏览器中使用 K6 Recorder 录制器了。\n如何使用 K6 Recorder 录制器 在浏览器上点击打开 k6 Recorder 录制器扩展。 选择保存自动生成的脚本的位置。 要将其保存在本地计算机上，请选择\"我不想在云中保存测试\"(后面的例子我选择的这个选项)。 要将其保存到任何 Grafana Cloud k6 项目中，请选择“登录”。 选择保存脚本位置后，在当前浏览器选项卡输入测试网站地址，点击选择开始录制按钮以开始录制当前浏览器选项卡。 图中我打开了谷歌的首页并点击了搜索框，输入了 123，然后点击了搜索按钮，\n点击了 k6 Recorder 录制器的停止录制按钮停止录制。 将录制的文件取名保存在本地（我这里取名为 record-demo.har）。 使用 har-to-k6 工具将 HAR 文件转换为 K6 脚本。 har-to-k6 工具是一个命令行工具，可以将 HAR 文件转换为 k6 脚本。需要先通过 npm install -g har-to-k6安装 har-to-k6 工具，然后通过 har-to-k6 record-demo.har -O record-demo.js命令将 HAR 文件转换为 K6 脚本。\n转换后的 K6 脚本部分截图如下所示： 大家可以根据自己的需求对转换后的 K6 脚本进行修改，然后使用 k6 运行该脚本。 使用 k6 运行转换后的 K6 脚本，查看运行结果。 更多关于 K6 Recorder 录制器的内容，请参考官方文档：https://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-browser-recorder/\n使用浏览器开发者工具和 har-to-k6 工具生成 K6 脚本 除了我们可以使用 K6 Recorder 录制器来录制脚本外，我们还可以使用浏览器开发者工具获取测试请求的 HAR 文件，然后使用 har-to-k6 工具转换 HAR 文件来生成 K6 脚本。\n可以获取 HAR 文件的浏览器和工具 我们可以根据实际情况选择一个工具来记录 HAR 文件。市面上的很多浏览器和工具可以以 HAR 格式导出 HTTP 流量。大家常用的是：\nChrome 浏览器 Firefox 浏览器 Microsoft Edge 浏览器 Charles 代理抓包工具 (HTTP proxy/recorder) Fiddler 代理抓包工具 (HTTP proxy/recorder) 如何使用浏览器开发者工具获取 HAR 文件 下面是使用 Chrome 浏览器开发者工具获取测试请求 HAR 文件例子：\n在 Chrome 中打开新的隐身窗口。 （可以排除登录 cookies 等干扰信息）。\n打开 Chrome 开发者工具（按 F12）。\n选择网络选项卡 Network。\n检查和确认录音按钮（圆形按钮）是否已激活（红色）。\n如果想要记录多个连续的页面加载，请选中“保留日志”复选框。 输入测试网站的 URL（如 https://www.google.com/），然后开始执行和后续模拟用户执行的操作（如输入 123 进行搜索）。\n完成后，在 Chrome 开发人员工具中，右键单击 URL 并选择“将内容另存为 HAR”。 选择保存 HAR 文件的位置并重命名（如 har-demo），然后点击保存按钮，完成 HAR 文件的保存。\n使用 har-to-k6 进行转换 HAR 文件 安装 har-to-k6 工具 通过 npm install -g har-to-k6命令安装 har-to-k6 工具。 使用 har-to-k6 工具将 HAR 文件转换为 K6 脚本 通过 har-to-k6 har-demo.har -O har-demo.js命令将 HAR 文件转换为 K6 脚本。 转换后的 K6 脚本部分截图如下所示： 大家可以根据自己的需求对转换后的 K6 脚本进行修改，然后使用 k6 运行该脚本。 使用 k6 运行转换后的 K6 脚本，查看运行结果。 更多关于 HAR 文件的内容，请参考官方文档：https://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-har-converter/\n参考文档 K6 文档：https://k6.io/docs/ k6 官方网站：https://k6.io/ K6 性能测试快速启动项目：https://github.com/Automation-Test-Starter/K6-Performance-Test-starter/ 欢迎关注软件测试同学的公众号“软件测试同学”，原创 QA 技术文章第一时间推送。\n",
  "wordCount" : "445",
  "inLanguage": "zh",
  "image": "http://localhost:1313/papermod-cover.png","datePublished": "2024-01-19T13:10:00+08:00",
  "dateModified": "2024-01-19T13:10:00+08:00",
  "author":{
    "@type": "Person",
    "name": "nao.deng"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/zh/posts/performance-testing/k6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "软件测试同学",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/zh/" accesskey="h" title="软件测试同学 (Alt + H)">软件测试同学</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:1313/" title="🇬🇧English"
                            aria-label="🇬🇧English">🇬🇧English</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/zh/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/zhcategories" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/zhtags" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/zh/zhseries" title="系列">
                    <span>系列</span>
                </a>
            </li>
            <li>
                <a href="https://status.naodeng.com.cn" title="状态">
                    <span>状态</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://analytics.naodeng.com.cn/share/OksEL34H/naodeng.com.cn" title="网站统计">
                    <span>网站统计</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/zh/">主页</a>&nbsp;»&nbsp;<a href="http://localhost:1313/zh/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本
    </h1>
    <div class="post-meta"><span title='2024-01-19 13:10:00 +0800 CST'>一月 19, 2024</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;445 字&nbsp;·&nbsp;nao.deng&nbsp;|&nbsp;<a href="https://github.com/naodeng/naodeng.com.cn/tree/main/content/posts/Performance-Testing/K6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script.zh.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details >
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99-k6-%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac" aria-label="如何快速编写 K6 性能测试脚本">如何快速编写 K6 性能测试脚本</a><ul>
                            
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8-k6-%e6%8f%90%e4%be%9b%e7%9a%84-test-builder-%e6%b5%8b%e8%af%95%e7%94%9f%e6%88%90%e5%99%a8%e5%b7%a5%e5%85%b7%e6%9d%a5%e7%bc%96%e5%86%99%e8%84%9a%e6%9c%ac" aria-label="使用 K6 提供的 Test builder 测试生成器工具来编写脚本">使用 K6 提供的 Test builder 测试生成器工具来编写脚本</a><ul>
                            
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85-test-builder-%e6%b5%8b%e8%af%95%e7%94%9f%e6%88%90%e5%99%a8" aria-label="安装 Test builder 测试生成器">安装 Test builder 测试生成器</a></li>
                    <li>
                        <a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8-test-builder-%e6%b5%8b%e8%af%95%e7%94%9f%e6%88%90%e5%99%a8" aria-label="如何使用 Test builder 测试生成器">如何使用 Test builder 测试生成器</a></li>
                    <li>
                        <a href="#%e8%8e%b7%e5%8f%96-test-builder-%e6%b5%8b%e8%af%95%e7%94%9f%e6%88%90%e5%99%a8%e7%94%9f%e6%88%90%e7%9a%84%e8%84%9a%e6%9c%ac" aria-label="获取 Test builder 测试生成器生成的脚本">获取 Test builder 测试生成器生成的脚本</a></li>
                    <li>
                        <a href="#%e8%bf%90%e8%a1%8c-test-builder-%e6%b5%8b%e8%af%95%e7%94%9f%e6%88%90%e5%99%a8%e7%94%9f%e6%88%90%e7%9a%84%e8%84%9a%e6%9c%ac" aria-label="运行 Test builder 测试生成器生成的脚本">运行 Test builder 测试生成器生成的脚本</a></li>
                    <li>
                        <a href="#%e5%85%b6%e4%bb%96-test-builder-%e6%b5%8b%e8%af%95%e7%94%9f%e6%88%90%e5%99%a8%e7%9a%84%e5%8a%9f%e8%83%bd" aria-label="其他 Test builder 测试生成器的功能">其他 Test builder 测试生成器的功能</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8-k6-recorder-%e5%bd%95%e5%88%b6%e5%99%a8%e5%bd%95%e5%88%b6%e8%84%9a%e6%9c%ac" aria-label="使用 K6 Recorder 录制器录制脚本">使用 K6 Recorder 录制器录制脚本</a><ul>
                            
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85-k6-recorder-%e5%bd%95%e5%88%b6%e5%99%a8" aria-label="安装 K6 Recorder 录制器">安装 K6 Recorder 录制器</a></li>
                    <li>
                        <a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8-k6-recorder-%e5%bd%95%e5%88%b6%e5%99%a8" aria-label="如何使用 K6 Recorder 录制器">如何使用 K6 Recorder 录制器</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e5%bc%80%e5%8f%91%e8%80%85%e5%b7%a5%e5%85%b7%e5%92%8c-har-to-k6-%e5%b7%a5%e5%85%b7%e7%94%9f%e6%88%90-k6-%e8%84%9a%e6%9c%ac" aria-label="使用浏览器开发者工具和 har-to-k6 工具生成 K6 脚本">使用浏览器开发者工具和 har-to-k6 工具生成 K6 脚本</a><ul>
                            
                    <li>
                        <a href="#%e5%8f%af%e4%bb%a5%e8%8e%b7%e5%8f%96-har-%e6%96%87%e4%bb%b6%e7%9a%84%e6%b5%8f%e8%a7%88%e5%99%a8%e5%92%8c%e5%b7%a5%e5%85%b7" aria-label="可以获取 HAR 文件的浏览器和工具">可以获取 HAR 文件的浏览器和工具</a></li>
                    <li>
                        <a href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e5%bc%80%e5%8f%91%e8%80%85%e5%b7%a5%e5%85%b7%e8%8e%b7%e5%8f%96-har-%e6%96%87%e4%bb%b6" aria-label="如何使用浏览器开发者工具获取 HAR 文件">如何使用浏览器开发者工具获取 HAR 文件</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8-har-to-k6-%e8%bf%9b%e8%a1%8c%e8%bd%ac%e6%8d%a2-har-%e6%96%87%e4%bb%b6" aria-label="使用 har-to-k6 进行转换 HAR 文件">使用 har-to-k6 进行转换 HAR 文件</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e5%8f%82%e8%80%83%e6%96%87%e6%a1%a3" aria-label="参考文档">参考文档</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="如何快速编写-k6-性能测试脚本">如何快速编写 K6 性能测试脚本<a hidden class="anchor" aria-hidden="true" href="#如何快速编写-k6-性能测试脚本">#</a></h2>
<p>我们除了可以使用 JavaScript 编写 K6 性能测试脚本外，K6 还提供了多种快捷的方式来编写性能测试脚本。</p>
<ul>
<li>1.使用 K6 提供的 Test builder 测试生成器工具来编写脚本</li>
<li>2.使用 K6 Recorder 录制器录制脚本</li>
<li>3.使用 浏览器开发者工具获取 HAR 文件后使用 har-to-k6 工具将 HAR 文件转换为 K6 脚本</li>
</ul>
<p>下面将分别介绍这三种方式。</p>
<h3 id="使用-k6-提供的-test-builder-测试生成器工具来编写脚本">使用 K6 提供的 Test builder 测试生成器工具来编写脚本<a hidden class="anchor" aria-hidden="true" href="#使用-k6-提供的-test-builder-测试生成器工具来编写脚本">#</a></h3>
<p>k6 的 Test builder 测试生成器提供了一个图形界面，可根据您的输入生成 k6 测试脚本。然后，您可以复制测试脚本并从 CLI 运行测试。</p>
<blockquote>
<p>Test builder 测试生成器目前还是一个实验性的功能，可能会在未来的版本中发生变化。大家可以查看官方文档：<a href="https://k6.io/docs/using-k6/test-builder/">https://k6.io/docs/using-k6/test-builder/</a>获取更多信息</p>
</blockquote>
<h4 id="安装-test-builder-测试生成器">安装 Test builder 测试生成器<a hidden class="anchor" aria-hidden="true" href="#安装-test-builder-测试生成器">#</a></h4>
<p>Test builder 不需要安装，它是 Grafana Cloud k6 提供的一个功能，可以在浏览器中使用。</p>
<p>需要注册一个 Grafana Cloud k6 账号，然后登录 Grafana Cloud。</p>
<p>如何进入 Test builder 测试生成器界面：</p>
<ul>
<li>登录进入 Grafana Cloud 首页</li>
</ul>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/66TXQ3.png" alt=" "  />
</p>
<ul>
<li>依次点击左侧菜单栏上的 Testing &amp; synthetics&mdash;&gt;Performance&mdash;&gt;Projects</li>
<li>然后选择 default project 或者新建一个 project，进入到项目的详情页面
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/Ynx49y.png" alt=" "  />
</li>
<li>点击页面上的 Start testing 按钮，然后再选择页面下的 Test builder，进入到 Test builder 测试生成器界面
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/GgzyK7.png" alt=" "  />
</li>
</ul>
<blockquote>
<p>提醒：由于 Test builder 测试生成器是 Grafana Cloud 上登录进行使用，可能 Grafana Cloud 存储一些敏感数据，所以建议大家不要在生产环境中使用 Test builder 测试生成器。</p>
</blockquote>
<h4 id="如何使用-test-builder-测试生成器">如何使用 Test builder 测试生成器<a hidden class="anchor" aria-hidden="true" href="#如何使用-test-builder-测试生成器">#</a></h4>
<ul>
<li>1.在 Test builder 测试生成器界面，点击 Scenario_1 下的 Options 按钮进入到配置页面，配置测试场景的基本信息，如下图所示：
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/JvABl9.png" alt=" "  />
</li>
</ul>
<blockquote>
<p>可以看到场景配置页面提供了多种配置选项，可以根据自己的需求进行配置场景名称，执行器类型和不同的 UV 配置。</p>
</blockquote>
<ul>
<li>
<p>2.在 Test builder 测试生成器界面，点击 Scenario_1 下的 Requests 按钮进入到 Requests 管理页面，如下图所示：
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/ohtOQD.png" alt=" "  />
</p>
</li>
<li>
<p>3.点击页面下的 Request 按钮进入添加请求页面，如下图所示：
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/BFSEME.png" alt=" "  />
</p>
</li>
<li>
<p>4.在添加请求页面，输入请求的 URL 地址，再根据实际情况添加请求的 headers 或请求的 body 或检查点等参数，然后点击页面上的 Create 按钮，完成性能场景的配置，如下图所示：
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/inCNCz.png" alt=" "  />
</p>
</li>
</ul>
<h4 id="获取-test-builder-测试生成器生成的脚本">获取 Test builder 测试生成器生成的脚本<a hidden class="anchor" aria-hidden="true" href="#获取-test-builder-测试生成器生成的脚本">#</a></h4>
<p>在 Test builder 测试生成器界面，点击页面上的 Script 按钮，页面就会展示出 Test builder 测试生成器生成的脚本，如下图所示：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/rh3Qfr.png" alt=" "  />
</p>
<blockquote>
<p>可以看到 Test builder 测试生成器生成的脚本，是一个完整的 K6 测试脚本，可以直接复制到本地，然后使用 k6 运行该脚本。</p>
</blockquote>
<h4 id="运行-test-builder-测试生成器生成的脚本">运行 Test builder 测试生成器生成的脚本<a hidden class="anchor" aria-hidden="true" href="#运行-test-builder-测试生成器生成的脚本">#</a></h4>
<p>在 Test builder 测试生成器界面，点击页面上的 Run Test 按钮，页面就会展示出 Test builder 测试生成器生成的脚本的运行结果，如下图所示：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/yFuEyu.png" alt=" "  />
</p>
<blockquote>
<p>可以看到 Test builder 测试生成器生成的脚本运行的很详细的测试结果信息。</p>
</blockquote>
<h4 id="其他-test-builder-测试生成器的功能">其他 Test builder 测试生成器的功能<a hidden class="anchor" aria-hidden="true" href="#其他-test-builder-测试生成器的功能">#</a></h4>
<ul>
<li>也支持导入 HAR 文件生成测试脚本</li>
<li>也支持多个 scenario 场景的配置和一个 scenario 场景的多个请求的配置</li>
</ul>
<p>更多关于 Test builder 测试生成器的内容，请参考官方文档：<a href="https://grafana.com/docs/grafana-cloud/k6/author-run/test-builder/">https://grafana.com/docs/grafana-cloud/k6/author-run/test-builder/</a></p>
<h3 id="使用-k6-recorder-录制器录制脚本">使用 K6 Recorder 录制器录制脚本<a hidden class="anchor" aria-hidden="true" href="#使用-k6-recorder-录制器录制脚本">#</a></h3>
<p>K6 Recorder 录制器是 K6 提供的一个浏览器扩展程序，可以在浏览器中录制用户与 Web 应用程序的交互，并将其转换为 k6 测试脚本。</p>
<h4 id="安装-k6-recorder-录制器">安装 K6 Recorder 录制器<a hidden class="anchor" aria-hidden="true" href="#安装-k6-recorder-录制器">#</a></h4>
<p>K6 Recorder 录制器是一个浏览器扩展程序，可以在 Chrome 或 Firefox 中使用。您可以从 Chrome Web Store 或 Firefox Add-ons 页面安装它。</p>
<ul>
<li>
<p>Chrome Web Store 安装地址：<a href="https://chrome.google.com/webstore/detail/grafana-k6-browser-record/fbanjfonbcedhifbgikmjelkkckhhidl">https://chrome.google.com/webstore/detail/grafana-k6-browser-record/fbanjfonbcedhifbgikmjelkkckhhidl</a></p>
</li>
<li>
<p>Firefox Add-ons 安装地址：<a href="https://addons.mozilla.org/en-US/firefox/addon/grafana-k6-browser-recorder/">https://addons.mozilla.org/en-US/firefox/addon/grafana-k6-browser-recorder/</a></p>
</li>
</ul>
<p>安装完成后，就可以在浏览器中使用 K6 Recorder 录制器了。</p>
<h4 id="如何使用-k6-recorder-录制器">如何使用 K6 Recorder 录制器<a hidden class="anchor" aria-hidden="true" href="#如何使用-k6-recorder-录制器">#</a></h4>
<ul>
<li>
<ol>
<li>在浏览器上点击打开 k6 Recorder 录制器扩展。</li>
</ol>
</li>
<li>
<ol start="2">
<li>选择保存自动生成的脚本的位置。</li>
</ol>
<ul>
<li>要将其保存在本地计算机上，请选择&quot;我不想在云中保存测试&quot;(后面的例子我选择的这个选项)。</li>
<li>要将其保存到任何 Grafana Cloud k6 项目中，请选择“登录”。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/yj75Ef.png" alt=" "  />
</li>
</ul>
</li>
<li>
<ol start="3">
<li>选择保存脚本位置后，在当前浏览器选项卡输入测试网站地址，点击选择开始录制按钮以开始录制当前浏览器选项卡。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/6NjHGS.png" alt=" "  />
</li>
</ol>
</li>
</ul>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/KFMDWX.png" alt=" "  />
</p>
<blockquote>
<p>图中我打开了谷歌的首页并点击了搜索框，输入了 123，然后点击了搜索按钮，</p>
</blockquote>
<ul>
<li>
<ol start="4">
<li>点击了 k6 Recorder 录制器的停止录制按钮停止录制。</li>
</ol>
</li>
<li>
<ol start="5">
<li>将录制的文件取名保存在本地（我这里取名为 record-demo.har）。</li>
</ol>
</li>
<li>
<ol start="6">
<li>使用 har-to-k6 工具将 HAR 文件转换为 K6 脚本。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/2nRtpW.png" alt=" "  />
</li>
</ol>
</li>
</ul>
<blockquote>
<p>har-to-k6 工具是一个命令行工具，可以将 HAR 文件转换为 k6 脚本。需要先通过 <code>npm install -g har-to-k6</code>安装 har-to-k6 工具，然后通过 <code>har-to-k6 record-demo.har -O record-demo.js</code>命令将 HAR 文件转换为 K6 脚本。</p>
</blockquote>
<ul>
<li>
<ol start="7">
<li>转换后的 K6 脚本部分截图如下所示：
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/ldC2kl.png" alt=" "  />
</li>
</ol>
</li>
<li>
<ol start="8">
<li>大家可以根据自己的需求对转换后的 K6 脚本进行修改，然后使用 k6 运行该脚本。</li>
</ol>
</li>
<li>
<ol start="9">
<li>使用 k6 运行转换后的 K6 脚本，查看运行结果。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/jUpYWj.png" alt=" "  />
</li>
</ol>
</li>
</ul>
<p>更多关于 K6 Recorder 录制器的内容，请参考官方文档：<a href="https://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-browser-recorder/">https://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-browser-recorder/</a></p>
<h3 id="使用浏览器开发者工具和-har-to-k6-工具生成-k6-脚本">使用浏览器开发者工具和 har-to-k6 工具生成 K6 脚本<a hidden class="anchor" aria-hidden="true" href="#使用浏览器开发者工具和-har-to-k6-工具生成-k6-脚本">#</a></h3>
<p>除了我们可以使用 K6 Recorder 录制器来录制脚本外，我们还可以使用浏览器开发者工具获取测试请求的 HAR 文件，然后使用 har-to-k6 工具转换 HAR 文件来生成 K6 脚本。</p>
<h4 id="可以获取-har-文件的浏览器和工具">可以获取 HAR 文件的浏览器和工具<a hidden class="anchor" aria-hidden="true" href="#可以获取-har-文件的浏览器和工具">#</a></h4>
<p>我们可以根据实际情况选择一个工具来记录 HAR 文件。市面上的很多浏览器和工具可以以 HAR 格式导出 HTTP 流量。大家常用的是：</p>
<ul>
<li>Chrome 浏览器</li>
<li>Firefox 浏览器</li>
<li>Microsoft Edge 浏览器</li>
<li>Charles 代理抓包工具 (HTTP proxy/recorder)</li>
<li>Fiddler 代理抓包工具 (HTTP proxy/recorder)</li>
</ul>
<h4 id="如何使用浏览器开发者工具获取-har-文件">如何使用浏览器开发者工具获取 HAR 文件<a hidden class="anchor" aria-hidden="true" href="#如何使用浏览器开发者工具获取-har-文件">#</a></h4>
<p>下面是使用 Chrome 浏览器开发者工具获取测试请求 HAR 文件例子：</p>
<ul>
<li>
<p>在 Chrome 中打开新的隐身窗口。 （可以排除登录 cookies 等干扰信息）。</p>
</li>
<li>
<p>打开 Chrome 开发者工具（按 F12）。</p>
</li>
<li>
<p>选择网络选项卡 Network。</p>
</li>
<li>
<p>检查和确认录音按钮（圆形按钮）是否已激活（红色）。</p>
</li>
<li>
<p>如果想要记录多个连续的页面加载，请选中“保留日志”复选框。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/1RDeqJ.png" alt=" "  />
</p>
</li>
<li>
<p>输入测试网站的 URL（如 <a href="https://www.google.com/">https://www.google.com/</a>），然后开始执行和后续模拟用户执行的操作（如输入 123 进行搜索）。</p>
</li>
<li>
<p>完成后，在 Chrome 开发人员工具中，右键单击 URL 并选择“将内容另存为 HAR”。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/WBsOXl.png" alt=" "  />
</p>
</li>
<li>
<p>选择保存 HAR 文件的位置并重命名（如 har-demo），然后点击保存按钮，完成 HAR 文件的保存。</p>
</li>
</ul>
<h4 id="使用-har-to-k6-进行转换-har-文件">使用 har-to-k6 进行转换 HAR 文件<a hidden class="anchor" aria-hidden="true" href="#使用-har-to-k6-进行转换-har-文件">#</a></h4>
<ul>
<li>
<ol>
<li>安装 har-to-k6 工具</li>
</ol>
<ul>
<li>通过 <code>npm install -g har-to-k6</code>命令安装 har-to-k6 工具。</li>
</ul>
</li>
<li>
<ol start="2">
<li>使用 har-to-k6 工具将 HAR 文件转换为 K6 脚本</li>
</ol>
<ul>
<li>通过 <code>har-to-k6 har-demo.har -O har-demo.js</code>命令将 HAR 文件转换为 K6 脚本。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/UIKobM.png" alt=" "  />
</li>
</ul>
</li>
<li>
<ol start="3">
<li>转换后的 K6 脚本部分截图如下所示：
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/1OWWG0.png" alt=" "  />
</li>
</ol>
</li>
<li>
<ol start="4">
<li>大家可以根据自己的需求对转换后的 K6 脚本进行修改，然后使用 k6 运行该脚本。</li>
</ol>
</li>
<li>
<ol start="5">
<li>使用 k6 运行转换后的 K6 脚本，查看运行结果。
<img loading="lazy" src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/9BLD7D.png" alt=" "  />
</li>
</ol>
</li>
</ul>
<p>更多关于 HAR 文件的内容，请参考官方文档：<a href="https://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-har-converter/">https://grafana.com/docs/k6/latest/using-k6/test-authoring/create-tests-from-recordings/using-the-har-converter/</a></p>
<h2 id="参考文档">参考文档<a hidden class="anchor" aria-hidden="true" href="#参考文档">#</a></h2>
<ul>
<li><a href="https://k6.io/docs/">K6 文档：https://k6.io/docs/</a></li>
<li><a href="https://k6.io/">k6 官方网站：https://k6.io/</a></li>
<li><a href="https://github.com/Automation-Test-Starter/K6-Performance-Test-starter">K6 性能测试快速启动项目：https://github.com/Automation-Test-Starter/K6-Performance-Test-starter/</a></li>
</ul>
<hr>
<p>欢迎关注软件测试同学的公众号“<strong>软件测试同学</strong>”，原创 QA 技术文章第一时间推送。</p>
<!-- markdownlint-disable MD045 -->
<!-- markdownlint-disable MD033 -->
<center>
  <img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/2023112015'QR Code for 公众号.jpg" style="width: 100px;">
</center>
<!-- markdownlint-disable MD033 -->
<!-- markdownlint-disable MD045 -->

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/zh/posts/ui-automation-testing/ui-testing-best-practice-generic-best-practices-3-use-your-testing-tool-as-your-primary-development-tool-and-keep-abstraction-low-to-ease--debugging-the-tests/">
    <span class="title">« 上一页</span>
    <br>
    <span>UI 测试最佳实践的通用最佳实践（三）：将你的测试工具用作主要的开发工具和保持低抽象度以便于调试测试</span>
  </a>
  <a class="next" href="http://localhost:1313/zh/posts/ui-automation-testing/ui-testing-best-practice-generic-best-practices-2-ui-tests-debugging-best-practices-and-reaching-ui-state/">
    <span class="title">下一页 »</span>
    <br>
    <span>UI 测试最佳实践的通用最佳实践（二）：UI 测试调试最佳实践和在测试中达到 UI 状态而无需使用 UI</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 on x"
            href="https://x.com/intent/tweet/?text=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%20-%20%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95%ef%bc%9a%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99%20K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac&amp;url=http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f&amp;hashtags=">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f&amp;title=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%20-%20%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95%ef%bc%9a%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99%20K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac&amp;summary=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%20-%20%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95%ef%bc%9a%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99%20K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac&amp;source=http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f&title=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%20-%20%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95%ef%bc%9a%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99%20K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 on whatsapp"
            href="https://api.whatsapp.com/send?text=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%20-%20%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95%ef%bc%9a%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99%20K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac%20-%20http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 on telegram"
            href="https://telegram.me/share/url?text=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%20-%20%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95%ef%bc%9a%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99%20K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac&amp;url=http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share K6 性能测试教程 - 进阶用法：如何快速编写 K6 性能测试脚本 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e6%95%99%e7%a8%8b%20-%20%e8%bf%9b%e9%98%b6%e7%94%a8%e6%b3%95%ef%bc%9a%e5%a6%82%e4%bd%95%e5%bf%ab%e9%80%9f%e7%bc%96%e5%86%99%20K6%20%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95%e8%84%9a%e6%9c%ac&u=http%3a%2f%2flocalhost%3a1313%2fzh%2fposts%2fperformance-testing%2fk6-tutorial-advanced-usage-how-to-quickly-writing-k6-performance-test-script%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
<script src="https://giscus.app/client.js"
        data-repo="naodeng/naodeng.com.cn"
        data-repo-id="R_kgDOHntNtg"
        data-category="Show and tell"
        data-category-id="DIC_kwDOHntNts4Cavst"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/zh/">软件测试同学</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
