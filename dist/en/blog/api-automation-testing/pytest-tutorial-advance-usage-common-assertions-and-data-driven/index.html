<!DOCTYPE html><html lang="en-US"> <head><meta charset="UTF-8"><title>Pytest API Automation Testing Tutorial Advance Usage Common Assertions and Data Driven - Nao&#39;s Blog</title><meta name="description" content="naodeng, naodeng.com.cn, personal blog, software testing, performance testing, API testing, automation testing, agile testing."><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.17.0"><link rel="alternate" hreflang="en-US" href="https://naodeng.com.cn/en/blog/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/"><link rel="alternate" hreflang="zh-CN" href="https://naodeng.com.cn/zh-cn/blog/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="icon" sizes="192x192" href="/android-chrome-192x192.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><meta name="color-scheme" content="light dark"><meta property="og:type" content="website"><meta property="og:title" content="Pytest API Automation Testing Tutorial Advance Usage Common Assertions and Data Driven - Nao's Blog"><meta property="og:site_name" content="Pytest API Automation Testing Tutorial Advance Usage Common Assertions and Data Driven - Nao's Blog"><meta property="og:description" content="naodeng, naodeng.com.cn, personal blog, software testing, performance testing, API testing, automation testing, agile testing."><meta property="og:image" content="https://naodeng.com.cn/ogp.png"><meta property="og:url" content="https://naodeng.com.cn/en/blog/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@inaodeng"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap" media="print" onload="this.media='all'"><link rel="preload" as="style" fetchpriority="high" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp&display=swap" media="print" onload="this.media='all'"><style>
    body {
      font-family: "Noto Sans", sans-serif;
    }
  </style><style>article[data-astro-cid-uwv4mmhs]{>*{margin-block:1.2em 0;margin-inline:0}p{font-weight:400}h2{margin-block:3em 0;padding-block-end:.2em;border-inline-start:4px solid var(--color-accent);padding-inline-start:var(--sp-s);line-height:1.4;font-size:1.6rem}h3{margin-block:2em 0;padding-block-end:.2em;line-height:1.4;font-size:1.4rem;border-block-end:1px solid color-mix(in srgb,var(--color-main) 10%,transparent)}h4{margin-block:2em -.4em;line-height:1.4;font-size:1.1rem}ul{list-style:disc;padding-inline-start:1.5em}ol{list-style:decimal;padding-inline-start:1.5em}li{margin-block:0 .5em;line-height:1.4}:not(pre) code{font-family:Consolas,Courier New,Courier,Monaco,monospace;color:var(--color-theme);background-color:color-mix(in srgb,var(--color-main) 8%,transparent);padding-block:.2em;padding-inline:.4em;border-radius:2px;font-size:.9rem}blockquote{font-style:italic;color:color-mix(in srgb,var(--color-main) 80%,transparent);background:color-mix(in srgb,var(--color-main) 5%,transparent);padding:1em;border-inline-start:2px solid color-mix(in srgb,var(--color-main) 10%,transparent)}a{text-decoration:underline;color:var(--color-theme);font-weight:500}img{border-radius:4px;background-color:color-mix(in srgb,var(--color-main) 10%,transparent)}pre{direction:ltr;padding:1em;border-radius:4px;border:2px solid color-mix(in srgb,var(--color-main) 20%,transparent)}}header[data-astro-cid-v3cnrnum]{text-align:center;border-block-end:1px solid var(--color-theme);padding-block-end:var(--sp-m);display:flex;flex-direction:column;align-items:center;gap:.5rem}header[data-astro-cid-v3cnrnum] h1[data-astro-cid-v3cnrnum]{color:var(--color-theme);font-size:1.8rem;margin:0}.cover[data-astro-cid-v3cnrnum]{border-radius:16px;margin:0}.tags[data-astro-cid-v3cnrnum]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;margin-block-start:.5rem}.tag[data-astro-cid-v3cnrnum]{background-color:var(--color-theme);color:#fff;padding:.2rem .5rem;border-radius:4px;font-size:.8rem}
</style>
<link rel="stylesheet" href="/_astro/_id_.CXLwv1yp.css"></head> <body> <div id="js-languageSuggest" data-astro-cid-onlux7ho> <a id="js-link" href="#" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>autorenew</span> <span id="js-linkText" data-astro-cid-onlux7ho></span> </a> <button id="js-close" data-astro-cid-onlux7ho> <span class="material-icons-sharp" data-astro-cid-onlux7ho>close</span> </button> </div> <script>(function(){const currentLocale = "en";
const LOCALES = {"en":{"label":"English","lang":"en-US"},"zh-cn":{"label":"简体中文","lang":"zh-CN"}};

  const browserLang = navigator.language.toLowerCase();
  const suggest = document.getElementById("js-languageSuggest");

  const showSuggest = (lang) => {
    const pathnames = location.pathname.split("/");
    const link = document.getElementById("js-link");
    const linkText = document.getElementById("js-linkText");
    pathnames[1] = lang;
    link.href = pathnames.join("/");
    linkText.innerText = LOCALES[lang].label;
    suggest.style.display = "block";
  };

  if (
    currentLocale === browserLang ||
    currentLocale === browserLang.split("-")[0] ||
    localStorage.languageSuggestDenied ||
    localStorage.selectedLang
  ) {
    return;
  } else if (Object.keys(LOCALES).includes(browserLang)) {
    showSuggest(browserLang);
  } else if (Object.keys(LOCALES).includes(browserLang.split("-")[0])) {
    showSuggest(browserLang.split("-")[0]);
  }

  document.getElementById("js-close").addEventListener("click", () => {
    suggest.style.display = "none";
    localStorage.languageSuggestDenied = true;
  });
})();</script>  <header class="l-header" data-astro-cid-3ef6ksr2> <h1 dir="ltr" data-astro-cid-3ef6ksr2> <a href="/en/" data-astro-cid-3ef6ksr2>Nao&#39;s Blog</a> </h1> <label data-astro-cid-opxux4jt> <span class="material-icons-sharp" data-astro-cid-opxux4jt>translate</span> <select data-languageSelect data-astro-cid-opxux4jt> <option label="English" value="/en/blog/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/" data-lang="en" selected data-astro-cid-opxux4jt></option><option label="简体中文" value="/zh-cn/blog/api-automation-testing/pytest-tutorial-advance-usage-common-assertions-and-data-driven/" data-lang="zh-cn" data-astro-cid-opxux4jt></option> </select> <span class="material-icons-sharp" data-astro-cid-opxux4jt>expand_more</span> </label> <script>
  const selects = document.querySelectorAll("[data-languageSelect]");
  selects.forEach((select) => {
    select.addEventListener("change", (event) => {
      localStorage.selectedLang = event.target?.selectedOptions[0].dataset.lang;
      location.href = event.target?.value;
    });
  });
</script>  <nav class="l-content" data-astro-cid-3ef6ksr2> <ul data-astro-cid-3ef6ksr2> <li data-astro-cid-3ef6ksr2> <a href="/en/" data-astro-cid-3ef6ksr2> Home </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/blog/" data-astro-cid-3ef6ksr2> Blog </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/archive/" data-astro-cid-3ef6ksr2> Archive </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/projects/" data-astro-cid-3ef6ksr2> Projects </a> </li> <li data-astro-cid-3ef6ksr2> <a href="/en/about/" data-astro-cid-3ef6ksr2> About </a> </li> <li data-astro-cid-3ef6ksr2> <a href="https://github.com/naodeng/naodeng.com.cn" target="_blank" data-astro-cid-3ef6ksr2>
GitHub
<span class="material-icons-sharp dir" data-astro-cid-3ef6ksr2>open_in_new</span> </a> </li> </ul> </nav> </header>  <main class="l-main l-content">  <article data-astro-cid-uwv4mmhs> <img src="/_astro/pytest-tutorial-advance-usage-common-assertions-and-data-driven-cover.BDi3AsD3_ZHkDBc.webp" alt="Pytest API Automation Testing Tutorial Advance Usage Common Assertions and Data Driven" data-astro-cid-v3cnrnum="true" loading="lazy" decoding="async" fetchpriority="auto" width="1200" height="630" class="cover"><header data-astro-cid-v3cnrnum> <h1 data-astro-cid-v3cnrnum>Pytest API Automation Testing Tutorial Advance Usage Common Assertions and Data Driven</h1> <time datetime="2023-11-15T10:32:55.000Z" data-astro-cid-v3cnrnum> 11/15/2023 </time> <div class="tags" data-astro-cid-v3cnrnum> <span class="tag" data-astro-cid-v3cnrnum>Pytest</span><span class="tag" data-astro-cid-v3cnrnum>API Testing</span><span class="tag" data-astro-cid-v3cnrnum>Data Driven</span> </div> </header> <h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="common-assertions">Common Assertions</h3>
<p>Using Pytest During the writing of API automation test cases, we need to use various assertions to verify the expected results of the tests.</p>
<p>Pytest provides more assertions and a flexible library of assertions to fulfill various testing needs.</p>
<p>The following are some of the commonly used Pytest API automation test assertions:</p>
<ul>
<li>
<p><strong>Equality assertion</strong>: checks whether two values are equal.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> actual_value </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> expected_value</span></span></code></pre>
</li>
<li>
<p><strong>Unequality Assertion</strong>: checks if two values are not equal.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> actual_value </span><span style="color:#F97583">!=</span><span style="color:#E1E4E8"> expected_value</span></span></code></pre>
</li>
<li>
<p><strong>Containment assertion</strong>: checks whether a value is contained in another value, usually used to check whether a string contains a substring.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> substring </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> full_string</span></span></code></pre>
</li>
<li>
<p><strong>Membership Assertion</strong>: checks whether a value is in a collection, list, or other iterable object.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> item </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> iterable</span></span></code></pre>
</li>
<li>
<p><strong>Truth Assertion</strong>: checks whether an expression or variable is true.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> expression</span></span></code></pre>
<p>OR</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> variable</span></span></code></pre>
</li>
<li>
<p><strong>False Value Assertion</strong>: checks whether an expression or variable is false.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#F97583"> not</span><span style="color:#E1E4E8"> expression</span></span></code></pre>
<p>OR</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#F97583"> not</span><span style="color:#E1E4E8"> variable</span></span></code></pre>
</li>
<li>
<p><strong>Greater Than, Less Than, Greater Than Equal To, Less Than Equal To Assertion</strong>: checks whether a value is greater than, less than, greater than equal to, or less than equal to another value.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">&gt;</span><span style="color:#E1E4E8"> other_value</span></span>
<span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">&lt;</span><span style="color:#E1E4E8"> other_value</span></span>
<span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">&gt;=</span><span style="color:#E1E4E8"> other_value</span></span>
<span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">&lt;=</span><span style="color:#E1E4E8"> other_value</span></span></code></pre>
</li>
<li>
<p><strong>Type Assertion</strong>: checks that the type of a value is as expected.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#79B8FF"> isinstance</span><span style="color:#E1E4E8">(value, expected_type)</span></span></code></pre>
<p>For example, to check if a value is a string:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#79B8FF"> isinstance</span><span style="color:#E1E4E8">(my_string, </span><span style="color:#79B8FF">str</span><span style="color:#E1E4E8">)</span></span></code></pre>
</li>
<li>
<p><strong>Exception Assertion</strong>: checks to see if a specific type of exception has been raised in a block of code.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">with</span><span style="color:#E1E4E8"> pytest.raises(ExpectedException):</span></span>
<span class="line"><span style="color:#6A737D">    # Block of code that is expected to raise an ExpectedException.</span></span></code></pre>
</li>
<li>
<p><strong>Approximate Equality Assertion</strong>: checks whether two floating-point numbers are equal within some margin of error.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> math.isclose(actual_value, expected_value, </span><span style="color:#FFAB70">rel_tol</span><span style="color:#F97583">=</span><span style="color:#79B8FF">1e-9</span><span style="color:#E1E4E8">)</span></span></code></pre>
</li>
<li>
<p><strong>List Equality Assertion</strong>: checks if two lists are equal.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> actual_list </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> expected_list</span></span></code></pre>
</li>
<li>
<p><strong>Dictionary Equality Assertion</strong>: checks if two dictionaries are equal.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> actual_dict </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> expected_dict</span></span></code></pre>
</li>
<li>
<p><strong>Regular Expression Match Assertion</strong>: checks if a string matches the given regular expression.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> re</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> re.match(pattern, string)</span></span></code></pre>
</li>
<li>
<p><strong>Null Assertion</strong>: checks whether a value is <code>None</code>。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">is</span><span style="color:#79B8FF"> None</span></span></code></pre>
</li>
<li>
<p><strong>Non-null value assertion</strong>: checks if a value is not <code>None</code>。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">is</span><span style="color:#F97583"> not</span><span style="color:#79B8FF"> None</span></span></code></pre>
</li>
<li>
<p><strong>Boolean Assertion</strong>: checks whether a value of <code>True</code> or <code>False</code>。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> boolean_expression</span></span></code></pre>
</li>
<li>
<p><strong>Empty Container Assertion</strong>: checks if a list, collection or dictionary is empty.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#F97583"> not</span><span style="color:#E1E4E8"> container  </span><span style="color:#6A737D"># Check if the container is empty</span></span></code></pre>
</li>
<li>
<p><strong>Contains Subset Assertion</strong>: checks whether a set contains another set as a subset.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> subset </span><span style="color:#F97583">&lt;=</span><span style="color:#E1E4E8"> full_set</span></span></code></pre>
</li>
<li>
<p><strong>String Beginning or End Assertion</strong>: checks whether a string begins or ends with the specified prefix or suffix.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> string.startswith(prefix)</span></span>
<span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> string.endswith(suffix)</span></span></code></pre>
</li>
<li>
<p><strong>Quantity Assertion</strong>: checks the number of elements in a list, collection, or other iterable object.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#79B8FF"> len</span><span style="color:#E1E4E8">(iterable) </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> expected_length</span></span></code></pre>
</li>
<li>
<p><strong>Range Assertion</strong>: checks if a value is within the specified range.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> lower_bound </span><span style="color:#F97583">&lt;=</span><span style="color:#E1E4E8"> value </span><span style="color:#F97583">&lt;=</span><span style="color:#E1E4E8"> upper_bound</span></span></code></pre>
</li>
<li>
<p><strong>Document Existence Assertion</strong>: checking whether a document exists or not。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">assert</span><span style="color:#E1E4E8"> os.path.exists(file_path)</span></span></code></pre>
</li>
</ul>
<p>These are some common Pytest assertions, but depending on your specific testing needs, you may want to use other assertions or combine multiple assertions to more fully validate your test results.
Detailed documentation on assertions can be found on the official Pytest website at:<a href="https://docs.pytest.org/en/latest/reference.html#pytest">Pytest - Built-in fixtures, marks, and nodes</a></p>
<h3 id="data-driven">Data-driven</h3>
<p>In the process of API automation testing. The use of data-driven is a regular testing methodology where the input data and expected output data of the test cases are stored in data files, and the testing framework executes multiple tests based on these data files to validate various aspects of the API.</p>
<p>The test data can be easily modified without modifying the test case code.</p>
<p>Data-driven testing helps you cover multiple scenarios efficiently and ensures that the API works properly with a variety of input data.</p>
<p>Refer to the demo:<a href="https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo">https://github.com/Automation-Test-Starter/Pytest-API-Test-Demo</a></p>
<h4 id="create-the-test-configuration-file">Create the test configuration file</h4>
<blockquote>
<p>Configuration file will be stored in json format for example, other formats such as YAML, CSV, etc. are similar, can be referred to.</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">//</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> a</span><span style="color:#9ECBFF"> new</span><span style="color:#9ECBFF"> config</span><span style="color:#9ECBFF"> folder</span></span>
<span class="line"><span style="color:#B392F0">mkdir</span><span style="color:#9ECBFF"> config</span></span>
<span class="line"><span style="color:#B392F0">//</span><span style="color:#9ECBFF"> enter</span><span style="color:#9ECBFF"> the</span><span style="color:#9ECBFF"> config</span><span style="color:#9ECBFF"> folder</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> config</span></span>
<span class="line"><span style="color:#B392F0">//</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> a</span><span style="color:#9ECBFF"> new</span><span style="color:#9ECBFF"> configuration</span><span style="color:#9ECBFF"> file</span></span>
<span class="line"><span style="color:#B392F0">touch</span><span style="color:#9ECBFF"> config.json</span></span></code></pre>
<h4 id="writing-test-configuration-files">Writing Test Configuration Files</h4>
<p>The configuration file stores the configuration information of the test environment, such as the URL of the test environment, database connection information, and so on.</p>
<p>The contents of the test configuration file in the demo are as follows:</p>
<ul>
<li>Configure host information</li>
<li>Configure the getAPI API information.</li>
<li>Configure the postAPI API information.</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">  &quot;host&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;https://jsonplaceholder.typicode.com&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">  &quot;getAPI&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;/posts/1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">  &quot;postAPI&quot;</span><span style="color:#E1E4E8">:</span><span style="color:#9ECBFF">&quot;/posts&quot;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h4 id="create-the-test-data-file">Create the test data file</h4>
<p>The request data file and the response data file store the request data and the expected response data of the test case, respectively.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">//</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> a</span><span style="color:#9ECBFF"> new</span><span style="color:#9ECBFF"> data</span><span style="color:#9ECBFF"> folder</span></span>
<span class="line"><span style="color:#B392F0">mkdir</span><span style="color:#9ECBFF"> data</span></span>
<span class="line"><span style="color:#B392F0">//</span><span style="color:#9ECBFF"> enter</span><span style="color:#9ECBFF"> the</span><span style="color:#9ECBFF"> data</span><span style="color:#9ECBFF"> folder</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> data</span></span>
<span class="line"><span style="color:#B392F0">//</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> a</span><span style="color:#9ECBFF"> new</span><span style="color:#9ECBFF"> request</span><span style="color:#9ECBFF"> data</span><span style="color:#9ECBFF"> file</span></span>
<span class="line"><span style="color:#B392F0">touch</span><span style="color:#9ECBFF"> request_data.json</span></span>
<span class="line"><span style="color:#B392F0">//</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> a</span><span style="color:#9ECBFF"> new</span><span style="color:#9ECBFF"> response</span><span style="color:#9ECBFF"> data</span><span style="color:#9ECBFF"> file</span></span>
<span class="line"><span style="color:#B392F0">touch</span><span style="color:#9ECBFF"> response_data.json</span></span></code></pre>
<h4 id="writing-test-data-files">Writing test data files</h4>
<ul>
<li>Writing the request data file</li>
</ul>
<blockquote>
<p>The request data file is configured with the request data for the getAPI API and the request data for the postAPI API.</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">  &quot;getAPI&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">  &quot;postAPI&quot;</span><span style="color:#E1E4E8">:{</span></span>
<span class="line"><span style="color:#79B8FF">    &quot;title&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;foo&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    &quot;body&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;bar&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    &quot;userId&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<ul>
<li>Writing the response data file</li>
</ul>
<blockquote>
<p>The request data file is configured with the response data for the getAPI API and the response data for the postAPI API.</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">    &quot;getAPI&quot;</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;userId&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;id&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;title&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;body&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;quia et suscipit</span><span style="color:#79B8FF">\n</span><span style="color:#9ECBFF">suscipit recusandae consequuntur expedita et cum</span><span style="color:#79B8FF">\n</span><span style="color:#9ECBFF">reprehenderit molestiae ut ut quas totam</span><span style="color:#79B8FF">\n</span><span style="color:#9ECBFF">nostrum rerum est autem sunt rem eveniet architecto&quot;</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    &quot;postAPI&quot;</span><span style="color:#E1E4E8">:{</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;title&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;foo&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;body&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">&quot;bar&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;userId&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      &quot;id&quot;</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">101</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h4 id="updating-test-cases-to-support-data-driving">Updating test cases to support data driving</h4>
<blockquote>
<p>To differentiate, here is a new test case file named test_demo_data_driving.py</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> requests</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># get the test configuration information from the configuration file</span></span>
<span class="line"><span style="color:#F97583">with</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;config/config.json&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;r&quot;</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> json_file:</span></span>
<span class="line"><span style="color:#E1E4E8">    config </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> json.load(json_file)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># get the request data from the test data file</span></span>
<span class="line"><span style="color:#F97583">with</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;data/request_data.json&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;r&#39;</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> json_file:</span></span>
<span class="line"><span style="color:#E1E4E8">    request_data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> json.load(json_file)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># get the response data from the test data file</span></span>
<span class="line"><span style="color:#F97583">with</span><span style="color:#79B8FF"> open</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&#39;data/response_data.json&#39;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&#39;r&#39;</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> json_file:</span></span>
<span class="line"><span style="color:#E1E4E8">    response_data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> json.load(json_file)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> TestPytestDemo</span><span style="color:#E1E4E8">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> test_get_demo</span><span style="color:#E1E4E8">(self):</span></span>
<span class="line"><span style="color:#E1E4E8">        host </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> config.get(</span><span style="color:#9ECBFF">&quot;host&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        get_api </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> config.get(</span><span style="color:#9ECBFF">&quot;getAPI&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        get_api_response_data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> response_data.get(</span><span style="color:#9ECBFF">&quot;getAPI&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6A737D">        # send request</span></span>
<span class="line"><span style="color:#E1E4E8">        response </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> requests.get(host</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">get_api)</span></span>
<span class="line"><span style="color:#6A737D">        # assert</span></span>
<span class="line"><span style="color:#F97583">        assert</span><span style="color:#E1E4E8"> response.status_code </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 200</span></span>
<span class="line"><span style="color:#F97583">        assert</span><span style="color:#E1E4E8"> response.json() </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> get_api_response_data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> test_post_demo</span><span style="color:#E1E4E8">(self):</span></span>
<span class="line"><span style="color:#E1E4E8">        host </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> config.get(</span><span style="color:#9ECBFF">&quot;host&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        post_api </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> config.get(</span><span style="color:#9ECBFF">&quot;postAPI&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        post_api_request_data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> request_data.get(</span><span style="color:#9ECBFF">&quot;postAPI&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        post_api_response_data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> response_data.get(</span><span style="color:#9ECBFF">&quot;postAPI&quot;</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6A737D">        # send request</span></span>
<span class="line"><span style="color:#E1E4E8">        response </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> requests.post(host </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> post_api, post_api_request_data)</span></span>
<span class="line"><span style="color:#6A737D">        # assert</span></span>
<span class="line"><span style="color:#F97583">        assert</span><span style="color:#E1E4E8"> response.status_code </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 201</span></span>
<span class="line"><span style="color:#F97583">        assert</span><span style="color:#E1E4E8"> response.json() </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> post_api_response_data</span></span></code></pre>
<h4 id="run-the-test-case-to-confirm-the-data-driver-is-working">Run the test case to confirm the data driver is working</h4>
<blockquote>
<p>If you run the data driver support test case with demo project: test_demo_data_driving.py, it is recommended to block other test cases first, otherwise it may report errors.</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#B392F0">  pytest</span><span style="color:#9ECBFF"> tests/test_demo_data_driving.py</span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/naodeng/blogimg@master/uPic/XQIPLf.png" alt="XQIPLf"/></p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://docs.pytest.org/en/6.2.x/">Pytest docs</a></li>
</ul>  </article>  </main> <footer class="l-footer l-content" data-astro-cid-sz7xmlte> <a href="https://github.com/naodeng/naodeng.com.cn" target="_blank" class="github" data-astro-cid-sz7xmlte>
GitHub
<span class="material-icons-sharp dir" data-astro-cid-sz7xmlte>open_in_new</span> </a> <ul data-astro-cid-sz7xmlte> <li><a href="/en/" onclick="localStorage.selectedLang = &#34;en&#34;" lang="en">English</a></li><li><a href="/zh-cn/" onclick="localStorage.selectedLang = &#34;zh-cn&#34;" lang="zh-cn">简体中文</a></li> </ul> <a class="copy" href="https://naodeng.com.cn/" target="_blank" dir="ltr" data-astro-cid-sz7xmlte>
© Nao Deng 2026 </a> </footer>   </body> </html>  